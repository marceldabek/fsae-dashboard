import{r as n,j as t}from"./index-CMjZw2V-.js";function L(g){const{people:o,mode:i="single",selectedId:a=null,selectedIds:r=[],onSelect:p,onAdd:w,onRemove:v,triggerLabel:d,triggerContent:b,buttonClassName:y="px-3 py-2 rounded bg-white/10 border border-white/20 text-sm hover:bg-white/15 transition",disabled:u=!1,maxItems:c=8,allowUnassign:j=!0,allowScroll:k=!1}=g,[x,l]=n.useState(!1),[m,N]=n.useState(""),h=n.useRef(null);n.useEffect(()=>{function e(s){s.key==="Escape"&&l(!1)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),n.useEffect(()=>{if(!x)return;function e(s){h.current&&!h.current.contains(s.target)&&l(!1)}return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[x]);const f=n.useMemo(()=>{const e=m.toLowerCase();return o.filter(s=>!e||s.name.toLowerCase().includes(e)||(s.skills||[]).join(" ").toLowerCase().includes(e))},[o,m]),C=n.useMemo(()=>new Set(r),[r]),S=(()=>{if(d)return d;if(i==="single"){if(a){const e=o.find(s=>s.id===a);return e?e.name:"Assign to…"}return"Assign to…"}if(r.length===0)return"Add/Remove";if(r.length===1){const e=o.find(s=>s.id===r[0]);return e?e.name:"1 selected"}return`${r.length} selected`})();return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",disabled:u,onClick:()=>!u&&l(e=>!e),className:`${y} ${u?"opacity-50 cursor-not-allowed":""}`,"aria-label":typeof b<"u"?d||"Open selector":void 0,children:b??S}),x&&t.jsxs("div",{className:"fixed inset-0 z-40 flex items-start justify-center pt-24 px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),t.jsxs("div",{ref:h,className:"relative z-10 w-full max-w-md rounded-lg border border-white/15 bg-black/80 p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{autoFocus:!0,value:m,onChange:e=>N(e.target.value),placeholder:"Search people…",className:"w-full px-2 py-1.5 rounded bg-white/10 text-sm focus:outline-none"}),t.jsx("button",{onClick:()=>l(!1),className:"text-[11px] px-2 py-1 rounded bg-white/10 border border-white/20 hover:bg-white/15",children:"Close"})]}),t.jsxs("ul",{className:`space-y-1 text-sm ${k?"max-h-60 overflow-auto":""}`,children:[i==="single"&&j&&t.jsx("li",{children:t.jsx("button",{className:`w-full text-left px-2 py-1 rounded hover:bg-white/5 text-[13px] ${a?"":"bg-white/10"}`,onClick:()=>{p?.(null),l(!1)},children:"Unassigned"})}),f.slice(0,c).map(e=>{const s=i==="single"?e.id===a:C.has(e.id);return t.jsxs("li",{className:"flex items-center gap-2 justify-between px-2 py-1 rounded hover:bg-white/5",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"truncate text-sm font-medium",children:e.name}),e.skills&&e.skills.length>0&&t.jsx("div",{className:"text-xs text-muted truncate uppercase tracking-caps",children:e.skills.join(", ")})]}),i==="multi"?t.jsx("button",{onClick:()=>s?v?.(e.id):w?.(e.id),className:`px-2 py-1 rounded text-tick border ${s?"bg-accent/20 border-accent/40 text-accent":"bg-overlay-6 border-overlay-10 hover:bg-overlay-10/60"}`,children:s?"Remove":"Add"}):t.jsx("button",{onClick:()=>{p?.(e.id),l(!1)},className:`px-2 py-1 rounded text-tick border ${s?"bg-accent/30 border-accent/50 text-accent":"bg-overlay-6 border-overlay-10 hover:bg-overlay-10/60"}`,children:s?"Selected":"Select"})]},e.id)}),f.slice(0,c).length===0&&t.jsx("li",{className:"text-xs text-muted px-2 py-1 uppercase tracking-caps",children:"No people"}),f.length>c&&t.jsxs("li",{className:"text-tick text-muted px-2 py-1",children:["Showing first ",c," results… refine search"]})]})]})]})]})}export{L as P};
