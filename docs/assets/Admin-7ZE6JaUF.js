const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B7LHv9gh.js","assets/index-BWiJueAe.css"])))=>i.map(i=>d[i]);
import{c as ps,A as hs,r,_ as C,f as I,a as W,e as Ye,j as e,m as xs,n as js,o as Ge,p as qe,i as We,b as bs,q as gs,s as vs,t as fs,v as ws}from"./index-B7LHv9gh.js";function Ns(){const B=ps(),Je=(B==null?void 0:B.uid)===hs,[E,h]=r.useState([]),[y,j]=r.useState([]),[N,J]=r.useState(null),[l,P]=r.useState(null),[X,O]=r.useState(""),[H,z]=r.useState(""),[K,Q]=r.useState(""),[Z,ee]=r.useState("Senior"),[se,te]=r.useState(""),[ae,ne]=r.useState(""),[oe,re]=r.useState(""),[F,ie]=r.useState(""),[le,ce]=r.useState([]),[de,me]=r.useState(""),[ue,pe]=r.useState(""),[he,xe]=r.useState(""),[je,be]=r.useState(""),[U,Xe]=r.useState(""),[V,ge]=r.useState(""),[ve,fe]=r.useState(""),[we,ye]=r.useState("In Progress"),[Ne,Se]=r.useState(""),[ke,Ce]=r.useState(""),[Pe,He]=r.useState(""),[$,Ke]=r.useState(""),[_,_e]=r.useState([]),[S,Qe]=r.useState("subsystem"),[Y,Ze]=r.useState("asc"),[Ae,T]=r.useState(!1),[Re,A]=r.useState(!1),[u,L]=r.useState("people"),[es,M]=r.useState(!1),[G,De]=r.useState(""),[Ee,ss]=r.useState(!1),[Te,Le]=r.useState(!1),[b,q]=r.useState(null),[ts,Me]=r.useState(!1),[Ie,k]=r.useState("");r.useEffect(()=>{(async()=>{const{fetchRankedSettings:s}=await C(async()=>{const{fetchRankedSettings:i}=await import("./index-B7LHv9gh.js").then(m=>m.z);return{fetchRankedSettings:i}},__vite__mapDeps([0,1])),[a,n,t,o]=await Promise.all([I(),W(),Ye(),s()]);h(a),j(n),J(t),P(o),O((t==null?void 0:t.rulebook_url)||""),z((t==null?void 0:t.sharepoint_url)||"")})()},[]),r.useEffect(()=>{O((N==null?void 0:N.rulebook_url)||""),z((N==null?void 0:N.sharepoint_url)||"")},[N]);const as=s=>ce(a=>a.includes(s)?a.filter(n=>n!==s):[...a,s]),[Be,Oe]=r.useState("");function d(s){Oe(s),setTimeout(()=>Oe(""),3e3)}async function ns(){try{await fs({rulebook_url:X.trim()||void 0,sharepoint_url:H.trim()||void 0}),J(await Ye()),d("Settings saved")}catch(s){console.error(s),d("Save failed")}}async function os(){try{await ws(),h([]),j([]),d("System reset complete")}catch(s){console.error(s),d("Reset failed")}}async function rs(){try{const s=await Ge({name:K.trim(),year:Z,role:ae.trim()||void 0,skills:se.split(",").map(a=>a.trim()).filter(Boolean),discord:oe.trim()||void 0});h(await I()),Q(""),ee("Senior"),ne(""),te(""),re(""),d("Person saved")}catch(s){console.error(s),d("Save failed")}}async function is(){if(!F.trim())return alert("Give the project a name");try{const s=await qe({name:F.trim(),owner_ids:le,design_link:de.trim()||void 0,description:ue.trim()||void 0,due_date:he||void 0,subsystem:je||void 0});j(await W()),ie(""),ce([]),me(""),pe(""),xe(""),be(""),d("Project saved")}catch(s){console.error(s),d("Save failed")}}async function ls(){if(!V)return alert("Choose a project");try{const s=await We({project_id:V,description:ve.trim(),status:we,assignee_id:Ne||void 0,ranked_points:ke||void 0});ge(""),fe(""),ye("In Progress"),Se(""),Ce(""),d("Task saved")}catch(s){console.error(s),d("Save failed")}}const ze=r.useMemo(()=>{const s=new Set;for(const a of y)a.subsystem&&s.add(a.subsystem);return Array.from(s).sort()},[y]),cs=r.useMemo(()=>{const s=new Map;for(const a of y)a.subsystem&&s.set(a.subsystem,(s.get(a.subsystem)||0)+1);return s},[y]),Fe=_.length?y.filter(s=>s.subsystem&&_.includes(s.subsystem)):y,ds=r.useMemo(()=>{const s=$.toLowerCase();return[...Fe.filter(t=>s?t.name.toLowerCase().includes(s)||(t.description||"").toLowerCase().includes(s):!0)].sort((t,o)=>{let i=0;return S==="name"?i=t.name.localeCompare(o.name):S==="due"?i=(t.due_date||"").localeCompare(o.due_date||""):i=(t.subsystem||"").localeCompare(o.subsystem||"")||t.name.localeCompare(o.name),Y==="asc"?i:-i})},[Fe,$,S,Y]),Ue=s=>s==="name"?"Name":s==="due"?"Due date":"Subsystem",Ve=Y==="asc"?"↑":"↓";return r.useEffect(()=>{const s=a=>{a.key==="Escape"&&(T(!1),A(!1))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[]),Je?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-1",children:"Admin"}),Be&&e.jsx("div",{className:"fixed bottom-4 right-4 z-50 px-4 py-2 rounded bg-brand-teal text-black shadow-lg text-sm font-medium animate-fade-in",children:Be}),e.jsx("div",{className:"sticky top-0 z-30 -mx-4 px-4 bg-transparent backdrop-blur-none border-b border-uconn-border/60",children:e.jsxs("nav",{className:"flex gap-3 h-11 items-end",role:"tablist",children:[e.jsx("button",{role:"tab","aria-selected":u==="people",onClick:()=>L("people"),className:`px-3 pb-2 pt-2 border-b-2 ${u==="people"?"border-brand-teal text-white":"border-transparent text-uconn-muted hover:text-white"}`,children:"People"}),e.jsx("button",{role:"tab","aria-selected":u==="projects",onClick:()=>L("projects"),className:`px-3 pb-2 pt-2 border-b-2 ${u==="projects"?"border-brand-teal text-white":"border-transparent text-uconn-muted hover:text-white"}`,children:"Projects & Tasks"}),e.jsx("button",{role:"tab","aria-selected":u==="settings",onClick:()=>L("settings"),className:`px-3 pb-2 pt-2 border-b-2 ${u==="settings"?"border-brand-teal text-white":"border-transparent text-uconn-muted hover:text-white"}`,children:"Global Settings"}),e.jsx("button",{role:"tab","aria-selected":u==="ranked",onClick:()=>L("ranked"),className:`px-3 pb-2 pt-2 border-b-2 ${u==="ranked"?"border-brand-teal text-white":"border-transparent text-uconn-muted hover:text-white"}`,children:"Ranked Settings"})]})}),u==="people"&&e.jsx("div",{role:"tabpanel",className:"mt-4",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("section",{className:"space-y-2",children:[e.jsx("h2",{className:"font-semibold",children:"Create Person"}),e.jsxs("div",{className:"form-section p-4 space-y-3",children:[e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Name",value:K,onChange:s=>Q(s.target.value)}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{className:"px-3 py-2 rounded dark-select",value:Z,onChange:s=>ee(s.target.value),children:[e.jsx("option",{children:"Freshman"}),e.jsx("option",{children:"Sophomore"}),e.jsx("option",{children:"Junior"}),e.jsx("option",{children:"Senior"}),e.jsx("option",{children:"Graduate"})]}),e.jsx("input",{className:"px-3 py-2 rounded flex-1",placeholder:"Role (optional)",value:ae,onChange:s=>ne(s.target.value)})]}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Skills (comma-separated)",value:se,onChange:s=>te(s.target.value)}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Discord (e.g., username)",value:oe,onChange:s=>re(s.target.value)}),e.jsx("button",{onClick:rs,className:"px-3 py-2 rounded bg-white/10 border border-uconn-border",children:"Save Person"})]})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"font-semibold",children:"People"}),e.jsx("input",{className:"px-3 py-2 rounded text-sm w-56",placeholder:"Search people…",value:Pe,onChange:s=>He(s.target.value)})]}),e.jsx("div",{className:"space-y-4",children:E.filter(s=>{const a=Pe.toLowerCase();return a?s.name.toLowerCase().includes(a)||(s.skills||[]).some(n=>n.toLowerCase().includes(a))||(s.role||"").toLowerCase().includes(a):!0}).sort((s,a)=>s.name.localeCompare(a.name)).map(s=>e.jsxs("details",{className:"rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("summary",{className:"cursor-pointer font-medium px-3 py-2 flex items-center justify-between",children:[e.jsx("span",{className:"truncate",children:s.name}),e.jsx("span",{className:"text-xs text-uconn-muted ml-2 truncate",children:s.role||s.year||""})]}),e.jsxs("div",{className:"px-3 pb-3 mt-1 grid sm:grid-cols-2 gap-4",children:[e.jsx("input",{className:"px-3 py-2 rounded",value:s.name,onChange:a=>h(n=>n.map(t=>t.id===s.id?{...t,name:a.target.value}:t))}),e.jsxs("select",{className:"px-3 py-2 rounded dark-select",value:s.year||"Senior",onChange:a=>h(n=>n.map(t=>t.id===s.id?{...t,year:a.target.value}:t)),children:[e.jsx("option",{children:"Freshman"}),e.jsx("option",{children:"Sophomore"}),e.jsx("option",{children:"Junior"}),e.jsx("option",{children:"Senior"}),e.jsx("option",{children:"Graduate"})]}),e.jsx("input",{className:"px-3 py-2 rounded",placeholder:"Role",value:s.role||"",onChange:a=>h(n=>n.map(t=>t.id===s.id?{...t,role:a.target.value}:t))}),e.jsx("input",{className:"px-3 py-2 rounded",placeholder:"Discord",value:s.discord||"",onChange:a=>h(n=>n.map(t=>t.id===s.id?{...t,discord:a.target.value}:t))}),e.jsx("input",{className:"px-3 py-2 rounded sm:col-span-2",placeholder:"Skills (comma-separated)",value:(s.skills||[]).join(", "),onChange:a=>h(n=>n.map(t=>t.id===s.id?{...t,skills:a.target.value.split(",").map(o=>o.trim()).filter(Boolean)}:t))}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-uconn-muted",children:"Rank"}),e.jsxs("select",{className:"mt-1 px-3 py-2 rounded w-full dark-select",value:s.rank||"Bronze",onChange:a=>h(n=>n.map(t=>t.id===s.id?{...t,rank:a.target.value}:t)),children:[e.jsx("option",{children:"Bronze"}),e.jsx("option",{children:"Silver"}),e.jsx("option",{children:"Gold"}),e.jsx("option",{children:"Platinum"}),e.jsx("option",{children:"Diamond"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-uconn-muted",children:"Ranked pool"}),e.jsxs("label",{className:"mt-1 flex items-center gap-3 select-none",children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:!!s.ranked_opt_in,onChange:a=>h(n=>n.map(t=>t.id===s.id?{...t,ranked_opt_in:a.target.checked}:t))}),e.jsx("span",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-white/15 transition-colors peer-checked:bg-brand-teal/70",children:e.jsx("span",{className:"absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform duration-200 peer-checked:translate-x-5"})}),e.jsx("span",{className:"text-xs text-white/90",children:"Opted in"})]})]})]}),e.jsx("button",{className:"px-3 py-2 rounded bg-white/10 border border-uconn-border sm:col-span-2",onClick:async()=>{await xs(s.id,s),d("Person updated")},children:"Save Changes"})]})]},s.id))})]})]})}),u==="projects"&&e.jsxs("div",{role:"tabpanel",className:"mt-4 space-y-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("section",{className:"space-y-2",children:[e.jsx("h2",{className:"font-semibold",children:"Create Project & Assign Owners"}),e.jsxs("div",{className:"form-section p-4 space-y-3",children:[e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Project name",value:F,onChange:s=>ie(s.target.value)}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Design link (optional)",value:de,onChange:s=>me(s.target.value)}),e.jsx("textarea",{className:"px-3 py-2 rounded w-full",placeholder:"Project description (optional)",value:ue,onChange:s=>pe(s.target.value)}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{className:"px-3 py-2 rounded w-full dark-select",value:je,onChange:s=>be(s.target.value),children:[e.jsx("option",{value:"",children:"Select subsystem…"}),e.jsx("option",{children:"Aero"}),e.jsx("option",{children:"Business"}),e.jsx("option",{children:"Composites"}),e.jsx("option",{children:"Controls"}),e.jsx("option",{children:"Data Acquisition"}),e.jsx("option",{children:"Electrical IC"}),e.jsx("option",{children:"Electrical EV"}),e.jsx("option",{children:"Finance"}),e.jsx("option",{children:"Frame"}),e.jsx("option",{children:"Manufacturing"}),e.jsx("option",{children:"Powertrain EV"}),e.jsx("option",{children:"Powertrain IC"}),e.jsx("option",{children:"Suspension"})]}),e.jsx("input",{type:"date",className:"px-3 py-2 rounded w-full",value:he,onChange:s=>xe(s.target.value)})]}),e.jsx("div",{className:"text-sm text-uconn-muted",children:"Owners"}),e.jsx("input",{className:"px-3 py-2 rounded w-full mb-1",placeholder:"Search people…",value:U,onChange:s=>Xe(s.target.value)}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-2 max-h-48 overflow-auto border border-uconn-border rounded p-2",children:E.filter(s=>{if(!U.trim())return!0;const a=U.toLowerCase();return s.name.toLowerCase().includes(a)||(s.skills||[]).some(n=>n.toLowerCase().includes(a))}).map(s=>{var n;const a=le.includes(s.id);return e.jsxs("button",{onClick:()=>as(s.id),className:"text-left px-2 py-1 rounded border "+(a?"bg-white/20":""),children:[e.jsx("div",{className:"font-medium text-sm",children:s.name}),e.jsx("div",{className:"text-xs text-uconn-muted",children:(n=s.skills)==null?void 0:n.join(", ")})]},s.id)})}),e.jsx("button",{onClick:is,className:"px-3 py-2 rounded bg-white/10 border border-uconn-border",children:"Save Project"})]})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsx("h2",{className:"font-semibold",children:"Create Task"}),e.jsxs("div",{className:"form-section p-4 space-y-3",children:[e.jsxs("select",{className:"px-3 py-2 rounded w-full dark-select",value:V,onChange:s=>ge(s.target.value),children:[e.jsx("option",{value:"",children:"Select project…"}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Task description",value:ve,onChange:s=>fe(s.target.value)}),e.jsxs("select",{className:"px-3 py-2 rounded w-full dark-select",value:Ne,onChange:s=>Se(s.target.value),children:[e.jsx("option",{value:"",children:"Assign to…"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch gap-3",children:[e.jsxs("select",{className:"px-3 py-2 rounded dark-select h-11 sm:w-auto sm:min-w-[160px]",value:we,onChange:s=>ye(s.target.value),children:[e.jsx("option",{children:"Todo"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"Complete"})]}),e.jsxs("select",{className:"px-3 py-2 rounded dark-select h-11 sm:w-auto sm:min-w-[200px]",value:ke,onChange:s=>Ce(s.target.value?Number(s.target.value):""),children:[e.jsx("option",{value:"",children:"Points (optional)"}),e.jsx("option",{value:"5",children:"5 points ~ 30 mins"}),e.jsx("option",{value:"10",children:"10 points ~ 1 hour"}),e.jsx("option",{value:"25",children:"25 points ~ 2 hours"}),e.jsx("option",{value:"50",children:"50 points ~ 3 hours"}),e.jsx("option",{value:"100",children:"100 points ~ 6 hours"}),e.jsx("option",{value:"100",children:"100 points ~ special task"})]}),e.jsx("button",{onClick:ls,className:"px-4 rounded bg-white/10 border border-uconn-border h-11 whitespace-nowrap sm:max-w-full",children:"Save Task"})]})]})]})]}),e.jsxs("section",{className:"mt-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2 relative",children:[e.jsx("h2",{className:"font-semibold mr-auto",children:"Projects"}),e.jsx("input",{className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 w-56 placeholder:text-uconn-muted focus:outline-none focus-visible:outline-none",placeholder:"Search projects…",value:$,onChange:s=>Ke(s.target.value)}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{T(s=>!s),A(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 hover:bg-white/10",children:["Subsystems: ",e.jsx("span",{className:"font-semibold",children:_.length?`${_.length} selected`:"All"})]}),e.jsxs("div",{className:`absolute right-0 z-20 mt-1 w-64 rounded-md border border-white/10 bg-uconn-blue/95 shadow-xl overflow-hidden transition transform origin-top ${Ae?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:e.jsx("button",{className:"w-full px-3 py-2 rounded-md text-xs sm:text-sm font-semibold bg-red-500/15 hover:bg-red-500/25 text-red-200 focus:outline-none focus-visible:outline-none",onClick:()=>_e([]),children:"Clear selection"})}),e.jsxs("div",{className:"max-h-60 overflow-auto p-1",children:[ze.length===0&&e.jsx("div",{className:"px-3 py-2 text-xs text-uconn-muted",children:"No subsystems"}),ze.map(s=>{const a=_.includes(s),n=cs.get(s)??0;return e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-xs rounded hover:bg-white/10 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"accent-brand-teal",checked:a,onChange:()=>_e(t=>a?t.filter(o=>o!==s):[...t,s])}),e.jsx("span",{className:"truncate",children:s}),e.jsx("span",{className:"ml-auto inline-flex items-center justify-center rounded-full bg-white/10 px-2 py-0.5 text-[10px]",children:n})]},s)})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{A(s=>!s),T(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 hover:bg-white/10",children:["Sort: ",e.jsxs("span",{className:"font-semibold",children:[Ue(S)," ",Ve]})]}),e.jsx("div",{className:`absolute right-0 z-20 mt-1 w-48 rounded-md border border-white/10 bg-uconn-blue/95 shadow-xl overflow-hidden transition transform origin-top ${Re?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:["subsystem","name","due"].map(s=>e.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs hover:bg-white/10 ${S===s?"bg-white/10":""}`,onClick:()=>{S===s?Ze(a=>a==="asc"?"desc":"asc"):Qe(s),A(!1)},children:[Ue(s)," ",S===s?Ve:""]},s))})]}),(Ae||Re)&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{T(!1),A(!1)}})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:ds.map(s=>e.jsxs("details",{className:"form-section p-3",children:[e.jsx("summary",{className:"cursor-pointer font-medium",children:s.name}),e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsx("input",{className:"px-3 py-2 rounded w-full",value:s.name,onChange:a=>j(n=>n.map(t=>t.id===s.id?{...t,name:a.target.value}:t))}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Design link",value:s.design_link||"",onChange:a=>j(n=>n.map(t=>t.id===s.id?{...t,design_link:a.target.value}:t))}),e.jsx("textarea",{className:"px-3 py-2 rounded w-full",placeholder:"Description",value:s.description||"",onChange:a=>j(n=>n.map(t=>t.id===s.id?{...t,description:a.target.value}:t))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("select",{className:"px-3 py-2 rounded w-full dark-select",value:s.subsystem||"",onChange:a=>j(n=>n.map(t=>t.id===s.id?{...t,subsystem:a.target.value||void 0}:t)),children:[e.jsx("option",{value:"",children:"Subsystem…"}),e.jsx("option",{children:"Aero"}),e.jsx("option",{children:"Business"}),e.jsx("option",{children:"Composites"}),e.jsx("option",{children:"Controls"}),e.jsx("option",{children:"Data Acquisition"}),e.jsx("option",{children:"Electrical IC"}),e.jsx("option",{children:"Electrical EV"}),e.jsx("option",{children:"Finance"}),e.jsx("option",{children:"Frame"}),e.jsx("option",{children:"Manufacturing"}),e.jsx("option",{children:"Powertrain EV"}),e.jsx("option",{children:"Powertrain IC"}),e.jsx("option",{children:"Suspension"})]}),e.jsx("input",{type:"date",className:"px-3 py-2 rounded w-full",value:s.due_date||"",onChange:a=>j(n=>n.map(t=>t.id===s.id?{...t,due_date:a.target.value}:t))})]}),e.jsx("button",{className:"px-3 py-2 rounded bg-white/10 border border-uconn-border w-full",onClick:async()=>{await js(s.id,s),d("Project updated")},children:"Save Changes"})]})]},s.id))})]})]}),u==="settings"&&e.jsxs("div",{role:"tabpanel",className:"mt-4",children:[e.jsxs("section",{className:"space-y-2",children:[e.jsx("h2",{className:"font-semibold",children:"Global Settings"}),e.jsxs("div",{className:"form-section wide p-4 space-y-2",children:[e.jsx("label",{className:"text-sm block",children:"Rulebook PDF URL"}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"https://…/rulebook.pdf",value:X,onChange:s=>O(s.target.value)}),e.jsx("label",{className:"text-sm block",children:"Team SharePoint URL"}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"https://…sharepoint.com/sites/FSAE/…",value:H,onChange:s=>z(s.target.value)}),e.jsx("button",{onClick:ns,className:"mt-2 px-3 py-2 rounded bg-white/10 border border-uconn-border",children:"Save Settings"})]}),e.jsxs("div",{className:"form-section wide p-4 mt-4 border border-red-500/30 bg-red-500/10 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-red-200",children:"Danger zone"}),e.jsx("p",{className:"text-sm text-red-200/80",children:"This will permanently delete ALL people, projects, and tasks. This action cannot be undone."}),e.jsxs("button",{onClick:()=>{De(""),M(!0)},className:"mt-3 inline-flex items-center gap-2 px-3 py-2 rounded border border-red-500/50 bg-red-600/20 hover:bg-red-600/30 text-red-100",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Full system reset"]})]})]}),e.jsxs("section",{className:"space-y-2 mt-6",children:[e.jsx("h2",{className:"font-semibold",children:"Seed data (Excel)"}),e.jsxs("div",{className:"form-section wide p-4 space-y-3",children:[e.jsxs("p",{className:"text-sm text-uconn-muted",children:['Provide an Excel file with sheets named "People", "Projects", and "Tasks". Columns:',e.jsx("br",{}),"People: Name, Year, Role, Skills, Discord",e.jsx("br",{}),"Projects: Name, Subsystem, Due Date (YYYY-MM-DD), Description, Design Link, Owners (comma-separated names)",e.jsx("br",{}),"Tasks: Project, Description, Status (Todo|In Progress|Complete), Assignee (name)"]}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:async s=>{var n;const a=(n=s.target.files)==null?void 0:n[0];if(a){q(null),k("");try{const t=await a.arrayBuffer(),o=await C(()=>import("./xlsx-D_0l8YDs.js"),[]),i=o.read(t,{type:"array"}),m=i.Sheets.People,p=i.Sheets.Projects,x=i.Sheets.Tasks,R=m?o.utils.sheet_to_json(m):[],ms=p?o.utils.sheet_to_json(p):[],us=x?o.utils.sheet_to_json(x):[];q({people:R.map(c=>{var g,v,f,w,D;return{name:((g=c.Name)==null?void 0:g.toString())||"",year:(v=c.Year)==null?void 0:v.toString(),role:(f=c.Role)==null?void 0:f.toString(),skills:(w=c.Skills)==null?void 0:w.toString(),discord:(D=c.Discord)==null?void 0:D.toString()}}),projects:ms.map(c=>{var g,v,f,w,D,$e;return{name:((g=c.Name)==null?void 0:g.toString())||"",subsystem:(v=c.Subsystem)==null?void 0:v.toString(),due_date:(f=c["Due Date"])==null?void 0:f.toString(),description:(w=c.Description)==null?void 0:w.toString(),design_link:(D=c["Design Link"])==null?void 0:D.toString(),owners:($e=c.Owners)==null?void 0:$e.toString()}}),tasks:us.map(c=>{var g,v,f,w;return{project:((g=c.Project)==null?void 0:g.toString())||"",description:((v=c.Description)==null?void 0:v.toString())||"",status:((f=c.Status)==null?void 0:f.toString())||"Todo",assignee:(w=c.Assignee)==null?void 0:w.toString()}})})}catch(t){console.error(t),k("Failed to read file")}}}}),b&&e.jsxs("div",{className:"text-sm",children:["Preview: ",b.people.length," people, ",b.projects.length," projects, ",b.tasks.length," tasks",e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{disabled:ts,className:"px-3 py-2 rounded border border-uconn-border bg-white/10 disabled:opacity-50",onClick:async()=>{var s,a;if(b){Me(!0),k("Importing…");try{const n=new Map;for(const o of E)n.set(o.name.trim(),o.id);for(const o of b.people){const i=(s=o.name)==null?void 0:s.trim();if(i&&!n.has(i)){const m=await Ge({name:i,year:o.year||void 0,role:o.role||void 0,skills:(o.skills||"").split(",").map(p=>p.trim()).filter(Boolean),discord:o.discord||void 0});n.set(i,m)}}const t=new Map;for(const o of b.projects){const i=(a=o.name)==null?void 0:a.trim();if(i&&!t.has(i)){const m=(o.owners||"").split(",").map(x=>x.trim()).filter(Boolean).map(x=>n.get(x)).filter(Boolean),p=await qe({name:i,subsystem:o.subsystem||void 0,due_date:o.due_date||void 0,description:o.description||void 0,design_link:o.design_link||void 0,owner_ids:m});t.set(i,p)}}for(const o of b.tasks){const i=t.get((o.project||"").trim());if(!i)continue;const m=o.assignee?n.get(o.assignee.trim()):void 0,p=o.status==="Todo"||o.status==="In Progress"||o.status==="Complete"?o.status:"Todo";await We({project_id:i,description:o.description||"",status:p,assignee_id:m})}h(await I()),j(await W()),k("Import complete")}catch(n){console.error(n),k("Import failed")}finally{Me(!1)}}},children:"Import"}),e.jsx("button",{className:"px-3 py-2 rounded border border-uconn-border bg-white/10",onClick:()=>{q(null),k("")},children:"Clear"})]}),Ie&&e.jsx("div",{className:"mt-2 text-xs text-uconn-muted",children:Ie})]})]})]}),es&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>M(!1)}),e.jsxs("div",{className:"relative w-[95vw] max-w-md rounded-xl border border-white/15 bg-uconn-blue/95 shadow-2xl p-5",children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Confirm full system reset"}),e.jsx("p",{className:"text-sm text-uconn-muted",children:"Enter the reset password to proceed. Contact the team lead if you don’t know it."}),e.jsxs("div",{className:"mt-3 relative",children:[e.jsx("input",{autoFocus:!0,type:Ee?"text":"password",className:"w-full px-3 py-2 pr-10 rounded border border-white/10 bg-black/20",placeholder:"Reset password",value:G,onChange:s=>De(s.target.value)}),e.jsx("button",{"aria-label":"Toggle password visibility",onClick:()=>ss(s=>!s),className:"absolute right-1 top-1.5 h-7 w-7 inline-flex items-center justify-center rounded hover:bg-white/10",children:Ee?e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12c.6-1.36 1.5-2.59 2.57-3.61M10.58 5.06A10.94 10.94 0 0 1 12 4c5 0 9.27 3.89 11 8-."})}):e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>M(!1),className:"px-3 py-2 rounded border border-uconn-border bg-white/10",children:"Cancel"}),e.jsx("button",{onClick:async()=>{await os(),M(!1)},disabled:G!=="UCONN FORMULA SAE",className:`px-3 py-2 rounded border ${G==="UCONN FORMULA SAE"?"border-red-500 bg-red-600/30 hover:bg-red-600/40 text-red-100":"border-white/10 bg-white/5 text-uconn-muted cursor-not-allowed"}`,children:"Permanently delete everything"})]})]})]})]}),u==="ranked"&&e.jsx("div",{role:"tabpanel",className:"mt-4",children:e.jsxs("section",{className:"space-y-2",children:[e.jsx("h2",{className:"font-semibold",children:"Ranked Settings"}),e.jsxs("div",{className:"form-section wide p-5 space-y-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",className:"accent-brand-teal",checked:!!(l!=null&&l.enabled),onChange:async s=>{const a=s.target.checked;P(t=>t?{...t,enabled:a}:{enabled:a});const{setRankedSettings:n}=await C(async()=>{const{setRankedSettings:t}=await import("./index-B7LHv9gh.js").then(o=>o.z);return{setRankedSettings:t}},__vite__mapDeps([0,1]));await n({enabled:a})}}),"Enable ranked mode"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",className:"accent-brand-teal",checked:!!(l!=null&&l.autoApply),onChange:async s=>{const a=s.target.checked;P(t=>t?{...t,autoApply:a}:{autoApply:a});const{setRankedSettings:n}=await C(async()=>{const{setRankedSettings:t}=await import("./index-B7LHv9gh.js").then(o=>o.z);return{setRankedSettings:t}},__vite__mapDeps([0,1]));await n({autoApply:a})}}),"Auto apply hourly"]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 -mt-2",children:[e.jsx("p",{className:"text-xs text-uconn-muted",children:"When on, the app reveals the Ranked page and point indicators. Turning it off hides ranked UI and points, but nothing is deleted."}),e.jsx("p",{className:"text-xs text-uconn-muted",children:"When on, promotions/relegations can be applied on a schedule. In this client-only build it’s a manual action or conceptual; see note below."})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-uconn-muted mb-1",children:"Promotion %"}),["Bronze","Silver","Gold","Platinum","Diamond"].map(s=>{var t;const a=s.toLowerCase(),n=((t=l==null?void 0:l.promotion_pct)==null?void 0:t[a])??0;return e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-24 text-xs",children:s}),e.jsx("input",{type:"number",min:0,max:100,value:n,onChange:async o=>{const i=Math.max(0,Math.min(100,Number(o.target.value))),m={...l||{},promotion_pct:{...(l==null?void 0:l.promotion_pct)||{},[a]:i}};P(m);const{setRankedSettings:p}=await C(async()=>{const{setRankedSettings:x}=await import("./index-B7LHv9gh.js").then(R=>R.z);return{setRankedSettings:x}},__vite__mapDeps([0,1]));await p({promotion_pct:{[a]:i}})},className:"px-2 py-1 rounded w-20 bg-white/5 border border-white/10"}),e.jsx("span",{className:"text-xs",children:"%"})]},s)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-uconn-muted mb-1",children:"Relegation %"}),["Bronze","Silver","Gold","Platinum","Diamond"].map(s=>{var t;const a=s.toLowerCase(),n=((t=l==null?void 0:l.demotion_pct)==null?void 0:t[a])??0;return e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-24 text-xs",children:s}),e.jsx("input",{type:"number",min:0,max:100,value:n,onChange:async o=>{const i=Math.max(0,Math.min(100,Number(o.target.value))),m={...l||{},demotion_pct:{...(l==null?void 0:l.demotion_pct)||{},[a]:i}};P(m);const{setRankedSettings:p}=await C(async()=>{const{setRankedSettings:x}=await import("./index-B7LHv9gh.js").then(R=>R.z);return{setRankedSettings:x}},__vite__mapDeps([0,1]));await p({demotion_pct:{[a]:i}})},className:"px-2 py-1 rounded w-20 bg-white/5 border border-white/10"}),e.jsx("span",{className:"text-xs",children:"%"})]},s)})]})]}),e.jsx("div",{className:"pt-4 mt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Manual override"}),e.jsx("p",{className:"text-xs text-uconn-muted",children:"Apply promotions and relegations immediately using the current week’s points."})]}),e.jsx("button",{disabled:Te,onClick:async()=>{try{Le(!0);const[s,a,n]=await Promise.all([I(),bs(),gs()]),t=await vs(s,a,n);d(`${t} updates applied`)}catch(s){console.error(s),d("Apply failed")}finally{Le(!1)}},className:"px-3 py-2 rounded bg-brand-teal/40 hover:bg-brand-teal/60 border border-uconn-border text-sm font-medium disabled:opacity-50",children:Te?"Applying…":"Apply now"})]})})]})]})})]}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Admin"}),e.jsx("p",{className:"text-sm text-uconn-muted mt-2",children:"You must be signed in as admin to access this page."})]})}export{Ns as default};
