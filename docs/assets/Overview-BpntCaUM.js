import{j as e,u as Oe,L as Re,r as a,f as Ie,a as ce,b as Be,c as Xe,d as ze,R as Ge,e as He}from"./index-DD80bXAF.js";import{P as ye}from"./ProgressBar-BRdo9g7n.js";import{P as Ve}from"./PersonSelectPopover-BqPlb1H-.js";import{R as de,A as ue,X as me,Y as xe,C as he,T as fe,a as pe}from"./AreaChart-D9e1PF0x.js";import"./utils-NikRBbYi.js";import"./clsx-B-dksMZM.js";function Ye({href:r,children:c}){return r?e.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-3 py-1.5 rounded bg-card/80 hover:bg-card transition",children:c}):null}function Ke(...r){return r.filter(Boolean).join(" ")}function Ue({className:r,...c}){return e.jsx("div",{className:Ke("animate-pulse rounded-md bg-muted",r),...c})}function qe({project:r,owners:c,tasks:l,compact:f=!1}){function v(i){return i===1?.5:i===3?1:i===10?3:i===6?2:i===15?5:i===40?10:i===65?15:i===98?20:i===150?25:i===200?30:Math.max(0,Math.round(i/4))}const k=Math.round(l.reduce((i,j)=>i+(typeof j.ranked_points=="number"?v(j.ranked_points):2),0)),[x]=Oe(),p=l.length,h=l.filter(i=>i.status==="Complete").length,g=p>0?h/p*100:0,d=`${Math.round(g)}%`,u=l.reduce((i,j)=>i+(j.ranked_points??(j.status==="Complete"?35:10)),0),C=f?"rounded-xl bg-card dark:bg-surface border border-white/10 p-2.5":"rounded-2xl bg-card dark:bg-surface border border-white/10 p-3",$=f?"text-base font-semibold hover:underline mb-0":"text-lg font-semibold hover:underline mb-0",P=f?"h-2":"h-2.5";return e.jsxs("div",{className:C,children:[e.jsxs("div",{className:"flex items-start justify-between gap-0",children:[e.jsx("div",{className:"flex items-center min-w-0",children:e.jsx(Re,{to:`/project/${r.id}`,className:`${$} truncate`,title:r.name,children:r.name})}),r.design_link&&e.jsx("div",{className:"flex gap-2 shrink-0",children:f?e.jsx("a",{href:r.design_link,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-1.5 py-0 rounded bg-card dark:bg-surface text-xs border border-[#24304F] transition outline outline-2 outline-[#24304F] font-normal",style:{background:"rgba(255,255,255,0.10)",borderColor:"#24304F",color:"#FFFFFF",fontWeight:"400"},children:"Link"}):e.jsx(Ye,{href:r.design_link,children:"Design Docs"})})]}),e.jsx("div",{className:"min-h-4 h-4 flex items-center mb-2",children:r.subsystem?e.jsx("div",{className:"text-xs uppercase tracking-caps font-normal text-muted leading-none",children:r.subsystem}):e.jsx(Ue,{className:"h-3 w-16 invisible"})}),e.jsx("div",{className:"flex items-center justify-between gap-2 text-tick text-muted leading-none",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:"OWNERS"}),c.length>0?e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-card dark:bg-surface whitespace-normal break-words text-[10px] leading-none",style:{paddingTop:"1px",paddingBottom:"1px"},children:c.length}):e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white/10 whitespace-normal break-words text-[10px] leading-none",style:{paddingTop:"1px",paddingBottom:"1px"},children:"N/A"})]})}),r.due_date&&(()=>{let i=null;const j=r.due_date,S=j.match(/(\d{4})[\/\-]?(\d{2})[\/\-]?(\d{2})/);if(S){const[,T,D,N]=S;i=new Date(Number(T),Number(D)-1,Number(N))}else isNaN(Date.parse(j))||(i=new Date(j));if(i){const T=i.toLocaleString("en-US",{weekday:f?"short":"long"}),D=i.toLocaleString("en-US",{month:f?"short":"long"}),N=i.getDate(),E=n=>n===1||n===21||n===31?"st":n===2||n===22?"nd":n===3||n===23?"rd":"th";return e.jsxs("span",{className:"text-[10px] uppercase tracking-wide opacity-80 whitespace-nowrap ml-2 shrink-0 leading-none",children:[T," ",D," ",N,E(N)]})}return null})()]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 leading-none",children:[e.jsx("div",{className:"text-[11px] text-muted font-normal",children:d}),e.jsxs("div",{className:"text-muted flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:p>0?`${h}/${p} tasks`:"No tasks"}),e.jsx("span",{className:"opacity-80",children:"·"}),e.jsxs("span",{className:"text-[10px] font-normal opacity-80",children:[k," hours"]}),x&&e.jsx("span",{className:"opacity-80",children:"·"}),x&&e.jsx("span",{className:"text-[10px] font-normal",style:{color:"#94a3b8"},children:`Σ +${u}`})]})]}),e.jsx("div",{className:"mt-1",children:e.jsx(ye,{value:g,heightClass:P,color:g===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})})]})}function Je({className:r="w-5 h-5 text-yellow-500 inline ml-1"}){return e.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6 2a1 1 0 00-1 1v2a1 1 0 001 1h8a1 1 0 001-1V3a1 1 0 00-1-1H6zm8 4H6v1a6 6 0 005 5.92V15H9a1 1 0 000 2h2a1 1 0 000-2h-2v-2.08A6 6 0 0014 7V6z"})})}function Qe({children:r,slideIndexInitial:c=0,onIndexChange:l,dots:f=!0,frameClassName:v}){const k=Array.isArray(r)?r:[r],[x,p]=a.useState(c),h=a.useRef(null),g=a.useRef(null),d=a.useRef({startX:0,currentX:0,dragging:!1,width:0});a.useEffect(()=>{l?.(x)},[x]);const u=(n,m=!0)=>{const y=g.current,_=h.current;if(!y||!_)return;const F=y.clientWidth;d.current.width=F,_.style.transition=m?"transform 320ms cubic-bezier(0.22, 1, 0.36, 1)":"none",_.style.transform=`translateX(${-n*F}px)`},C=n=>{const m=g.current;m&&(d.current={startX:n,currentX:n,dragging:!0,width:m.clientWidth})},$=n=>{if(!d.current.dragging)return;d.current.currentX=n;const m=n-d.current.startX,y=h.current;y&&(y.style.transition="none",y.style.transform=`translateX(${m-x*d.current.width}px)`)},P=()=>{if(!d.current.dragging)return;const n=d.current.currentX-d.current.startX,m=Math.max(40,d.current.width*.2);let y=x;n>m?y=Math.max(0,x-1):n<-m&&(y=Math.min(k.length-1,x+1)),u(y,!0),p(y),d.current.dragging=!1},i=n=>C(n.touches[0].clientX),j=n=>$(n.touches[0].clientX),S=()=>P(),T=n=>{n.preventDefault(),C(n.clientX)},D=n=>$(n.clientX),N=()=>P(),E=()=>P();return a.useEffect(()=>{const n=()=>{u(x,!1)};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[x]),a.useEffect(()=>{u(x,!0)},[x]),e.jsx("div",{className:"w-full select-none",children:e.jsxs("div",{ref:g,className:`relative overflow-hidden rounded-2xl ${v||""}`,onTouchStart:i,onTouchMove:j,onTouchEnd:S,onMouseDown:T,onMouseMove:D,onMouseUp:N,onMouseLeave:E,children:[e.jsx("div",{ref:h,className:"flex",style:{willChange:"transform"},children:k.map((n,m)=>e.jsx("div",{className:"w-full shrink-0 px-1",children:n},m))}),f&&e.jsx("div",{className:"mt-3 mb-2 flex items-center justify-center gap-2",children:k.map((n,m)=>e.jsx("button",{"aria-label":`Show slide ${m+1}`,className:`w-2.5 h-2.5 rounded-full border border-border transition ${x===m?"bg-foreground":"bg-muted-foreground/40 hover:bg-foreground/70"}`,onClick:()=>p(m)},m))})]})})}function ge({show:r,children:c}){const l=a.useRef(null);return a.useEffect(()=>{l.current&&(r?(l.current.style.opacity="1",l.current.style.transform="translateY(0)",l.current.style.pointerEvents="auto"):(l.current.style.opacity="0",l.current.style.transform="translateY(20px)",l.current.style.pointerEvents="none"))},[r]),e.jsx("div",{ref:l,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"opacity 0.4s, transform 0.4s",opacity:r?1:0,transform:r?"translateY(0)":"translateY(20px)",pointerEvents:r?"auto":"none"},children:c})}const Ze=[{label:"Mon",present:4},{label:"Tue",present:6},{label:"Wed",present:5},{label:"Thu",present:9},{label:"Fri",present:8},{label:"Sat",present:12},{label:"Sun",present:16}],et=Array.from({length:30}).map((r,c)=>({label:`${c+1}`,present:Math.max(0,Math.round(5+6*Math.sin(c/4)))})),I={line:["accent"],card:["surface"],border:["border"],text:["text"]},M={accent:"#64C7C9",surface:"#0F1B3A",border:"#24304F",text:"#FFFFFF",overlay:"rgba(255,255,255,0.06)"};function B(r,c){for(const l of r)if(l in M)return M[l];return c}function be(r,c){if(r.startsWith("#")){const l=parseInt(r.slice(1),16),f=l>>16&255,v=l>>8&255,k=l&255;return`rgba(${f},${v},${k},${c})`}return r.startsWith("rgb")?r.replace(/rgb\(([^)]+)\)/,`rgba($1,${c})`):r}function je({active:r,payload:c}){if(!r||!c?.length)return null;const l=c[0].payload;return e.jsxs("div",{className:"rounded-xl px-3 py-2 text-sm shadow-lg border",style:{background:M.surface,borderColor:M.border,color:M.text},children:[e.jsx("div",{className:"opacity-70",children:l.label}),e.jsxs("div",{className:"font-semibold",children:[l.present," present"]})]})}function tt(r){const{weekData:c=Ze,monthData:l=et,className:f,title:v="Attendance"}=r,k=new Date,x=[2,4,6].includes(k.getDay()),[p,h]=a.useState("month"),g=p==="week"?c:l,d=a.useMemo(()=>g.length?g[g.length-1].present:0,[g]),u={line:B(I.line,M.accent),card:B(I.card,M.surface),border:B(I.border,M.border),text:B(I.text,M.text)};return e.jsxs("div",{className:`relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-border overflow-hidden h-full flex flex-col ${f??""}`,style:{background:u.card,borderColor:u.border,color:u.text},children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 min-w-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-widest opacity-70",children:v}),e.jsx("div",{className:"mt-1 text-xl font-bold leading-tight",children:d}),e.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:x?"Today":"Last meeting"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h("week"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${p==="week"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:u.border},children:"Week"}),e.jsx("button",{onClick:()=>h("month"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${p==="month"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:u.border},children:"Month"})]})]}),e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden flex-1 min-h-0 min-w-0 relative",children:[e.jsx(ge,{show:p==="week",children:e.jsx(de,{width:"100%",height:"100%",className:"block",children:e.jsxs(ue,{data:c,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:u.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:u.line,stopOpacity:.1})]})}),e.jsx(me,{dataKey:"label",hide:!0}),e.jsx(xe,{hide:!0,domain:[0,C=>Math.max(10,C*1.15)]}),e.jsx(he,{horizontal:!1,vertical:!1}),e.jsx(fe,{content:e.jsx(je,{}),cursor:{stroke:be(u.text,.06),strokeWidth:20}}),e.jsx(pe,{type:"monotone",dataKey:"present",stroke:u.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})}),e.jsx(ge,{show:p==="month",children:e.jsx(de,{width:"100%",height:"100%",className:"block",children:e.jsxs(ue,{data:l,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:u.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:u.line,stopOpacity:.1})]})}),e.jsx(me,{dataKey:"label",hide:!0}),e.jsx(xe,{hide:!0,domain:[0,C=>Math.max(10,C*1.15)]}),e.jsx(he,{horizontal:!1,vertical:!1}),e.jsx(fe,{content:e.jsx(je,{}),cursor:{stroke:be(u.text,.06),strokeWidth:20}}),e.jsx(pe,{type:"monotone",dataKey:"present",stroke:u.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})})]})]})}function U({label:r,value:c}){return e.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-white/10 p-3 text-center flex flex-col items-center justify-center min-w-0",children:[e.jsx("div",{className:"text-xl font-semibold leading-tight",children:c}),e.jsx("div",{className:"mt-1 text-xs tracking-caps text-muted uppercase opacity-80 whitespace-nowrap overflow-hidden text-ellipsis leading-snug",title:r,children:r})]})}function dt(){const[r,c]=a.useState([]),[l,f]=a.useState([]),[v,k]=a.useState([]),[x,p]=a.useState([]),[h,g]=a.useState([]),[d,u]=a.useState("name"),[C,$]=a.useState("asc"),[P,i]=a.useState(!1),[j,S]=a.useState(!1),[T,D]=a.useState(!1),[N,E]=a.useState(""),[n,m]=a.useState([]),[y,_]=a.useState(""),[F,q]=a.useState(""),[J,Q]=a.useState(""),[Z,ee]=a.useState(""),[te,se]=a.useState(!1);function re(t){m(s=>s.includes(t)?s.filter(o=>o!==t):[...s,t])}const[O,we]=a.useState(""),ve=a.useRef(null),Ne=t=>we(t.target.value);a.useEffect(()=>{(async()=>{const[t,s,o,b]=await Promise.all([Ie(),ce(),Be(),Xe()]);c(t),f(s),k(o),p(b)})()},[]);const X=v.length,ke=v.filter(t=>t.status==="Complete").length,z=X?Math.round(ke/X*100):0;[...a.useMemo(()=>{const t=new Map;for(const s of l)for(const o of s.owner_ids||[])t.set(o,(t.get(o)||0)+1);return t},[l]).entries()].sort((t,s)=>s[1]-t[1]).slice(0,5).map(([t,s])=>({name:r.find(o=>o.id===t)?.name||t,count:s}));const Ce=r.map(t=>{const s=v.filter(o=>o.assignee_id===t.id&&o.status==="Complete").length;return{...t,completed:s}}).sort((t,s)=>s.completed-t.completed).slice(0,5),Se=new Map(r.map(t=>[t.id,t])),R=new Map;for(const t of v){const s=R.get(t.project_id)??[];s.push(t),R.set(t.project_id,s)}const G=t=>{const s=R.get(t.id)??[];return s.length?s.filter(b=>b.status==="Complete").length/s.length:0},De=ze(),Me=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Pe(t){const s=new Date,o=[];let b=0,w=new Date(s);for(;o.length<3&&b<14;){const A=w.getDay();if([2,4,6].includes(A)){const V=w.toISOString().slice(0,10),Y=t.filter(W=>new Date(W.date).toISOString().slice(0,10)===V).reduce((W,ie)=>W+ie.present,0);o.unshift({label:Me[A],present:Y})}w.setDate(w.getDate()-1),b++}return o}function Ae(t){const s=new Date,o=30;return Array.from({length:o}).map((b,w)=>{const A=new Date(s);A.setDate(s.getDate()-(o-1-w));const V=A.getDay();if(![2,4,6].includes(V))return null;const Y=A.toISOString().slice(0,10),W=t.filter(K=>new Date(K.date).toISOString().slice(0,10)===Y).reduce((K,We)=>K+We.present,0);return{label:`${A.toLocaleString(void 0,{month:"short"})} ${A.getDate()}`,present:W}}).filter(Boolean)}const ne=x.map(t=>({date:t.date,present:1})),Te=Pe(ne),Le=Ae(ne).filter(t=>t!==null),L=a.useMemo(()=>l.filter(t=>!t.archived),[l]),ae=a.useMemo(()=>{const t=new Set;for(const s of L)s.subsystem&&t.add(s.subsystem);return Array.from(t).sort()},[L]),$e=a.useMemo(()=>{const t=new Map;for(const s of L)s.subsystem&&t.set(s.subsystem,(t.get(s.subsystem)||0)+1);return t},[L]),[H,Ee]=a.useState(!1),_e=[...a.useMemo(()=>{let t=h.length?L.filter(s=>s.subsystem&&h.includes(s.subsystem)):L;if(O.trim()){const s=O.trim().toLowerCase();t=t.filter(o=>o.name.toLowerCase().includes(s)||o.description&&o.description.toLowerCase().includes(s)||o.subsystem&&o.subsystem.toLowerCase().includes(s))}return H&&(t=t.filter(s=>G(s)<1)),t},[L,h,O,H])].sort((t,s)=>{let o=0;if(d==="name")o=t.name.localeCompare(s.name);else if(d==="due"){const b=t.due_date,w=s.due_date;b&&w?o=b.localeCompare(w):b&&!w?o=-1:!b&&w?o=1:o=0}else d==="progress"?o=G(t)-G(s):o=(t.subsystem||"").localeCompare(s.subsystem||"")||t.name.localeCompare(s.name);return C==="asc"?o:-o}),oe=t=>t==="name"?"Name":t==="due"?"Due date":t==="progress"?"Progress":"Subsystem",le=C==="asc"?"↑":"↓";a.useEffect(()=>{const t=s=>{s.key==="Escape"&&(i(!1),S(!1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),De?.uid;async function Fe(){if(N.trim())try{se(!0),await He({name:N.trim(),owner_ids:n,design_link:y.trim()||void 0,description:F.trim()||void 0,due_date:J||void 0,subsystem:Z||void 0});const[t]=await Promise.all([ce()]);f(t),E(""),m([]),_(""),q(""),Q(""),ee(""),D(!1)}finally{se(!1)}}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Team Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx(U,{label:"Members",value:r.length}),e.jsx(U,{label:"Projects",value:l.length}),e.jsx(U,{label:"Tasks",value:X})]}),e.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-border p-2 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs tracking-caps text-muted uppercase opacity-80",children:"Total Task Completion"}),e.jsxs("div",{className:"text-xl font-semibold leading-tight",children:[z,"%"]})]}),e.jsx(ye,{value:z,heightClass:"h-3",color:z===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})]})]}),e.jsx("div",{className:"min-w-0",children:e.jsxs(Qe,{slideIndexInitial:0,onIndexChange:()=>{},dots:!0,children:[e.jsx(tt,{title:"Attendance",weekData:Te,monthData:Le,className:"h-56"}),e.jsxs("div",{className:"relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-white/10 overflow-hidden h-56 flex flex-col",children:[e.jsx("h2",{className:"text-xs md:text-sm mb-2 text-muted uppercase tracking-caps",style:{fontWeight:400},children:"All-Time Leaderboard"}),e.jsx("div",{className:"h-full overflow-hidden",children:e.jsxs("table",{className:"mx-auto w-full table-fixed text-xs sm:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"#"}),e.jsx("th",{className:"py-1 px-2 text-left text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Name"}),e.jsx("th",{className:"w-24 md:w-28 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Tasks"})]})}),e.jsx("tbody",{className:"align-middle",children:Ce.slice(0,7).map((t,s)=>e.jsxs("tr",{className:s===0?"bg-yellow-100/40":"",children:[e.jsx("td",{className:"py-1 px-2 text-center",children:s+1}),e.jsx("td",{className:"py-1 px-2",children:e.jsxs("div",{className:"truncate flex items-center gap-1 mb-0.5",children:[t.name,s===0&&e.jsx(Je,{})]})}),e.jsx("td",{className:"py-1 px-2 text-center",children:t.completed})]},t.id))})]})})]})]})})]}),e.jsxs("div",{className:"mt-6 mb-2 flex items-center w-full",style:{display:"flex"},children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Projects"}),e.jsx(Ge,{children:e.jsxs("button",{"aria-label":"Create project",onClick:()=>D(!0),className:"group inline-flex items-center justify-center h-7 w-7 rounded-md border border-accent/40 bg-accent/15 hover:bg-accent/25 text-accent transition shadow-sm hover:shadow-accent/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 ml-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.1",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),e.jsx("span",{className:"sr-only",children:"Add project"})]})}),e.jsx("div",{className:"flex-1"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none outline-none focus:outline-none",style:{marginLeft:8},children:[e.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[e.jsx("input",{type:"checkbox",checked:H,onChange:t=>Ee(t.target.checked),className:"peer sr-only",onMouseUp:t=>t.currentTarget.blur()}),e.jsx("span",{className:`
                pointer-events-none block h-6 w-11 rounded-full border border-border
                bg-black/15 dark:bg-white/15
                transition-colors
                peer-checked:bg-[#64C7C9]
                peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
              `}),e.jsx("span",{className:`
                pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                bg-white dark:bg-background shadow
                transition-transform
                peer-checked:translate-x-5
              `})]}),e.jsx("span",{className:"sr-only",children:"Hide completed projects"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted mb-1 uppercase tracking-caps",children:[e.jsxs("div",{className:"flex items-center gap-1",title:"Grey = To-do / Not started",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#BDC0C3"}})," To-do / Not started"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#64C7C9"}})," In Progress"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#34D399"}})," Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{i(t=>!t),S(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 w-full",children:["Subsystems: ",e.jsx("span",{className:"font-semibold",children:h.length?`${h.length} selected`:"All"})]}),e.jsxs("div",{className:`absolute z-20 mt-1 w-64 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${P?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:e.jsx("button",{className:"w-full px-3 py-2 rounded-md text-xs sm:text-sm font-semibold bg-red-500/15 hover:bg-red-500/25 text-red-200 focus:outline-none focus-visible:outline-none",onClick:()=>g([]),children:"Clear selection"})}),e.jsxs("div",{className:"max-h-60 overflow-auto p-1",children:[ae.length===0&&e.jsx("div",{className:"px-3 py-2 text-xs text-muted uppercase tracking-caps",children:"No subsystems"}),ae.map(t=>{const s=h.includes(t),o=$e.get(t)??0;return e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-xs rounded hover:bg-card/80 cursor-pointer focus:outline-none focus-visible:outline-none",children:[e.jsx("input",{type:"checkbox",className:"accent-accent focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",checked:s,onChange:()=>{g(b=>s?b.filter(w=>w!==t):[...b,t])}}),e.jsx("span",{className:"truncate",children:t}),e.jsx("span",{className:"ml-auto inline-flex items-center justify-center rounded-full bg-surface/80 px-2 py-0.5 text-[10px]",children:o})]},t)})]})]})]}),e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{S(t=>!t),i(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 w-full",children:["Sort: ",e.jsxs("span",{className:"font-semibold",children:[oe(d)," ",le]})]}),e.jsx("div",{className:`absolute z-20 mt-1 w-48 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${j?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:["name","subsystem","due","progress"].map(t=>e.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs hover:bg-surface/80 ${d===t?"bg-surface/80":""}`,onClick:()=>{d===t?$(s=>s==="asc"?"desc":"asc"):u(t),S(!1)},children:[oe(t)," ",d===t?le:""]},t))})]}),(P||j)&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{i(!1),S(!1)}})]}),e.jsx("div",{className:"w-full mt-2 mb-4",children:e.jsx("input",{ref:ve,type:"text",value:O,onChange:Ne,placeholder:"Search projects...",className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface focus:bg-card/80 w-full focus:outline-none"})}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2",children:_e.map(t=>e.jsx(qe,{project:t,owners:t.owner_ids?.map(s=>Se.get(s)).filter(Boolean)??[],tasks:R.get(t.id)??[],compact:!0},t.id))}),T&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>D(!1)}),e.jsxs("div",{className:"relative w-[95vw] max-w-lg rounded-2xl border border-border bg-card dark:bg-surface shadow-2xl p-5 overflow-auto max-h-[92vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Create Project"}),e.jsx("button",{onClick:()=>D(!1),"aria-label":"Close",className:"h-8 w-8 inline-flex items-center justify-center rounded hover:bg-white/10",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground focus:outline-none",placeholder:"Project name",value:N,onChange:t=>E(t.target.value)}),e.jsx("input",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground focus:outline-none",placeholder:"Design link (optional)",value:y,onChange:t=>_(t.target.value)}),e.jsx("textarea",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground focus:outline-none",placeholder:"Project description (optional)",value:F,onChange:t=>q(t.target.value)}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border dark-select placeholder:text-muted-foreground focus:outline-none",value:Z,onChange:t=>ee(t.target.value),children:[e.jsx("option",{value:"",children:"Select subsystem…"}),e.jsx("option",{children:"Aero"}),e.jsx("option",{children:"Business"}),e.jsx("option",{children:"Composites"}),e.jsx("option",{children:"Controls"}),e.jsx("option",{children:"Data Acquisition"}),e.jsx("option",{children:"Electrical IC"}),e.jsx("option",{children:"Electrical EV"}),e.jsx("option",{children:"Finance"}),e.jsx("option",{children:"Frame"}),e.jsx("option",{children:"Manufacturing"}),e.jsx("option",{children:"Powertrain EV"}),e.jsx("option",{children:"Powertrain IC"}),e.jsx("option",{children:"Suspension"})]}),e.jsx("input",{type:"date",className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border focus:outline-none",value:J,onChange:t=>Q(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground uppercase tracking-caps",children:"Owners"}),e.jsx(Ve,{mode:"multi",people:r,selectedIds:n,onAdd:t=>re(t),onRemove:t=>re(t),triggerLabel:n.length?`${n.length} selected`:"Add/Remove",buttonClassName:"ml-auto text-[11px] px-2 py-1 rounded bg-surface text-foreground border border-border",maxItems:5})]}),e.jsx("button",{onClick:Fe,disabled:!N.trim()||te,className:`w-full px-3 py-2 rounded border border-border text-sm text-center ${N.trim()?"bg-card dark:bg-surface hover:bg-card/80":"bg-card dark:bg-surface opacity-50 cursor-not-allowed"}`,children:te?"Saving…":"Save Project"})]})]})]})]})}export{dt as default};
