import{j as e,u as Oe,L as Re,r as a,f as Ie,a as ce,b as Be,c as Xe,d as ze,R as Ge,e as He}from"./index-B24nffkO.js";import{P as we}from"./ProgressBar-D8bwDpGk.js";import{P as Ve}from"./PersonSelectPopover-7wDEXK2U.js";import{R as de,A as ue,X as me,Y as xe,C as he,T as pe,a as fe}from"./AreaChart-DCXuB3Od.js";function Ye({href:n,children:c}){return n?e.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-3 py-1.5 rounded bg-white/10 hover:bg-white/20 transition",children:c}):null}function Ke(...n){return n.filter(Boolean).join(" ")}function Ue({className:n,...c}){return e.jsx("div",{className:Ke("animate-pulse rounded-md bg-muted",n),...c})}function qe({project:n,owners:c,tasks:l,compact:p=!1}){function v(i){return i===1?.5:i===3?1:i===10?3:i===6?2:i===15?5:i===40?10:i===65?15:i===98?20:i===150?25:i===200?30:Math.max(0,Math.round(i/4))}const k=Math.round(l.reduce((i,j)=>i+(typeof j.ranked_points=="number"?v(j.ranked_points):2),0)),[x]=Oe(),f=l.length,h=l.filter(i=>i.status==="Complete").length,g=f>0?h/f*100:0,d=`${Math.round(g)}%`,u=l.reduce((i,j)=>i+(j.ranked_points??(j.status==="Complete"?35:10)),0),C=p?"rounded-xl bg-white/5 border border-white/10 p-2.5":"rounded-2xl bg-white/5 border border-white/10 p-3",L=p?"text-base font-semibold hover:underline mb-0":"text-lg font-semibold hover:underline mb-0",P=p?"h-2":"h-2.5";return e.jsxs("div",{className:C,children:[e.jsxs("div",{className:"flex items-start justify-between gap-0",children:[e.jsx("div",{className:"flex items-center min-w-0",children:e.jsx(Re,{to:`/project/${n.id}`,className:`${L} truncate`,title:n.name,children:n.name})}),n.design_link&&e.jsx("div",{className:"flex gap-2 shrink-0",children:p?e.jsx("a",{href:n.design_link,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-1.5 py-0 rounded bg-white/10 text-xs border border-[#24304F] transition outline outline-2 outline-[#24304F] font-normal",style:{background:"rgba(255,255,255,0.10)",borderColor:"#24304F",color:"#FFFFFF",fontWeight:"400"},children:"Link"}):e.jsx(Ye,{href:n.design_link,children:"Design Docs"})})]}),e.jsx("div",{className:"min-h-4 h-4 flex items-center mb-2",children:n.subsystem?e.jsx("div",{className:"text-xs uppercase tracking-caps font-normal text-muted leading-none",children:n.subsystem}):e.jsx(Ue,{className:"h-3 w-16 invisible"})}),e.jsx("div",{className:"flex items-center justify-between gap-2 text-tick text-muted leading-none",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:"OWNERS"}),c.length>0?e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white/10 whitespace-normal break-words text-[10px] leading-none",style:{paddingTop:"1px",paddingBottom:"1px"},children:c.length}):e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white/10 whitespace-normal break-words text-[10px] leading-none",style:{paddingTop:"1px",paddingBottom:"1px"},children:"N/A"})]})}),n.due_date&&(()=>{let i=null;const j=n.due_date,S=j.match(/(\d{4})[\/\-]?(\d{2})[\/\-]?(\d{2})/);if(S){const[,T,M,N]=S;i=new Date(Number(T),Number(M)-1,Number(N))}else isNaN(Date.parse(j))||(i=new Date(j));if(i){const T=i.toLocaleString("en-US",{weekday:p?"short":"long"}),M=i.toLocaleString("en-US",{month:p?"short":"long"}),N=i.getDate(),E=r=>r===1||r===21||r===31?"st":r===2||r===22?"nd":r===3||r===23?"rd":"th";return e.jsxs("span",{className:"text-[10px] uppercase tracking-wide opacity-80 whitespace-nowrap ml-2 shrink-0 leading-none",children:[T," ",M," ",N,E(N)]})}return null})()]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 leading-none",children:[e.jsx("div",{className:"text-[11px] text-muted font-normal",children:d}),e.jsxs("div",{className:"text-muted flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:f>0?`${h}/${f} tasks`:"No tasks"}),e.jsx("span",{className:"opacity-80",children:"·"}),e.jsxs("span",{className:"text-[10px] font-normal opacity-80",children:[k," hours"]}),x&&e.jsx("span",{className:"opacity-80",children:"·"}),x&&e.jsx("span",{className:"text-[10px] font-normal",style:{color:"#94a3b8"},children:`Σ +${u}`})]})]}),e.jsx("div",{className:"mt-1",children:e.jsx(we,{value:g,heightClass:P,color:g===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})})]})}function Je({className:n="w-5 h-5 text-yellow-500 inline ml-1"}){return e.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6 2a1 1 0 00-1 1v2a1 1 0 001 1h8a1 1 0 001-1V3a1 1 0 00-1-1H6zm8 4H6v1a6 6 0 005 5.92V15H9a1 1 0 000 2h2a1 1 0 000-2h-2v-2.08A6 6 0 0014 7V6z"})})}function Qe({children:n,slideIndexInitial:c=0,onIndexChange:l,dots:p=!0,frameClassName:v}){const k=Array.isArray(n)?n:[n],[x,f]=a.useState(c),h=a.useRef(null),g=a.useRef(null),d=a.useRef({startX:0,currentX:0,dragging:!1,width:0});a.useEffect(()=>{l?.(x)},[x]);const u=(r,m=!0)=>{const w=g.current,_=h.current;if(!w||!_)return;const F=w.clientWidth;d.current.width=F,_.style.transition=m?"transform 320ms cubic-bezier(0.22, 1, 0.36, 1)":"none",_.style.transform=`translateX(${-r*F}px)`},C=r=>{const m=g.current;m&&(d.current={startX:r,currentX:r,dragging:!0,width:m.clientWidth})},L=r=>{if(!d.current.dragging)return;d.current.currentX=r;const m=r-d.current.startX,w=h.current;w&&(w.style.transition="none",w.style.transform=`translateX(${m-x*d.current.width}px)`)},P=()=>{if(!d.current.dragging)return;const r=d.current.currentX-d.current.startX,m=Math.max(40,d.current.width*.2);let w=x;r>m?w=Math.max(0,x-1):r<-m&&(w=Math.min(k.length-1,x+1)),u(w,!0),f(w),d.current.dragging=!1},i=r=>C(r.touches[0].clientX),j=r=>L(r.touches[0].clientX),S=()=>P(),T=r=>{r.preventDefault(),C(r.clientX)},M=r=>L(r.clientX),N=()=>P(),E=()=>P();return a.useEffect(()=>{const r=()=>{u(x,!1)};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[x]),a.useEffect(()=>{u(x,!0)},[x]),e.jsx("div",{className:"w-full select-none",children:e.jsxs("div",{ref:g,className:`relative overflow-hidden rounded-2xl ${v||""}`,onTouchStart:i,onTouchMove:j,onTouchEnd:S,onMouseDown:T,onMouseMove:M,onMouseUp:N,onMouseLeave:E,children:[e.jsx("div",{ref:h,className:"flex",style:{willChange:"transform"},children:k.map((r,m)=>e.jsx("div",{className:"w-full shrink-0 px-1",children:r},m))}),p&&e.jsx("div",{className:"mt-3 mb-2 flex items-center justify-center gap-2",children:k.map((r,m)=>e.jsx("button",{"aria-label":`Show slide ${m+1}`,className:`w-2.5 h-2.5 rounded-full transition ${x===m?"bg-white":"bg-white/30 hover:bg-white/60"}`,onClick:()=>f(m)},m))})]})})}function ge({show:n,children:c}){const l=a.useRef(null);return a.useEffect(()=>{l.current&&(n?(l.current.style.opacity="1",l.current.style.transform="translateY(0)",l.current.style.pointerEvents="auto"):(l.current.style.opacity="0",l.current.style.transform="translateY(20px)",l.current.style.pointerEvents="none"))},[n]),e.jsx("div",{ref:l,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"opacity 0.4s, transform 0.4s",opacity:n?1:0,transform:n?"translateY(0)":"translateY(20px)",pointerEvents:n?"auto":"none"},children:c})}const Ze=[{label:"Mon",present:4},{label:"Tue",present:6},{label:"Wed",present:5},{label:"Thu",present:9},{label:"Fri",present:8},{label:"Sat",present:12},{label:"Sun",present:16}],et=Array.from({length:30}).map((n,c)=>({label:`${c+1}`,present:Math.max(0,Math.round(5+6*Math.sin(c/4)))})),B={line:["accent"],card:["surface"],border:["border"],text:["text"]},D={accent:"#64C7C9",surface:"#0F1B3A",border:"#24304F",text:"#FFFFFF",overlay:"rgba(255,255,255,0.06)"};function X(n,c){for(const l of n)if(l in D)return D[l];return c}function be(n,c){if(n.startsWith("#")){const l=parseInt(n.slice(1),16),p=l>>16&255,v=l>>8&255,k=l&255;return`rgba(${p},${v},${k},${c})`}return n.startsWith("rgb")?n.replace(/rgb\(([^)]+)\)/,`rgba($1,${c})`):n}function je({active:n,payload:c}){if(!n||!c?.length)return null;const l=c[0].payload;return e.jsxs("div",{className:"rounded-xl px-3 py-2 text-sm shadow-lg border",style:{background:D.surface,borderColor:D.border,color:D.text},children:[e.jsx("div",{className:"opacity-70",children:l.label}),e.jsxs("div",{className:"font-semibold",children:[l.present," present"]})]})}function tt(n){const{weekData:c=Ze,monthData:l=et,className:p,title:v="Attendance"}=n,k=new Date,x=[2,4,6].includes(k.getDay()),[f,h]=a.useState("month"),g=f==="week"?c:l,d=a.useMemo(()=>g.length?g[g.length-1].present:0,[g]),u={line:X(B.line,D.accent),card:X(B.card,D.surface),border:X(B.border,D.border),text:X(B.text,D.text)};return e.jsxs("div",{className:`relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-surface text-text border-border overflow-hidden h-full flex flex-col ${p??""}`,style:{background:u.card,borderColor:u.border,color:u.text},children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 min-w-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-widest opacity-70",children:v}),e.jsx("div",{className:"mt-1 text-xl font-bold leading-tight",children:d}),e.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:x?"Today":"Last meeting"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h("week"),className:`px-1.5 py-0.5 rounded bg-white/10 text-xs border transition ${f==="week"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:u.border},children:"Week"}),e.jsx("button",{onClick:()=>h("month"),className:`px-1.5 py-0.5 rounded bg-white/10 text-xs border transition ${f==="month"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:u.border},children:"Month"})]})]}),e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden flex-1 min-h-0 min-w-0 relative",children:[e.jsx(ge,{show:f==="week",children:e.jsx(de,{width:"100%",height:"100%",className:"block",children:e.jsxs(ue,{data:c,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:u.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:u.line,stopOpacity:.1})]})}),e.jsx(me,{dataKey:"label",hide:!0}),e.jsx(xe,{hide:!0,domain:[0,C=>Math.max(10,C*1.15)]}),e.jsx(he,{horizontal:!1,vertical:!1}),e.jsx(pe,{content:e.jsx(je,{}),cursor:{stroke:be(u.text,.06),strokeWidth:20}}),e.jsx(fe,{type:"monotone",dataKey:"present",stroke:u.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})}),e.jsx(ge,{show:f==="month",children:e.jsx(de,{width:"100%",height:"100%",className:"block",children:e.jsxs(ue,{data:l,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:u.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:u.line,stopOpacity:.1})]})}),e.jsx(me,{dataKey:"label",hide:!0}),e.jsx(xe,{hide:!0,domain:[0,C=>Math.max(10,C*1.15)]}),e.jsx(he,{horizontal:!1,vertical:!1}),e.jsx(pe,{content:e.jsx(je,{}),cursor:{stroke:be(u.text,.06),strokeWidth:20}}),e.jsx(fe,{type:"monotone",dataKey:"present",stroke:u.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})})]})]})}function U({label:n,value:c}){return e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 p-3 text-center flex flex-col items-center justify-center min-w-0",children:[e.jsx("div",{className:"text-xl font-semibold leading-tight",children:c}),e.jsx("div",{className:"mt-1 text-xs uppercase text-muted font-medium whitespace-nowrap overflow-hidden text-ellipsis leading-snug",title:n,children:n})]})}function it(){const[n,c]=a.useState([]),[l,p]=a.useState([]),[v,k]=a.useState([]),[x,f]=a.useState([]),[h,g]=a.useState([]),[d,u]=a.useState("name"),[C,L]=a.useState("asc"),[P,i]=a.useState(!1),[j,S]=a.useState(!1),[T,M]=a.useState(!1),[N,E]=a.useState(""),[r,m]=a.useState([]),[w,_]=a.useState(""),[F,q]=a.useState(""),[J,Q]=a.useState(""),[Z,ee]=a.useState(""),[te,se]=a.useState(!1);function ne(t){m(s=>s.includes(t)?s.filter(o=>o!==t):[...s,t])}const[R,ye]=a.useState(""),ve=a.useRef(null),Ne=t=>ye(t.target.value);a.useEffect(()=>{(async()=>{const[t,s,o,b]=await Promise.all([Ie(),ce(),Be(),Xe()]);c(t),p(s),k(o),f(b)})()},[]);const z=v.length,ke=v.filter(t=>t.status==="Complete").length,G=z?Math.round(ke/z*100):0;[...a.useMemo(()=>{const t=new Map;for(const s of l)for(const o of s.owner_ids||[])t.set(o,(t.get(o)||0)+1);return t},[l]).entries()].sort((t,s)=>s[1]-t[1]).slice(0,5).map(([t,s])=>({name:n.find(o=>o.id===t)?.name||t,count:s}));const Ce=n.map(t=>{const s=v.filter(o=>o.assignee_id===t.id&&o.status==="Complete").length;return{...t,completed:s}}).sort((t,s)=>s.completed-t.completed).slice(0,5),Se=new Map(n.map(t=>[t.id,t])),I=new Map;for(const t of v){const s=I.get(t.project_id)??[];s.push(t),I.set(t.project_id,s)}const H=t=>{const s=I.get(t.id)??[];return s.length?s.filter(b=>b.status==="Complete").length/s.length:0},Me=ze(),De=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Pe(t){const s=new Date,o=[];let b=0,y=new Date(s);for(;o.length<3&&b<14;){const A=y.getDay();if([2,4,6].includes(A)){const V=y.toISOString().slice(0,10),Y=t.filter(O=>new Date(O.date).toISOString().slice(0,10)===V).reduce((O,ie)=>O+ie.present,0);o.unshift({label:De[A],present:Y})}y.setDate(y.getDate()-1),b++}return o}function Ae(t){const s=new Date,o=30;return Array.from({length:o}).map((b,y)=>{const A=new Date(s);A.setDate(s.getDate()-(o-1-y));const V=A.getDay();if(![2,4,6].includes(V))return null;const Y=A.toISOString().slice(0,10),O=t.filter(K=>new Date(K.date).toISOString().slice(0,10)===Y).reduce((K,We)=>K+We.present,0);return{label:`${A.toLocaleString(void 0,{month:"short"})} ${A.getDate()}`,present:O}}).filter(Boolean)}const re=x.map(t=>({date:t.date,present:1})),Te=Pe(re),$e=Ae(re).filter(t=>t!==null),$=a.useMemo(()=>l.filter(t=>!t.archived),[l]),ae=a.useMemo(()=>{const t=new Set;for(const s of $)s.subsystem&&t.add(s.subsystem);return Array.from(t).sort()},[$]),Le=a.useMemo(()=>{const t=new Map;for(const s of $)s.subsystem&&t.set(s.subsystem,(t.get(s.subsystem)||0)+1);return t},[$]),[W,Ee]=a.useState(!1),_e=[...a.useMemo(()=>{let t=h.length?$.filter(s=>s.subsystem&&h.includes(s.subsystem)):$;if(R.trim()){const s=R.trim().toLowerCase();t=t.filter(o=>o.name.toLowerCase().includes(s)||o.description&&o.description.toLowerCase().includes(s)||o.subsystem&&o.subsystem.toLowerCase().includes(s))}return W&&(t=t.filter(s=>H(s)<1)),t},[$,h,R,W])].sort((t,s)=>{let o=0;if(d==="name")o=t.name.localeCompare(s.name);else if(d==="due"){const b=t.due_date,y=s.due_date;b&&y?o=b.localeCompare(y):b&&!y?o=-1:!b&&y?o=1:o=0}else d==="progress"?o=H(t)-H(s):o=(t.subsystem||"").localeCompare(s.subsystem||"")||t.name.localeCompare(s.name);return C==="asc"?o:-o}),oe=t=>t==="name"?"Name":t==="due"?"Due date":t==="progress"?"Progress":"Subsystem",le=C==="asc"?"↑":"↓";a.useEffect(()=>{const t=s=>{s.key==="Escape"&&(i(!1),S(!1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),Me?.uid;async function Fe(){if(N.trim())try{se(!0),await He({name:N.trim(),owner_ids:r,design_link:w.trim()||void 0,description:F.trim()||void 0,due_date:J||void 0,subsystem:Z||void 0});const[t]=await Promise.all([ce()]);p(t),E(""),m([]),_(""),q(""),Q(""),ee(""),M(!1)}finally{se(!1)}}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Team Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx(U,{label:"Members",value:n.length}),e.jsx(U,{label:"Projects",value:l.length}),e.jsx(U,{label:"Tasks",value:z})]}),e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 p-2 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs tracking-caps text-muted uppercase",children:"Total Task Completion"}),e.jsxs("div",{className:"text-xl font-semibold leading-tight",children:[G,"%"]})]}),e.jsx(we,{value:G,heightClass:"h-3",color:G===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})]})]}),e.jsx("div",{className:"min-w-0",children:e.jsxs(Qe,{slideIndexInitial:0,onIndexChange:()=>{},dots:!0,children:[e.jsx(tt,{title:"Attendance",weekData:Te,monthData:$e,className:"h-48 sm:h-56"}),e.jsxs("div",{className:"relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-white/5 text-text border-white/10 overflow-hidden h-48 sm:h-56 flex flex-col",children:[e.jsx("h2",{className:"text-xs md:text-sm mb-2 text-muted uppercase tracking-caps",style:{fontWeight:400},children:"All-Time Leaderboard"}),e.jsx("div",{className:"h-full overflow-hidden",children:e.jsxs("table",{className:"w-full table-fixed text-xs sm:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8 py-1.5 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"#"}),e.jsx("th",{className:"py-1.5 px-2 text-left text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Name"}),e.jsx("th",{className:"w-24 md:w-28 py-1.5 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Tasks"})]})}),e.jsx("tbody",{className:"align-middle",children:Ce.slice(0,5).map((t,s)=>e.jsxs("tr",{className:s===0?"bg-yellow-100/40":"",children:[e.jsx("td",{className:"py-1.5 px-2 text-center",children:s+1}),e.jsx("td",{className:"py-1.5 px-2",children:e.jsxs("div",{className:"truncate flex items-center gap-1",children:[t.name,s===0&&e.jsx(Je,{})]})}),e.jsx("td",{className:"py-1.5 px-2 text-center",children:t.completed})]},t.id))})]})})]})]})})]}),e.jsxs("div",{className:"mt-6 mb-2 flex items-center w-full",style:{display:"flex"},children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Projects"}),e.jsx(Ge,{children:e.jsxs("button",{"aria-label":"Create project",onClick:()=>M(!0),className:"group inline-flex items-center justify-center h-7 w-7 rounded-md border border-accent/40 bg-accent/15 hover:bg-accent/25 text-accent transition shadow-sm hover:shadow-accent/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 ml-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.1",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),e.jsx("span",{className:"sr-only",children:"Add project"})]})}),e.jsx("div",{className:"flex-1"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none outline-none focus:outline-none",style:{marginLeft:8},children:[e.jsx("input",{type:"checkbox",checked:W,onChange:t=>Ee(t.target.checked),className:"sr-only peer outline-none focus:outline-none",onMouseUp:t=>t.currentTarget.blur()}),e.jsx("span",{className:"w-10 h-6 flex items-center bg-white/10 border border-white/20 rounded-full transition peer-checked:bg-accent/60 peer-focus:ring-2 peer-focus:ring-accent/60 relative",style:{minWidth:40},children:e.jsx("span",{className:`absolute w-4 h-4 bg-white rounded-full shadow transition-transform ${W?"translate-x-5":"translate-x-1"}`,style:{top:"50%",transform:`${W?"translateX(20px)":"translateX(4px)"} translateY(-50%)`,transition:"transform 0.2s"}})}),e.jsx("span",{className:"sr-only",children:"Hide completed projects"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted mb-1 uppercase tracking-caps",children:[e.jsxs("div",{className:"flex items-center gap-1",title:"Grey = To-do / Not started",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-400"})," To-do / Not started"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-400"})," In Progress"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{i(t=>!t),S(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 hover:bg-white/10 w-full",children:["Subsystems: ",e.jsx("span",{className:"font-semibold",children:h.length?`${h.length} selected`:"All"})]}),e.jsxs("div",{className:`absolute z-20 mt-1 w-64 rounded-md border border-overlay-10 bg-bg/95 shadow-xl overflow-hidden transition transform origin-top ${P?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:e.jsx("button",{className:"w-full px-3 py-2 rounded-md text-xs sm:text-sm font-semibold bg-red-500/15 hover:bg-red-500/25 text-red-200 focus:outline-none focus-visible:outline-none",onClick:()=>g([]),children:"Clear selection"})}),e.jsxs("div",{className:"max-h-60 overflow-auto p-1",children:[ae.length===0&&e.jsx("div",{className:"px-3 py-2 text-xs text-muted uppercase tracking-caps",children:"No subsystems"}),ae.map(t=>{const s=h.includes(t),o=Le.get(t)??0;return e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-xs rounded hover:bg-white/10 cursor-pointer focus:outline-none focus-visible:outline-none",children:[e.jsx("input",{type:"checkbox",className:"accent-accent focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",checked:s,onChange:()=>{g(b=>s?b.filter(y=>y!==t):[...b,t])}}),e.jsx("span",{className:"truncate",children:t}),e.jsx("span",{className:"ml-auto inline-flex items-center justify-center rounded-full bg-white/10 px-2 py-0.5 text-[10px]",children:o})]},t)})]})]})]}),e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{S(t=>!t),i(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 hover:bg-white/10 w-full",children:["Sort: ",e.jsxs("span",{className:"font-semibold",children:[oe(d)," ",le]})]}),e.jsx("div",{className:`absolute z-20 mt-1 w-48 rounded-md border border-overlay-10 bg-bg/95 shadow-xl overflow-hidden transition transform origin-top ${j?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:["name","subsystem","due","progress"].map(t=>e.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs hover:bg-white/10 ${d===t?"bg-white/10":""}`,onClick:()=>{d===t?L(s=>s==="asc"?"desc":"asc"):u(t),S(!1)},children:[oe(t)," ",d===t?le:""]},t))})]}),(P||j)&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{i(!1),S(!1)}})]}),e.jsx("div",{className:"w-full mt-2 mb-4",children:e.jsx("input",{ref:ve,type:"text",value:R,onChange:Ne,placeholder:"Search projects...",className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 focus:bg-white/10 w-full focus:outline-none"})}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2",children:_e.map(t=>e.jsx(qe,{project:t,owners:t.owner_ids?.map(s=>Se.get(s)).filter(Boolean)??[],tasks:I.get(t.id)??[],compact:!0},t.id))}),T&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>M(!1)}),e.jsxs("div",{className:"relative w-[95vw] max-w-lg rounded-2xl border border-white/10 bg-bg/95 backdrop-blur-sm shadow-2xl p-5 overflow-auto max-h-[92vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Create Project"}),e.jsx("button",{onClick:()=>M(!1),"aria-label":"Close",className:"h-8 w-8 inline-flex items-center justify-center rounded hover:bg-white/10",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Project name",value:N,onChange:t=>E(t.target.value)}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Design link (optional)",value:w,onChange:t=>_(t.target.value)}),e.jsx("textarea",{className:"px-3 py-2 rounded w-full",placeholder:"Project description (optional)",value:F,onChange:t=>q(t.target.value)}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{className:"px-3 py-2 rounded w-full dark-select",value:Z,onChange:t=>ee(t.target.value),children:[e.jsx("option",{value:"",children:"Select subsystem…"}),e.jsx("option",{children:"Aero"}),e.jsx("option",{children:"Business"}),e.jsx("option",{children:"Composites"}),e.jsx("option",{children:"Controls"}),e.jsx("option",{children:"Data Acquisition"}),e.jsx("option",{children:"Electrical IC"}),e.jsx("option",{children:"Electrical EV"}),e.jsx("option",{children:"Finance"}),e.jsx("option",{children:"Frame"}),e.jsx("option",{children:"Manufacturing"}),e.jsx("option",{children:"Powertrain EV"}),e.jsx("option",{children:"Powertrain IC"}),e.jsx("option",{children:"Suspension"})]}),e.jsx("input",{type:"date",className:"px-3 py-2 rounded w-full",value:J,onChange:t=>Q(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted uppercase tracking-caps",children:"Owners"}),e.jsx(Ve,{mode:"multi",people:n,selectedIds:r,onAdd:t=>ne(t),onRemove:t=>ne(t),triggerLabel:r.length?`${r.length} selected`:"Add/Remove",buttonClassName:"ml-auto text-[11px] px-2 py-1 rounded bg-white/10 border border-white/20",maxItems:5})]}),e.jsx("button",{onClick:Fe,disabled:!N.trim()||te,className:`w-full px-3 py-2 rounded border border-border text-sm text-center ${N.trim()?"bg-overlay-6 hover:bg-overlay-5":"bg-overlay-6 opacity-50 cursor-not-allowed"}`,children:te?"Saving…":"Save Project"})]})]})]})]})}export{it as default};
