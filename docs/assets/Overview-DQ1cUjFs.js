import{u as Le,j as e,L as We,r,f as _e,a as le,b as Oe,c as Ie,d as Re,i as Be,e as Fe}from"./index-Bf8EZJGZ.js";import{P as be}from"./ProgressBar-DTbBSMY1.js";import{L as Xe}from"./LinkButton-DkdK3Pd2.js";import{P as ze}from"./PersonSelectPopover-_Pj7svpb.js";import{R as ie,A as ce,X as de,Y as ue,C as xe,T as me,a as he}from"./AreaChart-Cy4luxlo.js";function Ge({project:n,owners:i,tasks:a,compact:m=!1}){const[y]=Le(),g=a.length,x=a.filter(h=>h.status==="Complete").length,b=g>0?x/g*100:0,j=`${Math.round(b)}%`,v=a.reduce((h,N)=>h+(N.ranked_points??(N.status==="Complete"?35:10)),0),c=m?"rounded-xl bg-white/5 border border-white/10 p-2.5 space-y-2":"rounded-2xl bg-white/5 border border-white/10 p-3 space-y-2.5",d=m?"text-base font-semibold hover:underline":"text-lg font-semibold hover:underline",C=m?"h-2":"h-2.5";return e.jsxs("div",{className:c,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"flex items-center min-w-0",children:e.jsx(We,{to:`/project/${n.id}`,className:`${d} truncate`,title:n.name,children:n.name})}),n.design_link&&e.jsx("div",{className:"flex gap-2 shrink-0",children:m?e.jsx("a",{href:n.design_link,target:"_blank",rel:"noreferrer",className:"inline-flex items-center h-7 px-2 rounded bg-brand-blue/40 hover:bg-brand-blue/60 text-[11px] font-medium",children:"Docs"}):e.jsx(Xe,{href:n.design_link,children:"Design Docs"})})]}),n.subsystem&&e.jsx("div",{className:"text-xs uppercase tracking-caps font-medium text-accent/70",children:n.subsystem}),e.jsxs("div",{className:"flex items-start justify-between gap-2 text-tick text-muted",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:"OWNERS"}),i.length>0?e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white/10 whitespace-normal break-words text-[10px]",style:{paddingTop:"1px",paddingBottom:"1px"},children:i.length}):e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white/10 whitespace-normal break-words text-[10px]",style:{paddingTop:"1px",paddingBottom:"1px"},children:"N/A"})]})}),n.due_date&&(()=>{let h=null;const N=n.due_date,D=N.match(/(\d{4})[\/\-]?(\d{2})[\/\-]?(\d{2})/);if(D){const[,M,S,A]=D;h=new Date(Number(M),Number(S)-1,Number(A))}else isNaN(Date.parse(N))||(h=new Date(N));if(h){const M=h.toLocaleString("en-US",{weekday:m?"short":"long"}),S=h.toLocaleString("en-US",{month:m?"short":"long"}),A=h.getDate(),T=p=>p===1||p===21||p===31?"st":p===2||p===22?"nd":p===3||p===23?"rd":"th";return e.jsxs("span",{className:"text-[10px] uppercase tracking-wide opacity-80 whitespace-nowrap ml-2 shrink-0",children:["Due ",M," ",S," ",A,T(A)]})}return null})()]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[e.jsx("div",{className:"text-[11px] font-semibold",children:j}),e.jsxs("div",{className:"text-tick text-muted flex items-center gap-2",children:[e.jsx("span",{children:g>0?`${x}/${g} tasks`:"No tasks"}),y&&e.jsx("span",{className:"opacity-80",children:"·"}),y&&e.jsxs("span",{className:"font-semibold text-[10px]",children:["Σ +",v]})]})]}),e.jsx(be,{value:b,heightClass:C,color:b===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})]})}function Ve({className:n="w-5 h-5 text-yellow-500 inline ml-1"}){return e.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6 2a1 1 0 00-1 1v2a1 1 0 001 1h8a1 1 0 001-1V3a1 1 0 00-1-1H6zm8 4H6v1a6 6 0 005 5.92V15H9a1 1 0 000 2h2a1 1 0 000-2h-2v-2.08A6 6 0 0014 7V6z"})})}function Ye({children:n,slideIndexInitial:i=0,onIndexChange:a,dots:m=!0,frameClassName:y}){const g=Array.isArray(n)?n:[n],[x,b]=r.useState(i),j=r.useRef(null),v=r.useRef(null),c=r.useRef({startX:0,currentX:0,dragging:!1,width:0});r.useEffect(()=>{a?.(x)},[x]);const d=(o,u=!0)=>{const w=v.current,$=j.current;if(!w||!$)return;const W=w.clientWidth;c.current.width=W,$.style.transition=u?"transform 320ms cubic-bezier(0.22, 1, 0.36, 1)":"none",$.style.transform=`translateX(${-o*W}px)`},C=o=>{const u=v.current;u&&(c.current={startX:o,currentX:o,dragging:!0,width:u.clientWidth})},h=o=>{if(!c.current.dragging)return;c.current.currentX=o;const u=o-c.current.startX,w=j.current;w&&(w.style.transition="none",w.style.transform=`translateX(${u-x*c.current.width}px)`)},N=()=>{if(!c.current.dragging)return;const o=c.current.currentX-c.current.startX,u=Math.max(40,c.current.width*.2);let w=x;o>u?w=Math.max(0,x-1):o<-u&&(w=Math.min(g.length-1,x+1)),d(w,!0),b(w),c.current.dragging=!1},D=o=>C(o.touches[0].clientX),M=o=>h(o.touches[0].clientX),S=()=>N(),A=o=>{o.preventDefault(),C(o.clientX)},T=o=>h(o.clientX),p=()=>N(),O=()=>N();return r.useEffect(()=>{const o=()=>{d(x,!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[x]),r.useEffect(()=>{d(x,!0)},[x]),e.jsx("div",{className:"w-full select-none",children:e.jsxs("div",{ref:v,className:`relative overflow-hidden rounded-2xl ${y||""}`,onTouchStart:D,onTouchMove:M,onTouchEnd:S,onMouseDown:A,onMouseMove:T,onMouseUp:p,onMouseLeave:O,children:[e.jsx("div",{ref:j,className:"flex",style:{willChange:"transform"},children:g.map((o,u)=>e.jsx("div",{className:"w-full shrink-0 px-1",children:o},u))}),m&&e.jsx("div",{className:"mt-3 mb-2 flex items-center justify-center gap-2",children:g.map((o,u)=>e.jsx("button",{"aria-label":`Show slide ${u+1}`,className:`w-2.5 h-2.5 rounded-full transition ${x===u?"bg-white":"bg-white/30 hover:bg-white/60"}`,onClick:()=>b(u)},u))})]})})}function pe({show:n,children:i}){const a=r.useRef(null);return r.useEffect(()=>{a.current&&(n?(a.current.style.opacity="1",a.current.style.transform="translateY(0)",a.current.style.pointerEvents="auto"):(a.current.style.opacity="0",a.current.style.transform="translateY(20px)",a.current.style.pointerEvents="none"))},[n]),e.jsx("div",{ref:a,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"opacity 0.4s, transform 0.4s",opacity:n?1:0,transform:n?"translateY(0)":"translateY(20px)",pointerEvents:n?"auto":"none"},children:i})}const Ke=[{label:"Mon",present:4},{label:"Tue",present:6},{label:"Wed",present:5},{label:"Thu",present:9},{label:"Fri",present:8},{label:"Sat",present:12},{label:"Sun",present:16}],He=Array.from({length:30}).map((n,i)=>({label:`${i+1}`,present:Math.max(0,Math.round(5+6*Math.sin(i/4)))})),R={line:["accent"],card:["surface"],border:["border"],text:["text"]},P={accent:"#64C7C9",surface:"#0F1B3A",border:"#24304F",text:"#FFFFFF",overlay:"rgba(255,255,255,0.06)"};function B(n,i){for(const a of n)if(a in P)return P[a];return i}function fe(n,i){if(n.startsWith("#")){const a=parseInt(n.slice(1),16),m=a>>16&255,y=a>>8&255,g=a&255;return`rgba(${m},${y},${g},${i})`}return n.startsWith("rgb")?n.replace(/rgb\(([^)]+)\)/,`rgba($1,${i})`):n}function ge({active:n,payload:i}){if(!n||!i?.length)return null;const a=i[0].payload;return e.jsxs("div",{className:"rounded-xl px-3 py-2 text-sm shadow-lg border",style:{background:P.surface,borderColor:P.border,color:P.text},children:[e.jsx("div",{className:"opacity-70",children:a.label}),e.jsxs("div",{className:"font-semibold",children:[a.present," present"]})]})}function Ue(n){const{weekData:i=Ke,monthData:a=He,className:m,title:y="Attendance"}=n,g=new Date,x=[2,4,6].includes(g.getDay()),[b,j]=r.useState("month"),v=b==="week"?i:a,c=r.useMemo(()=>v.length?v[v.length-1].present:0,[v]),d={line:B(R.line,P.accent),card:B(R.card,P.surface),border:B(R.border,P.border),text:B(R.text,P.text)};return e.jsxs("div",{className:`relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-surface text-text border-border overflow-hidden h-full flex flex-col ${m??""}`,style:{background:d.card,borderColor:d.border,color:d.text},children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 min-w-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-widest opacity-70",children:y}),e.jsx("div",{className:"mt-1 text-xl font-bold leading-tight",children:c}),e.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:x?"Today":"Last meeting"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j("week"),className:`px-1.5 py-0.5 rounded bg-white/10 text-xs border transition ${b==="week"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:d.border},children:"Week"}),e.jsx("button",{onClick:()=>j("month"),className:`px-1.5 py-0.5 rounded bg-white/10 text-xs border transition ${b==="month"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:d.border},children:"Month"})]})]}),e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden flex-1 min-h-0 min-w-0 relative",children:[e.jsx(pe,{show:b==="week",children:e.jsx(ie,{width:"100%",height:"100%",className:"block",children:e.jsxs(ce,{data:i,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:d.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:d.line,stopOpacity:.1})]})}),e.jsx(de,{dataKey:"label",hide:!0}),e.jsx(ue,{hide:!0,domain:[0,C=>Math.max(10,C*1.15)]}),e.jsx(xe,{horizontal:!1,vertical:!1}),e.jsx(me,{content:e.jsx(ge,{}),cursor:{stroke:fe(d.text,.06),strokeWidth:20}}),e.jsx(he,{type:"monotone",dataKey:"present",stroke:d.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})}),e.jsx(pe,{show:b==="month",children:e.jsx(ie,{width:"100%",height:"100%",className:"block",children:e.jsxs(ce,{data:a,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:d.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:d.line,stopOpacity:.1})]})}),e.jsx(de,{dataKey:"label",hide:!0}),e.jsx(ue,{hide:!0,domain:[0,C=>Math.max(10,C*1.15)]}),e.jsx(xe,{horizontal:!1,vertical:!1}),e.jsx(me,{content:e.jsx(ge,{}),cursor:{stroke:fe(d.text,.06),strokeWidth:20}}),e.jsx(he,{type:"monotone",dataKey:"present",stroke:d.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})})]})]})}function Y({label:n,value:i}){return e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 p-3 text-center flex flex-col items-center justify-center min-w-0",children:[e.jsx("div",{className:"text-xl font-semibold leading-tight",children:i}),e.jsx("div",{className:"mt-1 text-xs uppercase text-muted font-medium whitespace-nowrap overflow-hidden text-ellipsis leading-snug",title:n,children:n})]})}function nt(){const[n,i]=r.useState([]),[a,m]=r.useState([]),[y,g]=r.useState([]),[x,b]=r.useState([]),[j,v]=r.useState([]),[c,d]=r.useState("name"),[C,h]=r.useState("asc"),[N,D]=r.useState(!1),[M,S]=r.useState(!1),[A,T]=r.useState(!1),[p,O]=r.useState(""),[o,u]=r.useState([]),[w,$]=r.useState(""),[W,K]=r.useState(""),[H,U]=r.useState(""),[q,J]=r.useState(""),[Q,Z]=r.useState(!1),ee=t=>u(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t]);r.useEffect(()=>{(async()=>{const[t,s,l,f]=await Promise.all([_e(),le(),Oe(),Ie()]);i(t),m(s),g(l),b(f)})()},[]);const F=y.length,je=y.filter(t=>t.status==="Complete").length,X=F?Math.round(je/F*100):0;[...r.useMemo(()=>{const t=new Map;for(const s of a)for(const l of s.owner_ids||[])t.set(l,(t.get(l)||0)+1);return t},[a]).entries()].sort((t,s)=>s[1]-t[1]).slice(0,5).map(([t,s])=>({name:n.find(l=>l.id===t)?.name||t,count:s}));const we=n.map(t=>{const s=y.filter(l=>l.assignee_id===t.id&&l.status==="Complete").length;return{...t,completed:s}}).sort((t,s)=>s.completed-t.completed).slice(0,5),ye=new Map(n.map(t=>[t.id,t])),I=new Map;for(const t of y){const s=I.get(t.project_id)??[];s.push(t),I.set(t.project_id,s)}const te=t=>{const s=I.get(t.id)??[];return s.length?s.filter(f=>f.status==="Complete").length/s.length:0},ve=Re(),Ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function ke(t){const s=new Date,l=[];let f=0,k=new Date(s);for(;l.length<3&&f<14;){const E=k.getDay();if([2,4,6].includes(E)){const z=k.toISOString().slice(0,10),G=t.filter(_=>new Date(_.date).toISOString().slice(0,10)===z).reduce((_,oe)=>_+oe.present,0);l.unshift({label:Ne[E],present:G})}k.setDate(k.getDate()-1),f++}return l}function Ce(t){const s=new Date,l=30;return Array.from({length:l}).map((f,k)=>{const E=new Date(s);E.setDate(s.getDate()-(l-1-k));const z=E.getDay();if(![2,4,6].includes(z))return null;const G=E.toISOString().slice(0,10),_=t.filter(V=>new Date(V.date).toISOString().slice(0,10)===G).reduce((V,$e)=>V+$e.present,0);return{label:`${E.toLocaleString(void 0,{month:"short"})} ${E.getDate()}`,present:_}}).filter(Boolean)}const se=x.map(t=>({date:t.date,present:1})),Se=ke(se),De=Ce(se).filter(t=>t!==null),L=r.useMemo(()=>a.filter(t=>!t.archived),[a]),ne=r.useMemo(()=>{const t=new Set;for(const s of L)s.subsystem&&t.add(s.subsystem);return Array.from(t).sort()},[L]),Pe=r.useMemo(()=>{const t=new Map;for(const s of L)s.subsystem&&t.set(s.subsystem,(t.get(s.subsystem)||0)+1);return t},[L]),Me=[...j.length?L.filter(t=>t.subsystem&&j.includes(t.subsystem)):L].sort((t,s)=>{let l=0;if(c==="name")l=t.name.localeCompare(s.name);else if(c==="due"){const f=t.due_date,k=s.due_date;f&&k?l=f.localeCompare(k):f&&!k?l=-1:!f&&k?l=1:l=0}else c==="progress"?l=te(t)-te(s):l=(t.subsystem||"").localeCompare(s.subsystem||"")||t.name.localeCompare(s.name);return C==="asc"?l:-l}),re=t=>t==="name"?"Name":t==="due"?"Due date":t==="progress"?"Progress":"Subsystem",ae=C==="asc"?"↑":"↓";r.useEffect(()=>{const t=s=>{s.key==="Escape"&&(D(!1),S(!1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]);const Ae=ve?.uid||null,Te=Be(Ae);async function Ee(){if(p.trim())try{Z(!0),await Fe({name:p.trim(),owner_ids:o,design_link:w.trim()||void 0,description:W.trim()||void 0,due_date:H||void 0,subsystem:q||void 0});const[t]=await Promise.all([le()]);m(t),O(""),u([]),$(""),K(""),U(""),J(""),T(!1)}finally{Z(!1)}}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Team Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx(Y,{label:"Members",value:n.length}),e.jsx(Y,{label:"Projects",value:a.length}),e.jsx(Y,{label:"Tasks",value:F})]}),e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 p-2 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs tracking-caps text-muted uppercase",children:"Total Task Completion"}),e.jsxs("div",{className:"text-xl font-semibold leading-tight",children:[X,"%"]})]}),e.jsx(be,{value:X,heightClass:"h-3",color:X===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})]})]}),e.jsx("div",{className:"min-w-0",children:e.jsxs(Ye,{slideIndexInitial:0,onIndexChange:()=>{},dots:!0,children:[e.jsx(Ue,{title:"Attendance",weekData:Se,monthData:De,className:"h-48 sm:h-56"}),e.jsxs("div",{className:"relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-white/5 text-text border-white/10 overflow-hidden h-48 sm:h-56 flex flex-col",children:[e.jsx("h2",{className:"text-xs md:text-sm mb-2 text-muted uppercase tracking-caps",style:{fontWeight:400},children:"All-Time Leaderboard"}),e.jsx("div",{className:"h-full overflow-hidden",children:e.jsxs("table",{className:"w-full table-fixed text-xs sm:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8 py-1.5 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"#"}),e.jsx("th",{className:"py-1.5 px-2 text-left text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Name"}),e.jsx("th",{className:"w-24 md:w-28 py-1.5 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Tasks"})]})}),e.jsx("tbody",{className:"align-middle",children:we.slice(0,5).map((t,s)=>e.jsxs("tr",{className:s===0?"bg-yellow-100/40":"",children:[e.jsx("td",{className:"py-1.5 px-2 text-center",children:s+1}),e.jsx("td",{className:"py-1.5 px-2",children:e.jsxs("div",{className:"truncate flex items-center gap-1",children:[t.name,s===0&&e.jsx(Ve,{})]})}),e.jsx("td",{className:"py-1.5 px-2 text-center",children:t.completed})]},t.id))})]})})]})]})})]}),e.jsxs("div",{className:"mt-6 mb-2 flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Projects"}),Te&&e.jsxs("button",{"aria-label":"Create project",onClick:()=>T(!0),className:"group inline-flex items-center justify-center h-7 w-7 rounded-md border border-accent/40 bg-accent/15 hover:bg-accent/25 text-accent transition shadow-sm hover:shadow-accent/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.1",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),e.jsx("span",{className:"sr-only",children:"Add project"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted mb-1 uppercase tracking-caps",children:[e.jsxs("div",{className:"flex items-center gap-1",title:"Grey = To-do / Not started",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-400"})," To-do / Not started"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-400"})," In Progress"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 w-full",children:[e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{D(t=>!t),S(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 hover:bg-white/10 w-full",children:["Subsystems: ",e.jsx("span",{className:"font-semibold",children:j.length?`${j.length} selected`:"All"})]}),e.jsxs("div",{className:`absolute z-20 mt-1 w-64 rounded-md border border-overlay-10 bg-bg/95 shadow-xl overflow-hidden transition transform origin-top ${N?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:e.jsx("button",{className:"w-full px-3 py-2 rounded-md text-xs sm:text-sm font-semibold bg-red-500/15 hover:bg-red-500/25 text-red-200 focus:outline-none focus-visible:outline-none",onClick:()=>v([]),children:"Clear selection"})}),e.jsxs("div",{className:"max-h-60 overflow-auto p-1",children:[ne.length===0&&e.jsx("div",{className:"px-3 py-2 text-xs text-muted uppercase tracking-caps",children:"No subsystems"}),ne.map(t=>{const s=j.includes(t),l=Pe.get(t)??0;return e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-xs rounded hover:bg-white/10 cursor-pointer focus:outline-none focus-visible:outline-none",children:[e.jsx("input",{type:"checkbox",className:"accent-accent focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",checked:s,onChange:()=>{v(f=>s?f.filter(k=>k!==t):[...f,t])}}),e.jsx("span",{className:"truncate",children:t}),e.jsx("span",{className:"ml-auto inline-flex items-center justify-center rounded-full bg-white/10 px-2 py-0.5 text-[10px]",children:l})]},t)})]})]})]}),e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{S(t=>!t),D(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-white/10 bg-white/5 hover:bg-white/10 w-full",children:["Sort: ",e.jsxs("span",{className:"font-semibold",children:[re(c)," ",ae]})]}),e.jsx("div",{className:`absolute z-20 mt-1 w-48 rounded-md border border-overlay-10 bg-bg/95 shadow-xl overflow-hidden transition transform origin-top ${M?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:["name","subsystem","due","progress"].map(t=>e.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs hover:bg-white/10 ${c===t?"bg-white/10":""}`,onClick:()=>{c===t?h(s=>s==="asc"?"desc":"asc"):d(t),S(!1)},children:[re(t)," ",c===t?ae:""]},t))})]}),(N||M)&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{D(!1),S(!1)}})]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2",children:Me.map(t=>e.jsx(Ge,{project:t,owners:t.owner_ids?.map(s=>ye.get(s)).filter(Boolean)??[],tasks:I.get(t.id)??[],compact:!0},t.id))}),A&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative w-[95vw] max-w-lg rounded-2xl border border-white/10 bg-bg/95 backdrop-blur-sm shadow-2xl p-5 overflow-auto max-h-[92vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Create Project"}),e.jsx("button",{onClick:()=>T(!1),"aria-label":"Close",className:"h-8 w-8 inline-flex items-center justify-center rounded hover:bg-white/10",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Project name",value:p,onChange:t=>O(t.target.value)}),e.jsx("input",{className:"px-3 py-2 rounded w-full",placeholder:"Design link (optional)",value:w,onChange:t=>$(t.target.value)}),e.jsx("textarea",{className:"px-3 py-2 rounded w-full",placeholder:"Project description (optional)",value:W,onChange:t=>K(t.target.value)}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{className:"px-3 py-2 rounded w-full dark-select",value:q,onChange:t=>J(t.target.value),children:[e.jsx("option",{value:"",children:"Select subsystem…"}),e.jsx("option",{children:"Aero"}),e.jsx("option",{children:"Business"}),e.jsx("option",{children:"Composites"}),e.jsx("option",{children:"Controls"}),e.jsx("option",{children:"Data Acquisition"}),e.jsx("option",{children:"Electrical IC"}),e.jsx("option",{children:"Electrical EV"}),e.jsx("option",{children:"Finance"}),e.jsx("option",{children:"Frame"}),e.jsx("option",{children:"Manufacturing"}),e.jsx("option",{children:"Powertrain EV"}),e.jsx("option",{children:"Powertrain IC"}),e.jsx("option",{children:"Suspension"})]}),e.jsx("input",{type:"date",className:"px-3 py-2 rounded w-full",value:H,onChange:t=>U(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted uppercase tracking-caps",children:"Owners"}),e.jsx(ze,{mode:"multi",people:n,selectedIds:o,onAdd:t=>ee(t),onRemove:t=>ee(t),triggerLabel:o.length?`${o.length} selected`:"Add/Remove",buttonClassName:"ml-auto text-[11px] px-2 py-1 rounded bg-white/10 border border-white/20",maxItems:5})]}),e.jsx("button",{onClick:Ee,disabled:!p.trim()||Q,className:`w-full px-3 py-2 rounded border border-border text-sm text-center ${p.trim()?"bg-overlay-6 hover:bg-overlay-5":"bg-overlay-6 opacity-50 cursor-not-allowed"}`,children:Q?"Saving…":"Save Project"})]})]})]})]})}export{nt as default};
