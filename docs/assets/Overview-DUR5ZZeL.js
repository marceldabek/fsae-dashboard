import{j as i,u as Kt,L as Ut,r as x,f as Gt,D as Ve,w as zt,y as qt,E as Xt,c as Ht,R as Yt}from"./index-D3k_KiqT.js";import{P as rt}from"./ProgressBar-BTvKeuFa.js";import{A as Le,P as Jt}from"./ProjectCreateModal-DopDwCOW.js";import{R as _e,o as We,X as $e,Y as Be,m as Ke,T as Ue,p as Ge}from"./AreaChart-Bvs4GRYa.js";import{c as Zt}from"./modal-nQA6oMK7.js";import"./card-mTLGtmKA.js";import"./clsx-B-dksMZM.js";function Qt({href:e,children:t}){return e?i.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-3 py-1.5 rounded bg-card/80 hover:bg-card transition",children:t}):null}function es(...e){return e.filter(Boolean).join(" ")}function ts({className:e,...t}){return i.jsx("div",{className:es("animate-pulse rounded-md bg-muted",e),...t})}function ss({project:e,owners:t,tasks:s,compact:r=!1}){function n(g){return g===1?.5:g===3?1:g===10?3:g===6?2:g===15?5:g===40?10:g===65?15:g===98?20:g===150?25:g===200?30:Math.max(0,Math.round(g/4))}const o=Math.round(s.reduce((g,N)=>g+(typeof N.ranked_points=="number"?n(N.ranked_points):2),0)),[a]=Kt(),l=s.length,u=s.filter(g=>g.status==="Complete").length,f=l>0?u/l*100:0,d=`${Math.round(f)}%`,p=s.reduce((g,N)=>g+(N.ranked_points??(N.status==="Complete"?35:10)),0),b=r?"rounded-xl bg-card dark:bg-surface border border-border p-2.5 shadow-sm":"rounded-2xl bg-card dark:bg-surface border border-border p-3 shadow-sm",A=r?"text-base font-semibold hover:underline mb-0":"text-lg font-semibold hover:underline mb-0",M=r?"h-2":"h-2.5";return i.jsxs("div",{className:b,children:[i.jsxs("div",{className:"flex items-start justify-between gap-0",children:[i.jsx("div",{className:"flex items-center min-w-0",children:i.jsx(Ut,{to:`/project/${e.id}`,className:`${A} truncate`,title:e.name,children:e.name})}),e.design_link&&i.jsx("div",{className:"flex gap-2 shrink-0",children:r?i.jsx("a",{href:e.design_link,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-1.5 py-0 rounded bg-card dark:bg-surface text-xs border border-[#24304F] transition outline outline-2 outline-[#24304F] font-normal",style:{background:"rgba(255,255,255,0.10)",borderColor:"#24304F",color:"#FFFFFF",fontWeight:"400"},children:"Link"}):i.jsx(Qt,{href:e.design_link,children:"Design Docs"})})]}),i.jsx("div",{className:"min-h-4 h-4 flex items-center mb-2",children:e.subsystem?i.jsx("div",{className:"text-xs uppercase tracking-caps font-normal text-muted leading-none",children:e.subsystem}):i.jsx(ts,{className:"h-3 w-16 invisible"})}),i.jsx("div",{className:"flex items-center justify-between gap-2 text-tick text-muted leading-none",children:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:"OWNERS"}),t.length>0?i.jsxs("div",{className:"flex -space-x-1 h-6 items-center",children:[t.slice(0,6).map(g=>{const N=g.name?g.name.split(/\s+/).filter(Boolean).slice(0,2).map(T=>T[0]?.toUpperCase()).join(""):void 0;return i.jsx(Le,{size:"xs",alt:g.name,src:g.avatar_url||void 0,initials:g.avatar_url?void 0:N,className:"ring-2 ring-card dark:ring-surface"},g.id)}),t.length>6&&i.jsx(Le,{size:"xs",className:"ring-2 ring-card dark:ring-surface",placeholder:i.jsxs("span",{className:"flex items-center justify-center text-[10px] font-semibold text-quaternary",children:["+",t.length-6]})})]}):i.jsx("div",{className:"h-6 flex items-center px-1.5 rounded bg-white/10 whitespace-normal break-words",children:i.jsx("span",{className:"text-[10px] leading-none",children:"N/A"})})]})}),e.due_date&&(()=>{let g=null;const N=e.due_date,T=N.match(/(\d{4})[\/\-]?(\d{2})[\/\-]?(\d{2})/);if(T){const[,E,k,C]=T;g=new Date(Number(E),Number(k)-1,Number(C))}else isNaN(Date.parse(N))||(g=new Date(N));if(g){const E=g.toLocaleString("en-US",{weekday:r?"short":"long"}),k=g.toLocaleString("en-US",{month:r?"short":"long"}),C=g.getDate(),v=h=>h===1||h===21||h===31?"st":h===2||h===22?"nd":h===3||h===23?"rd":"th";return i.jsxs("span",{className:"text-[10px] uppercase tracking-wide opacity-80 whitespace-nowrap ml-2 shrink-0 leading-none",children:[E," ",k," ",C,v(C)]})}return null})()]})}),i.jsxs("div",{className:"flex items-center justify-between gap-2 leading-none",children:[i.jsx("div",{className:"text-[11px] text-muted font-normal",children:d}),i.jsxs("div",{className:"text-muted flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:l>0?`${u}/${l} tasks`:"No tasks"}),i.jsx("span",{className:"opacity-80",children:"·"}),i.jsxs("span",{className:"text-[10px] font-normal opacity-80",children:[o," hours"]}),a&&i.jsx("span",{className:"opacity-80",children:"·"}),a&&i.jsx("span",{className:"text-[10px] font-normal",style:{color:"#94a3b8"},children:`Σ +${p}`})]})]}),i.jsx("div",{className:"mt-1",children:i.jsx(rt,{value:f,heightClass:M,color:f===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})})]})}function ns({className:e="w-5 h-5 text-yellow-500 inline ml-1"}){return i.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M6 2a1 1 0 00-1 1v2a1 1 0 001 1h8a1 1 0 001-1V3a1 1 0 00-1-1H6zm8 4H6v1a6 6 0 005 5.92V15H9a1 1 0 000 2h2a1 1 0 000-2h-2v-2.08A6 6 0 0014 7V6z"})})}function rs({children:e,slideIndexInitial:t=0,onIndexChange:s,dots:r=!0,frameClassName:n}){const o=Array.isArray(e)?e:[e],[a,l]=x.useState(t),u=x.useRef(null),f=x.useRef(null),d=x.useRef({startX:0,currentX:0,dragging:!1,width:0});x.useEffect(()=>{s?.(a)},[a]);const p=(h,j=!0)=>{const y=f.current,P=u.current;if(!y||!P)return;const I=y.clientWidth;d.current.width=I,P.style.transition=j?"transform 320ms cubic-bezier(0.22, 1, 0.36, 1)":"none",P.style.transform=`translateX(${-h*I}px)`},b=h=>{const j=f.current;j&&(d.current={startX:h,currentX:h,dragging:!0,width:j.clientWidth})},A=h=>{if(!d.current.dragging)return;d.current.currentX=h;const j=h-d.current.startX,y=u.current;y&&(y.style.transition="none",y.style.transform=`translateX(${j-a*d.current.width}px)`)},M=()=>{if(!d.current.dragging)return;const h=d.current.currentX-d.current.startX,j=Math.max(40,d.current.width*.2);let y=a;h>j?y=Math.max(0,a-1):h<-j&&(y=Math.min(o.length-1,a+1)),p(y,!0),l(y),d.current.dragging=!1},g=h=>b(h.touches[0].clientX),N=h=>A(h.touches[0].clientX),T=()=>M(),E=h=>{h.preventDefault(),b(h.clientX)},k=h=>A(h.clientX),C=()=>M(),v=()=>M();return x.useEffect(()=>{const h=()=>{p(a,!1)};return window.addEventListener("resize",h),h(),()=>window.removeEventListener("resize",h)},[a]),x.useEffect(()=>{p(a,!0)},[a]),i.jsx("div",{className:"w-full select-none",children:i.jsxs("div",{ref:f,className:`relative overflow-hidden rounded-2xl ${n||""}`,onTouchStart:g,onTouchMove:N,onTouchEnd:T,onMouseDown:E,onMouseMove:k,onMouseUp:C,onMouseLeave:v,children:[i.jsx("div",{ref:u,className:"flex",style:{willChange:"transform"},children:o.map((h,j)=>i.jsx("div",{className:"w-full shrink-0 px-1",children:h},j))}),r&&i.jsx("div",{className:"mt-3 mb-2 flex items-center justify-center gap-2",children:o.map((h,j)=>i.jsx("button",{"aria-label":`Show slide ${j+1}`,className:`w-2.5 h-2.5 rounded-full border border-border transition ${a===j?"bg-foreground":"bg-muted-foreground/40 hover:bg-foreground/70"}`,onClick:()=>l(j)},j))})]})})}function ze({show:e,children:t}){const s=x.useRef(null);return x.useEffect(()=>{s.current&&(e?(s.current.style.opacity="1",s.current.style.transform="translateY(0)",s.current.style.pointerEvents="auto"):(s.current.style.opacity="0",s.current.style.transform="translateY(20px)",s.current.style.pointerEvents="none"))},[e]),i.jsx("div",{ref:s,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"opacity 0.4s, transform 0.4s",opacity:e?1:0,transform:e?"translateY(0)":"translateY(20px)",pointerEvents:e?"auto":"none"},children:t})}const is=[{label:"Mon",present:4},{label:"Tue",present:6},{label:"Wed",present:5},{label:"Thu",present:9},{label:"Fri",present:8},{label:"Sat",present:12},{label:"Sun",present:16}],os=Array.from({length:30}).map((e,t)=>({label:`${t+1}`,present:Math.max(0,Math.round(5+6*Math.sin(t/4)))})),as={line:"#98D7D8",border:"hsl(var(--border))"};function qe({active:e,payload:t}){if(!e||!t?.length)return null;const s=t[0].payload;return i.jsxs("div",{className:"rounded-xl px-3 py-2 text-sm shadow-lg border",style:{background:"hsl(var(--card))",borderColor:"hsl(var(--border))",color:"hsl(var(--foreground))"},children:[i.jsx("div",{className:"opacity-70",children:s.label}),i.jsxs("div",{className:"font-semibold",children:[s.present," present"]})]})}function cs(e){const{weekData:t=is,monthData:s=os,className:r,title:n="Attendance"}=e,o=new Date,a=[2,4,6].includes(o.getDay()),[l,u]=x.useState("month"),f=l==="week"?t:s,d=x.useMemo(()=>f.length?f[f.length-1].present:0,[f]),p=as;return i.jsxs("div",{className:`relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-border overflow-hidden h-full flex flex-col ${r??""}`,children:[i.jsxs("div",{className:"flex items-center justify-between gap-4 min-w-0",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-widest opacity-70",children:n}),i.jsx("div",{className:"mt-1 text-xl font-bold leading-tight",children:d}),i.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:a?"Today":"Last meeting"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>u("week"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${l==="week"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:p.border},children:"Week"}),i.jsx("button",{onClick:()=>u("month"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${l==="month"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:p.border},children:"Month"})]})]}),i.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden flex-1 min-h-0 min-w-0 relative",children:[i.jsx(ze,{show:l==="week",children:i.jsx(_e,{width:"100%",height:"100%",className:"block",children:i.jsxs(We,{data:t,margin:{top:8,right:16,bottom:8,left:12},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:p.line,stopOpacity:.45}),i.jsx("stop",{offset:"100%",stopColor:p.line,stopOpacity:.1})]})}),i.jsx($e,{dataKey:"label",hide:!0}),i.jsx(Be,{hide:!0,domain:[0,b=>Math.max(10,b*1.15)]}),i.jsx(Ke,{horizontal:!1,vertical:!1}),i.jsx(Ue,{content:i.jsx(qe,{}),cursor:{stroke:"hsl(var(--foreground) / 0.06)",strokeWidth:20}}),i.jsx(Ge,{type:"monotone",dataKey:"present",stroke:p.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})}),i.jsx(ze,{show:l==="month",children:i.jsx(_e,{width:"100%",height:"100%",className:"block",children:i.jsxs(We,{data:s,margin:{top:8,right:16,bottom:8,left:12},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:p.line,stopOpacity:.45}),i.jsx("stop",{offset:"100%",stopColor:p.line,stopOpacity:.1})]})}),i.jsx($e,{dataKey:"label",hide:!0}),i.jsx(Be,{hide:!0,domain:[0,b=>Math.max(10,b*1.15)]}),i.jsx(Ke,{horizontal:!1,vertical:!1}),i.jsx(Ue,{content:i.jsx(qe,{}),cursor:{stroke:"hsl(var(--foreground) / 0.06)",strokeWidth:20}}),i.jsx(Ge,{type:"monotone",dataKey:"present",stroke:p.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})})]})]})}function it(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const ls=typeof window<"u",ds=ls?x.useLayoutEffect:x.useEffect;function us(e,t){e.indexOf(t)===-1&&e.push(t)}function fs(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const $=(e,t,s)=>s>t?t:s<e?e:s;let ot=()=>{};const Z={},re=e=>e,hs=(e,t)=>s=>t(e(s)),ke=(...e)=>e.reduce(hs),at=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class ms{constructor(){this.subscriptions=[]}add(t){return us(this.subscriptions,t),()=>fs(this.subscriptions,t)}notify(t,s,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,s,r);else for(let o=0;o<n;o++){const a=this.subscriptions[o];a&&a(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ie=e=>e*1e3,W=e=>e/1e3;function ct(e,t){return t?e*(1e3/t):0}const lt=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,ps=1e-7,gs=12;function xs(e,t,s,r,n){let o,a,l=0;do a=t+(s-t)/2,o=lt(a,r,n)-e,o>0?s=a:t=a;while(Math.abs(o)>ps&&++l<gs);return a}function X(e,t,s,r){if(e===t&&s===r)return re;const n=o=>xs(o,0,1,e,s);return o=>o===0||o===1?o:lt(n(o),t,r)}const dt=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ut=e=>t=>1-e(1-t),ft=X(.33,1.53,.69,.99),Ne=ut(ft),bs=dt(Ne),ys=e=>(e*=2)<1?.5*Ne(e):.5*(2-Math.pow(2,-10*(e-1))),Te=e=>1-Math.sin(Math.acos(e)),vs=ut(Te),ws=dt(Te),js=X(.42,0,1,1),ks=X(0,0,.58,1),ht=X(.42,0,.58,1),Ns=e=>Array.isArray(e)&&typeof e[0]!="number",Ts=e=>Array.isArray(e)&&typeof e[0]=="number",Ss={linear:re,easeIn:js,easeInOut:ht,easeOut:ks,circIn:Te,circInOut:ws,circOut:vs,backIn:Ne,backInOut:bs,backOut:ft,anticipate:ys},Ms=e=>typeof e=="string",Xe=e=>{if(Ts(e)){ot(e.length===4);const[t,s,r,n]=e;return X(t,s,r,n)}else if(Ms(e))return Ss[e];return e},Y=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Cs(e,t){let s=new Set,r=new Set,n=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(d){a.has(d)&&(f.schedule(d),e()),d(l)}const f={schedule:(d,p=!1,b=!1)=>{const M=b&&n?s:r;return p&&a.add(d),M.has(d)||M.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(l=d,n){o=!0;return}n=!0,[s,r]=[r,s],s.forEach(u),s.clear(),n=!1,o&&(o=!1,f.process(d))}};return f}const Ds=40;function As(e,t){let s=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},o=()=>s=!0,a=Y.reduce((k,C)=>(k[C]=Cs(o),k),{}),{setup:l,read:u,resolveKeyframes:f,preUpdate:d,update:p,preRender:b,render:A,postRender:M}=a,g=()=>{const k=Z.useManualTiming?n.timestamp:performance.now();s=!1,Z.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(k-n.timestamp,Ds),1)),n.timestamp=k,n.isProcessing=!0,l.process(n),u.process(n),f.process(n),d.process(n),p.process(n),b.process(n),A.process(n),M.process(n),n.isProcessing=!1,s&&t&&(r=!1,e(g))},N=()=>{s=!0,r=!0,n.isProcessing||e(g)};return{schedule:Y.reduce((k,C)=>{const v=a[C];return k[C]=(h,j=!1,y=!1)=>(s||N(),v.schedule(h,j,y)),k},{}),cancel:k=>{for(let C=0;C<Y.length;C++)a[Y[C]].cancel(k)},state:n,steps:a}}const{schedule:oe,cancel:mt,state:Q}=As(typeof requestAnimationFrame<"u"?requestAnimationFrame:re,!0);let J;function Fs(){J=void 0}const O={now:()=>(J===void 0&&O.set(Q.isProcessing||Z.useManualTiming?Q.timestamp:performance.now()),J),set:e=>{J=e,queueMicrotask(Fs)}},Es=e=>t=>typeof t=="string"&&t.startsWith(e),Ps=Es("var(--"),Is=e=>Ps(e)?Rs.test(e.split("/*")[0].trim()):!1,Rs=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pt={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},gt={...pt,transform:e=>$(0,1,e)},G=e=>Math.round(e*1e5)/1e5,xt=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Os(e){return e==null}const Vs=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Se=(e,t)=>s=>!!(typeof s=="string"&&Vs.test(s)&&s.startsWith(e)||t&&!Os(s)&&Object.prototype.hasOwnProperty.call(s,t)),bt=(e,t,s)=>r=>{if(typeof r!="string")return r;const[n,o,a,l]=r.match(xt);return{[e]:parseFloat(n),[t]:parseFloat(o),[s]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Ls=e=>$(0,255,e),me={...pt,transform:e=>Math.round(Ls(e))},_={test:Se("rgb","red"),parse:bt("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+me.transform(e)+", "+me.transform(t)+", "+me.transform(s)+", "+G(gt.transform(r))+")"};function _s(e){let t="",s="",r="",n="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),n=e.substring(4,5),t+=t,s+=s,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const ye={test:Se("#"),parse:_s,transform:_.transform},Ws=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),He=Ws("%"),B={test:Se("hsl","hue"),parse:bt("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+He.transform(G(t))+", "+He.transform(G(s))+", "+G(gt.transform(r))+")"},V={test:e=>_.test(e)||ye.test(e)||B.test(e),parse:e=>_.test(e)?_.parse(e):B.test(e)?B.parse(e):ye.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?_.transform(e):B.transform(e),getAnimatableNone:e=>{const t=V.parse(e);return t.alpha=0,V.transform(t)}},$s=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Bs(e){return isNaN(e)&&typeof e=="string"&&(e.match(xt)?.length||0)+(e.match($s)?.length||0)>0}const yt="number",vt="color",Ks="var",Us="var(",Ye="${}",Gs=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ee(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},n=[];let o=0;const l=t.replace(Gs,u=>(V.test(u)?(r.color.push(o),n.push(vt),s.push(V.parse(u))):u.startsWith(Us)?(r.var.push(o),n.push(Ks),s.push(u)):(r.number.push(o),n.push(yt),s.push(parseFloat(u))),++o,Ye)).split(Ye);return{values:s,split:l,indexes:r,types:n}}function wt(e){return ee(e).values}function jt(e){const{split:t,types:s}=ee(e),r=t.length;return n=>{let o="";for(let a=0;a<r;a++)if(o+=t[a],n[a]!==void 0){const l=s[a];l===yt?o+=G(n[a]):l===vt?o+=V.transform(n[a]):o+=n[a]}return o}}const zs=e=>typeof e=="number"?0:V.test(e)?V.getAnimatableNone(e):e;function qs(e){const t=wt(e);return jt(e)(t.map(zs))}const Xs={test:Bs,parse:wt,createTransformer:jt,getAnimatableNone:qs};function pe(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function Hs({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let n=0,o=0,a=0;if(!t)n=o=a=s;else{const l=s<.5?s*(1+t):s+t-s*t,u=2*s-l;n=pe(u,l,e+1/3),o=pe(u,l,e),a=pe(u,l,e-1/3)}return{red:Math.round(n*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function te(e,t){return s=>s>0?t:e}const ae=(e,t,s)=>e+(t-e)*s,ge=(e,t,s)=>{const r=e*e,n=s*(t*t-r)+r;return n<0?0:Math.sqrt(n)},Ys=[ye,_,B],Js=e=>Ys.find(t=>t.test(e));function Je(e){const t=Js(e);if(!t)return!1;let s=t.parse(e);return t===B&&(s=Hs(s)),s}const Ze=(e,t)=>{const s=Je(e),r=Je(t);if(!s||!r)return te(e,t);const n={...s};return o=>(n.red=ge(s.red,r.red,o),n.green=ge(s.green,r.green,o),n.blue=ge(s.blue,r.blue,o),n.alpha=ae(s.alpha,r.alpha,o),_.transform(n))},ve=new Set(["none","hidden"]);function Zs(e,t){return ve.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function Qs(e,t){return s=>ae(e,t,s)}function Me(e){return typeof e=="number"?Qs:typeof e=="string"?Is(e)?te:V.test(e)?Ze:sn:Array.isArray(e)?kt:typeof e=="object"?V.test(e)?Ze:en:te}function kt(e,t){const s=[...e],r=s.length,n=e.map((o,a)=>Me(o)(o,t[a]));return o=>{for(let a=0;a<r;a++)s[a]=n[a](o);return s}}function en(e,t){const s={...e,...t},r={};for(const n in s)e[n]!==void 0&&t[n]!==void 0&&(r[n]=Me(e[n])(e[n],t[n]));return n=>{for(const o in r)s[o]=r[o](n);return s}}function tn(e,t){const s=[],r={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const o=t.types[n],a=e.indexes[o][r[o]],l=e.values[a]??0;s[n]=l,r[o]++}return s}const sn=(e,t)=>{const s=Xs.createTransformer(t),r=ee(e),n=ee(t);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?ve.has(e)&&!n.values.length||ve.has(t)&&!r.values.length?Zs(e,t):ke(kt(tn(r,n),n.values),s):te(e,t)};function Nt(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?ae(e,t,s):Me(e)(e,t)}const nn=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>oe.update(t,s),stop:()=>mt(t),now:()=>Q.isProcessing?Q.timestamp:O.now()}},rn=(e,t,s=10)=>{let r="";const n=Math.max(Math.round(t/s),2);for(let o=0;o<n;o++)r+=Math.round(e(o/(n-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},se=2e4;function Ce(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<se;)t+=s,r=e.next(t);return t>=se?1/0:t}function on(e,t=100,s){const r=s({...e,keyframes:[0,t]}),n=Math.min(Ce(r),se);return{type:"keyframes",ease:o=>r.next(n*o).value/t,duration:W(n)}}const an=5;function Tt(e,t,s){const r=Math.max(t-an,0);return ct(s-e(r),t-r)}const D={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xe=.001;function cn({duration:e=D.duration,bounce:t=D.bounce,velocity:s=D.velocity,mass:r=D.mass}){let n,o,a=1-t;a=$(D.minDamping,D.maxDamping,a),e=$(D.minDuration,D.maxDuration,W(e)),a<1?(n=f=>{const d=f*a,p=d*e,b=d-s,A=we(f,a),M=Math.exp(-p);return xe-b/A*M},o=f=>{const p=f*a*e,b=p*s+s,A=Math.pow(a,2)*Math.pow(f,2)*e,M=Math.exp(-p),g=we(Math.pow(f,2),a);return(-n(f)+xe>0?-1:1)*((b-A)*M)/g}):(n=f=>{const d=Math.exp(-f*e),p=(f-s)*e+1;return-xe+d*p},o=f=>{const d=Math.exp(-f*e),p=(s-f)*(e*e);return d*p});const l=5/e,u=dn(n,o,l);if(e=ie(e),isNaN(u))return{stiffness:D.stiffness,damping:D.damping,duration:e};{const f=Math.pow(u,2)*r;return{stiffness:f,damping:a*2*Math.sqrt(r*f),duration:e}}}const ln=12;function dn(e,t,s){let r=s;for(let n=1;n<ln;n++)r=r-e(r)/t(r);return r}function we(e,t){return e*Math.sqrt(1-t*t)}const un=["duration","bounce"],fn=["stiffness","damping","mass"];function Qe(e,t){return t.some(s=>e[s]!==void 0)}function hn(e){let t={velocity:D.velocity,stiffness:D.stiffness,damping:D.damping,mass:D.mass,isResolvedFromDuration:!1,...e};if(!Qe(e,fn)&&Qe(e,un))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),n=r*r,o=2*$(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:D.mass,stiffness:n,damping:o}}else{const s=cn(e);t={...t,...s,mass:D.mass},t.isResolvedFromDuration=!0}return t}function ne(e=D.visualDuration,t=D.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:n}=s;const o=s.keyframes[0],a=s.keyframes[s.keyframes.length-1],l={done:!1,value:o},{stiffness:u,damping:f,mass:d,duration:p,velocity:b,isResolvedFromDuration:A}=hn({...s,velocity:-W(s.velocity||0)}),M=b||0,g=f/(2*Math.sqrt(u*d)),N=a-o,T=W(Math.sqrt(u/d)),E=Math.abs(N)<5;r||(r=E?D.restSpeed.granular:D.restSpeed.default),n||(n=E?D.restDelta.granular:D.restDelta.default);let k;if(g<1){const v=we(T,g);k=h=>{const j=Math.exp(-g*T*h);return a-j*((M+g*T*N)/v*Math.sin(v*h)+N*Math.cos(v*h))}}else if(g===1)k=v=>a-Math.exp(-T*v)*(N+(M+T*N)*v);else{const v=T*Math.sqrt(g*g-1);k=h=>{const j=Math.exp(-g*T*h),y=Math.min(v*h,300);return a-j*((M+g*T*N)*Math.sinh(y)+v*N*Math.cosh(y))/v}}const C={calculatedDuration:A&&p||null,next:v=>{const h=k(v);if(A)l.done=v>=p;else{let j=v===0?M:0;g<1&&(j=v===0?ie(M):Tt(k,v,h));const y=Math.abs(j)<=r,P=Math.abs(a-h)<=n;l.done=y&&P}return l.value=l.done?a:h,l},toString:()=>{const v=Math.min(Ce(C),se),h=rn(j=>C.next(v*j).value,v,30);return v+"ms "+h},toTransition:()=>{}};return C}ne.applyToOptions=e=>{const t=on(e,100,ne);return e.ease=t.ease,e.duration=ie(t.duration),e.type="keyframes",e};function je({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:u,restDelta:f=.5,restSpeed:d}){const p=e[0],b={done:!1,value:p},A=y=>l!==void 0&&y<l||u!==void 0&&y>u,M=y=>l===void 0?u:u===void 0||Math.abs(l-y)<Math.abs(u-y)?l:u;let g=s*t;const N=p+g,T=a===void 0?N:a(N);T!==N&&(g=T-p);const E=y=>-g*Math.exp(-y/r),k=y=>T+E(y),C=y=>{const P=E(y),I=k(y);b.done=Math.abs(P)<=f,b.value=b.done?T:I};let v,h;const j=y=>{A(b.value)&&(v=y,h=ne({keyframes:[b.value,M(b.value)],velocity:Tt(k,y,b.value),damping:n,stiffness:o,restDelta:f,restSpeed:d}))};return j(0),{calculatedDuration:null,next:y=>{let P=!1;return!h&&v===void 0&&(P=!0,C(y),j(y)),v!==void 0&&y>=v?h.next(y-v):(!P&&C(y),b)}}}function mn(e,t,s){const r=[],n=s||Z.mix||Nt,o=e.length-1;for(let a=0;a<o;a++){let l=n(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||re:t;l=ke(u,l)}r.push(l)}return r}function St(e,t,{clamp:s=!0,ease:r,mixer:n}={}){const o=e.length;if(ot(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=mn(t,r,n),u=l.length,f=d=>{if(a&&d<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(d<e[p+1]);p++);const b=at(e[p],e[p+1],d);return l[p](b)};return s?d=>f($(e[0],e[o-1],d)):f}function pn(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const n=at(0,t,r);e.push(ae(s,1,n))}}function gn(e){const t=[0];return pn(t,e.length-1),t}function xn(e,t){return e.map(s=>s*t)}function bn(e,t){return e.map(()=>t||ht).splice(0,e.length-1)}function z({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const n=Ns(r)?r.map(Xe):Xe(r),o={done:!1,value:t[0]},a=xn(s&&s.length===t.length?s:gn(t),e),l=St(a,t,{ease:Array.isArray(n)?n:bn(t,n)});return{calculatedDuration:e,next:u=>(o.value=l(u),o.done=u>=e,o)}}const yn=e=>e!==null;function vn(e,{repeat:t,repeatType:s="loop"},r,n=1){const o=e.filter(yn),l=n<0||t&&s!=="loop"&&t%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const wn={decay:je,inertia:je,tween:z,keyframes:z,spring:ne};function jn(e){typeof e.type=="string"&&(e.type=wn[e.type])}class kn{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const Nn=e=>e/100;class Tn extends kn{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==O.now()&&this.tick(O.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;jn(t);const{type:s=z,repeat:r=0,repeatDelay:n=0,repeatType:o,velocity:a=0}=t;let{keyframes:l}=t;const u=s||z;u!==z&&typeof l[0]!="number"&&(this.mixKeyframes=ke(Nn,Nt(l[0],l[1])),l=[0,100]);const f=u({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=Ce(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=f}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:n,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:d,repeat:p,repeatType:b,repeatDelay:A,type:M,onUpdate:g,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const T=this.currentTime-f*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?T<0:T>n;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let k=this.currentTime,C=r;if(p){const y=Math.min(this.currentTime,n)/l;let P=Math.floor(y),I=y%1;!I&&y>=1&&(I=1),I===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(b==="reverse"?(I=1-I,A&&(I-=A/l)):b==="mirror"&&(C=a)),k=$(0,1,I)*l}const v=E?{done:!1,value:d[0]}:C.next(k);o&&(v.value=o(v.value));let{done:h}=v;!E&&u!==null&&(h=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&h);return j&&M!==je&&(v.value=vn(d,this.options,N,this.speed)),g&&g(v.value),j&&this.finish(),v}then(t,s){return this.finished.then(t,s)}get duration(){return W(this.calculatedDuration)}get time(){return W(this.currentTime)}set time(t){t=ie(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(O.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=W(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=nn,startTime:s}=this.options;this.driver||(this.driver=t(n=>this.tick(n))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(O.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Sn(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const n=document.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}const et=30,Mn=e=>!isNaN(parseFloat(e)),q={current:void 0};class Cn{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const n=O.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=O.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Mn(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new ms);const r=this.events[t].add(s);return t==="change"?()=>{r(),oe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return q.current&&q.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=O.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>et)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,et);return ct(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dn(e,t){return new Cn(e,t)}function An(...e){const t=!Array.isArray(e[0]),s=t?0:-1,r=e[0+s],n=e[1+s],o=e[2+s],a=e[3+s],l=St(n,o,a);return t?l(r):l}const Mt=e=>!!(e&&e.getVelocity);function Fn(e,t,s){const r=e.get();let n=null,o=r,a;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,u=()=>{n&&(n.stop(),n=null)},f=()=>{u(),n=new Tn({keyframes:[st(e.get()),st(o)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:a})};if(e.attach((d,p)=>(o=d,a=b=>p(tt(b,l)),oe.postRender(f),e.get()),u),Mt(t)){const d=t.on("change",b=>e.set(tt(b,l))),p=e.on("destroy",d);return()=>{d(),p()}}return u}function tt(e,t){return t?e+t:e}function st(e){return typeof e=="number"?e:parseFloat(e)}const Ct=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function De(e){const t=it(()=>Dn(e)),{isStatic:s}=x.useContext(Ct);if(s){const[,r]=x.useState(e);x.useEffect(()=>t.on("change",r),[])}return t}function Dt(e,t){const s=De(t()),r=()=>s.set(t());return r(),ds(()=>{const n=()=>oe.preRender(r,!1,!0),o=e.map(a=>a.on("change",n));return()=>{o.forEach(a=>a()),mt(r)}}),s}function En(e){q.current=[],e();const t=Dt(q.current,e);return q.current=void 0,t}function Pn(e,t,s,r){if(typeof e=="function")return En(e);const n=An(t,s,r);return Array.isArray(e)?nt(e,n):nt([e],([o])=>n(o))}function nt(e,t){const s=it(()=>[]);return Dt(e,()=>{s.length=0;const r=e.length;for(let n=0;n<r;n++)s[n]=e[n].get();return t(s)})}function In(e,t={}){const{isStatic:s}=x.useContext(Ct),r=()=>Mt(e)?e.get():e;if(s)return Pn(r);const n=De(r());return x.useInsertionEffect(()=>Fn(n,e,t),[n,JSON.stringify(t)]),n}const Rn={some:0,all:1};function On(e,t,{root:s,margin:r,amount:n="some"}={}){const o=Sn(e),a=new WeakMap,l=f=>{f.forEach(d=>{const p=a.get(d.target);if(d.isIntersecting!==!!p)if(d.isIntersecting){const b=t(d.target,d);typeof b=="function"?a.set(d.target,b):u.unobserve(d.target)}else typeof p=="function"&&(p(d),a.delete(d.target))})},u=new IntersectionObserver(l,{root:s,rootMargin:r,threshold:typeof n=="number"?n:Rn[n]});return o.forEach(f=>u.observe(f)),()=>u.disconnect()}function Vn(e,{root:t,margin:s,amount:r,once:n=!1,initial:o=!1}={}){const[a,l]=x.useState(o);return x.useEffect(()=>{if(!e.current||n&&a)return;const u=()=>(l(!0),n?void 0:()=>l(!1)),f={root:t&&t.current||void 0,margin:s,amount:r};return On(e.current,u,f)},[t,e,s,n,r]),a}function Ln({value:e,startValue:t=0,direction:s="up",delay:r=0,className:n,decimalPlaces:o=0,...a}){const l=x.useRef(null),u=De(s==="down"?e:t),f=In(u,{damping:60,stiffness:100}),d=Vn(l,{once:!0,margin:"0px"});return x.useEffect(()=>{if(d){const p=setTimeout(()=>{u.set(s==="down"?t:e)},r*1e3);return()=>clearTimeout(p)}},[u,d,r,e,s,t]),x.useEffect(()=>f.on("change",p=>{l.current&&(l.current.textContent=Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:o}).format(Number(p.toFixed(o))))}),[f,o]),i.jsx("span",{ref:l,className:Zt("inline-block tabular-nums tracking-wider text-black dark:text-white",n),...a,children:t})}function be({label:e,value:t,delay:s=0}){return i.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-border p-3 shadow-sm text-center flex flex-col items-center justify-center min-w-0",children:[i.jsx("div",{className:"text-xl font-semibold leading-tight",children:typeof t=="number"?i.jsx(Ln,{value:t,delay:s}):t}),i.jsx("div",{className:"mt-1 text-xs tracking-caps text-muted uppercase opacity-80 whitespace-nowrap overflow-hidden text-ellipsis leading-snug",title:e,children:e})]})}function Xn(){const[e,t]=x.useState([]),[s,r]=x.useState([]),[n,o]=x.useState([]),[a,l]=x.useState([]),[u,f]=x.useState([]),[d,p]=x.useState([]),[b,A]=x.useState("name"),[M,g]=x.useState("asc"),[N,T]=x.useState(!1),[E,k]=x.useState(!1),[C,v]=x.useState(!1),[h,j]=x.useState(""),y=x.useRef(null),P=c=>j(c.target.value);x.useEffect(()=>{(async()=>{const[c,m,w,S,F]=await Promise.all([Gt(),Ve(),zt(),qt(),Xt()]);t(c),r(m),o(w),l(S),f(F)})()},[]);const I=n.length,Ae=n.filter(c=>c.status==="Complete").length,ce=I?Math.round(Ae/I*100):0;[...x.useMemo(()=>{const c=new Map;for(const m of s)for(const w of m.owner_ids||[])c.set(w,(c.get(w)||0)+1);return c},[s]).entries()].sort((c,m)=>m[1]-c[1]).slice(0,5).map(([c,m])=>({name:e.find(w=>w.id===c)?.name||c,count:m}));const At=e.map(c=>{const m=n.filter(w=>w.assignee_id===c.id&&w.status==="Complete").length;return{...c,completed:m}}).sort((c,m)=>m.completed-c.completed).slice(0,5),Ft=new Map(e.map(c=>[c.id,c])),H=new Map;for(const c of n){const m=H.get(c.project_id)??[];m.push(c),H.set(c.project_id,m)}const le=c=>{const m=H.get(c.id)??[];return m.length?m.filter(S=>S.status==="Complete").length/m.length:0},Et=Ht(),Pt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function It(c){const m=new Date,w=[];let S=0,F=new Date(m);for(;w.length<3&&S<14;){const R=F.getDay();if([2,4,6].includes(R)){const ue=F.toISOString().slice(0,10),fe=c.filter(U=>new Date(U.date).toISOString().slice(0,10)===ue).reduce((U,Oe)=>U+Oe.present,0);w.unshift({label:Pt[R],present:fe})}F.setDate(F.getDate()-1),S++}return w}function Rt(c){const m=new Date,w=30;return Array.from({length:w}).map((S,F)=>{const R=new Date(m);R.setDate(m.getDate()-(w-1-F));const ue=R.getDay();if(![2,4,6].includes(ue))return null;const fe=R.toISOString().slice(0,10),U=c.filter(he=>new Date(he.date).toISOString().slice(0,10)===fe).reduce((he,Bt)=>he+Bt.present,0);return{label:`${R.toLocaleString(void 0,{month:"short"})} ${R.getDate()}`,present:U}}).filter(Boolean)}const Fe=a.map(c=>({date:c.date,present:1})),Ot=It(Fe),Vt=Rt(Fe).filter(c=>c!==null),K=x.useMemo(()=>s.filter(c=>!c.archived),[s]),Ee=x.useMemo(()=>{if(!u?.length)return new Set;const c=new Map;for(const S of u)!S.from_id||!S.to_id||(c.has(S.to_id)||c.set(S.to_id,[]),c.get(S.to_id).push(S.from_id));const m=new Set;for(const S of K){const F=n.filter(R=>R.project_id===S.id);F.length&&F.every(R=>R.status==="Complete")&&m.add(S.id)}const w=new Set;for(const S of K){const F=c.get(S.id)||[];F.length&&F.some(R=>!m.has(R))&&w.add(S.id)}return w},[K,n,u]),L=x.useMemo(()=>K.filter(c=>!Ee.has(c.id)),[K,Ee]),Pe=x.useMemo(()=>{const c=new Set;for(const m of L)m.subsystem&&c.add(m.subsystem);return Array.from(c).sort()},[L]),Lt=x.useMemo(()=>{const c=new Map;for(const m of L)m.subsystem&&c.set(m.subsystem,(c.get(m.subsystem)||0)+1);return c},[L]),[de,_t]=x.useState(!1),Wt=[...x.useMemo(()=>{let c=d.length?L.filter(m=>m.subsystem&&d.includes(m.subsystem)):L;if(h.trim()){const m=h.trim().toLowerCase();c=c.filter(w=>w.name.toLowerCase().includes(m)||w.description&&w.description.toLowerCase().includes(m)||w.subsystem&&w.subsystem.toLowerCase().includes(m))}return de&&(c=c.filter(m=>le(m)<1)),c},[L,d,h,de])].sort((c,m)=>{let w=0;if(b==="name")w=c.name.localeCompare(m.name);else if(b==="due"){const S=c.due_date,F=m.due_date;S&&F?w=S.localeCompare(F):S&&!F?w=-1:!S&&F?w=1:w=0}else b==="progress"?w=le(c)-le(m):w=(c.subsystem||"").localeCompare(m.subsystem||"")||c.name.localeCompare(m.name);return M==="asc"?w:-w}),Ie=c=>c==="name"?"Name":c==="due"?"Due date":c==="progress"?"Progress":"Subsystem",Re=M==="asc"?"↑":"↓";x.useEffect(()=>{const c=m=>{m.key==="Escape"&&(T(!1),k(!1))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]),Et?.uid;async function $t(){const[c]=await Promise.all([Ve()]);r(c)}return i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Team Overview"}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsx(be,{label:"Members",value:e.length,delay:0}),i.jsx(be,{label:"Projects",value:L.length,delay:.5}),i.jsx(be,{label:"Tasks",value:I,delay:1})]}),i.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-border p-2 pb-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"text-xs tracking-caps text-muted uppercase opacity-80",children:"Total Task Completion"}),i.jsxs("div",{className:"text-xl font-semibold leading-tight",children:[ce,"%"]})]}),i.jsx(rt,{value:ce,heightClass:"h-3",color:ce===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})]})]}),i.jsx("div",{className:"min-w-0",children:i.jsxs(rs,{slideIndexInitial:0,onIndexChange:()=>{},dots:!0,children:[i.jsx(cs,{title:"Attendance",weekData:Ot,monthData:Vt,className:"h-56"}),i.jsxs("div",{className:"relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-border shadow-sm overflow-hidden h-56 flex flex-col",children:[i.jsx("h2",{className:"text-xs md:text-sm mb-2 text-muted uppercase tracking-caps",style:{fontWeight:400},children:"All-Time Leaderboard"}),i.jsx("div",{className:"h-full overflow-hidden",children:i.jsxs("table",{className:"mx-auto w-full table-fixed text-xs sm:text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-8 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"#"}),i.jsx("th",{className:"py-1 px-2 text-left text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Name"}),i.jsx("th",{className:"w-24 md:w-28 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Tasks"})]})}),i.jsx("tbody",{className:"align-middle",children:At.slice(0,7).map((c,m)=>i.jsxs("tr",{className:m===0?"bg-yellow-100/40":"",children:[i.jsx("td",{className:"py-1 px-2 text-center",children:m+1}),i.jsx("td",{className:"py-1 px-2",children:i.jsxs("div",{className:"truncate flex items-center gap-1 mb-0.5",children:[c.name,m===0&&i.jsx(ns,{})]})}),i.jsx("td",{className:"py-1 px-2 text-center",children:c.completed})]},c.id))})]})})]})]})})]}),i.jsxs("div",{className:"mt-6 mb-2 flex items-center w-full",style:{display:"flex"},children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Projects"}),i.jsx(Yt,{children:i.jsxs("button",{"aria-label":"Create project",onClick:()=>v(!0),className:"group inline-flex items-center justify-center h-7 w-7 rounded-md border border-accent/40 bg-accent/15 hover:bg-accent/25 text-accent transition shadow-sm hover:shadow-accent/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 ml-2",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.1",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),i.jsx("span",{className:"sr-only",children:"Add project"})]})}),i.jsx("div",{className:"flex-1"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none outline-none focus:outline-none",style:{marginLeft:8},children:[i.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[i.jsx("input",{type:"checkbox",checked:de,onChange:c=>_t(c.target.checked),className:"peer sr-only",onMouseUp:c=>c.currentTarget.blur()}),i.jsx("span",{className:`
                pointer-events-none block h-6 w-11 rounded-full border border-border
                bg-black/15 dark:bg-white/15
                transition-colors
                peer-checked:bg-[#64C7C9]
                peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
              `}),i.jsx("span",{className:`
                pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                bg-white dark:bg-background shadow
                transition-transform
                peer-checked:translate-x-5
              `})]}),i.jsx("span",{className:"sr-only",children:"Hide completed projects"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted mb-1 uppercase tracking-caps",children:[i.jsxs("div",{className:"flex items-center gap-1",title:"Grey = To-do / Not started",children:[i.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#BDC0C3"}})," To-do / Not started"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#64C7C9"}})," In Progress"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#34D399"}})," Complete"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[i.jsxs("div",{className:"relative min-w-0",children:[i.jsxs("button",{onClick:()=>{T(c=>!c),k(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 shadow-sm w-full",children:["Subsystems: ",i.jsx("span",{className:"font-semibold",children:d.length?`${d.length} selected`:"All"})]}),i.jsxs("div",{className:`absolute z-20 mt-1 w-64 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${N?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[i.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:i.jsx("button",{className:"w-full px-3 py-2 rounded-md text-xs sm:text-sm font-semibold bg-red-500/15 hover:bg-red-500/25 text-red-200 focus:outline-none focus-visible:outline-none",onClick:()=>p([]),children:"Clear selection"})}),i.jsxs("div",{className:"max-h-60 overflow-auto p-1",children:[Pe.length===0&&i.jsx("div",{className:"px-3 py-2 text-xs text-muted uppercase tracking-caps",children:"No subsystems"}),Pe.map(c=>{const m=d.includes(c),w=Lt.get(c)??0;return i.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-xs rounded hover:bg-card/80 cursor-pointer focus:outline-none focus-visible:outline-none",children:[i.jsx("input",{type:"checkbox",className:"accent-accent focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",checked:m,onChange:()=>{p(S=>m?S.filter(F=>F!==c):[...S,c])}}),i.jsx("span",{className:"truncate",children:c}),i.jsx("span",{className:"ml-auto inline-flex items-center justify-center rounded-full bg-surface/80 px-2 py-0.5 text-[10px]",children:w})]},c)})]})]})]}),i.jsxs("div",{className:"relative min-w-0",children:[i.jsxs("button",{onClick:()=>{k(c=>!c),T(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 shadow-sm w-full",children:["Sort: ",i.jsxs("span",{className:"font-semibold",children:[Ie(b)," ",Re]})]}),i.jsx("div",{className:`absolute z-20 mt-1 w-48 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${E?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:["name","subsystem","due","progress"].map(c=>i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs hover:bg-surface/80 ${b===c?"bg-surface/80":""}`,onClick:()=>{b===c?g(m=>m==="asc"?"desc":"asc"):A(c),k(!1)},children:[Ie(c)," ",b===c?Re:""]},c))})]}),(N||E)&&i.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{T(!1),k(!1)}})]}),i.jsx("div",{className:"w-full mt-2 mb-4",children:i.jsx("input",{ref:y,type:"text",value:h,onChange:P,placeholder:"Search projects...",className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface focus:bg-card/80 shadow-sm w-full focus:outline-none"})}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2",children:Wt.map(c=>i.jsx(ss,{project:c,owners:c.owner_ids?.map(m=>Ft.get(m)).filter(Boolean)??[],tasks:H.get(c.id)??[],compact:!0},c.id))}),i.jsx(Jt,{open:C,onClose:()=>v(!1),people:e,onCreated:async()=>{await $t()}})]})}export{Xn as default};
