import{j as i,u as Gt,L as zt,r as b,f as qt,A as Le,v as Xt,x as Ht,N as Yt,c as Jt,R as Zt}from"./index-DOVok7Jw.js";import{B as it}from"./modal-Da3X0Utv.js";import{A as _e}from"./card-DPHmeWF8.js";import{R as $e,o as We,X as Be,Y as Ue,m as Ke,T as Ge,p as ze}from"./AreaChart-BoPwoNYQ.js";import{P as Qt}from"./ProjectCreateModal-CDrAZWwy.js";import"./clsx-B-dksMZM.js";function ot({value:e,heightClass:t="h-2",color:s,track:r="neutral"}){const n=Math.max(0,Math.min(100,Math.round(e))),o=s??"linear-gradient(90deg, hsl(var(--accent)), #98D7D8)",a=r==="neutral"?"bg-black/15 dark:bg-white/15":"",l=r==="accent"?{backgroundColor:"rgba(152,215,216,0.20)"}:void 0;return i.jsx("div",{className:it("w-full rounded-full overflow-hidden",t,a),style:l,role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,children:i.jsx("div",{className:"h-full transition-[width] duration-300 ease-out",style:{width:`${n}%`,background:o}})})}function es({href:e,children:t}){return e?i.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-3 py-1.5 rounded bg-card/80 hover:bg-card transition",children:t}):null}function ts(...e){return e.filter(Boolean).join(" ")}function ss({className:e,...t}){return i.jsx("div",{className:ts("animate-pulse rounded-md bg-muted",e),...t})}function ns({project:e,owners:t,tasks:s,compact:r=!1,onHover:n,attachmentId:o,dimmed:a=!1,scale:l}){function f(d){return d===1?.5:d===3?1:d===10?3:d===6?2:d===15?5:d===40?10:d===65?15:d===98?20:d===150?25:d===200?30:Math.max(0,Math.round(d/4))}const h=Math.round(s.reduce((d,y)=>d+(typeof y.ranked_points=="number"?f(y.ranked_points):2),0)),[u]=Gt(),m=s.length,x=s.filter(d=>d.status==="Complete").length,D=m>0?x/m*100:0,M=`${Math.round(D)}%`,N=s.reduce((d,y)=>d+(y.ranked_points??(y.status==="Complete"?35:10)),0);let v="full";typeof l=="number"?l<.5?v="dot":l<.8?v="mini":l<1.2?v="compact":v="full":r&&(v="compact");const S=e.name.split(/\s+/).filter(Boolean).map(d=>d[0]).slice(0,3).join("").toUpperCase(),I="border border-border bg-card dark:bg-surface shadow-sm transition-opacity",k=v==="full"?`rounded-2xl p-3 ${I}`:v==="compact"?`rounded-xl p-2.5 ${I}`:v==="mini"?`rounded-lg px-2.5 py-2 ${I}`:`rounded-md px-1 py-0.5 h-[14px] flex items-center ${I}`,C=v==="full"?"text-lg font-semibold hover:underline mb-0":v==="compact"?"text-base font-semibold hover:underline mb-0":v==="mini"?"text-[11px] font-medium leading-tight":"text-[10px] font-semibold tracking-wide",w=v==="full"?"h-2.5":"h-2";return i.jsxs("div",{className:k+(a?" opacity-60 transition-opacity":" transition-opacity"),onMouseEnter:()=>n?.(o||null),onMouseLeave:()=>n?.(null),children:[i.jsxs("div",{className:"flex items-start justify-between gap-0",children:[i.jsx("div",{className:"flex items-center min-w-0",children:i.jsx(zt,{to:`/project/${e.id}`,className:`${C} truncate`,title:e.name,children:v==="dot"?S.slice(0,3):v==="mini"?e.name.slice(0,12)+(e.name.length>12?"…":""):e.name})}),e.design_link&&v!=="dot"&&i.jsx("div",{className:"flex gap-2 shrink-0",children:r?i.jsx("a",{target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-1.5 py-0 rounded bg-card dark:bg-surface text-xs border border-[#24304F] transition outline outline-2 outline-[#24304F] font-normal",style:{background:"rgba(255,255,255,0.10)",borderColor:"#24304F",color:"#FFFFFF",fontWeight:"400"},children:"Link"}):i.jsx(es,{href:e.design_link,children:"Design Docs"})})]}),v!=="dot"&&v!=="mini"&&i.jsx("div",{className:"min-h-4 h-4 flex items-center mb-2",children:e.subsystem?i.jsx("div",{className:"text-xs uppercase tracking-caps font-normal text-muted leading-none",children:e.subsystem}):i.jsx(ss,{className:"h-3 w-16 invisible"})}),v!=="dot"&&i.jsx("div",{className:"flex items-center justify-between gap-2 text-tick text-muted leading-none",children:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:"OWNERS"}),t.length>0?i.jsxs("div",{className:"flex -space-x-1 h-6 items-center",children:[t.slice(0,6).map(d=>{const y=d.name?d.name.split(/\s+/).filter(Boolean).slice(0,2).map(g=>g[0]?.toUpperCase()).join(""):void 0;return i.jsx(_e,{size:"xs",alt:d.name,src:d.avatar_url||void 0,initials:d.avatar_url?void 0:y,className:"ring-2 ring-card dark:ring-surface"},d.id)}),t.length>6&&i.jsx(_e,{size:"xs",className:"ring-2 ring-card dark:ring-surface",placeholder:i.jsxs("span",{className:"flex items-center justify-center text-[10px] font-semibold text-quaternary",children:["+",t.length-6]})})]}):i.jsx("div",{className:"h-6 flex items-center px-1.5 rounded bg-white/10 whitespace-normal break-words",children:i.jsx("span",{className:"text-[10px] leading-none",children:"N/A"})})]})}),e.due_date&&(()=>{let d=null;const y=e.due_date,g=y.match(/(\d{4})[\/\-]?(\d{2})[\/\-]?(\d{2})/);if(g){const[,F,P,$]=g;d=new Date(Number(F),Number(P)-1,Number($))}else isNaN(Date.parse(y))||(d=new Date(y));if(d){const F=d.toLocaleString("en-US",{weekday:r?"short":"long"}),P=d.toLocaleString("en-US",{month:r?"short":"long"}),$=d.getDate(),G=L=>L===1||L===21||L===31?"st":L===2||L===22?"nd":L===3||L===23?"rd":"th";return i.jsxs("span",{className:"text-[10px] uppercase tracking-wide opacity-80 whitespace-nowrap ml-2 shrink-0 leading-none",children:[F," ",P," ",$,G($)]})}return null})()]})}),v==="full"&&i.jsxs("div",{className:"flex items-center justify-between gap-2 leading-none",children:[i.jsx("div",{className:"text-[11px] text-muted font-normal",children:M}),i.jsxs("div",{className:"text-muted flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:m>0?`${x}/${m} tasks`:"No tasks"}),i.jsx("span",{className:"opacity-80",children:"·"}),i.jsxs("span",{className:"text-[10px] font-normal opacity-80",children:[h," hours"]}),u&&i.jsx("span",{className:"opacity-80",children:"·"}),u&&i.jsx("span",{className:"text-[10px] font-normal",style:{color:"#94a3b8"},children:`Σ +${N}`})]})]}),v!=="dot"&&i.jsx("div",{className:"mt-1",children:i.jsx(ot,{value:D,heightClass:w,color:D===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})})]})}function rs({className:e="w-5 h-5 text-yellow-500 inline ml-1"}){return i.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M6 2a1 1 0 00-1 1v2a1 1 0 001 1h8a1 1 0 001-1V3a1 1 0 00-1-1H6zm8 4H6v1a6 6 0 005 5.92V15H9a1 1 0 000 2h2a1 1 0 000-2h-2v-2.08A6 6 0 0014 7V6z"})})}function is({children:e,slideIndexInitial:t=0,onIndexChange:s,dots:r=!0,frameClassName:n}){const o=Array.isArray(e)?e:[e],[a,l]=b.useState(t),f=b.useRef(null),h=b.useRef(null),u=b.useRef({startX:0,currentX:0,dragging:!1,width:0});b.useEffect(()=>{s?.(a)},[a]);const m=(d,y=!0)=>{const g=h.current,F=f.current;if(!g||!F)return;const P=g.clientWidth;u.current.width=P,F.style.transition=y?"transform 320ms cubic-bezier(0.22, 1, 0.36, 1)":"none",F.style.transform=`translateX(${-d*P}px)`},x=d=>{const y=h.current;y&&(u.current={startX:d,currentX:d,dragging:!0,width:y.clientWidth})},D=d=>{if(!u.current.dragging)return;u.current.currentX=d;const y=d-u.current.startX,g=f.current;g&&(g.style.transition="none",g.style.transform=`translateX(${y-a*u.current.width}px)`)},M=()=>{if(!u.current.dragging)return;const d=u.current.currentX-u.current.startX,y=Math.max(40,u.current.width*.2);let g=a;d>y?g=Math.max(0,a-1):d<-y&&(g=Math.min(o.length-1,a+1)),m(g,!0),l(g),u.current.dragging=!1},N=d=>x(d.touches[0].clientX),v=d=>D(d.touches[0].clientX),S=()=>M(),I=d=>{d.preventDefault(),x(d.clientX)},k=d=>D(d.clientX),C=()=>M(),w=()=>M();return b.useEffect(()=>{const d=()=>{m(a,!1)};return window.addEventListener("resize",d),d(),()=>window.removeEventListener("resize",d)},[a]),b.useEffect(()=>{m(a,!0)},[a]),i.jsx("div",{className:"w-full select-none",children:i.jsxs("div",{ref:h,className:`relative overflow-hidden rounded-2xl ${n||""}`,onTouchStart:N,onTouchMove:v,onTouchEnd:S,onMouseDown:I,onMouseMove:k,onMouseUp:C,onMouseLeave:w,children:[i.jsx("div",{ref:f,className:"flex",style:{willChange:"transform"},children:o.map((d,y)=>i.jsx("div",{className:"w-full shrink-0 px-1",children:d},y))}),r&&i.jsx("div",{className:"mt-3 mb-2 flex items-center justify-center gap-2",children:o.map((d,y)=>i.jsx("button",{"aria-label":`Show slide ${y+1}`,className:`w-2.5 h-2.5 rounded-full border border-border transition ${a===y?"bg-foreground":"bg-muted-foreground/40 hover:bg-foreground/70"}`,onClick:()=>l(y)},y))})]})})}function qe({show:e,children:t}){const s=b.useRef(null);return b.useEffect(()=>{s.current&&(e?(s.current.style.opacity="1",s.current.style.transform="translateY(0)",s.current.style.pointerEvents="auto"):(s.current.style.opacity="0",s.current.style.transform="translateY(20px)",s.current.style.pointerEvents="none"))},[e]),i.jsx("div",{ref:s,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"opacity 0.4s, transform 0.4s",opacity:e?1:0,transform:e?"translateY(0)":"translateY(20px)",pointerEvents:e?"auto":"none"},children:t})}const os=[{label:"Mon",present:4},{label:"Tue",present:6},{label:"Wed",present:5},{label:"Thu",present:9},{label:"Fri",present:8},{label:"Sat",present:12},{label:"Sun",present:16}],as=Array.from({length:30}).map((e,t)=>({label:`${t+1}`,present:Math.max(0,Math.round(5+6*Math.sin(t/4)))})),cs={line:"#98D7D8",border:"hsl(var(--border))"};function Xe({active:e,payload:t}){if(!e||!t?.length)return null;const s=t[0].payload;return i.jsxs("div",{className:"rounded-xl px-3 py-2 text-sm shadow-lg border",style:{background:"hsl(var(--card))",borderColor:"hsl(var(--border))",color:"hsl(var(--foreground))"},children:[i.jsx("div",{className:"opacity-70",children:s.label}),i.jsxs("div",{className:"font-semibold",children:[s.present," present"]})]})}function ls(e){const{weekData:t=os,monthData:s=as,className:r,title:n="Attendance"}=e,o=new Date,a=[2,4,6].includes(o.getDay()),[l,f]=b.useState("month"),h=l==="week"?t:s,u=b.useMemo(()=>h.length?h[h.length-1].present:0,[h]),m=cs;return i.jsxs("div",{className:`relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-border overflow-hidden h-full flex flex-col ${r??""}`,children:[i.jsxs("div",{className:"flex items-center justify-between gap-4 min-w-0",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-widest opacity-70",children:n}),i.jsx("div",{className:"mt-1 text-xl font-bold leading-tight",children:u}),i.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:a?"Today":"Last meeting"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>f("week"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${l==="week"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:m.border},children:"Week"}),i.jsx("button",{onClick:()=>f("month"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${l==="month"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:m.border},children:"Month"})]})]}),i.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden flex-1 min-h-0 min-w-0 relative",children:[i.jsx(qe,{show:l==="week",children:i.jsx($e,{width:"100%",height:"100%",className:"block",children:i.jsxs(We,{data:t,margin:{top:8,right:16,bottom:8,left:12},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:m.line,stopOpacity:.45}),i.jsx("stop",{offset:"100%",stopColor:m.line,stopOpacity:.1})]})}),i.jsx(Be,{dataKey:"label",hide:!0}),i.jsx(Ue,{hide:!0,domain:[0,x=>Math.max(10,x*1.15)]}),i.jsx(Ke,{horizontal:!1,vertical:!1}),i.jsx(Ge,{content:i.jsx(Xe,{}),cursor:{stroke:"hsl(var(--foreground) / 0.06)",strokeWidth:20}}),i.jsx(ze,{type:"monotone",dataKey:"present",stroke:m.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})}),i.jsx(qe,{show:l==="month",children:i.jsx($e,{width:"100%",height:"100%",className:"block",children:i.jsxs(We,{data:s,margin:{top:8,right:16,bottom:8,left:12},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:m.line,stopOpacity:.45}),i.jsx("stop",{offset:"100%",stopColor:m.line,stopOpacity:.1})]})}),i.jsx(Be,{dataKey:"label",hide:!0}),i.jsx(Ue,{hide:!0,domain:[0,x=>Math.max(10,x*1.15)]}),i.jsx(Ke,{horizontal:!1,vertical:!1}),i.jsx(Ge,{content:i.jsx(Xe,{}),cursor:{stroke:"hsl(var(--foreground) / 0.06)",strokeWidth:20}}),i.jsx(ze,{type:"monotone",dataKey:"present",stroke:m.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})})]})]})}function at(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const ds=typeof window<"u",us=ds?b.useLayoutEffect:b.useEffect;function fs(e,t){e.indexOf(t)===-1&&e.push(t)}function hs(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const U=(e,t,s)=>s>t?t:s<e?e:s;let ct=()=>{};const te={},ae=e=>e,ms=(e,t)=>s=>t(e(s)),Te=(...e)=>e.reduce(ms),lt=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class ps{constructor(){this.subscriptions=[]}add(t){return fs(this.subscriptions,t),()=>hs(this.subscriptions,t)}notify(t,s,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,s,r);else for(let o=0;o<n;o++){const a=this.subscriptions[o];a&&a(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ce=e=>e*1e3,B=e=>e/1e3;function dt(e,t){return t?e*(1e3/t):0}const ut=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,gs=1e-7,xs=12;function bs(e,t,s,r,n){let o,a,l=0;do a=t+(s-t)/2,o=ut(a,r,n)-e,o>0?s=a:t=a;while(Math.abs(o)>gs&&++l<xs);return a}function J(e,t,s,r){if(e===t&&s===r)return ae;const n=o=>bs(o,0,1,e,s);return o=>o===0||o===1?o:ut(n(o),t,r)}const ft=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ht=e=>t=>1-e(1-t),mt=J(.33,1.53,.69,.99),Me=ht(mt),ys=ft(Me),vs=e=>(e*=2)<1?.5*Me(e):.5*(2-Math.pow(2,-10*(e-1))),Se=e=>1-Math.sin(Math.acos(e)),ws=ht(Se),js=ft(Se),ks=J(.42,0,1,1),Ns=J(0,0,.58,1),pt=J(.42,0,.58,1),Ts=e=>Array.isArray(e)&&typeof e[0]!="number",Ms=e=>Array.isArray(e)&&typeof e[0]=="number",Ss={linear:ae,easeIn:ks,easeInOut:pt,easeOut:Ns,circIn:Se,circInOut:js,circOut:ws,backIn:Me,backInOut:ys,backOut:mt,anticipate:vs},Cs=e=>typeof e=="string",He=e=>{if(Ms(e)){ct(e.length===4);const[t,s,r,n]=e;return J(t,s,r,n)}else if(Cs(e))return Ss[e];return e},Q=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Ds(e,t){let s=new Set,r=new Set,n=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function f(u){a.has(u)&&(h.schedule(u),e()),u(l)}const h={schedule:(u,m=!1,x=!1)=>{const M=x&&n?s:r;return m&&a.add(u),M.has(u)||M.add(u),u},cancel:u=>{r.delete(u),a.delete(u)},process:u=>{if(l=u,n){o=!0;return}n=!0,[s,r]=[r,s],s.forEach(f),s.clear(),n=!1,o&&(o=!1,h.process(u))}};return h}const As=40;function Fs(e,t){let s=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},o=()=>s=!0,a=Q.reduce((k,C)=>(k[C]=Ds(o),k),{}),{setup:l,read:f,resolveKeyframes:h,preUpdate:u,update:m,preRender:x,render:D,postRender:M}=a,N=()=>{const k=te.useManualTiming?n.timestamp:performance.now();s=!1,te.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(k-n.timestamp,As),1)),n.timestamp=k,n.isProcessing=!0,l.process(n),f.process(n),h.process(n),u.process(n),m.process(n),x.process(n),D.process(n),M.process(n),n.isProcessing=!1,s&&t&&(r=!1,e(N))},v=()=>{s=!0,r=!0,n.isProcessing||e(N)};return{schedule:Q.reduce((k,C)=>{const w=a[C];return k[C]=(d,y=!1,g=!1)=>(s||v(),w.schedule(d,y,g)),k},{}),cancel:k=>{for(let C=0;C<Q.length;C++)a[Q[C]].cancel(k)},state:n,steps:a}}const{schedule:le,cancel:gt,state:se}=Fs(typeof requestAnimationFrame<"u"?requestAnimationFrame:ae,!0);let ee;function Es(){ee=void 0}const O={now:()=>(ee===void 0&&O.set(se.isProcessing||te.useManualTiming?se.timestamp:performance.now()),ee),set:e=>{ee=e,queueMicrotask(Es)}},Ps=e=>t=>typeof t=="string"&&t.startsWith(e),Is=Ps("var(--"),Rs=e=>Is(e)?Os.test(e.split("/*")[0].trim()):!1,Os=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xt={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},bt={...xt,transform:e=>U(0,1,e)},X=e=>Math.round(e*1e5)/1e5,yt=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Vs(e){return e==null}const Ls=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ce=(e,t)=>s=>!!(typeof s=="string"&&Ls.test(s)&&s.startsWith(e)||t&&!Vs(s)&&Object.prototype.hasOwnProperty.call(s,t)),vt=(e,t,s)=>r=>{if(typeof r!="string")return r;const[n,o,a,l]=r.match(yt);return{[e]:parseFloat(n),[t]:parseFloat(o),[s]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},_s=e=>U(0,255,e),ge={...xt,transform:e=>Math.round(_s(e))},W={test:Ce("rgb","red"),parse:vt("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+ge.transform(e)+", "+ge.transform(t)+", "+ge.transform(s)+", "+X(bt.transform(r))+")"};function $s(e){let t="",s="",r="",n="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),n=e.substring(4,5),t+=t,s+=s,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const we={test:Ce("#"),parse:$s,transform:W.transform},Ws=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ye=Ws("%"),K={test:Ce("hsl","hue"),parse:vt("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ye.transform(X(t))+", "+Ye.transform(X(s))+", "+X(bt.transform(r))+")"},V={test:e=>W.test(e)||we.test(e)||K.test(e),parse:e=>W.test(e)?W.parse(e):K.test(e)?K.parse(e):we.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?W.transform(e):K.transform(e),getAnimatableNone:e=>{const t=V.parse(e);return t.alpha=0,V.transform(t)}},Bs=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Us(e){return isNaN(e)&&typeof e=="string"&&(e.match(yt)?.length||0)+(e.match(Bs)?.length||0)>0}const wt="number",jt="color",Ks="var",Gs="var(",Je="${}",zs=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ne(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},n=[];let o=0;const l=t.replace(zs,f=>(V.test(f)?(r.color.push(o),n.push(jt),s.push(V.parse(f))):f.startsWith(Gs)?(r.var.push(o),n.push(Ks),s.push(f)):(r.number.push(o),n.push(wt),s.push(parseFloat(f))),++o,Je)).split(Je);return{values:s,split:l,indexes:r,types:n}}function kt(e){return ne(e).values}function Nt(e){const{split:t,types:s}=ne(e),r=t.length;return n=>{let o="";for(let a=0;a<r;a++)if(o+=t[a],n[a]!==void 0){const l=s[a];l===wt?o+=X(n[a]):l===jt?o+=V.transform(n[a]):o+=n[a]}return o}}const qs=e=>typeof e=="number"?0:V.test(e)?V.getAnimatableNone(e):e;function Xs(e){const t=kt(e);return Nt(e)(t.map(qs))}const Hs={test:Us,parse:kt,createTransformer:Nt,getAnimatableNone:Xs};function xe(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function Ys({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let n=0,o=0,a=0;if(!t)n=o=a=s;else{const l=s<.5?s*(1+t):s+t-s*t,f=2*s-l;n=xe(f,l,e+1/3),o=xe(f,l,e),a=xe(f,l,e-1/3)}return{red:Math.round(n*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function re(e,t){return s=>s>0?t:e}const de=(e,t,s)=>e+(t-e)*s,be=(e,t,s)=>{const r=e*e,n=s*(t*t-r)+r;return n<0?0:Math.sqrt(n)},Js=[we,W,K],Zs=e=>Js.find(t=>t.test(e));function Ze(e){const t=Zs(e);if(!t)return!1;let s=t.parse(e);return t===K&&(s=Ys(s)),s}const Qe=(e,t)=>{const s=Ze(e),r=Ze(t);if(!s||!r)return re(e,t);const n={...s};return o=>(n.red=be(s.red,r.red,o),n.green=be(s.green,r.green,o),n.blue=be(s.blue,r.blue,o),n.alpha=de(s.alpha,r.alpha,o),W.transform(n))},je=new Set(["none","hidden"]);function Qs(e,t){return je.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function en(e,t){return s=>de(e,t,s)}function De(e){return typeof e=="number"?en:typeof e=="string"?Rs(e)?re:V.test(e)?Qe:nn:Array.isArray(e)?Tt:typeof e=="object"?V.test(e)?Qe:tn:re}function Tt(e,t){const s=[...e],r=s.length,n=e.map((o,a)=>De(o)(o,t[a]));return o=>{for(let a=0;a<r;a++)s[a]=n[a](o);return s}}function tn(e,t){const s={...e,...t},r={};for(const n in s)e[n]!==void 0&&t[n]!==void 0&&(r[n]=De(e[n])(e[n],t[n]));return n=>{for(const o in r)s[o]=r[o](n);return s}}function sn(e,t){const s=[],r={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const o=t.types[n],a=e.indexes[o][r[o]],l=e.values[a]??0;s[n]=l,r[o]++}return s}const nn=(e,t)=>{const s=Hs.createTransformer(t),r=ne(e),n=ne(t);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?je.has(e)&&!n.values.length||je.has(t)&&!r.values.length?Qs(e,t):Te(Tt(sn(r,n),n.values),s):re(e,t)};function Mt(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?de(e,t,s):De(e)(e,t)}const rn=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>le.update(t,s),stop:()=>gt(t),now:()=>se.isProcessing?se.timestamp:O.now()}},on=(e,t,s=10)=>{let r="";const n=Math.max(Math.round(t/s),2);for(let o=0;o<n;o++)r+=Math.round(e(o/(n-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ie=2e4;function Ae(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<ie;)t+=s,r=e.next(t);return t>=ie?1/0:t}function an(e,t=100,s){const r=s({...e,keyframes:[0,t]}),n=Math.min(Ae(r),ie);return{type:"keyframes",ease:o=>r.next(n*o).value/t,duration:B(n)}}const cn=5;function St(e,t,s){const r=Math.max(t-cn,0);return dt(s-e(r),t-r)}const A={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ye=.001;function ln({duration:e=A.duration,bounce:t=A.bounce,velocity:s=A.velocity,mass:r=A.mass}){let n,o,a=1-t;a=U(A.minDamping,A.maxDamping,a),e=U(A.minDuration,A.maxDuration,B(e)),a<1?(n=h=>{const u=h*a,m=u*e,x=u-s,D=ke(h,a),M=Math.exp(-m);return ye-x/D*M},o=h=>{const m=h*a*e,x=m*s+s,D=Math.pow(a,2)*Math.pow(h,2)*e,M=Math.exp(-m),N=ke(Math.pow(h,2),a);return(-n(h)+ye>0?-1:1)*((x-D)*M)/N}):(n=h=>{const u=Math.exp(-h*e),m=(h-s)*e+1;return-ye+u*m},o=h=>{const u=Math.exp(-h*e),m=(s-h)*(e*e);return u*m});const l=5/e,f=un(n,o,l);if(e=ce(e),isNaN(f))return{stiffness:A.stiffness,damping:A.damping,duration:e};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:e}}}const dn=12;function un(e,t,s){let r=s;for(let n=1;n<dn;n++)r=r-e(r)/t(r);return r}function ke(e,t){return e*Math.sqrt(1-t*t)}const fn=["duration","bounce"],hn=["stiffness","damping","mass"];function et(e,t){return t.some(s=>e[s]!==void 0)}function mn(e){let t={velocity:A.velocity,stiffness:A.stiffness,damping:A.damping,mass:A.mass,isResolvedFromDuration:!1,...e};if(!et(e,hn)&&et(e,fn))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),n=r*r,o=2*U(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:A.mass,stiffness:n,damping:o}}else{const s=ln(e);t={...t,...s,mass:A.mass},t.isResolvedFromDuration=!0}return t}function oe(e=A.visualDuration,t=A.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:n}=s;const o=s.keyframes[0],a=s.keyframes[s.keyframes.length-1],l={done:!1,value:o},{stiffness:f,damping:h,mass:u,duration:m,velocity:x,isResolvedFromDuration:D}=mn({...s,velocity:-B(s.velocity||0)}),M=x||0,N=h/(2*Math.sqrt(f*u)),v=a-o,S=B(Math.sqrt(f/u)),I=Math.abs(v)<5;r||(r=I?A.restSpeed.granular:A.restSpeed.default),n||(n=I?A.restDelta.granular:A.restDelta.default);let k;if(N<1){const w=ke(S,N);k=d=>{const y=Math.exp(-N*S*d);return a-y*((M+N*S*v)/w*Math.sin(w*d)+v*Math.cos(w*d))}}else if(N===1)k=w=>a-Math.exp(-S*w)*(v+(M+S*v)*w);else{const w=S*Math.sqrt(N*N-1);k=d=>{const y=Math.exp(-N*S*d),g=Math.min(w*d,300);return a-y*((M+N*S*v)*Math.sinh(g)+w*v*Math.cosh(g))/w}}const C={calculatedDuration:D&&m||null,next:w=>{const d=k(w);if(D)l.done=w>=m;else{let y=w===0?M:0;N<1&&(y=w===0?ce(M):St(k,w,d));const g=Math.abs(y)<=r,F=Math.abs(a-d)<=n;l.done=g&&F}return l.value=l.done?a:d,l},toString:()=>{const w=Math.min(Ae(C),ie),d=on(y=>C.next(w*y).value,w,30);return w+"ms "+d},toTransition:()=>{}};return C}oe.applyToOptions=e=>{const t=an(e,100,oe);return e.ease=t.ease,e.duration=ce(t.duration),e.type="keyframes",e};function Ne({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:f,restDelta:h=.5,restSpeed:u}){const m=e[0],x={done:!1,value:m},D=g=>l!==void 0&&g<l||f!==void 0&&g>f,M=g=>l===void 0?f:f===void 0||Math.abs(l-g)<Math.abs(f-g)?l:f;let N=s*t;const v=m+N,S=a===void 0?v:a(v);S!==v&&(N=S-m);const I=g=>-N*Math.exp(-g/r),k=g=>S+I(g),C=g=>{const F=I(g),P=k(g);x.done=Math.abs(F)<=h,x.value=x.done?S:P};let w,d;const y=g=>{D(x.value)&&(w=g,d=oe({keyframes:[x.value,M(x.value)],velocity:St(k,g,x.value),damping:n,stiffness:o,restDelta:h,restSpeed:u}))};return y(0),{calculatedDuration:null,next:g=>{let F=!1;return!d&&w===void 0&&(F=!0,C(g),y(g)),w!==void 0&&g>=w?d.next(g-w):(!F&&C(g),x)}}}function pn(e,t,s){const r=[],n=s||te.mix||Mt,o=e.length-1;for(let a=0;a<o;a++){let l=n(e[a],e[a+1]);if(t){const f=Array.isArray(t)?t[a]||ae:t;l=Te(f,l)}r.push(l)}return r}function Ct(e,t,{clamp:s=!0,ease:r,mixer:n}={}){const o=e.length;if(ct(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=pn(t,r,n),f=l.length,h=u=>{if(a&&u<e[0])return t[0];let m=0;if(f>1)for(;m<e.length-2&&!(u<e[m+1]);m++);const x=lt(e[m],e[m+1],u);return l[m](x)};return s?u=>h(U(e[0],e[o-1],u)):h}function gn(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const n=lt(0,t,r);e.push(de(s,1,n))}}function xn(e){const t=[0];return gn(t,e.length-1),t}function bn(e,t){return e.map(s=>s*t)}function yn(e,t){return e.map(()=>t||pt).splice(0,e.length-1)}function H({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const n=Ts(r)?r.map(He):He(r),o={done:!1,value:t[0]},a=bn(s&&s.length===t.length?s:xn(t),e),l=Ct(a,t,{ease:Array.isArray(n)?n:yn(t,n)});return{calculatedDuration:e,next:f=>(o.value=l(f),o.done=f>=e,o)}}const vn=e=>e!==null;function wn(e,{repeat:t,repeatType:s="loop"},r,n=1){const o=e.filter(vn),l=n<0||t&&s!=="loop"&&t%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const jn={decay:Ne,inertia:Ne,tween:H,keyframes:H,spring:oe};function kn(e){typeof e.type=="string"&&(e.type=jn[e.type])}class Nn{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const Tn=e=>e/100;class Mn extends Nn{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==O.now()&&this.tick(O.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;kn(t);const{type:s=H,repeat:r=0,repeatDelay:n=0,repeatType:o,velocity:a=0}=t;let{keyframes:l}=t;const f=s||H;f!==H&&typeof l[0]!="number"&&(this.mixKeyframes=Te(Tn,Mt(l[0],l[1])),l=[0,100]);const h=f({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=f({...t,keyframes:[...l].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=Ae(h));const{calculatedDuration:u}=h;this.calculatedDuration=u,this.resolvedDuration=u+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=h}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:n,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:u,repeat:m,repeatType:x,repeatDelay:D,type:M,onUpdate:N,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const S=this.currentTime-h*(this.playbackSpeed>=0?1:-1),I=this.playbackSpeed>=0?S<0:S>n;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let k=this.currentTime,C=r;if(m){const g=Math.min(this.currentTime,n)/l;let F=Math.floor(g),P=g%1;!P&&g>=1&&(P=1),P===1&&F--,F=Math.min(F,m+1),!!(F%2)&&(x==="reverse"?(P=1-P,D&&(P-=D/l)):x==="mirror"&&(C=a)),k=U(0,1,P)*l}const w=I?{done:!1,value:u[0]}:C.next(k);o&&(w.value=o(w.value));let{done:d}=w;!I&&f!==null&&(d=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const y=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&d);return y&&M!==Ne&&(w.value=wn(u,this.options,v,this.speed)),N&&N(w.value),y&&this.finish(),w}then(t,s){return this.finished.then(t,s)}get duration(){return B(this.calculatedDuration)}get time(){return B(this.currentTime)}set time(t){t=ce(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(O.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=B(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=rn,startTime:s}=this.options;this.driver||(this.driver=t(n=>this.tick(n))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(O.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Sn(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const n=document.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}const tt=30,Cn=e=>!isNaN(parseFloat(e)),Y={current:void 0};class Dn{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const n=O.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=O.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Cn(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new ps);const r=this.events[t].add(s);return t==="change"?()=>{r(),le.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return Y.current&&Y.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=O.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>tt)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,tt);return dt(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function An(e,t){return new Dn(e,t)}function Fn(...e){const t=!Array.isArray(e[0]),s=t?0:-1,r=e[0+s],n=e[1+s],o=e[2+s],a=e[3+s],l=Ct(n,o,a);return t?l(r):l}const Dt=e=>!!(e&&e.getVelocity);function En(e,t,s){const r=e.get();let n=null,o=r,a;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,f=()=>{n&&(n.stop(),n=null)},h=()=>{f(),n=new Mn({keyframes:[nt(e.get()),nt(o)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:a})};if(e.attach((u,m)=>(o=u,a=x=>m(st(x,l)),le.postRender(h),e.get()),f),Dt(t)){const u=t.on("change",x=>e.set(st(x,l))),m=e.on("destroy",u);return()=>{u(),m()}}return f}function st(e,t){return t?e+t:e}function nt(e){return typeof e=="number"?e:parseFloat(e)}const At=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Fe(e){const t=at(()=>An(e)),{isStatic:s}=b.useContext(At);if(s){const[,r]=b.useState(e);b.useEffect(()=>t.on("change",r),[])}return t}function Ft(e,t){const s=Fe(t()),r=()=>s.set(t());return r(),us(()=>{const n=()=>le.preRender(r,!1,!0),o=e.map(a=>a.on("change",n));return()=>{o.forEach(a=>a()),gt(r)}}),s}function Pn(e){Y.current=[],e();const t=Ft(Y.current,e);return Y.current=void 0,t}function In(e,t,s,r){if(typeof e=="function")return Pn(e);const n=Fn(t,s,r);return Array.isArray(e)?rt(e,n):rt([e],([o])=>n(o))}function rt(e,t){const s=at(()=>[]);return Ft(e,()=>{s.length=0;const r=e.length;for(let n=0;n<r;n++)s[n]=e[n].get();return t(s)})}function Rn(e,t={}){const{isStatic:s}=b.useContext(At),r=()=>Dt(e)?e.get():e;if(s)return In(r);const n=Fe(r());return b.useInsertionEffect(()=>En(n,e,t),[n,JSON.stringify(t)]),n}const On={some:0,all:1};function Vn(e,t,{root:s,margin:r,amount:n="some"}={}){const o=Sn(e),a=new WeakMap,l=h=>{h.forEach(u=>{const m=a.get(u.target);if(u.isIntersecting!==!!m)if(u.isIntersecting){const x=t(u.target,u);typeof x=="function"?a.set(u.target,x):f.unobserve(u.target)}else typeof m=="function"&&(m(u),a.delete(u.target))})},f=new IntersectionObserver(l,{root:s,rootMargin:r,threshold:typeof n=="number"?n:On[n]});return o.forEach(h=>f.observe(h)),()=>f.disconnect()}function Ln(e,{root:t,margin:s,amount:r,once:n=!1,initial:o=!1}={}){const[a,l]=b.useState(o);return b.useEffect(()=>{if(!e.current||n&&a)return;const f=()=>(l(!0),n?void 0:()=>l(!1)),h={root:t&&t.current||void 0,margin:s,amount:r};return Vn(e.current,f,h)},[t,e,s,n,r]),a}function _n({value:e,startValue:t=0,direction:s="up",delay:r=0,className:n,decimalPlaces:o=0,...a}){const l=b.useRef(null),f=Fe(s==="down"?e:t),h=Rn(f,{damping:60,stiffness:100}),u=Ln(l,{once:!0,margin:"0px"});return b.useEffect(()=>{if(u){const m=setTimeout(()=>{f.set(s==="down"?t:e)},r*1e3);return()=>clearTimeout(m)}},[f,u,r,e,s,t]),b.useEffect(()=>h.on("change",m=>{l.current&&(l.current.textContent=Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:o}).format(Number(m.toFixed(o))))}),[h,o]),i.jsx("span",{ref:l,className:it("inline-block tabular-nums tracking-wider text-black dark:text-white",n),...a,children:t})}function ve({label:e,value:t,delay:s=0}){return i.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-border p-3 shadow-sm text-center flex flex-col items-center justify-center min-w-0",children:[i.jsx("div",{className:"text-xl font-semibold leading-tight",children:typeof t=="number"?i.jsx(_n,{value:t,delay:s}):t}),i.jsx("div",{className:"mt-1 text-xs tracking-caps text-muted uppercase opacity-80 whitespace-nowrap overflow-hidden text-ellipsis leading-snug",title:e,children:e})]})}function qn(){const[e,t]=b.useState([]),[s,r]=b.useState([]),[n,o]=b.useState([]),[a,l]=b.useState([]),[f,h]=b.useState([]),[u,m]=b.useState([]),[x,D]=b.useState("name"),[M,N]=b.useState("asc"),[v,S]=b.useState(!1),[I,k]=b.useState(!1),[C,w]=b.useState(!1),[d,y]=b.useState(""),g=b.useRef(null),F=c=>y(c.target.value);b.useEffect(()=>{(async()=>{const[c,p,j,T,E]=await Promise.all([qt(),Le(),Xt(),Ht(),Yt()]);t(c),r(p),o(j),l(T),h(E)})()},[]);const P=n.length,$=n.filter(c=>c.status==="Complete").length,G=P?Math.round($/P*100):0;[...b.useMemo(()=>{const c=new Map;for(const p of s)for(const j of p.owner_ids||[])c.set(j,(c.get(j)||0)+1);return c},[s]).entries()].sort((c,p)=>p[1]-c[1]).slice(0,5).map(([c,p])=>({name:e.find(j=>j.id===c)?.name||c,count:p}));const Et=e.map(c=>{const p=n.filter(j=>j.assignee_id===c.id&&j.status==="Complete").length;return{...c,completed:p}}).sort((c,p)=>p.completed-c.completed).slice(0,5),Pt=new Map(e.map(c=>[c.id,c])),Z=new Map;for(const c of n){const p=Z.get(c.project_id)??[];p.push(c),Z.set(c.project_id,p)}const ue=c=>{const p=Z.get(c.id)??[];return p.length?p.filter(T=>T.status==="Complete").length/p.length:0},It=Jt(),Rt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Ot(c){const p=new Date,j=[];let T=0,E=new Date(p);for(;j.length<3&&T<14;){const R=E.getDay();if([2,4,6].includes(R)){const he=E.toISOString().slice(0,10),me=c.filter(q=>new Date(q.date).toISOString().slice(0,10)===he).reduce((q,Ve)=>q+Ve.present,0);j.unshift({label:Rt[R],present:me})}E.setDate(E.getDate()-1),T++}return j}function Vt(c){const p=new Date,j=30;return Array.from({length:j}).map((T,E)=>{const R=new Date(p);R.setDate(p.getDate()-(j-1-E));const he=R.getDay();if(![2,4,6].includes(he))return null;const me=R.toISOString().slice(0,10),q=c.filter(pe=>new Date(pe.date).toISOString().slice(0,10)===me).reduce((pe,Kt)=>pe+Kt.present,0);return{label:`${R.toLocaleString(void 0,{month:"short"})} ${R.getDate()}`,present:q}}).filter(Boolean)}const Ee=a.map(c=>({date:c.date,present:1})),Lt=Ot(Ee),_t=Vt(Ee).filter(c=>c!==null),z=b.useMemo(()=>s.filter(c=>!c.archived),[s]),Pe=b.useMemo(()=>{if(!f?.length)return new Set;const c=new Map;for(const T of f)!T.from_id||!T.to_id||(c.has(T.to_id)||c.set(T.to_id,[]),c.get(T.to_id).push(T.from_id));const p=new Set;for(const T of z){const E=n.filter(R=>R.project_id===T.id);E.length&&E.every(R=>R.status==="Complete")&&p.add(T.id)}const j=new Set;for(const T of z){const E=c.get(T.id)||[];E.length&&E.some(R=>!p.has(R))&&j.add(T.id)}return j},[z,n,f]),_=b.useMemo(()=>z.filter(c=>!Pe.has(c.id)),[z,Pe]),Ie=b.useMemo(()=>{const c=new Set;for(const p of _)p.subsystem&&c.add(p.subsystem);return Array.from(c).sort()},[_]),$t=b.useMemo(()=>{const c=new Map;for(const p of _)p.subsystem&&c.set(p.subsystem,(c.get(p.subsystem)||0)+1);return c},[_]),[fe,Wt]=b.useState(!1),Bt=[...b.useMemo(()=>{let c=u.length?_.filter(p=>p.subsystem&&u.includes(p.subsystem)):_;if(d.trim()){const p=d.trim().toLowerCase();c=c.filter(j=>j.name.toLowerCase().includes(p)||j.description&&j.description.toLowerCase().includes(p)||j.subsystem&&j.subsystem.toLowerCase().includes(p))}return fe&&(c=c.filter(p=>ue(p)<1)),c},[_,u,d,fe])].sort((c,p)=>{let j=0;if(x==="name")j=c.name.localeCompare(p.name);else if(x==="due"){const T=c.due_date,E=p.due_date;T&&E?j=T.localeCompare(E):T&&!E?j=-1:!T&&E?j=1:j=0}else x==="progress"?j=ue(c)-ue(p):j=(c.subsystem||"").localeCompare(p.subsystem||"")||c.name.localeCompare(p.name);return M==="asc"?j:-j}),Re=c=>c==="name"?"Name":c==="due"?"Due date":c==="progress"?"Progress":"Subsystem",Oe=M==="asc"?"↑":"↓";b.useEffect(()=>{const c=p=>{p.key==="Escape"&&(S(!1),k(!1))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]),It?.uid;async function Ut(){const[c]=await Promise.all([Le()]);r(c)}return i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Team Overview"}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsx(ve,{label:"Members",value:e.length,delay:0}),i.jsx(ve,{label:"Projects",value:_.length,delay:.5}),i.jsx(ve,{label:"Tasks",value:P,delay:1})]}),i.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-border p-2 pb-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"text-xs tracking-caps text-muted uppercase opacity-80",children:"Total Task Completion"}),i.jsxs("div",{className:"text-xl font-semibold leading-tight",children:[G,"%"]})]}),i.jsx(ot,{value:G,heightClass:"h-3",color:G===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})]})]}),i.jsx("div",{className:"min-w-0",children:i.jsxs(is,{slideIndexInitial:0,onIndexChange:()=>{},dots:!0,children:[i.jsx(ls,{title:"Attendance",weekData:Lt,monthData:_t,className:"h-56"}),i.jsxs("div",{className:"relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-border shadow-sm overflow-hidden h-56 flex flex-col",children:[i.jsx("h2",{className:"text-xs md:text-sm mb-2 text-muted uppercase tracking-caps",style:{fontWeight:400},children:"All-Time Leaderboard"}),i.jsx("div",{className:"h-full overflow-hidden",children:i.jsxs("table",{className:"mx-auto w-full table-fixed text-xs sm:text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-8 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"#"}),i.jsx("th",{className:"py-1 px-2 text-left text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Name"}),i.jsx("th",{className:"w-24 md:w-28 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Tasks"})]})}),i.jsx("tbody",{className:"align-middle",children:Et.slice(0,7).map((c,p)=>i.jsxs("tr",{className:p===0?"bg-yellow-100/40":"",children:[i.jsx("td",{className:"py-1 px-2 text-center",children:p+1}),i.jsx("td",{className:"py-1 px-2",children:i.jsxs("div",{className:"truncate flex items-center gap-1 mb-0.5",children:[c.name,p===0&&i.jsx(rs,{})]})}),i.jsx("td",{className:"py-1 px-2 text-center",children:c.completed})]},c.id))})]})})]})]})})]}),i.jsxs("div",{className:"mt-6 mb-2 flex items-center w-full",style:{display:"flex"},children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Projects"}),i.jsx(Zt,{children:i.jsxs("button",{"aria-label":"Create project",onClick:()=>w(!0),className:"group inline-flex items-center justify-center h-7 w-7 rounded-md border border-accent/40 bg-accent/15 hover:bg-accent/25 text-accent transition shadow-sm hover:shadow-accent/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 ml-2",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.1",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),i.jsx("span",{className:"sr-only",children:"Add project"})]})}),i.jsx("div",{className:"flex-1"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none outline-none focus:outline-none",style:{marginLeft:8},children:[i.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[i.jsx("input",{type:"checkbox",checked:fe,onChange:c=>Wt(c.target.checked),className:"peer sr-only",onMouseUp:c=>c.currentTarget.blur()}),i.jsx("span",{className:`
                pointer-events-none block h-6 w-11 rounded-full border border-border
                bg-black/15 dark:bg-white/15
                transition-colors
                peer-checked:bg-[#64C7C9]
                peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
              `}),i.jsx("span",{className:`
                pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                bg-white dark:bg-background shadow
                transition-transform
                peer-checked:translate-x-5
              `})]}),i.jsx("span",{className:"sr-only",children:"Hide completed projects"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[i.jsxs("div",{className:"relative min-w-0",children:[i.jsxs("button",{onClick:()=>{S(c=>!c),k(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 shadow-sm w-full",children:["Subsystems: ",i.jsx("span",{className:"font-semibold",children:u.length?`${u.length} selected`:"All"})]}),i.jsxs("div",{className:`absolute z-20 mt-1 w-64 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${v?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[i.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:i.jsx("button",{className:"w-full px-3 py-2 rounded-md text-xs sm:text-sm font-semibold bg-red-500/15 hover:bg-red-500/25 text-red-200 focus:outline-none focus-visible:outline-none",onClick:()=>m([]),children:"Clear selection"})}),i.jsxs("div",{className:"max-h-60 overflow-auto p-1",children:[Ie.length===0&&i.jsx("div",{className:"px-3 py-2 text-xs text-muted uppercase tracking-caps",children:"No subsystems"}),Ie.map(c=>{const p=u.includes(c),j=$t.get(c)??0;return i.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-xs rounded hover:bg-card/80 cursor-pointer focus:outline-none focus-visible:outline-none",children:[i.jsx("input",{type:"checkbox",className:"accent-accent focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",checked:p,onChange:()=>{m(T=>p?T.filter(E=>E!==c):[...T,c])}}),i.jsx("span",{className:"truncate",children:c}),i.jsx("span",{className:"ml-auto inline-flex items-center justify-center rounded-full bg-surface/80 px-2 py-0.5 text-[10px]",children:j})]},c)})]})]})]}),i.jsxs("div",{className:"relative min-w-0",children:[i.jsxs("button",{onClick:()=>{k(c=>!c),S(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 shadow-sm w-full",children:["Sort: ",i.jsxs("span",{className:"font-semibold",children:[Re(x)," ",Oe]})]}),i.jsx("div",{className:`absolute z-20 mt-1 w-48 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${I?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:["name","subsystem","due","progress"].map(c=>i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs hover:bg-surface/80 ${x===c?"bg-surface/80":""}`,onClick:()=>{x===c?N(p=>p==="asc"?"desc":"asc"):D(c),k(!1)},children:[Re(c)," ",x===c?Oe:""]},c))})]}),(v||I)&&i.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{S(!1),k(!1)}})]}),i.jsx("div",{className:"w-full mt-2 mb-4",children:i.jsx("input",{ref:g,type:"text",value:d,onChange:F,placeholder:"Search projects...",className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface focus:bg-card/80 shadow-sm w-full focus:outline-none"})}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2",children:Bt.map(c=>i.jsx(ns,{project:c,owners:c.owner_ids?.map(p=>Pt.get(p)).filter(Boolean)??[],tasks:Z.get(c.id)??[],compact:!0},c.id))}),i.jsx(Qt,{open:C,onClose:()=>w(!1),people:e,onCreated:async()=>{await Ut()}})]})}export{qn as default};
