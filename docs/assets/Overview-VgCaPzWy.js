import{j as e,u as Me,L as De,r as o,f as Te,a as te,b as Ae,c as _e,d as Pe,e as Le,R as $e}from"./index-BzkRah2L.js";import{P as me}from"./ProgressBar-Dybulypg.js";import{R as se,A as ne,X as re,Y as ae,C as oe,T as le,a as ie}from"./AreaChart-zsGHxzoV.js";import{P as Fe}from"./ProjectCreateModal-ChG1jfwH.js";import"./clsx-B-dksMZM.js";import"./PersonSelectPopover-Cu5U2p55.js";function We({href:n,children:i}){return n?e.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-3 py-1.5 rounded bg-card/80 hover:bg-card transition",children:i}):null}function Ee(...n){return n.filter(Boolean).join(" ")}function Re({className:n,...i}){return e.jsx("div",{className:Ee("animate-pulse rounded-md bg-muted",n),...i})}function Ie({project:n,owners:i,tasks:l,compact:g=!1}){function j(c){return c===1?.5:c===3?1:c===10?3:c===6?2:c===15?5:c===40?10:c===65?15:c===98?20:c===150?25:c===200?30:Math.max(0,Math.round(c/4))}const C=Math.round(l.reduce((c,w)=>c+(typeof w.ranked_points=="number"?j(w.ranked_points):2),0)),[f]=Me(),b=l.length,N=l.filter(c=>c.status==="Complete").length,y=b>0?N/b*100:0,u=`${Math.round(y)}%`,m=l.reduce((c,w)=>c+(w.ranked_points??(w.status==="Complete"?35:10)),0),p=g?"rounded-xl bg-card dark:bg-surface border border-white/10 p-2.5":"rounded-2xl bg-card dark:bg-surface border border-white/10 p-3",L=g?"text-base font-semibold hover:underline mb-0":"text-lg font-semibold hover:underline mb-0",T=g?"h-2":"h-2.5";return e.jsxs("div",{className:p,children:[e.jsxs("div",{className:"flex items-start justify-between gap-0",children:[e.jsx("div",{className:"flex items-center min-w-0",children:e.jsx(De,{to:`/project/${n.id}`,className:`${L} truncate`,title:n.name,children:n.name})}),n.design_link&&e.jsx("div",{className:"flex gap-2 shrink-0",children:g?e.jsx("a",{href:n.design_link,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-1.5 py-0 rounded bg-card dark:bg-surface text-xs border border-[#24304F] transition outline outline-2 outline-[#24304F] font-normal",style:{background:"rgba(255,255,255,0.10)",borderColor:"#24304F",color:"#FFFFFF",fontWeight:"400"},children:"Link"}):e.jsx(We,{href:n.design_link,children:"Design Docs"})})]}),e.jsx("div",{className:"min-h-4 h-4 flex items-center mb-2",children:n.subsystem?e.jsx("div",{className:"text-xs uppercase tracking-caps font-normal text-muted leading-none",children:n.subsystem}):e.jsx(Re,{className:"h-3 w-16 invisible"})}),e.jsx("div",{className:"flex items-center justify-between gap-2 text-tick text-muted leading-none",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:"OWNERS"}),i.length>0?e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-card dark:bg-surface whitespace-normal break-words text-[10px] leading-none",style:{paddingTop:"1px",paddingBottom:"1px"},children:i.length}):e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white/10 whitespace-normal break-words text-[10px] leading-none",style:{paddingTop:"1px",paddingBottom:"1px"},children:"N/A"})]})}),n.due_date&&(()=>{let c=null;const w=n.due_date,M=w.match(/(\d{4})[\/\-]?(\d{2})[\/\-]?(\d{2})/);if(M){const[,A,S,_]=M;c=new Date(Number(A),Number(S)-1,Number(_))}else isNaN(Date.parse(w))||(c=new Date(w));if(c){const A=c.toLocaleString("en-US",{weekday:g?"short":"long"}),S=c.toLocaleString("en-US",{month:g?"short":"long"}),_=c.getDate(),$=r=>r===1||r===21||r===31?"st":r===2||r===22?"nd":r===3||r===23?"rd":"th";return e.jsxs("span",{className:"text-[10px] uppercase tracking-wide opacity-80 whitespace-nowrap ml-2 shrink-0 leading-none",children:[A," ",S," ",_,$(_)]})}return null})()]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 leading-none",children:[e.jsx("div",{className:"text-[11px] text-muted font-normal",children:u}),e.jsxs("div",{className:"text-muted flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide opacity-80",children:b>0?`${N}/${b} tasks`:"No tasks"}),e.jsx("span",{className:"opacity-80",children:"·"}),e.jsxs("span",{className:"text-[10px] font-normal opacity-80",children:[C," hours"]}),f&&e.jsx("span",{className:"opacity-80",children:"·"}),f&&e.jsx("span",{className:"text-[10px] font-normal",style:{color:"#94a3b8"},children:`Σ +${m}`})]})]}),e.jsx("div",{className:"mt-1",children:e.jsx(me,{value:y,heightClass:T,color:y===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})})]})}function Oe({className:n="w-5 h-5 text-yellow-500 inline ml-1"}){return e.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6 2a1 1 0 00-1 1v2a1 1 0 001 1h8a1 1 0 001-1V3a1 1 0 00-1-1H6zm8 4H6v1a6 6 0 005 5.92V15H9a1 1 0 000 2h2a1 1 0 000-2h-2v-2.08A6 6 0 0014 7V6z"})})}function Be({children:n,slideIndexInitial:i=0,onIndexChange:l,dots:g=!0,frameClassName:j}){const C=Array.isArray(n)?n:[n],[f,b]=o.useState(i),N=o.useRef(null),y=o.useRef(null),u=o.useRef({startX:0,currentX:0,dragging:!1,width:0});o.useEffect(()=>{l?.(f)},[f]);const m=(r,h=!0)=>{const k=y.current,W=N.current;if(!k||!W)return;const F=k.clientWidth;u.current.width=F,W.style.transition=h?"transform 320ms cubic-bezier(0.22, 1, 0.36, 1)":"none",W.style.transform=`translateX(${-r*F}px)`},p=r=>{const h=y.current;h&&(u.current={startX:r,currentX:r,dragging:!0,width:h.clientWidth})},L=r=>{if(!u.current.dragging)return;u.current.currentX=r;const h=r-u.current.startX,k=N.current;k&&(k.style.transition="none",k.style.transform=`translateX(${h-f*u.current.width}px)`)},T=()=>{if(!u.current.dragging)return;const r=u.current.currentX-u.current.startX,h=Math.max(40,u.current.width*.2);let k=f;r>h?k=Math.max(0,f-1):r<-h&&(k=Math.min(C.length-1,f+1)),m(k,!0),b(k),u.current.dragging=!1},c=r=>p(r.touches[0].clientX),w=r=>L(r.touches[0].clientX),M=()=>T(),A=r=>{r.preventDefault(),p(r.clientX)},S=r=>L(r.clientX),_=()=>T(),$=()=>T();return o.useEffect(()=>{const r=()=>{m(f,!1)};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[f]),o.useEffect(()=>{m(f,!0)},[f]),e.jsx("div",{className:"w-full select-none",children:e.jsxs("div",{ref:y,className:`relative overflow-hidden rounded-2xl ${j||""}`,onTouchStart:c,onTouchMove:w,onTouchEnd:M,onMouseDown:A,onMouseMove:S,onMouseUp:_,onMouseLeave:$,children:[e.jsx("div",{ref:N,className:"flex",style:{willChange:"transform"},children:C.map((r,h)=>e.jsx("div",{className:"w-full shrink-0 px-1",children:r},h))}),g&&e.jsx("div",{className:"mt-3 mb-2 flex items-center justify-center gap-2",children:C.map((r,h)=>e.jsx("button",{"aria-label":`Show slide ${h+1}`,className:`w-2.5 h-2.5 rounded-full border border-border transition ${f===h?"bg-foreground":"bg-muted-foreground/40 hover:bg-foreground/70"}`,onClick:()=>b(h)},h))})]})})}function ce({show:n,children:i}){const l=o.useRef(null);return o.useEffect(()=>{l.current&&(n?(l.current.style.opacity="1",l.current.style.transform="translateY(0)",l.current.style.pointerEvents="auto"):(l.current.style.opacity="0",l.current.style.transform="translateY(20px)",l.current.style.pointerEvents="none"))},[n]),e.jsx("div",{ref:l,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"opacity 0.4s, transform 0.4s",opacity:n?1:0,transform:n?"translateY(0)":"translateY(20px)",pointerEvents:n?"auto":"none"},children:i})}const Xe=[{label:"Mon",present:4},{label:"Tue",present:6},{label:"Wed",present:5},{label:"Thu",present:9},{label:"Fri",present:8},{label:"Sat",present:12},{label:"Sun",present:16}],ze=Array.from({length:30}).map((n,i)=>({label:`${i+1}`,present:Math.max(0,Math.round(5+6*Math.sin(i/4)))})),O={line:["accent"],card:["surface"],border:["border"],text:["text"]},D={accent:"#64C7C9",surface:"#0F1B3A",border:"#24304F",text:"#FFFFFF",overlay:"rgba(255,255,255,0.06)"};function B(n,i){for(const l of n)if(l in D)return D[l];return i}function de(n,i){if(n.startsWith("#")){const l=parseInt(n.slice(1),16),g=l>>16&255,j=l>>8&255,C=l&255;return`rgba(${g},${j},${C},${i})`}return n.startsWith("rgb")?n.replace(/rgb\(([^)]+)\)/,`rgba($1,${i})`):n}function ue({active:n,payload:i}){if(!n||!i?.length)return null;const l=i[0].payload;return e.jsxs("div",{className:"rounded-xl px-3 py-2 text-sm shadow-lg border",style:{background:D.surface,borderColor:D.border,color:D.text},children:[e.jsx("div",{className:"opacity-70",children:l.label}),e.jsxs("div",{className:"font-semibold",children:[l.present," present"]})]})}function Ge(n){const{weekData:i=Xe,monthData:l=ze,className:g,title:j="Attendance"}=n,C=new Date,f=[2,4,6].includes(C.getDay()),[b,N]=o.useState("month"),y=b==="week"?i:l,u=o.useMemo(()=>y.length?y[y.length-1].present:0,[y]),m={line:B(O.line,D.accent),card:B(O.card,D.surface),border:B(O.border,D.border),text:B(O.text,D.text)};return e.jsxs("div",{className:`relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-border overflow-hidden h-full flex flex-col ${g??""}`,style:{background:m.card,borderColor:m.border,color:m.text},children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 min-w-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-widest opacity-70",children:j}),e.jsx("div",{className:"mt-1 text-xl font-bold leading-tight",children:u}),e.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:f?"Today":"Last meeting"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>N("week"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${b==="week"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:m.border},children:"Week"}),e.jsx("button",{onClick:()=>N("month"),className:`px-1 py-0.5 rounded bg-card/80 text-foreground border transition text-[11px] ${b==="month"?"opacity-100":"opacity-70 hover:opacity-100"}`,style:{borderColor:m.border},children:"Month"})]})]}),e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden flex-1 min-h-0 min-w-0 relative",children:[e.jsx(ce,{show:b==="week",children:e.jsx(se,{width:"100%",height:"100%",className:"block",children:e.jsxs(ne,{data:i,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:m.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:m.line,stopOpacity:.1})]})}),e.jsx(re,{dataKey:"label",hide:!0}),e.jsx(ae,{hide:!0,domain:[0,p=>Math.max(10,p*1.15)]}),e.jsx(oe,{horizontal:!1,vertical:!1}),e.jsx(le,{content:e.jsx(ue,{}),cursor:{stroke:de(m.text,.06),strokeWidth:20}}),e.jsx(ie,{type:"monotone",dataKey:"present",stroke:m.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})}),e.jsx(ce,{show:b==="month",children:e.jsx(se,{width:"100%",height:"100%",className:"block",children:e.jsxs(ne,{data:l,margin:{top:8,right:16,bottom:8,left:12},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"attnGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:m.line,stopOpacity:.45}),e.jsx("stop",{offset:"100%",stopColor:m.line,stopOpacity:.1})]})}),e.jsx(re,{dataKey:"label",hide:!0}),e.jsx(ae,{hide:!0,domain:[0,p=>Math.max(10,p*1.15)]}),e.jsx(oe,{horizontal:!1,vertical:!1}),e.jsx(le,{content:e.jsx(ue,{}),cursor:{stroke:de(m.text,.06),strokeWidth:20}}),e.jsx(ie,{type:"monotone",dataKey:"present",stroke:m.line,strokeWidth:3,fill:"url(#attnGradient)"})]})})})]})]})}function V({label:n,value:i}){return e.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-white/10 p-3 text-center flex flex-col items-center justify-center min-w-0",children:[e.jsx("div",{className:"text-xl font-semibold leading-tight",children:i}),e.jsx("div",{className:"mt-1 text-xs tracking-caps text-muted uppercase opacity-80 whitespace-nowrap overflow-hidden text-ellipsis leading-snug",title:n,children:n})]})}function Ze(){const[n,i]=o.useState([]),[l,g]=o.useState([]),[j,C]=o.useState([]),[f,b]=o.useState([]),[N,y]=o.useState([]),[u,m]=o.useState([]),[p,L]=o.useState("name"),[T,c]=o.useState("asc"),[w,M]=o.useState(!1),[A,S]=o.useState(!1),[_,$]=o.useState(!1),[r,h]=o.useState(""),k=o.useRef(null),W=t=>h(t.target.value);o.useEffect(()=>{(async()=>{const[t,s,a,d,x]=await Promise.all([Te(),te(),Ae(),_e(),Pe()]);i(t),g(s),C(a),b(d),y(x)})()},[]);const F=j.length,xe=j.filter(t=>t.status==="Complete").length,X=F?Math.round(xe/F*100):0;[...o.useMemo(()=>{const t=new Map;for(const s of l)for(const a of s.owner_ids||[])t.set(a,(t.get(a)||0)+1);return t},[l]).entries()].sort((t,s)=>s[1]-t[1]).slice(0,5).map(([t,s])=>({name:n.find(a=>a.id===t)?.name||t,count:s}));const fe=n.map(t=>{const s=j.filter(a=>a.assignee_id===t.id&&a.status==="Complete").length;return{...t,completed:s}}).sort((t,s)=>s.completed-t.completed).slice(0,5),he=new Map(n.map(t=>[t.id,t])),I=new Map;for(const t of j){const s=I.get(t.project_id)??[];s.push(t),I.set(t.project_id,s)}const z=t=>{const s=I.get(t.id)??[];return s.length?s.filter(d=>d.status==="Complete").length/s.length:0},pe=Le(),ge=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function be(t){const s=new Date,a=[];let d=0,x=new Date(s);for(;a.length<3&&d<14;){const v=x.getDay();if([2,4,6].includes(v)){const H=x.toISOString().slice(0,10),Y=t.filter(R=>new Date(R.date).toISOString().slice(0,10)===H).reduce((R,ee)=>R+ee.present,0);a.unshift({label:ge[v],present:Y})}x.setDate(x.getDate()-1),d++}return a}function je(t){const s=new Date,a=30;return Array.from({length:a}).map((d,x)=>{const v=new Date(s);v.setDate(s.getDate()-(a-1-x));const H=v.getDay();if(![2,4,6].includes(H))return null;const Y=v.toISOString().slice(0,10),R=t.filter(K=>new Date(K.date).toISOString().slice(0,10)===Y).reduce((K,Se)=>K+Se.present,0);return{label:`${v.toLocaleString(void 0,{month:"short"})} ${v.getDate()}`,present:R}}).filter(Boolean)}const U=f.map(t=>({date:t.date,present:1})),ye=be(U),we=je(U).filter(t=>t!==null),E=o.useMemo(()=>l.filter(t=>!t.archived),[l]),q=o.useMemo(()=>{if(!N?.length)return new Set;const t=new Map;for(const d of N)!d.from_id||!d.to_id||(t.has(d.to_id)||t.set(d.to_id,[]),t.get(d.to_id).push(d.from_id));const s=new Set;for(const d of E){const x=j.filter(v=>v.project_id===d.id);x.length&&x.every(v=>v.status==="Complete")&&s.add(d.id)}const a=new Set;for(const d of E){const x=t.get(d.id)||[];x.length&&x.some(v=>!s.has(v))&&a.add(d.id)}return a},[E,j,N]),P=o.useMemo(()=>E.filter(t=>!q.has(t.id)),[E,q]),J=o.useMemo(()=>{const t=new Set;for(const s of P)s.subsystem&&t.add(s.subsystem);return Array.from(t).sort()},[P]),ve=o.useMemo(()=>{const t=new Map;for(const s of P)s.subsystem&&t.set(s.subsystem,(t.get(s.subsystem)||0)+1);return t},[P]),[G,Ne]=o.useState(!1),ke=[...o.useMemo(()=>{let t=u.length?P.filter(s=>s.subsystem&&u.includes(s.subsystem)):P;if(r.trim()){const s=r.trim().toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(s)||a.description&&a.description.toLowerCase().includes(s)||a.subsystem&&a.subsystem.toLowerCase().includes(s))}return G&&(t=t.filter(s=>z(s)<1)),t},[P,u,r,G])].sort((t,s)=>{let a=0;if(p==="name")a=t.name.localeCompare(s.name);else if(p==="due"){const d=t.due_date,x=s.due_date;d&&x?a=d.localeCompare(x):d&&!x?a=-1:!d&&x?a=1:a=0}else p==="progress"?a=z(t)-z(s):a=(t.subsystem||"").localeCompare(s.subsystem||"")||t.name.localeCompare(s.name);return T==="asc"?a:-a}),Q=t=>t==="name"?"Name":t==="due"?"Due date":t==="progress"?"Progress":"Subsystem",Z=T==="asc"?"↑":"↓";o.useEffect(()=>{const t=s=>{s.key==="Escape"&&(M(!1),S(!1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),pe?.uid;async function Ce(){const[t]=await Promise.all([te()]);g(t)}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Team Overview"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx(V,{label:"Members",value:n.length}),e.jsx(V,{label:"Projects",value:P.length}),e.jsx(V,{label:"Tasks",value:F})]}),e.jsxs("div",{className:"rounded-xl bg-card dark:bg-surface border border-border p-2 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs tracking-caps text-muted uppercase opacity-80",children:"Total Task Completion"}),e.jsxs("div",{className:"text-xl font-semibold leading-tight",children:[X,"%"]})]}),e.jsx(me,{value:X,heightClass:"h-3",color:X===100?"linear-gradient(90deg,#22c55e,#16a34a)":void 0})]})]}),e.jsx("div",{className:"min-w-0",children:e.jsxs(Be,{slideIndexInitial:0,onIndexChange:()=>{},dots:!0,children:[e.jsx(Ge,{title:"Attendance",weekData:ye,monthData:we,className:"h-56"}),e.jsxs("div",{className:"relative max-w-[390px] w-full mx-auto rounded-2xl p-5 md:p-6 border bg-card dark:bg-surface text-foreground border-white/10 overflow-hidden h-56 flex flex-col",children:[e.jsx("h2",{className:"text-xs md:text-sm mb-2 text-muted uppercase tracking-caps",style:{fontWeight:400},children:"All-Time Leaderboard"}),e.jsx("div",{className:"h-full overflow-hidden",children:e.jsxs("table",{className:"mx-auto w-full table-fixed text-xs sm:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"#"}),e.jsx("th",{className:"py-1 px-2 text-left text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Name"}),e.jsx("th",{className:"w-24 md:w-28 py-1 px-2 text-center text-muted uppercase tracking-caps",style:{fontWeight:400},children:"Tasks"})]})}),e.jsx("tbody",{className:"align-middle",children:fe.slice(0,7).map((t,s)=>e.jsxs("tr",{className:s===0?"bg-yellow-100/40":"",children:[e.jsx("td",{className:"py-1 px-2 text-center",children:s+1}),e.jsx("td",{className:"py-1 px-2",children:e.jsxs("div",{className:"truncate flex items-center gap-1 mb-0.5",children:[t.name,s===0&&e.jsx(Oe,{})]})}),e.jsx("td",{className:"py-1 px-2 text-center",children:t.completed})]},t.id))})]})})]})]})})]}),e.jsxs("div",{className:"mt-6 mb-2 flex items-center w-full",style:{display:"flex"},children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Projects"}),e.jsx($e,{children:e.jsxs("button",{"aria-label":"Create project",onClick:()=>$(!0),className:"group inline-flex items-center justify-center h-7 w-7 rounded-md border border-accent/40 bg-accent/15 hover:bg-accent/25 text-accent transition shadow-sm hover:shadow-accent/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 ml-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.1",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),e.jsx("span",{className:"sr-only",children:"Add project"})]})}),e.jsx("div",{className:"flex-1"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none outline-none focus:outline-none",style:{marginLeft:8},children:[e.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:t=>Ne(t.target.checked),className:"peer sr-only",onMouseUp:t=>t.currentTarget.blur()}),e.jsx("span",{className:`
                pointer-events-none block h-6 w-11 rounded-full border border-border
                bg-black/15 dark:bg-white/15
                transition-colors
                peer-checked:bg-[#64C7C9]
                peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
              `}),e.jsx("span",{className:`
                pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                bg-white dark:bg-background shadow
                transition-transform
                peer-checked:translate-x-5
              `})]}),e.jsx("span",{className:"sr-only",children:"Hide completed projects"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted mb-1 uppercase tracking-caps",children:[e.jsxs("div",{className:"flex items-center gap-1",title:"Grey = To-do / Not started",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#BDC0C3"}})," To-do / Not started"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#64C7C9"}})," In Progress"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:"#34D399"}})," Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{M(t=>!t),S(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 w-full",children:["Subsystems: ",e.jsx("span",{className:"font-semibold",children:u.length?`${u.length} selected`:"All"})]}),e.jsxs("div",{className:`absolute z-20 mt-1 w-64 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${w?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:e.jsx("button",{className:"w-full px-3 py-2 rounded-md text-xs sm:text-sm font-semibold bg-red-500/15 hover:bg-red-500/25 text-red-200 focus:outline-none focus-visible:outline-none",onClick:()=>m([]),children:"Clear selection"})}),e.jsxs("div",{className:"max-h-60 overflow-auto p-1",children:[J.length===0&&e.jsx("div",{className:"px-3 py-2 text-xs text-muted uppercase tracking-caps",children:"No subsystems"}),J.map(t=>{const s=u.includes(t),a=ve.get(t)??0;return e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-xs rounded hover:bg-card/80 cursor-pointer focus:outline-none focus-visible:outline-none",children:[e.jsx("input",{type:"checkbox",className:"accent-accent focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",checked:s,onChange:()=>{m(d=>s?d.filter(x=>x!==t):[...d,t])}}),e.jsx("span",{className:"truncate",children:t}),e.jsx("span",{className:"ml-auto inline-flex items-center justify-center rounded-full bg-surface/80 px-2 py-0.5 text-[10px]",children:a})]},t)})]})]})]}),e.jsxs("div",{className:"relative min-w-0",children:[e.jsxs("button",{onClick:()=>{S(t=>!t),M(!1)},className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface hover:bg-card/80 w-full",children:["Sort: ",e.jsxs("span",{className:"font-semibold",children:[Q(p)," ",Z]})]}),e.jsx("div",{className:`absolute z-20 mt-1 w-48 rounded-md border border-border bg-card dark:bg-surface shadow-xl overflow-hidden transition transform origin-top ${A?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:["name","subsystem","due","progress"].map(t=>e.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs hover:bg-surface/80 ${p===t?"bg-surface/80":""}`,onClick:()=>{p===t?c(s=>s==="asc"?"desc":"asc"):L(t),S(!1)},children:[Q(t)," ",p===t?Z:""]},t))})]}),(w||A)&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{M(!1),S(!1)}})]}),e.jsx("div",{className:"w-full mt-2 mb-4",children:e.jsx("input",{ref:k,type:"text",value:r,onChange:W,placeholder:"Search projects...",className:"px-3 py-1.5 rounded-md text-xs font-medium border border-border bg-card dark:bg-surface focus:bg-card/80 w-full focus:outline-none"})}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2",children:ke.map(t=>e.jsx(Ie,{project:t,owners:t.owner_ids?.map(s=>he.get(s)).filter(Boolean)??[],tasks:I.get(t.id)??[],compact:!0},t.id))}),e.jsx(Fe,{open:_,onClose:()=>$(!1),people:n,onCreated:async()=>{await Ce()}})]})}export{Ze as default};
