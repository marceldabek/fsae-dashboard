const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D3k_KiqT.js","assets/index-C7Pwn_nw.css"])))=>i.map(i=>d[i]);
import{r as p,b as be,u as je,a as we,f as Se,D as Ce,w as ke,y as ze,_ as Ne,O as Te,j as r,L as Ee,P as Ie,Q as Me}from"./index-D3k_KiqT.js";import{M as De,a as Ae,D as _e,I as Fe,S as Le,b as He,d as Re,e as We,f as Pe}from"./modal-nQA6oMK7.js";import"./clsx-B-dksMZM.js";const ce=({size:t=24,color:e="currentColor",...n})=>p.createElement("svg",{viewBox:"0 0 24 24",width:t,height:t,stroke:e,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n},p.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),p.createElement("path",{d:"M18.727 14.727a1.5 1.5 0 0 0 .3 1.655l.055.054a1.816 1.816 0 0 1 0 2.573 1.818 1.818 0 0 1-2.573 0l-.055-.055a1.5 1.5 0 0 0-1.654-.3 1.5 1.5 0 0 0-.91 1.373v.155a1.818 1.818 0 1 1-3.636 0V20.1a1.5 1.5 0 0 0-.981-1.373 1.5 1.5 0 0 0-1.655.3l-.054.055a1.818 1.818 0 0 1-3.106-1.287 1.818 1.818 0 0 1 .533-1.286l.054-.055a1.5 1.5 0 0 0 .3-1.654 1.5 1.5 0 0 0-1.372-.91h-.155a1.818 1.818 0 1 1 0-3.636H3.9a1.5 1.5 0 0 0 1.373-.981 1.5 1.5 0 0 0-.3-1.655l-.055-.054A1.818 1.818 0 1 1 7.491 4.99l.054.054a1.5 1.5 0 0 0 1.655.3h.073a1.5 1.5 0 0 0 .909-1.372v-.155a1.818 1.818 0 0 1 3.636 0V3.9a1.499 1.499 0 0 0 .91 1.373 1.5 1.5 0 0 0 1.654-.3l.054-.055a1.817 1.817 0 0 1 2.573 0 1.819 1.819 0 0 1 0 2.573l-.055.054a1.5 1.5 0 0 0-.3 1.655v.073a1.5 1.5 0 0 0 1.373.909h.155a1.818 1.818 0 0 1 0 3.636H20.1a1.499 1.499 0 0 0-1.373.91Z"}));ce.displayName="Settings01";const Be={light:{color:{bg:"#FFFFFF",surface:"#F8F9FA",border:"#E9ECEF",text:"#212529",muted:"#6C757D",accent:"#0066CC","accent-weak":"#66B3FF",success:"#198754",warning:"#FFC107",danger:"#DC3545","overlay-06":"rgba(0,0,0,0.06)","overlay-10":"rgba(0,0,0,0.10)","profile-border":"#E9ECEF"}},dark:{color:{bg:"#000E2F",surface:"#0F1B3A",border:"#24304F",text:"#FFFFFF",muted:"#BDC0C3",accent:"#64C7C9","accent-weak":"#98D7D8",success:"#34D399",warning:"#FACC15",danger:"#BE2D2D","overlay-06":"rgba(255,255,255,0.06)","overlay-10":"rgba(255,255,255,0.10)","profile-border":"#24304F"}}},Oe={size:{display:"24px",heading:"20px",section:"18px",body:"14px",meta:"12px",caption:"11px",tiny:"10px"},weight:{bold:700,semibold:600,medium:500,regular:400},family:{sans:"Inter, ui-sans-serif, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, 'Noto Sans'",mono:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"}},$e={xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px","2xl":"48px"},Ve={primary:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",secondary:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",success:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",warning:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)"},Ue={sm:"4px",md:"6px",lg:"8px",xl:"12px",full:"9999px"},I={themes:Be,typography:Oe,spacing:$e,gradients:Ve,radii:Ue};function qe(){const[t,e]=p.useState("light");p.useEffect(()=>{const i=localStorage.getItem("theme"),u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e(i||u)},[]);const n=()=>{const i=t==="light"?"dark":"light";e(i),localStorage.setItem("theme",i)},a={color:I.themes[t].color,typography:I.typography,spacing:I.spacing,gradients:I.gradients,radii:I.radii};return{theme:t,toggleTheme:n,tokens:a}}/*! Fast Average Color | Â© 2025 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function Ge(t){var e=t.toString(16);return e.length===1?"0"+e:e}function se(t){return"#"+t.map(Ge).join("")}function Ze(t){var e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128}function Ye(t){return t?Xe(t)?t:[t]:[]}function Xe(t){return Array.isArray(t[0])}function X(t,e,n){for(var a=0;a<n.length;a++)if(Je(t,e,n[a]))return!0;return!1}function Je(t,e,n){switch(n.length){case 3:if(Qe(t,e,n))return!0;break;case 4:if(Ke(t,e,n))return!0;break;case 5:if(et(t,e,n))return!0;break;default:return!1}}function Qe(t,e,n){return t[e+3]!==255||t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2]}function Ke(t,e,n){return t[e+3]&&n[3]?t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2]&&t[e+3]===n[3]:t[e+3]===n[3]}function H(t,e,n){return t>=e-n&&t<=e+n}function et(t,e,n){var a=n[0],i=n[1],u=n[2],o=n[3],d=n[4],g=t[e+3],x=H(g,o,d);return o?!!(!g&&x||H(t[e],a,d)&&H(t[e+1],i,d)&&H(t[e+2],u,d)&&x):x}var tt=24;function rt(t,e,n){for(var a={},i=n.dominantDivider||tt,u=n.ignoredColor,o=n.step,d=[0,0,0,0,0],g=0;g<e;g+=o){var x=t[g],m=t[g+1],v=t[g+2],b=t[g+3];if(!(u&&X(t,g,u))){var j=Math.round(x/i)+","+Math.round(m/i)+","+Math.round(v/i);a[j]?a[j]=[a[j][0]+x*b,a[j][1]+m*b,a[j][2]+v*b,a[j][3]+b,a[j][4]+1]:a[j]=[x*b,m*b,v*b,b,1],d[4]<a[j][4]&&(d=a[j])}}var S=d[0],R=d[1],W=d[2],k=d[3],P=d[4];return k?[Math.round(S/k),Math.round(R/k),Math.round(W/k),Math.round(k/P)]:n.defaultColor}function nt(t,e,n){for(var a=0,i=0,u=0,o=0,d=0,g=n.ignoredColor,x=n.step,m=0;m<e;m+=x){var v=t[m+3],b=t[m]*v,j=t[m+1]*v,S=t[m+2]*v;g&&X(t,m,g)||(a+=b,i+=j,u+=S,o+=v,d++)}return o?[Math.round(a/o),Math.round(i/o),Math.round(u/o),Math.round(o/d)]:n.defaultColor}function st(t,e,n){for(var a=0,i=0,u=0,o=0,d=0,g=n.ignoredColor,x=n.step,m=0;m<e;m+=x){var v=t[m],b=t[m+1],j=t[m+2],S=t[m+3];g&&X(t,m,g)||(a+=v*v*S,i+=b*b*S,u+=j*j*S,o+=S,d++)}return o?[Math.round(Math.sqrt(a/o)),Math.round(Math.sqrt(i/o)),Math.round(Math.sqrt(u/o)),Math.round(o/d)]:n.defaultColor}function ae(t){return D(t,"defaultColor",[0,0,0,0])}function D(t,e,n){return t[e]===void 0?n:t[e]}var ie=10,Y=100;function at(t){return t.search(/\.svg(\?|$)/i)!==-1}function it(t){if(de(t)){var e=t.naturalWidth,n=t.naturalHeight;return!t.naturalWidth&&at(t.src)&&(e=n=Y),{width:e,height:n}}return lt(t)?{width:t.videoWidth,height:t.videoHeight}:ue(t)?{width:t.codedWidth,height:t.codedHeight}:{width:t.width,height:t.height}}function oe(t){return ct(t)?"canvas":ot(t)?"offscreencanvas":ue(t)?"videoframe":dt(t)?"imagebitmap":t.src}function de(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement}var he=typeof OffscreenCanvas<"u";function ot(t){return he&&t instanceof OffscreenCanvas}function lt(t){return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement}function ue(t){return typeof VideoFrame<"u"&&t instanceof VideoFrame}function ct(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement}function dt(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap}function ht(t,e){var n=D(e,"left",0),a=D(e,"top",0),i=D(e,"width",t.width),u=D(e,"height",t.height),o=i,d=u;if(e.mode==="precision")return{srcLeft:n,srcTop:a,srcWidth:i,srcHeight:u,destWidth:o,destHeight:d};var g;return i>u?(g=i/u,o=Y,d=Math.round(o/g)):(g=u/i,d=Y,o=Math.round(d/g)),(o>i||d>u||o<ie||d<ie)&&(o=i,d=u),{srcLeft:n,srcTop:a,srcWidth:i,srcHeight:u,destWidth:o,destHeight:d}}var ut=typeof window>"u";function gt(){return ut?he?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var ft="FastAverageColor: ";function C(t){return Error(ft+t)}function M(t,e){e||console.error(t)}var pt=(function(){function t(){this.canvas=null,this.ctx=null}return t.prototype.getColorAsync=function(e,n){if(!e)return Promise.reject(C("call .getColorAsync() without resource"));if(typeof e=="string"){if(typeof Image>"u")return Promise.reject(C("resource as string is not supported in this environment"));var a=new Image;return a.crossOrigin=n&&n.crossOrigin||"",a.src=e,this.bindImageEvents(a,n)}else{if(de(e)&&!e.complete)return this.bindImageEvents(e,n);var i=this.getColor(e,n);return i.error?Promise.reject(i.error):Promise.resolve(i)}},t.prototype.getColor=function(e,n){n=n||{};var a=ae(n);if(!e){var i=C("call .getColor() without resource");return M(i,n.silent),this.prepareResult(a,i)}var u=it(e),o=ht(u,n);if(!o.srcWidth||!o.srcHeight||!o.destWidth||!o.destHeight){var i=C('incorrect sizes for resource "'.concat(oe(e),'"'));return M(i,n.silent),this.prepareResult(a,i)}if(!this.canvas&&(this.canvas=gt(),!this.canvas)){var i=C("OffscreenCanvas is not supported in this browser");return M(i,n.silent),this.prepareResult(a,i)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var i=C("Canvas Context 2D is not supported in this browser");return M(i,n.silent),this.prepareResult(a)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=o.destWidth,this.canvas.height=o.destHeight;try{this.ctx.clearRect(0,0,o.destWidth,o.destHeight),this.ctx.drawImage(e,o.srcLeft,o.srcTop,o.srcWidth,o.srcHeight,0,0,o.destWidth,o.destHeight);var d=this.ctx.getImageData(0,0,o.destWidth,o.destHeight).data;return this.prepareResult(this.getColorFromArray4(d,n))}catch(g){var i=C("security error (CORS) for resource ".concat(oe(e),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return M(i,n.silent),n.silent||console.error(g),this.prepareResult(a,i)}},t.prototype.getColorFromArray4=function(e,n){n=n||{};var a=4,i=e.length,u=ae(n);if(i<a)return u;var o=i-i%a,d=(n.step||1)*a,g;switch(n.algorithm||"sqrt"){case"simple":g=nt;break;case"sqrt":g=st;break;case"dominant":g=rt;break;default:throw C("".concat(n.algorithm," is unknown algorithm"))}return g(e,o,{defaultColor:u,ignoredColor:Ye(n.ignoredColor),step:d,dominantDivider:n.dominantDivider})},t.prototype.prepareResult=function(e,n){var a=e.slice(0,3),i=[e[0],e[1],e[2],e[3]/255],u=Ze(e);return{value:[e[0],e[1],e[2],e[3]],rgb:"rgb("+a.join(",")+")",rgba:"rgba("+i.join(",")+")",hex:se(a),hexa:se(e),isDark:u,isLight:!u,error:n}},t.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},t.prototype.bindImageEvents=function(e,n){var a=this;return new Promise(function(i,u){var o=function(){x();var m=a.getColor(e,n);m.error?u(m.error):i(m)},d=function(){x(),u(C('Error loading image "'.concat(e.src,'"')))},g=function(){x(),u(C('Image "'.concat(e.src,'" loading aborted')))},x=function(){e.removeEventListener("load",o),e.removeEventListener("error",d),e.removeEventListener("abort",g)};e.addEventListener("load",o),e.addEventListener("error",d),e.addEventListener("abort",g)})},t})();const mt=new pt,yt=async t=>{try{const n=(await mt.getColorAsync(t,{algorithm:"dominant",ignoredColor:[255,255,255,255]})).value,[a,i,u]=n,o=Math.round(a*.85+255*.15),d=Math.round(i*.85+255*.15),g=Math.round(u*.85+255*.15);return`rgb(${o}, ${d}, ${g})`}catch(e){return console.error("Error extracting color:",e),"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},le=t=>t.avatar_url?t.avatar_url:t.discord_avatar_url?t.discord_avatar_url:t.discord_id&&t.discord_avatar?`https://cdn.discordapp.com/avatars/${t.discord_id}/${t.discord_avatar}.png?size=256`:`https://api.dicebear.com/9.x/initials/svg?seed=${encodeURIComponent(t.name)}`;function jt(){const{id:t}=be(),{tokens:e,theme:n}=qe(),[a,i]=p.useState(null),[u,o]=p.useState([]),[d,g]=p.useState([]),[x,m]=p.useState([]),[v,b]=p.useState([]),[j,S]=p.useState([]),[R,W]=p.useState(0),[k,P]=p.useState(e.gradients.primary),[A]=je(),{role:ge}=we(),[B,T]=p.useState(!1),[J,O]=p.useState(null),[$,Q]=p.useState(!1),[E,K]=p.useState(""),[_,V]=p.useState(""),[U,ee]=p.useState(!1);p.useEffect(()=>{(async()=>{const[s,c,f,h]=await Promise.all([Se(),Ce(),ke(),ze()]),y=s.find(l=>l.id===t)||null;if(i(y),o(c),m(f),g(f.filter(l=>l.assignee_id===t)),S(h),y){const l=le(y),w=await yt(l);P(w)}if(t&&A)try{const l=await Ne(()=>import("./index-D3k_KiqT.js").then(w=>w.ab),__vite__mapDeps([0,1]));typeof l.fetchLogsForPerson=="function"?b(await l.fetchLogsForPerson(t)):b([])}catch{b([])}else b([])})()},[t,A]),p.useEffect(()=>{const s=Te(()=>{try{const c=Me();if(!c){O(null);return}const f=c.uid||"",h=f.match(/^discord:(\d+)/);O(h?h[1]:f)}catch{O(null)}});return()=>{try{s&&s()}catch{}}},[]),p.useEffect(()=>{B&&a&&(K(a.name||""),V(a.year||""),ee(!!a.ranked_opt_in))},[B,a]),p.useEffect(()=>{if(!a)return;const s=new Set([2,4,6]),c=new Set(j.filter(y=>y.person_id===a.id).map(y=>y.date));let f=0;const h=new Date;for(let y=0;y<120;y++){const l=h.getDay(),w=h.toISOString().slice(0,10);if(s.has(l))if(c.has(w))f++;else break;h.setDate(h.getDate()-1)}W(f)},[j,a]);const q=p.useMemo(()=>t?u.filter(s=>s.owner_ids?.includes(t)?!0:x.filter(f=>f.project_id===s.id&&f.assignee_id===t).some(f=>f.status!=="Complete")):[],[u,x,t]),fe=q.length,pe=d.length,me=d.filter(s=>s.status!=="Complete").length,te=p.useMemo(()=>!Array.isArray(v)||v.length===0?[]:v.filter(c=>{const f=c?.type==="ranked_pool_top"||c?.type==="ranked_top",h=typeof c?.note=="string"?c.note:"",y=/(finished|placed)\s*1st|top\s*of\s*(the\s*)?pool/i.test(h),w=((c&&c.position)??(c&&c.rank)??null)===1;return!!(f||y||w)}).map((c,f)=>({id:c?.id??String(f),ts:c?.ts})),[v]),re=p.useMemo(()=>{if(!Array.isArray(v)||v.length===0)return[];const s=h=>{if(typeof h?.delta=="number")return h.delta;if(typeof h?.change=="number")return h.change;const y=typeof h?.note=="string"?h.note:"",l=y.match(/\b(up|down)\b\s*(\d+)?/i);if(l){const F=l[1].toLowerCase(),N=l[2]?parseInt(l[2],10):1;return F==="up"?N:-N}const w=y.match(/([+-]\d+)/);return w?parseInt(w[1],10):null},f=v.filter(h=>{const y=/rank(_|-)?(change|move|movement)/i.test(String(h?.type||"")),l=String(h?.note||""),w=/(moved|rank)/i.test(l);return y||w||typeof h?.delta=="number"||typeof h?.change=="number"}).map((h,y)=>({id:h?.id??String(y),ts:h?.ts,delta:s(h)??0,note:typeof h?.note=="string"?h.note:void 0}));return f.sort((h,y)=>{const l=h.ts instanceof Date?h.ts.getTime():Number(h.ts||0);return(y.ts instanceof Date?y.ts.getTime():Number(y.ts||0))-l}),f.slice(0,10)},[v]);function ye(s){return s===1||s===21||s===31?"st":s===2||s===22?"nd":s===3||s===23?"rd":"th"}function G(s){const c=s instanceof Date?s:new Date(s),f=c.toLocaleString("en-US",{month:"short"}),h=c.getDate();return`${f} ${h}${ye(h)}`}if(!a)return r.jsx("div",{className:"text-sm",children:"Loadingâ€¦"});const ne=!!(a&&J&&a.id===J);async function ve(){if(a)try{Q(!0),await Ie(a.id,{name:E?.trim()||a.name,year:_||void 0,ranked_opt_in:!!U}),i(s=>s&&{...s,name:E?.trim()||s.name,year:_||void 0,ranked_opt_in:!!U}),T(!1)}finally{Q(!1)}}return r.jsxs("div",{className:"w-full",style:{color:e.color.text,fontFamily:e.typography.family.sans},children:[r.jsxs("div",{className:"relative",style:{paddingLeft:6,paddingRight:6,marginTop:-8},children:[r.jsx("div",{"aria-hidden":!0,className:"w-full",style:{height:90,background:k,borderRadius:e.radii.xl}}),r.jsx("div",{className:"mx-auto",style:{position:"relative",maxWidth:1120,padding:6},children:r.jsx("img",{src:le(a),alt:a.name,className:"absolute rounded-full object-cover",style:{width:84,height:84,left:8,top:-44,border:`4px solid ${n==="light"?e.color.border:e.color.bg}`,zIndex:2}})})]}),r.jsxs("div",{className:"mx-auto w-full",style:{maxWidth:1120,padding:12},children:[r.jsxs("div",{className:"flex flex-col",style:{gap:0,marginTop:20,marginBottom:e.spacing.md},children:[r.jsxs("div",{className:"relative flex items-center gap-2 w-full pr-10",children:[r.jsx("h1",{className:"truncate",style:{fontSize:e.typography.size.heading,fontWeight:e.typography.weight.semibold,lineHeight:1.1,margin:0},children:a.name}),ne&&r.jsx("button",{type:"button",onClick:()=>T(!0),"aria-label":"Open profile settings",className:"absolute right-0 top-1/2 -translate-y-1/2 inline-flex items-center justify-center size-7 rounded-md text-fg-quaternary hover:bg-foreground/10",title:"Profile settings",children:r.jsx(ce,{className:"size-5"})})]}),a.discord&&r.jsxs("span",{className:"truncate",style:{fontSize:e.typography.size.body,opacity:.9,lineHeight:1,color:e.color.muted,marginTop:0},children:["@",a.discord.replace(/^@/,"")]}),r.jsx("span",{style:{fontSize:e.typography.size.body,opacity:.9,lineHeight:1.1},children:a.year||a.role})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",width:"100%",marginTop:0,marginBottom:e.spacing.md,fontSize:e.typography.size.body},children:[{label:"Projects",value:fe},{label:"Tasks",value:pe},{label:"To Do",value:me},{label:"Streak",value:R}].map((s,c)=>r.jsxs("div",{className:"flex flex-col items-center",style:{padding:"0 8px",borderLeft:c===0?"none":`1px solid ${e.color.border}`},children:[r.jsx("span",{style:{opacity:.85,fontSize:e.typography.size.meta},children:s.label}),r.jsx("span",{style:{fontWeight:e.typography.weight.semibold},children:s.value})]},s.label))}),r.jsxs("div",{style:{marginBottom:e.spacing.lg},children:[r.jsx("h2",{style:{fontSize:e.typography.size.section,fontWeight:e.typography.weight.semibold,marginBottom:6},children:"Projects"}),q.length===0?r.jsx("p",{style:{opacity:.9,color:e.color.text},children:"No active projects yet."}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:e.spacing.md},children:q.map(s=>{const c=x.filter(l=>l.project_id===s.id),f=c.length,h=c.filter(l=>l.status==="Complete").length,y=f?Math.round(h/f*100):0;return r.jsxs("div",{style:{backgroundColor:e.color.surface,border:`1px solid ${e.color.border}`,borderRadius:e.radii.lg,padding:e.spacing.md},children:[r.jsx("div",{className:"flex items-start justify-between",style:{marginBottom:8},children:r.jsxs("div",{children:[r.jsx(Ee,{to:`/project/${s.id}`,style:{fontSize:e.typography.size.section,fontWeight:e.typography.weight.semibold,color:e.color.text,textDecoration:"none"},children:s.name}),s.subsystem&&r.jsx("p",{style:{fontSize:e.typography.size.meta,color:e.color.muted,opacity:.8,marginTop:2},children:s.subsystem})]})}),s.due_date&&(()=>{let l=null;const w=s.due_date,F=w.match(/(\d{4})[\/-]?(\d{2})[\/-]?(\d{2})/);if(F){const[,N,Z,L]=F;l=new Date(Number(N),Number(Z)-1,Number(L))}else isNaN(Date.parse(w))||(l=new Date(w));if(l){const N=l.toLocaleString("en-US",{weekday:"long"}),Z=l.toLocaleString("en-US",{month:"long"}),L=l.getDate(),xe=z=>z===1||z===21||z===31?"st":z===2||z===22?"nd":z===3||z===23?"rd":"th";return r.jsxs("p",{style:{color:e.color.muted,fontSize:e.typography.size.meta,marginBottom:6},children:["Due: ",N,", ",Z," ",L,xe(L)]})}return null})(),r.jsx("div",{className:"w-full",style:{background:e.color["overlay-10"],borderRadius:9999,height:8,marginBottom:8},children:r.jsx("div",{style:{width:`${y}%`,height:8,borderRadius:9999,background:k}})}),c.filter(l=>l.status!=="Complete").length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:6},children:[r.jsx("h4",{style:{fontSize:e.typography.size.body,fontWeight:e.typography.weight.medium},children:"Active Tasks"}),r.jsxs("span",{style:{fontWeight:e.typography.weight.medium},children:[h,"/",f]})]}),r.jsxs("div",{style:{display:"grid",gap:4},children:[c.filter(l=>l.status!=="Complete").slice(0,3).map(l=>r.jsxs("div",{className:"flex items-start justify-between",style:{fontSize:e.typography.size.meta,lineHeight:1.2},children:[r.jsx("p",{style:{color:e.color.muted},children:l.description}),r.jsx("span",{style:{padding:"2px 6px",borderRadius:6,fontSize:e.typography.size.tiny,background:l.status==="In Progress"?"rgba(255,193,7,0.15)":"rgba(220,53,69,0.15)",color:e.color.text},children:l.status})]},l.id)),c.filter(l=>l.status!=="Complete").length>3&&r.jsxs("p",{style:{fontSize:e.typography.size.meta,opacity:.9},children:["+",c.filter(l=>l.status!=="Complete").length-3," more tasks"]})]})]})]},s.id)})})]}),A&&r.jsxs("div",{style:{marginBottom:e.spacing.lg},children:[r.jsx("h2",{style:{fontSize:e.typography.size.section,fontWeight:e.typography.weight.semibold,marginBottom:6},children:"Ranked"}),te.length===0?r.jsx("p",{style:{opacity:.9,fontSize:e.typography.size.body,marginBottom:8},children:"No trophies yet."}):r.jsx("div",{className:"flex items-center flex-wrap",style:{gap:6,marginBottom:8},children:Array.from({length:te.length}).map((s,c)=>r.jsx("span",{"aria-label":"trophy",title:"Top of pool",style:{fontSize:18},children:"ðŸ†"},c))}),re.length===0?r.jsx("p",{style:{opacity:.9,fontSize:e.typography.size.body},children:"No movement yet."}):r.jsx("div",{style:{display:"grid",gap:6},children:re.map(s=>{const c=s.delta>0?e.color.success:s.delta<0?e.color.danger:e.color.muted,f=s.delta>0?"+":(s.delta<0,"");return r.jsxs("div",{className:"flex items-center justify-between",style:{borderBottom:`1px solid ${e.color["overlay-10"]}`,paddingBottom:4},children:[r.jsx("span",{style:{fontSize:e.typography.size.meta,opacity:.9,width:64},children:G(s.ts)}),r.jsxs("span",{style:{color:c,fontWeight:e.typography.weight.medium},children:[f,s.delta]}),r.jsx("span",{style:{fontSize:e.typography.size.meta,opacity:.85,textAlign:"right",flex:1,marginLeft:8},children:s.note||"Rank movement"})]},s.id)})})]}),A&&ge==="admin"&&r.jsxs("div",{className:"grid md:grid-cols-2",style:{gap:16},children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center justify-between",style:{marginBottom:8},children:r.jsx("h3",{style:{fontSize:e.typography.size.section,fontWeight:e.typography.weight.semibold},children:"Ranked History"})}),v.length===0?r.jsx("p",{style:{opacity:.9,fontSize:e.typography.size.body},children:"No point events yet."}):r.jsx("div",{style:{display:"grid",gap:6,maxHeight:256,overflow:"auto"},children:v.filter(s=>s.type==="attendance"||s.type==="task_points").slice(0,10).map((s,c)=>r.jsxs("div",{className:"flex items-start gap-3",style:{padding:6,borderBottom:`1px solid ${e.color["overlay-10"]}`},children:[r.jsx("span",{style:{fontSize:e.typography.size.meta,opacity:.9,width:64},children:G(s.ts)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{style:{fontSize:e.typography.size.body},children:s.note||s.type}),typeof s.points=="number"&&r.jsxs("span",{style:{marginLeft:6,color:e.color.success,fontWeight:e.typography.weight.medium,fontSize:e.typography.size.meta},children:["(+",s.points,")"]})]})]},s.id||c))})]}),r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:e.typography.size.section,fontWeight:e.typography.weight.semibold,marginBottom:8},children:"Points History"}),v.length===0?r.jsx("p",{style:{opacity:.9,fontSize:e.typography.size.body},children:"No point events yet."}):r.jsx("div",{style:{display:"grid",gap:6,maxHeight:256,overflow:"auto"},children:v.filter(s=>s.type==="attendance"||s.type==="task_points").slice(0,10).map((s,c)=>r.jsxs("div",{className:"flex items-start gap-3",style:{padding:6,borderBottom:`1px solid ${e.color["overlay-10"]}`},children:[r.jsx("span",{style:{fontSize:e.typography.size.meta,opacity:.9,width:64},children:G(s.ts)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{style:{fontSize:e.typography.size.body},children:s.note||s.type}),typeof s.points=="number"&&r.jsxs("span",{style:{marginLeft:6,color:e.color.success,fontWeight:e.typography.weight.medium,fontSize:e.typography.size.meta},children:["(+",s.points,")"]})]})]},s.id||c))})]})]}),ne&&r.jsx(De,{isOpen:B,onOpenChange:s=>T(!!s),className:"items-center",children:r.jsx(Ae,{children:r.jsx(_e,{className:"w-full max-w-lg",children:r.jsxs("div",{className:"rounded-xl border border-input bg-card text-card-foreground shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-input",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Profile Settings"}),r.jsx("button",{onClick:()=>T(!1),"aria-label":"Close",className:"h-8 w-8 inline-flex items-center justify-center rounded hover:bg-foreground/10",children:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm text-muted-foreground",children:"Full name"}),r.jsx(Fe,{value:E,onChange:s=>K(s.target.value),placeholder:"Your full name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm text-muted-foreground",children:"Academic year"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Le,{value:_,onValueChange:V,children:[r.jsx(He,{children:r.jsx(Re,{placeholder:"Select yearâ€¦"})}),r.jsx(We,{children:["Freshman","Sophomore","Junior","Senior","Graduate","Alumni"].map(s=>r.jsx(Pe,{value:s,children:s},s))})]}),_&&r.jsx("button",{type:"button",className:"px-2 text-xs rounded border border-input",onClick:()=>V(""),children:"Clear"})]})]}),r.jsxs("div",{className:"pt-2 flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-sm",style:{color:e.color.text,fontWeight:e.typography.weight.medium},children:"Participate in ranked pool"}),r.jsx("label",{className:"relative inline-flex items-center cursor-pointer select-none outline-none focus:outline-none",children:r.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[r.jsx("input",{type:"checkbox",checked:!!U,onChange:s=>ee(s.target.checked),className:"peer sr-only","aria-label":"Participate in ranked pool"}),r.jsx("span",{className:"pointer-events-none block h-6 w-11 rounded-full border border-border bg-black/15 dark:bg-white/15 transition-colors peer-checked:bg-[#64C7C9] peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background"}),r.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white dark:bg-background shadow transition-transform peer-checked:translate-x-5"})]})})]})]}),r.jsxs("div",{className:"p-4 flex gap-2 border-t border-input",children:[r.jsx("button",{onClick:()=>T(!1),className:"px-3 py-2 rounded border border-input text-sm",children:"Cancel"}),r.jsx("button",{onClick:ve,disabled:$||!E.trim(),className:`px-3 py-2 rounded border text-sm border-input ml-auto ${!E.trim()||$?"opacity-50 cursor-not-allowed":"hover:bg-card/80"}`,children:$?"Savingâ€¦":"Save changes"})]})]})})})})]})]})}export{jt as default};
