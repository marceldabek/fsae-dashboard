import{r as n,j as t}from"./index-B-YBCRUe.js";function C(w){const{people:o,mode:a="single",selectedId:d=null,selectedIds:r=[],onSelect:l,onAdd:u,onRemove:x,triggerLabel:p,buttonClassName:g="px-3 py-2 rounded bg-white/10 border border-white/20 text-sm hover:bg-white/15 transition",maxItems:c=8,allowUnassign:j=!0}=w,[m,i]=n.useState(!1),[h,v]=n.useState(""),b=n.useRef(null);n.useEffect(()=>{function e(s){s.key==="Escape"&&i(!1)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),n.useEffect(()=>{if(!m)return;function e(s){b.current&&!b.current.contains(s.target)&&i(!1)}return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[m]);const f=n.useMemo(()=>{const e=h.toLowerCase();return o.filter(s=>!e||s.name.toLowerCase().includes(e)||(s.skills||[]).join(" ").toLowerCase().includes(e))},[o,h]),N=n.useMemo(()=>new Set(r),[r]),y=(()=>{if(p)return p;if(a==="single"){if(d){const e=o.find(s=>s.id===d);return e?e.name:"Assign to…"}return"Assign to…"}if(r.length===0)return"Add/Remove";if(r.length===1){const e=o.find(s=>s.id===r[0]);return e?e.name:"1 selected"}return`${r.length} selected`})();return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:()=>i(e=>!e),className:g,children:y}),m&&t.jsxs("div",{className:"fixed inset-0 z-40 flex items-start justify-center pt-24 px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),t.jsxs("div",{ref:b,className:"relative z-10 w-full max-w-md rounded-lg border border-white/15 bg-black/80 p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{autoFocus:!0,value:h,onChange:e=>v(e.target.value),placeholder:"Search people…",className:"w-full px-2 py-1.5 rounded bg-white/10 text-sm focus:outline-none"}),t.jsx("button",{onClick:()=>i(!1),className:"text-[11px] px-2 py-1 rounded bg-white/10 border border-white/20 hover:bg-white/15",children:"Close"})]}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[a==="single"&&j&&t.jsx("li",{children:t.jsx("button",{className:`w-full text-left px-2 py-1 rounded hover:bg-white/5 text-[13px] ${d?"":"bg-white/10"}`,onClick:()=>{l==null||l(null),i(!1)},children:"Unassigned"})}),f.slice(0,c).map(e=>{const s=a==="single"?e.id===d:N.has(e.id);return t.jsxs("li",{className:"flex items-center gap-2 justify-between px-2 py-1 rounded hover:bg-white/5",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"truncate text-sm font-medium",children:e.name}),e.skills&&e.skills.length>0&&t.jsx("div",{className:"text-[10px] text-uconn-muted truncate",children:e.skills.join(", ")})]}),a==="multi"?t.jsx("button",{onClick:()=>s?x==null?void 0:x(e.id):u==null?void 0:u(e.id),className:`px-2 py-1 rounded text-[11px] border ${s?"bg-brand-teal/20 border-brand-teal/40 text-brand-teal":"bg-white/10 border-white/20 hover:bg-white/15"}`,children:s?"Remove":"Add"}):t.jsx("button",{onClick:()=>{l==null||l(e.id),i(!1)},className:`px-2 py-1 rounded text-[11px] border ${s?"bg-brand-teal/30 border-brand-teal/50 text-brand-teal":"bg-white/10 border-white/15 hover:bg-white/15"}`,children:s?"Selected":"Select"})]},e.id)}),f.slice(0,c).length===0&&t.jsx("li",{className:"text-xs text-uconn-muted px-2 py-1",children:"No people"}),f.length>c&&t.jsxs("li",{className:"text-[10px] text-uconn-muted px-2 py-1",children:["Showing first ",c," results… refine search"]})]})]})]})]})}export{C as P};
