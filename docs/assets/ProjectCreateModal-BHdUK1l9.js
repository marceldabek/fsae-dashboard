import{r as t,j as e,F as S}from"./index-B3EZ4WWh.js";import{P as C}from"./PersonSelectPopover-DIl-1gOa.js";function A({open:v,onClose:n,people:w,onCreated:y}){const[o,l]=t.useState(""),[s,d]=t.useState([]),[i,c]=t.useState(""),[u,x]=t.useState(""),[p,m]=t.useState(""),[f,g]=t.useState(""),[b,h]=t.useState(!1),N=()=>{l(""),d([]),c(""),x(""),m(""),g("")};function j(r){d(a=>a.includes(r)?a.filter(k=>k!==r):[...a,r])}async function P(){if(o.trim())try{h(!0);const r=await S({name:o.trim(),owner_ids:s,design_link:i.trim()||void 0,description:u.trim()||void 0,due_date:p||void 0,subsystem:f||void 0});y?.(r),N(),n()}finally{h(!1)}}return v?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),e.jsxs("div",{className:"relative w-[95vw] max-w-lg rounded-2xl border border-border bg-card dark:bg-surface shadow-2xl p-5 overflow-auto max-h-[92vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Create Project"}),e.jsx("button",{onClick:n,"aria-label":"Close",className:"h-8 w-8 inline-flex items-center justify-center rounded hover:bg-white/10",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground focus:outline-none",placeholder:"Project name",value:o,onChange:r=>l(r.target.value)}),e.jsx("input",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground focus:outline-none",placeholder:"Design link (optional)",value:i,onChange:r=>c(r.target.value)}),e.jsx("textarea",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground focus:outline-none",placeholder:"Project description (optional)",value:u,onChange:r=>x(r.target.value)}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border dark-select placeholder:text-muted-foreground focus:outline-none",value:f,onChange:r=>g(r.target.value),children:[e.jsx("option",{value:"",children:"Select subsystem…"}),e.jsx("option",{children:"Aero"}),e.jsx("option",{children:"Business"}),e.jsx("option",{children:"Composites"}),e.jsx("option",{children:"Controls"}),e.jsx("option",{children:"Data Acquisition"}),e.jsx("option",{children:"Electrical IC"}),e.jsx("option",{children:"Electrical EV"}),e.jsx("option",{children:"Finance"}),e.jsx("option",{children:"Frame"}),e.jsx("option",{children:"Manufacturing"}),e.jsx("option",{children:"Powertrain EV"}),e.jsx("option",{children:"Powertrain IC"}),e.jsx("option",{children:"Suspension"})]}),e.jsx("input",{type:"date",className:"px-3 py-2 rounded w-full bg-surface text-foreground border border-border focus:outline-none",value:p,onChange:r=>m(r.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground uppercase tracking-caps",children:"Owners"}),e.jsx(C,{mode:"multi",people:w,selectedIds:s,onAdd:j,onRemove:j,triggerLabel:s.length?`${s.length} selected`:"Add/Remove",buttonClassName:"ml-auto text-[11px] px-2 py-1 rounded bg-surface text-foreground border border-border",maxItems:5})]}),e.jsx("button",{onClick:P,disabled:!o.trim()||b,className:`w-full px-3 py-2 rounded border border-border text-sm text-center ${o.trim()?"bg-card dark:bg-surface hover:bg-card/80":"bg-card dark:bg-surface opacity-50 cursor-not-allowed"}`,children:b?"Saving…":"Save Project"})]})]})]}):null}export{A as P};
