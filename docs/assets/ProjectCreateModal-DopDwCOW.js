import{r as a,j as e,N as M}from"./index-D3k_KiqT.js";import{C as E,a as I,b as O,c as A,P as B,d as _}from"./card-mTLGtmKA.js";import{h as l,M as q,a as F,D as R,I as y,S as V,b as T,d as Z,e as $,f as U}from"./modal-nQA6oMK7.js";const S=({size:i=24,color:s="currentColor",...n})=>a.createElement("svg",{viewBox:"0 0 24 24",width:i,height:i,stroke:s,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n},a.createElement("path",{d:"M20 21c0-1.396 0-2.093-.172-2.661a4 4 0 0 0-2.667-2.667c-.568-.172-1.265-.172-2.661-.172h-5c-1.396 0-2.093 0-2.661.172a4 4 0 0 0-2.667 2.667C4 18.907 4 19.604 4 21M16.5 7.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z"}));S.displayName="User01";const W={xs:"size-1.5",sm:"size-2",md:"size-2.5",lg:"size-3",xl:"size-3.5","2xl":"size-4","3xl":"size-4.5","4xl":"size-5"},H=({size:i,status:s,className:n})=>e.jsx("span",{className:l("absolute right-0 bottom-0 rounded-full ring-[1.5px] ring-bg-primary",s==="online"?"bg-fg-success-secondary":"bg-fg-disabled_subtle",W[i],n)}),G={xs:{root:"size-2.5",tick:"size-[4.38px"},sm:{root:"size-3",tick:"size-[5.25px]"},md:{root:"size-3.5",tick:"size-[6.13px]"},lg:{root:"size-4",tick:"size-[7px]"},xl:{root:"size-4.5",tick:"size-[7.88px]"},"2xl":{root:"size-5",tick:"size-[8.75px]"},"3xl":{root:"size-6",tick:"size-[10.5px]"},"4xl":{root:"size-8",tick:"size-[14px]"}},J=({size:i,className:s})=>e.jsxs("svg",{"data-verified":!0,className:l("z-10 text-utility-blue-500",G[i].root,s),viewBox:"0 0 10 10",fill:"none",children:[e.jsx("path",{d:"M7.72237 1.77098C7.81734 2.00068 7.99965 2.18326 8.2292 2.27858L9.03413 2.61199C9.26384 2.70714 9.44635 2.88965 9.5415 3.11936C9.63665 3.34908 9.63665 3.60718 9.5415 3.83689L9.20833 4.64125C9.11313 4.87106 9.113 5.12943 9.20863 5.35913L9.54122 6.16325C9.58839 6.27702 9.61268 6.39897 9.6127 6.52214C9.61272 6.6453 9.58847 6.76726 9.54134 6.88105C9.4942 6.99484 9.42511 7.09823 9.33801 7.18531C9.2509 7.27238 9.14749 7.34144 9.03369 7.38854L8.22934 7.72171C7.99964 7.81669 7.81706 7.99899 7.72174 8.22855L7.38833 9.03348C7.29318 9.26319 7.11067 9.4457 6.88096 9.54085C6.65124 9.636 6.39314 9.636 6.16343 9.54085L5.35907 9.20767C5.12935 9.11276 4.87134 9.11295 4.64177 9.20821L3.83684 9.54115C3.60725 9.63608 3.34937 9.636 3.11984 9.54092C2.89032 9.44585 2.70791 9.26356 2.6127 9.03409L2.27918 8.22892C2.18421 7.99923 2.0019 7.81665 1.77235 7.72133L0.967421 7.38792C0.737807 7.29281 0.555355 7.11041 0.460169 6.88083C0.364983 6.65125 0.364854 6.39327 0.45981 6.16359L0.792984 5.35924C0.8879 5.12952 0.887707 4.87151 0.792445 4.64193L0.459749 3.83642C0.41258 3.72265 0.388291 3.60069 0.388272 3.47753C0.388252 3.35436 0.412501 3.2324 0.459634 3.11861C0.506767 3.00482 0.57586 2.90144 0.662965 2.81436C0.75007 2.72728 0.853479 2.65822 0.967283 2.61113L1.77164 2.27795C2.00113 2.18306 2.1836 2.00099 2.27899 1.7717L2.6124 0.966768C2.70755 0.737054 2.89006 0.554547 3.11978 0.459397C3.34949 0.364246 3.60759 0.364246 3.83731 0.459397L4.64166 0.792571C4.87138 0.887487 5.12939 0.887293 5.35897 0.792031L6.16424 0.459913C6.39392 0.364816 6.65197 0.364836 6.88164 0.459968C7.11131 0.555099 7.29379 0.737554 7.38895 0.967208L7.72247 1.77238L7.72237 1.77098Z",className:"fill-current"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.95829 3.68932C7.02509 3.58439 7.04747 3.45723 7.02051 3.3358C6.99356 3.21437 6.91946 3.10862 6.81454 3.04182C6.70961 2.97502 6.58245 2.95264 6.46102 2.97959C6.33959 3.00655 6.23384 3.08064 6.16704 3.18557L4.33141 6.06995L3.49141 5.01995C3.41375 4.92281 3.30069 4.8605 3.17709 4.84673C3.05349 4.83296 2.92949 4.86885 2.83235 4.94651C2.73522 5.02417 2.67291 5.13723 2.65914 5.26083C2.64536 5.38443 2.68125 5.50843 2.75891 5.60557L4.00891 7.16807C4.0555 7.22638 4.11533 7.27271 4.18344 7.30323C4.25154 7.33375 4.32595 7.34757 4.40047 7.34353C4.47499 7.3395 4.54747 7.31773 4.61188 7.28004C4.67629 7.24234 4.73077 7.18981 4.77079 7.12682L6.95829 3.68932Z",fill:"white"})]}),j={xxs:{root:"size-4 outline-[0.5px] -outline-offset-[0.5px]",initials:"text-xs font-semibold",icon:"size-3"},xs:{root:"size-6 outline-[0.5px] -outline-offset-[0.5px]",initials:"text-xs font-semibold",icon:"size-4"},sm:{root:"size-8 outline-[0.75px] -outline-offset-[0.75px]",initials:"text-sm font-semibold",icon:"size-5"},md:{root:"size-10 outline-1 -outline-offset-1",initials:"text-md font-semibold",icon:"size-6"},lg:{root:"size-12 outline-1 -outline-offset-1",initials:"text-lg font-semibold",icon:"size-7"},xl:{root:"size-14 outline-1 -outline-offset-1",initials:"text-xl font-semibold",icon:"size-8"},"2xl":{root:"size-16 outline-1 -outline-offset-1",initials:"text-display-xs font-semibold",icon:"size-8"}},L=({contrastBorder:i=!0,size:s="md",src:n,alt:v,initials:o,placeholder:u,placeholderIcon:r,badge:x,status:c,verified:m,focusable:f=!1,className:p})=>{const[g,h]=a.useState(!1),C=()=>n&&!g?e.jsx("img",{"data-avatar-img":!0,className:"size-full rounded-full object-cover",src:n,alt:v,onError:()=>h(!0)}):o?e.jsx("span",{className:l("text-quaternary",j[s].initials),children:o}):r?e.jsx(r,{className:l("text-fg-quaternary",j[s].icon)}):u||e.jsx(S,{className:l("text-fg-quaternary",j[s].icon)}),b=()=>c?e.jsx(H,{status:c,size:s==="xxs"?"xs":s}):m?e.jsx(J,{size:s==="xxs"?"xs":s,className:l("absolute right-0 bottom-0",(s==="xxs"||s==="xs")&&"-right-px -bottom-px")}):x;return e.jsxs("div",{"data-avatar":!0,className:l("relative inline-flex shrink-0 items-center justify-center rounded-full bg-avatar-bg outline-transparent",f&&"group-outline-focus-ring group-focus-visible:outline-2 group-focus-visible:outline-offset-2",i&&"outline outline-avatar-contrast-border",j[s].root,p),children:[C(),b()]})};function Y({open:i,onClose:s,people:n,onCreated:v}){const[o,u]=a.useState(""),[r,x]=a.useState([]),[c,m]=a.useState(""),[f,p]=a.useState(""),[g,h]=a.useState(""),[C,b]=a.useState(""),[N,k]=a.useState(!1),P=()=>{u(""),x([]),m(""),p(""),h(""),b("")};function w(t){x(d=>d.includes(t)?d.filter(z=>z!==t):[...d,t])}async function D(){if(o.trim())try{k(!0);const t=await M({name:o.trim(),owner_ids:r,design_link:c.trim()||void 0,description:f.trim()||void 0,due_date:g||void 0,subsystem:C||void 0});v?.(t),P(),s()}finally{k(!1)}}return i?e.jsx(q,{isOpen:i,onOpenChange:t=>{t||s()},className:"items-center",children:e.jsx(F,{children:e.jsx(R,{className:"w-full max-w-lg",children:e.jsxs(E,{className:"shadow-2xl border-border overflow-hidden",children:[e.jsxs(I,{className:"flex items-center justify-between flex-row p-4 pb-2 border-b border-input",children:[e.jsx(O,{className:"text-lg",children:"Create Project"}),e.jsx("button",{onClick:s,"aria-label":"Close",className:"h-8 w-8 inline-flex items-center justify-center rounded hover:bg-foreground/10",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs(A,{className:"p-4 pt-2 space-y-2",children:[e.jsx(y,{placeholder:"Project name",value:o,onChange:t=>u(t.target.value)}),e.jsx(y,{placeholder:"Design link (optional)",value:c,onChange:t=>m(t.target.value)}),e.jsx("textarea",{className:"flex h-20 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Project description (optional)",value:f,onChange:t=>p(t.target.value)}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(V,{value:C,onValueChange:b,children:[e.jsx(T,{children:e.jsx(Z,{placeholder:"Select subsystem…"})}),e.jsx($,{children:["Aero","Business","Composites","Controls","Data Acquisition","Electrical IC","Electrical EV","Finance","Frame","Manufacturing","Powertrain EV","Powertrain IC","Suspension"].map(t=>e.jsx(U,{value:t,children:t},t))})]}),e.jsx(y,{type:"date",value:g,onChange:t=>h(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground uppercase tracking-caps",children:"Owners"}),r.length>0&&e.jsxs("div",{className:"flex -space-x-1 h-6 items-center",children:[n.filter(t=>r.includes(t.id)).slice(0,6).map(t=>{const d=t.name?t.name.split(/\s+/).filter(Boolean).slice(0,2).map(z=>z[0]?.toUpperCase()).join(""):void 0;return e.jsx(L,{size:"xs",alt:t.name,src:t.avatar_url||void 0,initials:t.avatar_url?void 0:d,className:"ring-2 ring-card dark:ring-surface"},t.id)}),r.length>6&&e.jsx(L,{size:"xs",className:"ring-2 ring-card dark:ring-surface",placeholder:e.jsxs("span",{className:"flex items-center justify-center text-[10px] font-semibold text-quaternary",children:["+",r.length-6]})})]}),e.jsx(B,{mode:"multi",people:n,selectedIds:r,onAdd:w,onRemove:w,triggerLabel:r.length?`${r.length} selected`:"Add/Remove",buttonClassName:"ml-auto text-[11px] px-2 py-1 rounded border border-input",maxItems:5})]})]}),e.jsx(_,{className:"p-4 pt-2 border-t border-input",children:e.jsx("button",{onClick:D,disabled:!o.trim()||N,className:`w-full px-3 py-2 rounded border text-sm text-center border-input ${o.trim()?"bg-card dark:bg-surface hover:bg-card/80":"bg-card dark:bg-surface opacity-50 cursor-not-allowed"}`,children:N?"Saving…":"Save Project"})})]})})})}):null}export{L as A,Y as P};
