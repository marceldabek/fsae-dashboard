import{r as t,j as e,B as C}from"./index-DD80bXAF.js";import{P as y}from"./PersonSelectPopover-BqPlb1H-.js";function A({people:d,projects:b=[],fixedProjectId:s,onCreated:v,className:j="",hideTitle:S=!1,unstyled:N=!1}){const[a,i]=t.useState(s||""),[o,c]=t.useState(""),[u,x]=t.useState("In Progress"),[n,h]=t.useState(""),[p,f]=t.useState(""),[l,g]=t.useState(!1);async function k(){if(l||!o.trim())return;const r=s||a;if(r){g(!0);try{await C({project_id:r,description:o.trim(),status:u,assignee_id:n||void 0,ranked_points:p||void 0}),c(""),x("In Progress"),h(""),f(""),s||i(""),v?.()}finally{g(!1)}}}const w=!o.trim()||l||!(s||a),m=e.jsxs("div",{className:"space-y-3",children:[!S&&e.jsx("h3",{className:"text-xs font-semibold",children:"Add Task"}),!s&&e.jsxs("select",{className:"px-3 h-9 rounded text-xs w-full dark-select bg-surface text-foreground border border-border placeholder:text-muted-foreground form-control",value:a,onChange:r=>i(r.target.value),children:[e.jsx("option",{value:"",children:"Select project…"}),b.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx("input",{className:"px-3 h-9 rounded text-xs w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground placeholder:text-xs focus:outline-none form-control",placeholder:"Task title",value:o,onChange:r=>c(r.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-3 h-9 rounded text-xs dark-select flex-1 min-w-0 bg-surface text-foreground border border-border placeholder:text-muted-foreground form-control",value:u,onChange:r=>x(r.target.value),children:[e.jsx("option",{children:"Todo"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"Complete"})]}),e.jsx(y,{mode:"single",people:d,selectedId:n||null,onSelect:r=>h(r||""),triggerLabel:n?d.find(r=>r.id===n)?.name||"Assignee":"Assign to…",buttonClassName:"px-3 h-9 rounded text-[10px] bg-surface text-foreground border border-border flex items-center hover:bg-surface/80 whitespace-nowrap form-control",maxItems:5})]}),e.jsxs("select",{className:"px-3 h-9 rounded text-xs dark-select w-full bg-surface text-foreground border border-border placeholder:text-muted-foreground form-control",value:p,onChange:r=>f(r.target.value?Number(r.target.value):""),children:[e.jsx("option",{value:"",children:"Points (by estimated hours)"}),e.jsx("option",{value:"1",children:"1 pt ~ 0.5 hr"}),e.jsx("option",{value:"3",children:"3 pts ~ 1 hr"}),e.jsx("option",{value:"6",children:"6 pts ~ 2 hrs"}),e.jsx("option",{value:"10",children:"10 pts ~ 3 hrs"}),e.jsx("option",{value:"15",children:"15 pts ~ 5 hrs"}),e.jsx("option",{value:"40",children:"40 pts ~ 10 hrs"}),e.jsx("option",{value:"65",children:"65 pts ~ 15 hrs"}),e.jsx("option",{value:"98",children:"98 pts ~ 20 hrs"}),e.jsx("option",{value:"150",children:"150 pts ~ 25 hrs"}),e.jsx("option",{value:"200",children:"200 pts ~ 30 hrs"})]}),e.jsx("button",{onClick:k,disabled:w,className:"w-full h-9 rounded bg-surface text-foreground border border-border text-xs font-medium hover:bg-surface/80 disabled:opacity-40 disabled:cursor-not-allowed transition",children:l?"Saving…":"Save"})]});return N?m:e.jsx("div",{className:"rounded-2xl bg-card border border-border p-4 "+j,children:m})}export{A as T};
