import{r as t,j as e,B as k}from"./index-BRFZUbbs.js";import{P as y}from"./PersonSelectPopover-Cmeq3r-Q.js";function A({people:l,projects:j=[],fixedProjectId:r,onCreated:f,className:b="",hideTitle:w=!1,unstyled:S=!1}){const[a,d]=t.useState(r||""),[n,c]=t.useState(""),[u,h]=t.useState("In Progress"),[o,p]=t.useState(""),[m,x]=t.useState(""),[i,v]=t.useState(!1);async function N(){if(i||!n.trim())return;const s=r||a;if(s){v(!0);try{await k({project_id:s,description:n.trim(),status:u,assignee_id:o||void 0,ranked_points:m||void 0}),c(""),h("In Progress"),p(""),x(""),r||d(""),f?.()}finally{v(!1)}}}const C=!n.trim()||i||!(r||a),g=e.jsxs("div",{className:"space-y-3 text-white",children:[!w&&e.jsx("h3",{className:"text-sm font-semibold",children:"Add Task"}),!r&&e.jsxs("select",{className:"px-3 h-10 rounded text-sm w-full dark-select form-control",value:a,onChange:s=>d(s.target.value),children:[e.jsx("option",{value:"",children:"Select project…"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("input",{className:"px-3 h-10 rounded text-sm w-full bg-surface/60 border border-border focus:outline-none form-control",placeholder:"Description",value:n,onChange:s=>c(s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-3 h-10 rounded text-sm dark-select flex-1 min-w-0 form-control",value:u,onChange:s=>h(s.target.value),children:[e.jsx("option",{children:"Todo"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"Complete"})]}),e.jsx(y,{mode:"single",people:l,selectedId:o||null,onSelect:s=>p(s||""),triggerLabel:o?l.find(s=>s.id===o)?.name||"Assignee":"Assign to…",buttonClassName:"px-3 h-10 rounded text-sm bg-white/10 border border-white/20 flex items-center hover:bg-white/15 whitespace-nowrap form-control",maxItems:5})]}),e.jsxs("select",{className:"px-3 h-10 rounded text-sm dark-select w-full form-control",value:m,onChange:s=>x(s.target.value?Number(s.target.value):""),children:[e.jsx("option",{value:"",children:"Points (by estimated hours)"}),e.jsx("option",{value:"1",children:"1 pt ~ 0.5 hr"}),e.jsx("option",{value:"3",children:"3 pts ~ 1 hr"}),e.jsx("option",{value:"10",children:"10 pts ~ 3 hrs"}),e.jsx("option",{value:"6",children:"6 pts ~ 2 hrs"}),e.jsx("option",{value:"15",children:"15 pts ~ 5 hrs"}),e.jsx("option",{value:"40",children:"40 pts ~ 10 hrs"}),e.jsx("option",{value:"65",children:"65 pts ~ 15 hrs"}),e.jsx("option",{value:"98",children:"98 pts ~ 20 hrs"}),e.jsx("option",{value:"150",children:"150 pts ~ 25 hrs"}),e.jsx("option",{value:"200",children:"200 pts ~ 30 hrs"})]}),e.jsx("button",{onClick:N,disabled:C,className:"w-full h-10 rounded bg-white/10 border border-white/20 text-sm font-medium hover:bg-white/15 disabled:opacity-40 disabled:cursor-not-allowed transition",children:i?"Saving…":"Save"})]});return S?g:e.jsx("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-4 "+b,children:g})}export{A as T};
