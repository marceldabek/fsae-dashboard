import{r as g,q as le,j as e,I as he,N as ne,a as ue,b as me,O as fe,P as xe}from"./index-QMWv16mT.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ge=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,c,h)=>h?h.toUpperCase():c.toLowerCase()),se=n=>{const o=ge(n);return o.charAt(0).toUpperCase()+o.slice(1)},de=(...n)=>n.filter((o,c,h)=>!!o&&o.trim()!==""&&h.indexOf(o)===c).join(" ").trim(),be=n=>{for(const o in n)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=g.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:h,className:k="",children:p,iconNode:f,...s},y)=>g.createElement("svg",{ref:y,...ye,width:o,height:o,stroke:n,strokeWidth:h?Number(c)*24/Number(o):c,className:de("lucide",k),...!p&&!be(s)&&{"aria-hidden":"true"},...s},[...f.map(([b,M])=>g.createElement(b,M)),...Array.isArray(p)?p:[p]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,o)=>{const c=g.forwardRef(({className:h,...k},p)=>g.createElement(we,{ref:p,iconNode:o,className:de(`lucide-${pe(se(n))}`,`lucide-${n}`,h),...k}));return c.displayName=se(n),c};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],je=ve("info",ke),oe=["January","February","March","April","May","June","July","August","September","October","November","December"],Ie=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function re(n,o){return new Date(n,o+1,0).getDate()}function te(n){return`${n.getMonth()+1}/${n.getDate()}`}function J(n){const o=new Date(n);if(isNaN(+o))throw new Error("Invalid date: "+n);return o}function Ne(n=new Date){const o=n.getFullYear(),h=n.getMonth()>=7?o:o-1,k=new Date(h,7,1),p=[];for(let f=7;f<=11;f++){const s=new Date(h,f,1);p.push({idx:p.length,year:s.getFullYear(),month:s.getMonth(),name:oe[s.getMonth()].toUpperCase().slice(0,3),start:s,days:re(s.getFullYear(),s.getMonth())})}for(let f=0;f<=5;f++){const s=new Date(h+1,f,1);p.push({idx:p.length,year:s.getFullYear(),month:s.getMonth(),name:oe[s.getMonth()].toUpperCase().slice(0,3),start:s,days:re(s.getFullYear(),s.getMonth())})}return{start:k,months:p}}const G={done:"#34D399",wip:"hsl(var(--accent))",blocked:"#BDC0C3"};function Me(n){const o=n||[];return o.length?o.every(c=>c.status==="Complete"):!1}function De(n){if(!n)return null;const o=new Date(n);return isNaN(+o)?null:o.toISOString()}function Ce(){const[n,o]=g.useState(null),[c,h]=g.useState(null),[k,p]=g.useState(!0),[f,s]=g.useState(null);g.useEffect(()=>{let b=!0;return(async()=>{try{const[M,i,j]=await Promise.all([ue(),me(),fe()]);if(!b)return;const x=new Map;for(const d of i){const C=x.get(d.project_id)||[];C.push(d),x.set(d.project_id,C)}const D=j.filter(d=>!!d.from_id&&!!d.to_id).map(d=>({id:d.id,fromId:d.from_id,toId:d.to_id})),I=new Set,S=[];for(const d of D){const C=`${d.fromId}|${d.toId}`;I.has(C)||(I.add(C),S.push(d))}const $=new Map;S.forEach(d=>{$.has(d.toId)||$.set(d.toId,[]),$.get(d.toId).push(d.fromId)});const T=new Set;for(const d of M)d.archived||Me(x.get(d.id))&&T.add(d.id);const A=M.filter(d=>!d.archived).map(d=>{const C=De(d.due_date);if(!C)return null;const _=T.has(d.id);let r;return _?r="done":r=($.get(d.id)||[]).some(L=>!T.has(L))?"blocked":"wip",{id:d.id,name:d.name,dueDate:C,status:r}}).filter(Boolean);o(A),h(S)}catch(M){if(!b)return;s(M?.message||"Failed to load timeline")}finally{b&&p(!1)}})(),()=>{b=!1}},[]);async function y(b,M){if(b!==M)try{const i=await xe({from_id:b,to_id:M});h(j=>{const x=j||[];return x.some(D=>D.fromId===b&&D.toId===M)?x:[...x,{id:i,fromId:b,toId:M}]})}catch{}}return{projects:n,dependencies:c,setDependencies:h,loading:k,error:f,createDependency:y}}function Ee(n,o,c){const{monthWidth:h,rowHeight:k,block:p,headerH:f}=c;if(!n)return{items:new Map,containerH:f+k*8};const s=new Map,y={};n.forEach(i=>{const j=J(i.dueDate),x=o.findIndex(C=>j.getFullYear()===C.year&&j.getMonth()===C.month);if(x===-1)return;const D=j.getDate();y[x]||(y[x]={});const I=y[x][D]!==void 0?y[x][D]:0;y[x][D]=I+1;const S=o[x],$=h/S.days,A=h*x+$*(D-1)+Math.max(0,($-p.w)/2),d=f+I*k;s.set(i.id,{id:i.id,x:A,y:d,w:p.w,h:p.h,monthIdx:x})});let b=1;Object.values(y).forEach(i=>{Object.values(i).forEach(j=>{j>b&&(b=Math.max(b,j))})});const M=f+Math.max(3,b)*c.rowHeight+160;return{items:s,containerH:M}}function $e(n,o){const{months:c}=Ne(),h=g.useMemo(()=>Ee(n,c,o),[n,c,o.monthWidth,o.rowHeight,o.block.w,o.block.h,o.headerH]);return{months:c,layout:h}}function ae({items:n,dependencies:o,highlightId:c,monthWidth:h,months:k}){const p=h*k.length;let f=0;n.forEach(r=>{f=Math.max(f,r.y+r.h)});const s=f+12,y=o.filter(r=>n.has(r.fromId)&&n.has(r.toId)),b=[];n.forEach(r=>b.push(r.y+r.h)),b.sort((r,l)=>r-l);const M=b.filter((r,l,v)=>l===0||r!==v[l-1]),i=r=>`${r.fromId}|${r.toId}`,j=new Map,x=new Map;y.forEach(r=>{n.get(r.fromId),n.get(r.toId),j.has(r.fromId)||j.set(r.fromId,[]),x.has(r.toId)||x.set(r.toId,[]),j.get(r.fromId).push(r),x.get(r.toId).push(r)}),j.forEach(r=>r.sort((l,v)=>n.get(l.toId).x-n.get(v.toId).x||l.toId.localeCompare(v.toId))),x.forEach(r=>r.sort((l,v)=>n.get(l.fromId).x-n.get(v.fromId).x||l.fromId.localeCompare(v.fromId)));const D=new Map,I=new Map,S=new Map,$=new Map;j.forEach((r,l)=>{I.set(l,r.length),r.forEach((v,L)=>D.set(i(v),L))}),x.forEach((r,l)=>{$.set(l,r.length),r.forEach((v,L)=>S.set(i(v),L))});const T=14,A=14,d=y.map((r,l)=>{const v=n.get(r.fromId),L=n.get(r.toId),K=v.x+v.w,O=L.x,W=i(r),P=I.get(r.fromId)||1,z=D.get(W)||0,Y=$.get(r.toId)||1,U=S.get(W)||0,Q=(z-(P-1)/2)*T,ee=(U-(Y-1)/2)*T,V=v.y+(z+1)/(P+1)*v.h,E=L.y+(U+1)/(Y+1)*L.h;let H=K+A+Q;const R=O-A-ee,B=Math.min(H,R),Z=Math.max(H,R);let X=Math.max(v.y+v.h,L.y+L.h);n.forEach(F=>{const ie=F.x;F.x+F.w<B||ie>Z||(X=Math.max(X,F.y+F.h))});const t=X+8,a=(P-z)*18;H=Math.min(H+a,R-16);const m=R<=H+2,u=t>Math.max(V,E)+6||m?`M ${K} ${V} H ${H} V ${t} H ${R} V ${E} H ${O}`:`M ${K} ${V} H ${R} V ${E} H ${O}`,N=!!(c&&(r.fromId===c||r.toId===c));return e.jsx("path",{d:u,stroke:N?"hsl(var(--accent))":"rgb(var(--overlay-10))",strokeWidth:N?3:2.5,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:N?1:.9},l)}),C=M.map(r=>r+8),_=Math.max(s+24,(C[C.length-1]||s)+24);return e.jsx("svg",{width:p,height:_,className:"absolute left-0 top-0 pointer-events-none z-0",children:d})}function Le({months:n,monthWidth:o,onPickMonth:c}){return e.jsx("div",{className:"sticky top-0 z-10 bg-card/80 dark:bg-surface/80 backdrop-blur border-b border-border",children:e.jsx("div",{className:"relative",style:{width:o*n.length},children:n.map((h,k)=>e.jsx("div",{className:"inline-flex items-center justify-center font-medium text-sm uppercase tracking-wide text-mutedToken-foreground hover:bg-surface/60 cursor-pointer select-none",style:{width:o,height:36},onClick:()=>{c&&c(k)},children:h.name},k))})})}function Se(){return e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-mutedToken-foreground leading-snug",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm",style:{background:G.done}})," done"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm",style:{background:G.wip}})," active"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm",style:{background:G.blocked}})," blocked"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm",style:{background:"rgb(var(--overlay-10))"}})," deps"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm",style:{background:"hsl(var(--accent))"}})," highlight"]})]})}function Te({canEdit:n}){const[o,c]=g.useState(!1);return e.jsxs("div",{className:"relative inline-flex items-center group",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e.jsx("div",{className:"p-1 rounded group-hover:bg-surface/60","aria-label":"Info",children:e.jsx(je,{size:16,className:"text-mutedToken-foreground"})}),o&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 rounded-md border border-border bg-card dark:bg-surface shadow-2xl p-3 z-50 animate-in fade-in zoom-in-95",children:[e.jsx("div",{className:"text-xs font-semibold mb-2",children:"Legend"}),e.jsx(Se,{}),e.jsx("div",{className:"h-px my-2 bg-border"}),e.jsxs("div",{className:"text-[11px] leading-snug text-mutedToken-foreground space-y-1",children:[e.jsx("div",{children:"Click a project: highlight edges"}),e.jsx("div",{children:"Double-click a project: open details"}),n&&e.jsx("div",{children:"Edit → Link: create dependency"})]})]})]})}function ce({p:n,rect:o,selected:c,onClick:h,onDoubleClick:k}){const p=G[n.status],f=J(n.dueDate);return e.jsxs("div",{role:"button",onClick:h,onDoubleClick:k,className:`absolute z-10 rounded shadow-sm border border-black/50 dark:border-white/40 overflow-hidden text-black dark:text-white hover:scale-[1.02] transition-transform ${c?"ring-2 ring-[hsl(var(--accent))]":""}`,style:{left:o.x,top:o.y,width:o.w,height:o.h,background:p},title:`${n.name} - due ${te(f)}`,children:[e.jsx("div",{className:"absolute top-0.5 right-1 text-[9px] font-semibold leading-none text-black/80 dark:text-white/90 select-none",children:te(f)}),e.jsx("div",{className:"absolute inset-0 grid place-items-center px-1.5 pt-3 pb-1.5 text-center",children:e.jsx("div",{className:"text-[11px] leading-tight break-words",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:n.name})}),n.milestone&&e.jsx("div",{className:"absolute -top-5 left-1/2 -translate-x-1/2 text-[10px] bg-black text-white px-1.5 py-[2px] rounded",children:te(f)})]})}const q="__ARMED__";function We(){const{role:n}=le(),o=n==="admin"||n==="lead",{projects:c,dependencies:h,setDependencies:k,loading:p,error:f,createDependency:s}=Ce(),[y,b]=g.useState(""),M=t=>{b(t),window.setTimeout(()=>b(""),2500)},[i,j]=g.useState({kind:"year"}),[x,D]=g.useState(null),[I,S]=g.useState(null),[$,T]=g.useState(!1),A=$?"Linking...":"Link",d=640,C=74,_={w:104,h:56},r=56,{months:l,layout:v}=$e(c,{monthWidth:d,rowHeight:C,block:_,headerH:r}),L=d*l.length,K=t=>`${oe[l[t].month]} ${l[t].year}`,O=g.useMemo(()=>new Map((c||[]).map(t=>[t.id,t])),[c]),W=new Date,P=g.useRef(null),z=g.useRef(null),Y=g.useRef(!1);g.useEffect(()=>{const t=P.current,a=z.current;if(!t||!a)return;const m=()=>{Y.current||(Y.current=!0,a.scrollLeft=t.scrollLeft,Y.current=!1)},w=()=>{Y.current||(Y.current=!0,t.scrollLeft=a.scrollLeft,Y.current=!1)};return t.addEventListener("scroll",m,{passive:!0}),a.addEventListener("scroll",w,{passive:!0}),()=>{t.removeEventListener("scroll",m),a.removeEventListener("scroll",w)}},[i,L]);const[U,Q]=g.useState(0),ee=i.kind==="month"?l[i.monthIdx].days:0,V=56,E=i.kind==="month"&&U?Math.max(V,Math.floor(U/ee)):V,H=i.kind==="month"?E*l[i.monthIdx].days:0,R=g.useMemo(()=>{if(!c||i.kind!=="month")return[];const t=l[i.monthIdx];return c.filter(a=>{const m=J(a.dueDate);return m.getFullYear()===t.year&&m.getMonth()===t.month}).sort((a,m)=>J(a.dueDate).getDate()-J(m.dueDate).getDate()||a.id.localeCompare(m.id))},[c,i,l]),B=g.useMemo(()=>{if(i.kind!=="month")return new Map;const t=new Map,a={};return R.forEach(m=>{const w=J(m.dueDate).getDate(),u=a[w]!==void 0?a[w]:0;a[w]=u+1;const N=(w-1)*E+(E-_.w)/2,F=70+u*60;t.set(m.id,{id:m.id,x:N,y:F,w:_.w,h:_.h,monthIdx:i.monthIdx})}),t},[i,R,E,_.w,_.h]);async function Z(t){if($&&o){if(I&&I!==q&&t!==I){const a=O.get(I)?.name||I,m=O.get(t)?.name||t,w=(h||[]).find(u=>u.fromId===I&&u.toId===t);if(w){try{w.id&&await ne(w.id)}catch{}k?.(u=>(u||[]).filter(N=>!(N.fromId===I&&N.toId===t))),M(`Unlinked ${a} — ${m}`)}else await s(I,t),M(`Linked ${a} → ${m}`);D(t),S(q);return}if(I===q){S(t),D(t);return}if(!I){S(t),D(t);return}if(I===t){D(t);return}}D(a=>a===t?null:t)}function X(t){window.location.assign(`/project/${t}`)}return f?e.jsxs("div",{className:"p-6 text-danger",children:["Failed to load timeline. ",String(f)]}):e.jsxs("div",{className:"w-full min-h-screen flex flex-col bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-border bg-card dark:bg-surface sticky top-0 z-40",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-1",children:[i.kind==="month"?K(i.monthIdx):"Timeline",e.jsx(Te,{canEdit:o})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[i.kind==="month"&&e.jsx("button",{className:"px-3 py-1.5 rounded border text-sm border-border bg-card dark:bg-surface",onClick:()=>j({kind:"year"}),children:"Back to Year"}),i.kind!=="year"&&e.jsx("button",{className:"px-3 py-1.5 rounded border text-sm bg-card dark:bg-surface border-border",onClick:()=>j({kind:"year"}),children:"Year"}),o&&e.jsx(_e,{projects:c||[],dependencies:h||[],onDeleted:t=>k?.(a=>(a||[]).filter(m=>m.id&&m.id===t?!1:`${m.fromId}|${m.toId}`!==t))}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-2 w-px h-6 bg-border"}),e.jsx("button",{className:$?"px-3 py-1.5 rounded border text-sm border-border bg-[hsl(var(--accent))] text-white":"px-3 py-1.5 rounded border text-sm border-border bg-card dark:bg-surface",onClick:()=>{$?(T(!1),S(null)):(T(!0),S(q))},children:A})]})]})]}),i.kind==="year"&&e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{ref:P,className:"relative overflow-x-auto overflow-y-hidden flex-1",children:e.jsxs("div",{className:"relative",style:{width:L,height:v.containerH,minHeight:"100vh"},children:[e.jsx(Le,{months:l,monthWidth:d,onPickMonth:t=>j({kind:"month",monthIdx:t})}),l.map((t,a)=>e.jsx("div",{className:"absolute border-r border-border",style:{left:a*d,top:0,height:"100vh",width:0}},a)),(()=>{const t=l.findIndex(u=>u.year===W.getFullYear()&&u.month===W.getMonth());if(t===-1)return null;const a=l[t],m=d/a.days,w=t*d+(W.getDate()-1)*m+m/2;return e.jsx("div",{className:"absolute top-0 bottom-0",style:{left:w,width:0},children:e.jsx("div",{className:"absolute top-0 bottom-0 border-r",style:{borderColor:"#E11D48"}})})})(),(c||[]).map(t=>{const a=v.items.get(t.id);return a?e.jsx(ce,{p:t,rect:a,selected:x===t.id,onClick:()=>Z(t.id),onDoubleClick:()=>X(t.id)},t.id):null}),e.jsx(ae,{items:v.items,dependencies:h||[],highlightId:x,monthWidth:d,months:l})]})}),e.jsx("div",{className:"border-t border-border",children:e.jsx("div",{ref:z,className:"overflow-x-auto overflow-y-hidden h-4",style:{scrollbarGutter:"stable both-edges"},children:e.jsx("div",{style:{width:L,height:1}})})})]}),i.kind==="month"&&e.jsx("div",{className:"relative overflow-x-auto overflow-y-hidden flex-1",ref:t=>{if(!t)return;new ResizeObserver(m=>{for(const w of m){const u=Math.floor(w.contentRect.width);u&&u!==U&&Q(u)}}).observe(t)},children:e.jsxs("div",{className:"relative",style:{width:H,height:520},children:[Array.from({length:l[i.monthIdx].days}).map((t,a)=>{const w=new Date(l[i.monthIdx].year,l[i.monthIdx].month,a+1).getDay(),u=Ie[w],N=w===2||w===4||w===6;return e.jsxs(he.Fragment,{children:[e.jsx("div",{className:"absolute top-0 bottom-0"+(N?" bg-accent/5":""),style:{left:a*E,width:E,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{className:"absolute top-0 bottom-0 border-r border-border/40",style:{left:a*E,width:E,zIndex:0,pointerEvents:"none"}}),e.jsx("div",{className:"absolute top-0 bottom-0",style:{left:a*E,width:E,zIndex:0,pointerEvents:"none"},children:e.jsxs("div",{className:"sticky top-8 text-[10px] leading-tight text-center",children:[e.jsx("div",{className:"font-medium text-foreground/80",children:a+1}),e.jsx("div",{className:"uppercase tracking-wide "+(N?"text-accent":"text-mutedToken-foreground"),children:u})]})})]},a)}),(()=>{const t=l[i.monthIdx];if(W.getFullYear()!==t.year||W.getMonth()!==t.month)return null;const a=(W.getDate()-1)*E+E/2;return e.jsx("div",{className:"absolute top-0 bottom-0",style:{left:a,width:0},children:e.jsx("div",{className:"absolute top-0 bottom-0 border-r",style:{borderColor:"#E11D48"}})})})(),R.map(t=>{const a=B.get(t.id);return a?e.jsx(ce,{p:t,rect:a,selected:x===t.id,onClick:()=>Z(t.id),onDoubleClick:()=>X(t.id)},t.id):null}),(()=>{const t=new Map(B);l[i.monthIdx];const a=0,m=H,w=(h||[]).filter(u=>{const N=B.has(u.fromId),F=B.has(u.toId);return N||F});return w.forEach(u=>{if(!t.has(u.fromId)&&B.has(u.toId)){const N=B.get(u.toId);t.set(u.fromId,{id:u.fromId,x:a,y:N.y,w:0,h:N.h,monthIdx:i.monthIdx})}if(!t.has(u.toId)&&B.has(u.fromId)){const N=B.get(u.fromId);t.set(u.toId,{id:u.toId,x:m,y:N.y,w:0,h:N.h,monthIdx:i.monthIdx})}}),e.jsx(ae,{items:t,dependencies:w,highlightId:x,monthWidth:H,months:l.slice(i.monthIdx,i.monthIdx+1)})})()]})}),p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-mutedToken-foreground",children:"Loading timeline..."}),y&&e.jsx("div",{className:"fixed bottom-4 right-4 z-[100] px-3 py-2 rounded shadow-lg bg-accent/90 text-white text-sm border border-accent",children:y})]})}function _e({projects:n,dependencies:o,onDeleted:c}){const[h,k]=g.useState(!1),p=g.useMemo(()=>new Map(n.map(s=>[s.id,s])),[n]),f=[...o].map((s,y)=>({idx:y,id:s.id||`${s.fromId}|${s.toId}`,from:p.get(s.fromId)?.name||s.fromId,to:p.get(s.toId)?.name||s.toId})).sort((s,y)=>s.from.localeCompare(y.from)||s.to.localeCompare(y.to));return e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{className:"px-3 py-1.5 rounded border text-sm border-border bg-card dark:bg-surface",onClick:()=>k(s=>!s),"aria-expanded":h,"aria-haspopup":!0,children:"Deps"}),h&&e.jsxs("div",{className:"absolute right-0 mt-1 w-[560px] max-h-[420px] overflow-auto rounded-md border border-border bg-card dark:bg-surface shadow-2xl z-50",children:[e.jsx("div",{className:"px-3 py-2 text-xs text-mutedToken-foreground border-b border-border sticky top-0 bg-card dark:bg-surface",children:"Dependencies"}),e.jsxs("ul",{className:"p-3 space-y-1",children:[f.length===0&&e.jsx("li",{className:"text-xs text-mutedToken-foreground px-2 py-1",children:"No dependencies yet."}),f.map(s=>e.jsxs("li",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2 text-xs px-2 py-1 rounded hover:bg-surface/70",children:[e.jsx("span",{className:"truncate",title:`${s.from}`,children:s.from}),e.jsx("span",{className:"text-center w-16 shrink-0",children:"→"}),e.jsx("span",{className:"truncate",title:`${s.to}`,children:s.to}),e.jsx("button",{className:"ml-auto px-2 py-0.5 rounded border text-[11px] border-border bg-card dark:bg-surface hover:bg-card/70",onClick:async()=>{try{if(s.id.includes("|")){const y=o.find(b=>`${b.fromId}|${b.toId}`===s.id);y?.id&&await ne(y.id),c(y?.id||s.id)}else await ne(s.id),c(s.id)}catch{}},children:"Delete"})]},s.id))]})]})]})}export{Ne as academicYearWindow,Ee as computeYearLayout,We as default};
