import{r as o,j as t}from"./index-D3k_KiqT.js";import{c as i}from"./modal-nQA6oMK7.js";function z(a){const{people:s,mode:r="single",selectedId:c=null,selectedIds:d=[],onSelect:h,onAdd:w,onRemove:j,triggerLabel:m,triggerContent:v,buttonClassName:N="px-3 py-2 rounded border border-input bg-card text-sm hover:bg-card/80 transition",disabled:x=!1,maxItems:u=8,allowUnassign:y=!0,allowScroll:C=!1}=a,[p,l]=o.useState(!1),[f,k]=o.useState(""),g=o.useRef(null);o.useEffect(()=>{function e(n){n.key==="Escape"&&l(!1)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),o.useEffect(()=>{if(!p)return;function e(n){g.current&&!g.current.contains(n.target)&&l(!1)}return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[p]);const b=o.useMemo(()=>{const e=f.toLowerCase();return s.filter(n=>!e||n.name.toLowerCase().includes(e)||(n.skills||[]).join(" ").toLowerCase().includes(e))},[s,f]),R=o.useMemo(()=>new Set(d),[d]),S=(()=>{if(m)return m;if(r==="single"){if(c){const e=s.find(n=>n.id===c);return e?e.name:"Assign to…"}return"Assign to…"}if(d.length===0)return"Add/Remove";if(d.length===1){const e=s.find(n=>n.id===d[0]);return e?e.name:"1 selected"}return`${d.length} selected`})();return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",disabled:x,onClick:()=>!x&&l(e=>!e),className:`${N} ${x?"opacity-50 cursor-not-allowed":""}`,"aria-label":typeof v<"u"?m||"Open selector":void 0,children:v??S}),p&&t.jsx("div",{className:"fixed inset-0 z-[120] flex items-start justify-center pt-24 px-4",children:t.jsxs("div",{ref:g,className:"relative z-[121] w-full max-w-md rounded-lg border border-input bg-popover text-popover-foreground p-3 space-y-2 shadow-md",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{autoFocus:!0,value:f,onChange:e=>k(e.target.value),placeholder:"Search people…",className:"w-full px-2 py-1.5 rounded-md border border-input bg-transparent text-sm shadow-sm focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"}),t.jsx("button",{onClick:()=>l(!1),className:"text-[11px] px-2 py-1 rounded border border-input hover:bg-card",children:"Close"})]}),t.jsxs("ul",{className:`space-y-1 text-sm ${C?"max-h-60 overflow-auto":""}`,children:[r==="single"&&y&&t.jsx("li",{children:t.jsx("button",{className:`w-full text-left px-2 py-1 rounded hover:bg-card text-[13px] ${c?"":"bg-card/80"}`,onClick:()=>{h?.(null),l(!1)},children:"Unassigned"})}),b.slice(0,u).map(e=>{const n=r==="single"?e.id===c:R.has(e.id);return t.jsxs("li",{className:"flex items-center gap-2 justify-between px-2 py-1 rounded hover:bg-card/80",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"truncate text-sm font-medium",children:e.name}),e.skills&&e.skills.length>0&&t.jsx("div",{className:"text-xs text-muted truncate uppercase tracking-caps",children:e.skills.join(", ")})]}),r==="multi"?t.jsx("button",{onClick:()=>n?j?.(e.id):w?.(e.id),className:`px-2 py-1 rounded text-tick border ${n?"bg-accent/20 border-accent/40 text-accent":"bg-card/60 border-input hover:bg-card/80"}`,children:n?"Remove":"Add"}):t.jsx("button",{onClick:()=>{h?.(e.id),l(!1)},className:`px-2 py-1 rounded text-tick border ${n?"bg-accent/30 border-accent/50 text-accent":"bg-card/60 border-input hover:bg-card/80"}`,children:n?"Selected":"Select"})]},e.id)}),b.slice(0,u).length===0&&t.jsx("li",{className:"text-xs text-muted px-2 py-1 uppercase tracking-caps",children:"No people"}),b.length>u&&t.jsxs("li",{className:"text-tick text-muted px-2 py-1",children:["Showing first ",u," results… refine search"]})]})]})})]})}const E=o.forwardRef(({className:a,...s},r)=>t.jsx("div",{ref:r,className:i("rounded-xl border bg-card text-card-foreground shadow",a),...s}));E.displayName="Card";const L=o.forwardRef(({className:a,...s},r)=>t.jsx("div",{ref:r,className:i("flex flex-col space-y-1.5 p-6",a),...s}));L.displayName="CardHeader";const $=o.forwardRef(({className:a,...s},r)=>t.jsx("div",{ref:r,className:i("font-semibold leading-none tracking-tight",a),...s}));$.displayName="CardTitle";const A=o.forwardRef(({className:a,...s},r)=>t.jsx("div",{ref:r,className:i("text-sm text-muted-foreground",a),...s}));A.displayName="CardDescription";const F=o.forwardRef(({className:a,...s},r)=>t.jsx("div",{ref:r,className:i("p-6 pt-0",a),...s}));F.displayName="CardContent";const q=o.forwardRef(({className:a,...s},r)=>t.jsx("div",{ref:r,className:i("flex items-center p-6 pt-0",a),...s}));q.displayName="CardFooter";export{E as C,z as P,L as a,$ as b,F as c,q as d};
