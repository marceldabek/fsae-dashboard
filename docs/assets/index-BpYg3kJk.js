const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Overview-B7_6e4Td.js","assets/ProgressBar-DOPfY39-.js","assets/PersonSelectPopover-B9wunjR_.js","assets/AreaChart-B0JNoqg0.js","assets/ProjectDetail-BzgmUHQg.js","assets/TaskCreateCard-BNCYztuf.js","assets/Admin-9Z3eKkRE.js","assets/Stats-CjbVgtjC.js"])))=>i.map(i=>d[i]);
function Hw(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var WN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ep={exports:{}},ql={},tp={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function bS(){if(D_)return He;D_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,M={};function U(F,Q,Se){this.props=F,this.context=Q,this.refs=M,this.updater=Se||P}U.prototype.isReactComponent={},U.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},U.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function oe(){}oe.prototype=U.prototype;function H(F,Q,Se){this.props=F,this.context=Q,this.refs=M,this.updater=Se||P}var ee=H.prototype=new oe;ee.constructor=H,j(ee,U.prototype),ee.isPureReactComponent=!0;var ae=Array.isArray,de=Object.prototype.hasOwnProperty,me={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(F,Q,Se){var je,Le={},$e=null,qe=null;if(Q!=null)for(je in Q.ref!==void 0&&(qe=Q.ref),Q.key!==void 0&&($e=""+Q.key),Q)de.call(Q,je)&&!I.hasOwnProperty(je)&&(Le[je]=Q[je]);var Xe=arguments.length-2;if(Xe===1)Le.children=Se;else if(1<Xe){for(var mt=Array(Xe),$t=0;$t<Xe;$t++)mt[$t]=arguments[$t+2];Le.children=mt}if(F&&F.defaultProps)for(je in Xe=F.defaultProps,Xe)Le[je]===void 0&&(Le[je]=Xe[je]);return{$$typeof:n,type:F,key:$e,ref:qe,props:Le,_owner:me.current}}function A(F,Q){return{$$typeof:n,type:F.type,key:Q,ref:F.ref,props:F.props,_owner:F._owner}}function x(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function N(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Se){return Q[Se]})}var L=/\/+/g;function k(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?N(""+F.key):Q.toString(36)}function Ye(F,Q,Se,je,Le){var $e=typeof F;($e==="undefined"||$e==="boolean")&&(F=null);var qe=!1;if(F===null)qe=!0;else switch($e){case"string":case"number":qe=!0;break;case"object":switch(F.$$typeof){case n:case e:qe=!0}}if(qe)return qe=F,Le=Le(qe),F=je===""?"."+k(qe,0):je,ae(Le)?(Se="",F!=null&&(Se=F.replace(L,"$&/")+"/"),Ye(Le,Q,Se,"",function($t){return $t})):Le!=null&&(x(Le)&&(Le=A(Le,Se+(!Le.key||qe&&qe.key===Le.key?"":(""+Le.key).replace(L,"$&/")+"/")+F)),Q.push(Le)),1;if(qe=0,je=je===""?".":je+":",ae(F))for(var Xe=0;Xe<F.length;Xe++){$e=F[Xe];var mt=je+k($e,Xe);qe+=Ye($e,Q,Se,mt,Le)}else if(mt=T(F),typeof mt=="function")for(F=mt.call(F),Xe=0;!($e=F.next()).done;)$e=$e.value,mt=je+k($e,Xe++),qe+=Ye($e,Q,Se,mt,Le);else if($e==="object")throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return qe}function _t(F,Q,Se){if(F==null)return F;var je=[],Le=0;return Ye(F,je,"","",function($e){return Q.call(Se,$e,Le++)}),je}function Ut(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(Se){(F._status===0||F._status===-1)&&(F._status=1,F._result=Se)},function(Se){(F._status===0||F._status===-1)&&(F._status=2,F._result=Se)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var st={current:null},re={transition:null},ke={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:re,ReactCurrentOwner:me};function pe(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:_t,forEach:function(F,Q,Se){_t(F,function(){Q.apply(this,arguments)},Se)},count:function(F){var Q=0;return _t(F,function(){Q++}),Q},toArray:function(F){return _t(F,function(Q){return Q})||[]},only:function(F){if(!x(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},He.Component=U,He.Fragment=t,He.Profiler=s,He.PureComponent=H,He.StrictMode=r,He.Suspense=f,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,He.act=pe,He.cloneElement=function(F,Q,Se){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var je=j({},F.props),Le=F.key,$e=F.ref,qe=F._owner;if(Q!=null){if(Q.ref!==void 0&&($e=Q.ref,qe=me.current),Q.key!==void 0&&(Le=""+Q.key),F.type&&F.type.defaultProps)var Xe=F.type.defaultProps;for(mt in Q)de.call(Q,mt)&&!I.hasOwnProperty(mt)&&(je[mt]=Q[mt]===void 0&&Xe!==void 0?Xe[mt]:Q[mt])}var mt=arguments.length-2;if(mt===1)je.children=Se;else if(1<mt){Xe=Array(mt);for(var $t=0;$t<mt;$t++)Xe[$t]=arguments[$t+2];je.children=Xe}return{$$typeof:n,type:F.type,key:Le,ref:$e,props:je,_owner:qe}},He.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},He.createElement=R,He.createFactory=function(F){var Q=R.bind(null,F);return Q.type=F,Q},He.createRef=function(){return{current:null}},He.forwardRef=function(F){return{$$typeof:h,render:F}},He.isValidElement=x,He.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Ut}},He.memo=function(F,Q){return{$$typeof:m,type:F,compare:Q===void 0?null:Q}},He.startTransition=function(F){var Q=re.transition;re.transition={};try{F()}finally{re.transition=Q}},He.unstable_act=pe,He.useCallback=function(F,Q){return st.current.useCallback(F,Q)},He.useContext=function(F){return st.current.useContext(F)},He.useDebugValue=function(){},He.useDeferredValue=function(F){return st.current.useDeferredValue(F)},He.useEffect=function(F,Q){return st.current.useEffect(F,Q)},He.useId=function(){return st.current.useId()},He.useImperativeHandle=function(F,Q,Se){return st.current.useImperativeHandle(F,Q,Se)},He.useInsertionEffect=function(F,Q){return st.current.useInsertionEffect(F,Q)},He.useLayoutEffect=function(F,Q){return st.current.useLayoutEffect(F,Q)},He.useMemo=function(F,Q){return st.current.useMemo(F,Q)},He.useReducer=function(F,Q,Se){return st.current.useReducer(F,Q,Se)},He.useRef=function(F){return st.current.useRef(F)},He.useState=function(F){return st.current.useState(F)},He.useSyncExternalStore=function(F,Q,Se){return st.current.useSyncExternalStore(F,Q,Se)},He.useTransition=function(){return st.current.useTransition()},He.version="18.3.1",He}var b_;function lm(){return b_||(b_=1,tp.exports=bS()),tp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function NS(){if(N_)return ql;N_=1;var n=lm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var _,w={},T=null,P=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(P=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:h,key:T,ref:P,props:w,_owner:s.current}}return ql.Fragment=t,ql.jsx=u,ql.jsxs=u,ql}var V_;function VS(){return V_||(V_=1,ep.exports=NS()),ep.exports}var le=VS(),Y=lm();const Yn=Qw(Y),LS=Hw({__proto__:null,default:Yn},[Y]);var eh={},np={exports:{}},Gn={},rp={exports:{}},ip={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function OS(){return L_||(L_=1,(function(n){function e(re,ke){var pe=re.length;re.push(ke);e:for(;0<pe;){var F=pe-1>>>1,Q=re[F];if(0<s(Q,ke))re[F]=ke,re[pe]=Q,pe=F;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var ke=re[0],pe=re.pop();if(pe!==ke){re[0]=pe;e:for(var F=0,Q=re.length,Se=Q>>>1;F<Se;){var je=2*(F+1)-1,Le=re[je],$e=je+1,qe=re[$e];if(0>s(Le,pe))$e<Q&&0>s(qe,Le)?(re[F]=qe,re[$e]=pe,F=$e):(re[F]=Le,re[je]=pe,F=je);else if($e<Q&&0>s(qe,pe))re[F]=qe,re[$e]=pe,F=$e;else break e}}return ke}function s(re,ke){var pe=re.sortIndex-ke.sortIndex;return pe!==0?pe:re.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],_=1,w=null,T=3,P=!1,j=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(re){for(var ke=t(m);ke!==null;){if(ke.callback===null)r(m);else if(ke.startTime<=re)r(m),ke.sortIndex=ke.expirationTime,e(f,ke);else break;ke=t(m)}}function ae(re){if(M=!1,ee(re),!j)if(t(f)!==null)j=!0,Ut(de);else{var ke=t(m);ke!==null&&st(ae,ke.startTime-re)}}function de(re,ke){j=!1,M&&(M=!1,oe(R),R=-1),P=!0;var pe=T;try{for(ee(ke),w=t(f);w!==null&&(!(w.expirationTime>ke)||re&&!N());){var F=w.callback;if(typeof F=="function"){w.callback=null,T=w.priorityLevel;var Q=F(w.expirationTime<=ke);ke=n.unstable_now(),typeof Q=="function"?w.callback=Q:w===t(f)&&r(f),ee(ke)}else r(f);w=t(f)}if(w!==null)var Se=!0;else{var je=t(m);je!==null&&st(ae,je.startTime-ke),Se=!1}return Se}finally{w=null,T=pe,P=!1}}var me=!1,I=null,R=-1,A=5,x=-1;function N(){return!(n.unstable_now()-x<A)}function L(){if(I!==null){var re=n.unstable_now();x=re;var ke=!0;try{ke=I(!0,re)}finally{ke?k():(me=!1,I=null)}}else me=!1}var k;if(typeof H=="function")k=function(){H(L)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,_t=Ye.port2;Ye.port1.onmessage=L,k=function(){_t.postMessage(null)}}else k=function(){U(L,0)};function Ut(re){I=re,me||(me=!0,k())}function st(re,ke){R=U(function(){re(n.unstable_now())},ke)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){j||P||(j=!0,Ut(de))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(re){switch(T){case 1:case 2:case 3:var ke=3;break;default:ke=T}var pe=T;T=ke;try{return re()}finally{T=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ke){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=T;T=re;try{return ke()}finally{T=pe}},n.unstable_scheduleCallback=function(re,ke,pe){var F=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?F+pe:F):pe=F,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=pe+Q,re={id:_++,callback:ke,priorityLevel:re,startTime:pe,expirationTime:Q,sortIndex:-1},pe>F?(re.sortIndex=pe,e(m,re),t(f)===null&&re===t(m)&&(M?(oe(R),R=-1):M=!0,st(ae,pe-F))):(re.sortIndex=Q,e(f,re),j||P||(j=!0,Ut(de))),re},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(re){var ke=T;return function(){var pe=T;T=ke;try{return re.apply(this,arguments)}finally{T=pe}}}})(ip)),ip}var O_;function MS(){return O_||(O_=1,rp.exports=OS()),rp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function FS(){if(M_)return Gn;M_=1;var n=lm(),e=MS();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function T(i){return f.call(w,i)?!0:f.call(_,i)?!1:m.test(i)?w[i]=!0:(_[i]=!0,!1)}function P(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,o,l,d){if(o===null||typeof o>"u"||P(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function M(i,o,l,d,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){U[i]=new M(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];U[o]=new M(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){U[i]=new M(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){U[i]=new M(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){U[i]=new M(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){U[i]=new M(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){U[i]=new M(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){U[i]=new M(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){U[i]=new M(i,5,!1,i.toLowerCase(),null,!1,!1)});var oe=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(oe,H);U[o]=new M(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(oe,H);U[o]=new M(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(oe,H);U[o]=new M(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){U[i]=new M(i,1,!1,i.toLowerCase(),null,!1,!1)}),U.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){U[i]=new M(i,1,!1,i.toLowerCase(),null,!0,!0)});function ee(i,o,l,d){var p=U.hasOwnProperty(o)?U[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(j(o,l,p,d)&&(l=null),d||p===null?T(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),me=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),Ut=Symbol.for("react.lazy"),st=Symbol.for("react.offscreen"),re=Symbol.iterator;function ke(i){return i===null||typeof i!="object"?null:(i=re&&i[re]||i["@@iterator"],typeof i=="function"?i:null)}var pe=Object.assign,F;function Q(i){if(F===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+i}var Se=!1;function je(i,o){if(!i||Se)return"";Se=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var d=G}Reflect.construct(i,[],o)}else{try{o.call()}catch(G){d=G}i.call(o.prototype)}else{try{throw Error()}catch(G){d=G}i()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var p=G.stack.split(`
`),y=d.stack.split(`
`),E=p.length-1,C=y.length-1;1<=E&&0<=C&&p[E]!==y[C];)C--;for(;1<=E&&0<=C;E--,C--)if(p[E]!==y[C]){if(E!==1||C!==1)do if(E--,C--,0>C||p[E]!==y[C]){var b=`
`+p[E].replace(" at new "," at ");return i.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",i.displayName)),b}while(1<=E&&0<=C);break}}}finally{Se=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Q(i):""}function Le(i){switch(i.tag){case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return i=je(i.type,!1),i;case 11:return i=je(i.type.render,!1),i;case 1:return i=je(i.type,!0),i;default:return""}}function $e(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case me:return"Portal";case A:return"Profiler";case R:return"StrictMode";case k:return"Suspense";case Ye:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case N:return(i.displayName||"Context")+".Consumer";case x:return(i._context.displayName||"Context")+".Provider";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case _t:return o=i.displayName||null,o!==null?o:$e(i.type)||"Memo";case Ut:o=i._payload,i=i._init;try{return $e(i(o))}catch{}}return null}function qe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function mt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $t(i){var o=mt(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Sr(i){i._valueTracker||(i._valueTracker=$t(i))}function Vt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=mt(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function Pn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Kr(i,o){var l=o.checked;return pe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Gi(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Xe(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Xn(i,o){o=o.checked,o!=null&&ee(i,"checked",o,!1)}function Gs(i,o){Xn(i,o);var l=Xe(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?yi(i,o.type,l):o.hasOwnProperty("defaultValue")&&yi(i,o.type,Xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Ko(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function yi(i,o,l){(o!=="number"||Pn(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Rr=Array.isArray;function Ar(i,o,l,d){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Xe(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Ws(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return pe({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Wi(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Rr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Xe(l)}}function Ln(i,o){var l=Xe(o.value),d=Xe(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function Pr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Lt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Lt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var rn,Cn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(rn=rn||document.createElement("div"),rn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=rn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Cr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_i=["Webkit","ms","Moz","O"];Object.keys(dr).forEach(function(i){_i.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),dr[o]=dr[i]})});function On(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||dr.hasOwnProperty(i)&&dr[i]?(""+o).trim():o+"px"}function Hi(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=On(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var Qi=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ji(i,o){if(o){if(Qi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Hs(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=null;function kr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vi=null,gn=null,Mn=null;function Yi(i){if(i=kl(i)){if(typeof vi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=mc(o),vi(i.stateNode,i.type,o))}}function Zn(i){gn?Mn?Mn.push(i):Mn=[i]:gn=i}function Qs(){if(gn){var i=gn,o=Mn;if(Mn=gn=null,Yi(i),o)for(i=0;i<o.length;i++)Yi(o[i])}}function Wr(i,o){return i(o)}function Hr(){}var Fn=!1;function Js(i,o,l){if(Fn)return i(o,l);Fn=!0;try{return Wr(i,o,l)}finally{Fn=!1,(gn!==null||Mn!==null)&&(Hr(),Qs())}}function kt(i,o){var l=i.stateNode;if(l===null)return null;var d=mc(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var D=!1;if(h)try{var O={};Object.defineProperty(O,"passive",{get:function(){D=!0}}),window.addEventListener("test",O,O),window.removeEventListener("test",O,O)}catch{D=!1}function K(i,o,l,d,p,y,E,C,b){var G=Array.prototype.slice.call(arguments,3);try{o.apply(l,G)}catch(ne){this.onError(ne)}}var X=!1,ce=null,we=!1,be=null,Ee={onError:function(i){X=!0,ce=i}};function ve(i,o,l,d,p,y,E,C,b){X=!1,ce=null,K.apply(Ee,arguments)}function ye(i,o,l,d,p,y,E,C,b){if(ve.apply(this,arguments),X){if(X){var G=ce;X=!1,ce=null}else throw Error(t(198));we||(we=!0,be=G)}}function _e(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Oe(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Fe(i){if(_e(i)!==i)throw Error(t(188))}function Ot(i){var o=i.alternate;if(!o){if(o=_e(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,d=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Fe(p),i;if(y===d)return Fe(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=y;else{for(var E=!1,C=p.child;C;){if(C===l){E=!0,l=p,d=y;break}if(C===d){E=!0,d=p,l=y;break}C=C.sibling}if(!E){for(C=y.child;C;){if(C===l){E=!0,l=y,d=p;break}if(C===d){E=!0,d=y,l=p;break}C=C.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function at(i){return i=Ot(i),i!==null?We(i):null}function We(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=We(i);if(o!==null)return o;i=i.sibling}return null}var ht=e.unstable_scheduleCallback,fr=e.unstable_cancelCallback,Qr=e.unstable_shouldYield,er=e.unstable_requestPaint,Qe=e.unstable_now,Xi=e.unstable_getCurrentPriorityLevel,tr=e.unstable_ImmediatePriority,yn=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,Jr=e.unstable_LowPriority,Je=e.unstable_IdlePriority,ut=null,qt=null;function Yr(i){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(ut,i,void 0,(i.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Go,pr=Math.log,Ys=Math.LN2;function Go(i){return i>>>=0,i===0?32:31-(pr(i)/Ys|0)|0}var Wo=64,Ho=4194304;function Zi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Xs(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,y=i.pingedLanes,E=l&268435455;if(E!==0){var C=E&~p;C!==0?d=Zi(C):(y&=E,y!==0&&(d=Zi(y)))}else E=l&~p,E!==0?d=Zi(E):y!==0&&(d=Zi(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-Ze(o),p=1<<l,d|=i[l],o&=~p;return d}function kd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wi(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-Ze(y),C=1<<E,b=p[E];b===-1?((C&l)===0||(C&d)!==0)&&(p[E]=kd(C,o)):b<=o&&(i.expiredLanes|=C),y&=~C}}function nr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Zs(){var i=Wo;return Wo<<=1,(Wo&4194240)===0&&(Wo=64),i}function es(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function ts(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Ze(o),i[o]=l}function yt(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Ze(l),y=1<<p;o[p]=0,d[p]=-1,i[p]=-1,l&=~y}}function ns(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-Ze(l),p=1<<d;p&o|i[d]&o&&(i[d]|=o),l&=~p}}var nt=0;function rs(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Hu,Qo,Qu,Ju,Yu,pl=!1,Xr=[],hn=null,xr=null,Dr=null,is=new Map,mr=new Map,Zr=[],xd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xu(i,o){switch(i){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":is.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(o.pointerId)}}function Un(i,o,l,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=kl(o),o!==null&&Qo(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Dd(i,o,l,d,p){switch(o){case"focusin":return hn=Un(hn,i,o,l,d,p),!0;case"dragenter":return xr=Un(xr,i,o,l,d,p),!0;case"mouseover":return Dr=Un(Dr,i,o,l,d,p),!0;case"pointerover":var y=p.pointerId;return is.set(y,Un(is.get(y)||null,i,o,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,mr.set(y,Un(mr.get(y)||null,i,o,l,d,p)),!0}return!1}function Zu(i){var o=io(i.target);if(o!==null){var l=_e(o);if(l!==null){if(o=l.tag,o===13){if(o=Oe(l),o!==null){i.blockedOn=o,Yu(i.priority,function(){Qu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ei(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Jo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Gr=d,l.target.dispatchEvent(d),Gr=null}else return o=kl(l),o!==null&&Qo(o),i.blockedOn=l,!1;o.shift()}return!0}function eo(i,o,l){Ei(i)&&l.delete(o)}function ec(){pl=!1,hn!==null&&Ei(hn)&&(hn=null),xr!==null&&Ei(xr)&&(xr=null),Dr!==null&&Ei(Dr)&&(Dr=null),is.forEach(eo),mr.forEach(eo)}function br(i,o){i.blockedOn===o&&(i.blockedOn=null,pl||(pl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ec)))}function Nr(i){function o(p){return br(p,i)}if(0<Xr.length){br(Xr[0],i);for(var l=1;l<Xr.length;l++){var d=Xr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(hn!==null&&br(hn,i),xr!==null&&br(xr,i),Dr!==null&&br(Dr,i),is.forEach(o),mr.forEach(o),l=0;l<Zr.length;l++)d=Zr[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<Zr.length&&(l=Zr[0],l.blockedOn===null);)Zu(l),l.blockedOn===null&&Zr.shift()}var Ii=ae.ReactCurrentBatchConfig,ss=!0;function St(i,o,l,d){var p=nt,y=Ii.transition;Ii.transition=null;try{nt=1,ml(i,o,l,d)}finally{nt=p,Ii.transition=y}}function bd(i,o,l,d){var p=nt,y=Ii.transition;Ii.transition=null;try{nt=4,ml(i,o,l,d)}finally{nt=p,Ii.transition=y}}function ml(i,o,l,d){if(ss){var p=Jo(i,o,l,d);if(p===null)$d(i,o,d,to,l),Xu(i,d);else if(Dd(p,i,o,l,d))d.stopPropagation();else if(Xu(i,d),o&4&&-1<xd.indexOf(i)){for(;p!==null;){var y=kl(p);if(y!==null&&Hu(y),y=Jo(i,o,l,d),y===null&&$d(i,o,d,to,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else $d(i,o,d,null,l)}}var to=null;function Jo(i,o,l,d){if(to=null,i=kr(d),i=io(i),i!==null)if(o=_e(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Oe(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return to=i,null}function gl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xi()){case tr:return 1;case yn:return 4;case cn:case Jr:return 16;case Je:return 536870912;default:return 16}default:return 16}}var rr=null,Yo=null,jn=null;function yl(){if(jn)return jn;var i,o=Yo,l=o.length,d,p="value"in rr?rr.value:rr.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var E=l-i;for(d=1;d<=E&&o[l-d]===p[y-d];d++);return jn=p.slice(i,1<d?1-d:void 0)}function Xo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ei(){return!0}function _l(){return!1}function dn(i){function o(l,d,p,y,E){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ei:_l,this.isPropagationStopped=_l,this}return pe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),o}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=dn(Vr),ti=pe({},Vr,{view:0,detail:0}),Nd=dn(ti),ea,Ti,os,no=pe({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ni,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==os&&(os&&i.type==="mousemove"?(ea=i.screenX-os.screenX,Ti=i.screenY-os.screenY):Ti=ea=0,os=i),ea)},movementY:function(i){return"movementY"in i?i.movementY:Ti}}),ta=dn(no),vl=pe({},no,{dataTransfer:0}),tc=dn(vl),na=pe({},ti,{relatedTarget:0}),ra=dn(na),nc=pe({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=dn(nc),rc=pe({},Vr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ic=dn(rc),sc=pe({},Vr,{data:0}),wl=dn(sc),ia={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ac(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=oc[i])?!!o[i]:!1}function ni(){return ac}var c=pe({},ti,{key:function(i){if(i.key){var o=ia[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Xo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?kn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ni,charCode:function(i){return i.type==="keypress"?Xo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=dn(c),v=pe({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=dn(v),B=pe({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ni}),W=dn(B),ue=pe({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=dn(ue),Yt=pe({},no,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rt=dn(Yt),sn=[9,13,27,32],Kt=h&&"CompositionEvent"in window,gr=null;h&&"documentMode"in document&&(gr=document.documentMode);var ir=h&&"TextEvent"in window&&!gr,ro=h&&(!Kt||gr&&8<gr&&11>=gr),sa=" ",Rg=!1;function Ag(i,o){switch(i){case"keyup":return sn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var oa=!1;function kT(i,o){switch(i){case"compositionend":return Pg(o);case"keypress":return o.which!==32?null:(Rg=!0,sa);case"textInput":return i=o.data,i===sa&&Rg?null:i;default:return null}}function xT(i,o){if(oa)return i==="compositionend"||!Kt&&Ag(i,o)?(i=yl(),jn=Yo=rr=null,oa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ro&&o.locale!=="ko"?null:o.data;default:return null}}var DT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!DT[i.type]:o==="textarea"}function kg(i,o,l,d){Zn(d),o=dc(o,"onChange"),0<o.length&&(l=new Zo("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var El=null,Il=null;function bT(i){Wg(i,0)}function lc(i){var o=ha(i);if(Vt(o))return i}function NT(i,o){if(i==="change")return o}var xg=!1;if(h){var Vd;if(h){var Ld="oninput"in document;if(!Ld){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Ld=typeof Dg.oninput=="function"}Vd=Ld}else Vd=!1;xg=Vd&&(!document.documentMode||9<document.documentMode)}function bg(){El&&(El.detachEvent("onpropertychange",Ng),Il=El=null)}function Ng(i){if(i.propertyName==="value"&&lc(Il)){var o=[];kg(o,Il,i,kr(i)),Js(bT,o)}}function VT(i,o,l){i==="focusin"?(bg(),El=o,Il=l,El.attachEvent("onpropertychange",Ng)):i==="focusout"&&bg()}function LT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return lc(Il)}function OT(i,o){if(i==="click")return lc(o)}function MT(i,o){if(i==="input"||i==="change")return lc(o)}function FT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Lr=typeof Object.is=="function"?Object.is:FT;function Tl(i,o){if(Lr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(o,p)||!Lr(i[p],o[p]))return!1}return!0}function Vg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Lg(i,o){var l=Vg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Vg(l)}}function Og(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Og(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Mg(){for(var i=window,o=Pn();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=Pn(i.document)}return o}function Od(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function UT(i){var o=Mg(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&Og(l.ownerDocument.documentElement,l)){if(d!==null&&Od(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!i.extend&&y>d&&(p=d,d=y,y=p),p=Lg(l,y);var E=Lg(l,d);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var jT=h&&"documentMode"in document&&11>=document.documentMode,aa=null,Md=null,Sl=null,Fd=!1;function Fg(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Fd||aa==null||aa!==Pn(d)||(d=aa,"selectionStart"in d&&Od(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Sl&&Tl(Sl,d)||(Sl=d,d=dc(Md,"onSelect"),0<d.length&&(o=new Zo("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=aa)))}function uc(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var la={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Ud={},Ug={};h&&(Ug=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function cc(i){if(Ud[i])return Ud[i];if(!la[i])return i;var o=la[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Ug)return Ud[i]=o[l];return i}var jg=cc("animationend"),Bg=cc("animationiteration"),zg=cc("animationstart"),$g=cc("transitionend"),qg=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function as(i,o){qg.set(i,o),a(o,[i])}for(var jd=0;jd<Kg.length;jd++){var Bd=Kg[jd],BT=Bd.toLowerCase(),zT=Bd[0].toUpperCase()+Bd.slice(1);as(BT,"on"+zT)}as(jg,"onAnimationEnd"),as(Bg,"onAnimationIteration"),as(zg,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as($g,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Gg(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,ye(d,o,void 0,i),i.currentTarget=null}function Wg(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var E=d.length-1;0<=E;E--){var C=d[E],b=C.instance,G=C.currentTarget;if(C=C.listener,b!==y&&p.isPropagationStopped())break e;Gg(p,C,G),y=b}else for(E=0;E<d.length;E++){if(C=d[E],b=C.instance,G=C.currentTarget,C=C.listener,b!==y&&p.isPropagationStopped())break e;Gg(p,C,G),y=b}}}if(we)throw i=be,we=!1,be=null,i}function Et(i,o){var l=o[Qd];l===void 0&&(l=o[Qd]=new Set);var d=i+"__bubble";l.has(d)||(Hg(o,i,2,!1),l.add(d))}function zd(i,o,l){var d=0;o&&(d|=4),Hg(l,i,d,o)}var hc="_reactListening"+Math.random().toString(36).slice(2);function Al(i){if(!i[hc]){i[hc]=!0,r.forEach(function(l){l!=="selectionchange"&&($T.has(l)||zd(l,!1,i),zd(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[hc]||(o[hc]=!0,zd("selectionchange",!1,o))}}function Hg(i,o,l,d){switch(gl(o)){case 1:var p=St;break;case 4:p=bd;break;default:p=ml}l=p.bind(null,o,l,i),p=void 0,!D||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function $d(i,o,l,d,p){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var C=d.stateNode.containerInfo;if(C===p||C.nodeType===8&&C.parentNode===p)break;if(E===4)for(E=d.return;E!==null;){var b=E.tag;if((b===3||b===4)&&(b=E.stateNode.containerInfo,b===p||b.nodeType===8&&b.parentNode===p))return;E=E.return}for(;C!==null;){if(E=io(C),E===null)return;if(b=E.tag,b===5||b===6){d=y=E;continue e}C=C.parentNode}}d=d.return}Js(function(){var G=y,ne=kr(l),ie=[];e:{var Z=qg.get(i);if(Z!==void 0){var ge=Zo,Te=i;switch(i){case"keypress":if(Xo(l)===0)break e;case"keydown":case"keyup":ge=g;break;case"focusin":Te="focus",ge=ra;break;case"focusout":Te="blur",ge=ra;break;case"beforeblur":case"afterblur":ge=ra;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=W;break;case jg:case Bg:case zg:ge=Si;break;case $g:ge=dt;break;case"scroll":ge=Nd;break;case"wheel":ge=rt;break;case"copy":case"cut":case"paste":ge=ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=S}var Ae=(o&4)!==0,jt=!Ae&&i==="scroll",z=Ae?Z!==null?Z+"Capture":null:Z;Ae=[];for(var V=G,q;V!==null;){q=V;var se=q.stateNode;if(q.tag===5&&se!==null&&(q=se,z!==null&&(se=kt(V,z),se!=null&&Ae.push(Pl(V,se,q)))),jt)break;V=V.return}0<Ae.length&&(Z=new ge(Z,Te,null,l,ne),ie.push({event:Z,listeners:Ae}))}}if((o&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",Z&&l!==Gr&&(Te=l.relatedTarget||l.fromElement)&&(io(Te)||Te[Ri]))break e;if((ge||Z)&&(Z=ne.window===ne?ne:(Z=ne.ownerDocument)?Z.defaultView||Z.parentWindow:window,ge?(Te=l.relatedTarget||l.toElement,ge=G,Te=Te?io(Te):null,Te!==null&&(jt=_e(Te),Te!==jt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ge=null,Te=G),ge!==Te)){if(Ae=ta,se="onMouseLeave",z="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Ae=S,se="onPointerLeave",z="onPointerEnter",V="pointer"),jt=ge==null?Z:ha(ge),q=Te==null?Z:ha(Te),Z=new Ae(se,V+"leave",ge,l,ne),Z.target=jt,Z.relatedTarget=q,se=null,io(ne)===G&&(Ae=new Ae(z,V+"enter",Te,l,ne),Ae.target=q,Ae.relatedTarget=jt,se=Ae),jt=se,ge&&Te)t:{for(Ae=ge,z=Te,V=0,q=Ae;q;q=ua(q))V++;for(q=0,se=z;se;se=ua(se))q++;for(;0<V-q;)Ae=ua(Ae),V--;for(;0<q-V;)z=ua(z),q--;for(;V--;){if(Ae===z||z!==null&&Ae===z.alternate)break t;Ae=ua(Ae),z=ua(z)}Ae=null}else Ae=null;ge!==null&&Qg(ie,Z,ge,Ae,!1),Te!==null&&jt!==null&&Qg(ie,jt,Te,Ae,!0)}}e:{if(Z=G?ha(G):window,ge=Z.nodeName&&Z.nodeName.toLowerCase(),ge==="select"||ge==="input"&&Z.type==="file")var Ce=NT;else if(Cg(Z))if(xg)Ce=MT;else{Ce=LT;var Ne=VT}else(ge=Z.nodeName)&&ge.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(Ce=OT);if(Ce&&(Ce=Ce(i,G))){kg(ie,Ce,l,ne);break e}Ne&&Ne(i,Z,G),i==="focusout"&&(Ne=Z._wrapperState)&&Ne.controlled&&Z.type==="number"&&yi(Z,"number",Z.value)}switch(Ne=G?ha(G):window,i){case"focusin":(Cg(Ne)||Ne.contentEditable==="true")&&(aa=Ne,Md=G,Sl=null);break;case"focusout":Sl=Md=aa=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,Fg(ie,l,ne);break;case"selectionchange":if(jT)break;case"keydown":case"keyup":Fg(ie,l,ne)}var Ve;if(Kt)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else oa?Ag(i,l)&&(Me="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(ro&&l.locale!=="ko"&&(oa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&oa&&(Ve=yl()):(rr=ne,Yo="value"in rr?rr.value:rr.textContent,oa=!0)),Ne=dc(G,Me),0<Ne.length&&(Me=new wl(Me,i,null,l,ne),ie.push({event:Me,listeners:Ne}),Ve?Me.data=Ve:(Ve=Pg(l),Ve!==null&&(Me.data=Ve)))),(Ve=ir?kT(i,l):xT(i,l))&&(G=dc(G,"onBeforeInput"),0<G.length&&(ne=new wl("onBeforeInput","beforeinput",null,l,ne),ie.push({event:ne,listeners:G}),ne.data=Ve))}Wg(ie,o)})}function Pl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function dc(i,o){for(var l=o+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=kt(i,l),y!=null&&d.unshift(Pl(i,y,p)),y=kt(i,o),y!=null&&d.push(Pl(i,y,p))),i=i.return}return d}function ua(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Qg(i,o,l,d,p){for(var y=o._reactName,E=[];l!==null&&l!==d;){var C=l,b=C.alternate,G=C.stateNode;if(b!==null&&b===d)break;C.tag===5&&G!==null&&(C=G,p?(b=kt(l,y),b!=null&&E.unshift(Pl(l,b,C))):p||(b=kt(l,y),b!=null&&E.push(Pl(l,b,C)))),l=l.return}E.length!==0&&i.push({event:o,listeners:E})}var qT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function Jg(i){return(typeof i=="string"?i:""+i).replace(qT,`
`).replace(KT,"")}function fc(i,o,l){if(o=Jg(o),Jg(i)!==o&&l)throw Error(t(425))}function pc(){}var qd=null,Kd=null;function Gd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Wd=typeof setTimeout=="function"?setTimeout:void 0,GT=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(i){return Yg.resolve(null).then(i).catch(HT)}:Wd;function HT(i){setTimeout(function(){throw i})}function Hd(i,o){var l=o,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),Nr(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Nr(o)}function ls(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Xg(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var ca=Math.random().toString(36).slice(2),ri="__reactFiber$"+ca,Cl="__reactProps$"+ca,Ri="__reactContainer$"+ca,Qd="__reactEvents$"+ca,QT="__reactListeners$"+ca,JT="__reactHandles$"+ca;function io(i){var o=i[ri];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Ri]||l[ri]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Xg(i);i!==null;){if(l=i[ri])return l;i=Xg(i)}return o}i=l,l=i.parentNode}return null}function kl(i){return i=i[ri]||i[Ri],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ha(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function mc(i){return i[Cl]||null}var Jd=[],da=-1;function us(i){return{current:i}}function It(i){0>da||(i.current=Jd[da],Jd[da]=null,da--)}function vt(i,o){da++,Jd[da]=i.current,i.current=o}var cs={},_n=us(cs),Bn=us(!1),so=cs;function fa(i,o){var l=i.type.contextTypes;if(!l)return cs;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function zn(i){return i=i.childContextTypes,i!=null}function gc(){It(Bn),It(_n)}function Zg(i,o,l){if(_n.current!==cs)throw Error(t(168));vt(_n,o),vt(Bn,l)}function ey(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,qe(i)||"Unknown",p));return pe({},l,d)}function yc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||cs,so=_n.current,vt(_n,i),vt(Bn,Bn.current),!0}function ty(i,o,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=ey(i,o,so),d.__reactInternalMemoizedMergedChildContext=i,It(Bn),It(_n),vt(_n,i)):It(Bn),vt(Bn,l)}var Ai=null,_c=!1,Yd=!1;function ny(i){Ai===null?Ai=[i]:Ai.push(i)}function YT(i){_c=!0,ny(i)}function hs(){if(!Yd&&Ai!==null){Yd=!0;var i=0,o=nt;try{var l=Ai;for(nt=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}Ai=null,_c=!1}catch(p){throw Ai!==null&&(Ai=Ai.slice(i+1)),ht(tr,hs),p}finally{nt=o,Yd=!1}}return null}var pa=[],ma=0,vc=null,wc=0,yr=[],_r=0,oo=null,Pi=1,Ci="";function ao(i,o){pa[ma++]=wc,pa[ma++]=vc,vc=i,wc=o}function ry(i,o,l){yr[_r++]=Pi,yr[_r++]=Ci,yr[_r++]=oo,oo=i;var d=Pi;i=Ci;var p=32-Ze(d)-1;d&=~(1<<p),l+=1;var y=32-Ze(o)+p;if(30<y){var E=p-p%5;y=(d&(1<<E)-1).toString(32),d>>=E,p-=E,Pi=1<<32-Ze(o)+p|l<<p|d,Ci=y+i}else Pi=1<<y|l<<p|d,Ci=i}function Xd(i){i.return!==null&&(ao(i,1),ry(i,1,0))}function Zd(i){for(;i===vc;)vc=pa[--ma],pa[ma]=null,wc=pa[--ma],pa[ma]=null;for(;i===oo;)oo=yr[--_r],yr[_r]=null,Ci=yr[--_r],yr[_r]=null,Pi=yr[--_r],yr[_r]=null}var sr=null,or=null,Rt=!1,Or=null;function iy(i,o){var l=Ir(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function sy(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,sr=i,or=ls(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,sr=i,or=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=oo!==null?{id:Pi,overflow:Ci}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Ir(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,sr=i,or=null,!0):!1;default:return!1}}function ef(i){return(i.mode&1)!==0&&(i.flags&128)===0}function tf(i){if(Rt){var o=or;if(o){var l=o;if(!sy(i,o)){if(ef(i))throw Error(t(418));o=ls(l.nextSibling);var d=sr;o&&sy(i,o)?iy(d,l):(i.flags=i.flags&-4097|2,Rt=!1,sr=i)}}else{if(ef(i))throw Error(t(418));i.flags=i.flags&-4097|2,Rt=!1,sr=i}}}function oy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;sr=i}function Ec(i){if(i!==sr)return!1;if(!Rt)return oy(i),Rt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Gd(i.type,i.memoizedProps)),o&&(o=or)){if(ef(i))throw ay(),Error(t(418));for(;o;)iy(i,o),o=ls(o.nextSibling)}if(oy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){or=ls(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}or=null}}else or=sr?ls(i.stateNode.nextSibling):null;return!0}function ay(){for(var i=or;i;)i=ls(i.nextSibling)}function ga(){or=sr=null,Rt=!1}function nf(i){Or===null?Or=[i]:Or.push(i)}var XT=ae.ReactCurrentBatchConfig;function xl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var p=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var C=p.refs;E===null?delete C[y]:C[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Ic(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function ly(i){var o=i._init;return o(i._payload)}function uy(i){function o(z,V){if(i){var q=z.deletions;q===null?(z.deletions=[V],z.flags|=16):q.push(V)}}function l(z,V){if(!i)return null;for(;V!==null;)o(z,V),V=V.sibling;return null}function d(z,V){for(z=new Map;V!==null;)V.key!==null?z.set(V.key,V):z.set(V.index,V),V=V.sibling;return z}function p(z,V){return z=vs(z,V),z.index=0,z.sibling=null,z}function y(z,V,q){return z.index=q,i?(q=z.alternate,q!==null?(q=q.index,q<V?(z.flags|=2,V):q):(z.flags|=2,V)):(z.flags|=1048576,V)}function E(z){return i&&z.alternate===null&&(z.flags|=2),z}function C(z,V,q,se){return V===null||V.tag!==6?(V=Hf(q,z.mode,se),V.return=z,V):(V=p(V,q),V.return=z,V)}function b(z,V,q,se){var Ce=q.type;return Ce===I?ne(z,V,q.props.children,se,q.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ut&&ly(Ce)===V.type)?(se=p(V,q.props),se.ref=xl(z,V,q),se.return=z,se):(se=Gc(q.type,q.key,q.props,null,z.mode,se),se.ref=xl(z,V,q),se.return=z,se)}function G(z,V,q,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=Qf(q,z.mode,se),V.return=z,V):(V=p(V,q.children||[]),V.return=z,V)}function ne(z,V,q,se,Ce){return V===null||V.tag!==7?(V=go(q,z.mode,se,Ce),V.return=z,V):(V=p(V,q),V.return=z,V)}function ie(z,V,q){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Hf(""+V,z.mode,q),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case de:return q=Gc(V.type,V.key,V.props,null,z.mode,q),q.ref=xl(z,null,V),q.return=z,q;case me:return V=Qf(V,z.mode,q),V.return=z,V;case Ut:var se=V._init;return ie(z,se(V._payload),q)}if(Rr(V)||ke(V))return V=go(V,z.mode,q,null),V.return=z,V;Ic(z,V)}return null}function Z(z,V,q,se){var Ce=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ce!==null?null:C(z,V,""+q,se);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case de:return q.key===Ce?b(z,V,q,se):null;case me:return q.key===Ce?G(z,V,q,se):null;case Ut:return Ce=q._init,Z(z,V,Ce(q._payload),se)}if(Rr(q)||ke(q))return Ce!==null?null:ne(z,V,q,se,null);Ic(z,q)}return null}function ge(z,V,q,se,Ce){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get(q)||null,C(V,z,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case de:return z=z.get(se.key===null?q:se.key)||null,b(V,z,se,Ce);case me:return z=z.get(se.key===null?q:se.key)||null,G(V,z,se,Ce);case Ut:var Ne=se._init;return ge(z,V,q,Ne(se._payload),Ce)}if(Rr(se)||ke(se))return z=z.get(q)||null,ne(V,z,se,Ce,null);Ic(V,se)}return null}function Te(z,V,q,se){for(var Ce=null,Ne=null,Ve=V,Me=V=0,ln=null;Ve!==null&&Me<q.length;Me++){Ve.index>Me?(ln=Ve,Ve=null):ln=Ve.sibling;var lt=Z(z,Ve,q[Me],se);if(lt===null){Ve===null&&(Ve=ln);break}i&&Ve&&lt.alternate===null&&o(z,Ve),V=y(lt,V,Me),Ne===null?Ce=lt:Ne.sibling=lt,Ne=lt,Ve=ln}if(Me===q.length)return l(z,Ve),Rt&&ao(z,Me),Ce;if(Ve===null){for(;Me<q.length;Me++)Ve=ie(z,q[Me],se),Ve!==null&&(V=y(Ve,V,Me),Ne===null?Ce=Ve:Ne.sibling=Ve,Ne=Ve);return Rt&&ao(z,Me),Ce}for(Ve=d(z,Ve);Me<q.length;Me++)ln=ge(Ve,z,Me,q[Me],se),ln!==null&&(i&&ln.alternate!==null&&Ve.delete(ln.key===null?Me:ln.key),V=y(ln,V,Me),Ne===null?Ce=ln:Ne.sibling=ln,Ne=ln);return i&&Ve.forEach(function(ws){return o(z,ws)}),Rt&&ao(z,Me),Ce}function Ae(z,V,q,se){var Ce=ke(q);if(typeof Ce!="function")throw Error(t(150));if(q=Ce.call(q),q==null)throw Error(t(151));for(var Ne=Ce=null,Ve=V,Me=V=0,ln=null,lt=q.next();Ve!==null&&!lt.done;Me++,lt=q.next()){Ve.index>Me?(ln=Ve,Ve=null):ln=Ve.sibling;var ws=Z(z,Ve,lt.value,se);if(ws===null){Ve===null&&(Ve=ln);break}i&&Ve&&ws.alternate===null&&o(z,Ve),V=y(ws,V,Me),Ne===null?Ce=ws:Ne.sibling=ws,Ne=ws,Ve=ln}if(lt.done)return l(z,Ve),Rt&&ao(z,Me),Ce;if(Ve===null){for(;!lt.done;Me++,lt=q.next())lt=ie(z,lt.value,se),lt!==null&&(V=y(lt,V,Me),Ne===null?Ce=lt:Ne.sibling=lt,Ne=lt);return Rt&&ao(z,Me),Ce}for(Ve=d(z,Ve);!lt.done;Me++,lt=q.next())lt=ge(Ve,z,Me,lt.value,se),lt!==null&&(i&&lt.alternate!==null&&Ve.delete(lt.key===null?Me:lt.key),V=y(lt,V,Me),Ne===null?Ce=lt:Ne.sibling=lt,Ne=lt);return i&&Ve.forEach(function(DS){return o(z,DS)}),Rt&&ao(z,Me),Ce}function jt(z,V,q,se){if(typeof q=="object"&&q!==null&&q.type===I&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case de:e:{for(var Ce=q.key,Ne=V;Ne!==null;){if(Ne.key===Ce){if(Ce=q.type,Ce===I){if(Ne.tag===7){l(z,Ne.sibling),V=p(Ne,q.props.children),V.return=z,z=V;break e}}else if(Ne.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ut&&ly(Ce)===Ne.type){l(z,Ne.sibling),V=p(Ne,q.props),V.ref=xl(z,Ne,q),V.return=z,z=V;break e}l(z,Ne);break}else o(z,Ne);Ne=Ne.sibling}q.type===I?(V=go(q.props.children,z.mode,se,q.key),V.return=z,z=V):(se=Gc(q.type,q.key,q.props,null,z.mode,se),se.ref=xl(z,V,q),se.return=z,z=se)}return E(z);case me:e:{for(Ne=q.key;V!==null;){if(V.key===Ne)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){l(z,V.sibling),V=p(V,q.children||[]),V.return=z,z=V;break e}else{l(z,V);break}else o(z,V);V=V.sibling}V=Qf(q,z.mode,se),V.return=z,z=V}return E(z);case Ut:return Ne=q._init,jt(z,V,Ne(q._payload),se)}if(Rr(q))return Te(z,V,q,se);if(ke(q))return Ae(z,V,q,se);Ic(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,V!==null&&V.tag===6?(l(z,V.sibling),V=p(V,q),V.return=z,z=V):(l(z,V),V=Hf(q,z.mode,se),V.return=z,z=V),E(z)):l(z,V)}return jt}var ya=uy(!0),cy=uy(!1),Tc=us(null),Sc=null,_a=null,rf=null;function sf(){rf=_a=Sc=null}function of(i){var o=Tc.current;It(Tc),i._currentValue=o}function af(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function va(i,o){Sc=i,rf=_a=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&($n=!0),i.firstContext=null)}function vr(i){var o=i._currentValue;if(rf!==i)if(i={context:i,memoizedValue:o,next:null},_a===null){if(Sc===null)throw Error(t(308));_a=i,Sc.dependencies={lanes:0,firstContext:i}}else _a=_a.next=i;return o}var lo=null;function lf(i){lo===null?lo=[i]:lo.push(i)}function hy(i,o,l,d){var p=o.interleaved;return p===null?(l.next=l,lf(o)):(l.next=p.next,p.next=l),o.interleaved=l,ki(i,d)}function ki(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var ds=!1;function uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function xi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function fs(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ot&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,ki(i,l)}return p=d.interleaved,p===null?(o.next=o,lf(d)):(o.next=p.next,p.next=o),d.interleaved=o,ki(i,l)}function Rc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,ns(i,l)}}function fy(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Ac(i,o,l,d){var p=i.updateQueue;ds=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var b=C,G=b.next;b.next=null,E===null?y=G:E.next=G,E=b;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==E&&(C===null?ne.firstBaseUpdate=G:C.next=G,ne.lastBaseUpdate=b))}if(y!==null){var ie=p.baseState;E=0,ne=G=b=null,C=y;do{var Z=C.lane,ge=C.eventTime;if((d&Z)===Z){ne!==null&&(ne=ne.next={eventTime:ge,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var Te=i,Ae=C;switch(Z=o,ge=l,Ae.tag){case 1:if(Te=Ae.payload,typeof Te=="function"){ie=Te.call(ge,ie,Z);break e}ie=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ae.payload,Z=typeof Te=="function"?Te.call(ge,ie,Z):Te,Z==null)break e;ie=pe({},ie,Z);break e;case 2:ds=!0}}C.callback!==null&&C.lane!==0&&(i.flags|=64,Z=p.effects,Z===null?p.effects=[C]:Z.push(C))}else ge={eventTime:ge,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(G=ne=ge,b=ie):ne=ne.next=ge,E|=Z;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);if(ne===null&&(b=ie),p.baseState=b,p.firstBaseUpdate=G,p.lastBaseUpdate=ne,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);ho|=E,i.lanes=E,i.memoizedState=ie}}function py(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Dl={},ii=us(Dl),bl=us(Dl),Nl=us(Dl);function uo(i){if(i===Dl)throw Error(t(174));return i}function cf(i,o){switch(vt(Nl,o),vt(bl,i),vt(ii,Dl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ct(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Ct(o,i)}It(ii),vt(ii,o)}function wa(){It(ii),It(bl),It(Nl)}function my(i){uo(Nl.current);var o=uo(ii.current),l=Ct(o,i.type);o!==l&&(vt(bl,i),vt(ii,l))}function hf(i){bl.current===i&&(It(ii),It(bl))}var xt=us(0);function Pc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var df=[];function ff(){for(var i=0;i<df.length;i++)df[i]._workInProgressVersionPrimary=null;df.length=0}var Cc=ae.ReactCurrentDispatcher,pf=ae.ReactCurrentBatchConfig,co=0,Dt=null,Xt=null,on=null,kc=!1,Vl=!1,Ll=0,ZT=0;function vn(){throw Error(t(321))}function mf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Lr(i[l],o[l]))return!1;return!0}function gf(i,o,l,d,p,y){if(co=y,Dt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Cc.current=i===null||i.memoizedState===null?rS:iS,i=l(d,p),Vl){y=0;do{if(Vl=!1,Ll=0,25<=y)throw Error(t(301));y+=1,on=Xt=null,o.updateQueue=null,Cc.current=sS,i=l(d,p)}while(Vl)}if(Cc.current=bc,o=Xt!==null&&Xt.next!==null,co=0,on=Xt=Dt=null,kc=!1,o)throw Error(t(300));return i}function yf(){var i=Ll!==0;return Ll=0,i}function si(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Dt.memoizedState=on=i:on=on.next=i,on}function wr(){if(Xt===null){var i=Dt.alternate;i=i!==null?i.memoizedState:null}else i=Xt.next;var o=on===null?Dt.memoizedState:on.next;if(o!==null)on=o,Xt=i;else{if(i===null)throw Error(t(310));Xt=i,i={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},on===null?Dt.memoizedState=on=i:on=on.next=i}return on}function Ol(i,o){return typeof o=="function"?o(i):o}function _f(i){var o=wr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=Xt,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var C=E=null,b=null,G=y;do{var ne=G.lane;if((co&ne)===ne)b!==null&&(b=b.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:i(d,G.action);else{var ie={lane:ne,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};b===null?(C=b=ie,E=d):b=b.next=ie,Dt.lanes|=ne,ho|=ne}G=G.next}while(G!==null&&G!==y);b===null?E=d:b.next=C,Lr(d,o.memoizedState)||($n=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=b,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do y=p.lane,Dt.lanes|=y,ho|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function vf(i){var o=wr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Lr(y,o.memoizedState)||($n=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,d]}function gy(){}function yy(i,o){var l=Dt,d=wr(),p=o(),y=!Lr(d.memoizedState,p);if(y&&(d.memoizedState=p,$n=!0),d=d.queue,wf(wy.bind(null,l,d,i),[i]),d.getSnapshot!==o||y||on!==null&&on.memoizedState.tag&1){if(l.flags|=2048,Ml(9,vy.bind(null,l,d,p,o),void 0,null),an===null)throw Error(t(349));(co&30)!==0||_y(l,o,p)}return p}function _y(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Dt.updateQueue,o===null?(o={lastEffect:null,stores:null},Dt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function vy(i,o,l,d){o.value=l,o.getSnapshot=d,Ey(o)&&Iy(i)}function wy(i,o,l){return l(function(){Ey(o)&&Iy(i)})}function Ey(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Lr(i,l)}catch{return!0}}function Iy(i){var o=ki(i,1);o!==null&&jr(o,i,1,-1)}function Ty(i){var o=si();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:i},o.queue=i,i=i.dispatch=nS.bind(null,Dt,i),[o.memoizedState,i]}function Ml(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=Dt.updateQueue,o===null?(o={lastEffect:null,stores:null},Dt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function Sy(){return wr().memoizedState}function xc(i,o,l,d){var p=si();Dt.flags|=i,p.memoizedState=Ml(1|o,l,void 0,d===void 0?null:d)}function Dc(i,o,l,d){var p=wr();d=d===void 0?null:d;var y=void 0;if(Xt!==null){var E=Xt.memoizedState;if(y=E.destroy,d!==null&&mf(d,E.deps)){p.memoizedState=Ml(o,l,y,d);return}}Dt.flags|=i,p.memoizedState=Ml(1|o,l,y,d)}function Ry(i,o){return xc(8390656,8,i,o)}function wf(i,o){return Dc(2048,8,i,o)}function Ay(i,o){return Dc(4,2,i,o)}function Py(i,o){return Dc(4,4,i,o)}function Cy(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ky(i,o,l){return l=l!=null?l.concat([i]):null,Dc(4,4,Cy.bind(null,o,i),l)}function Ef(){}function xy(i,o){var l=wr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&mf(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function Dy(i,o){var l=wr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&mf(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function by(i,o,l){return(co&21)===0?(i.baseState&&(i.baseState=!1,$n=!0),i.memoizedState=l):(Lr(l,o)||(l=Zs(),Dt.lanes|=l,ho|=l,i.baseState=!0),o)}function eS(i,o){var l=nt;nt=l!==0&&4>l?l:4,i(!0);var d=pf.transition;pf.transition={};try{i(!1),o()}finally{nt=l,pf.transition=d}}function Ny(){return wr().memoizedState}function tS(i,o,l){var d=ys(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Vy(i))Ly(o,l);else if(l=hy(i,o,l,d),l!==null){var p=Dn();jr(l,i,d,p),Oy(l,o,d)}}function nS(i,o,l){var d=ys(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vy(i))Ly(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,C=y(E,l);if(p.hasEagerState=!0,p.eagerState=C,Lr(C,E)){var b=o.interleaved;b===null?(p.next=p,lf(o)):(p.next=b.next,b.next=p),o.interleaved=p;return}}catch{}finally{}l=hy(i,o,p,d),l!==null&&(p=Dn(),jr(l,i,d,p),Oy(l,o,d))}}function Vy(i){var o=i.alternate;return i===Dt||o!==null&&o===Dt}function Ly(i,o){Vl=kc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function Oy(i,o,l){if((l&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,ns(i,l)}}var bc={readContext:vr,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},rS={readContext:vr,useCallback:function(i,o){return si().memoizedState=[i,o===void 0?null:o],i},useContext:vr,useEffect:Ry,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,xc(4194308,4,Cy.bind(null,o,i),l)},useLayoutEffect:function(i,o){return xc(4194308,4,i,o)},useInsertionEffect:function(i,o){return xc(4,2,i,o)},useMemo:function(i,o){var l=si();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=si();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=tS.bind(null,Dt,i),[d.memoizedState,i]},useRef:function(i){var o=si();return i={current:i},o.memoizedState=i},useState:Ty,useDebugValue:Ef,useDeferredValue:function(i){return si().memoizedState=i},useTransition:function(){var i=Ty(!1),o=i[0];return i=eS.bind(null,i[1]),si().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=Dt,p=si();if(Rt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),an===null)throw Error(t(349));(co&30)!==0||_y(d,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Ry(wy.bind(null,d,y,i),[i]),d.flags|=2048,Ml(9,vy.bind(null,d,y,l,o),void 0,null),l},useId:function(){var i=si(),o=an.identifierPrefix;if(Rt){var l=Ci,d=Pi;l=(d&~(1<<32-Ze(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Ll++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=ZT++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},iS={readContext:vr,useCallback:xy,useContext:vr,useEffect:wf,useImperativeHandle:ky,useInsertionEffect:Ay,useLayoutEffect:Py,useMemo:Dy,useReducer:_f,useRef:Sy,useState:function(){return _f(Ol)},useDebugValue:Ef,useDeferredValue:function(i){var o=wr();return by(o,Xt.memoizedState,i)},useTransition:function(){var i=_f(Ol)[0],o=wr().memoizedState;return[i,o]},useMutableSource:gy,useSyncExternalStore:yy,useId:Ny,unstable_isNewReconciler:!1},sS={readContext:vr,useCallback:xy,useContext:vr,useEffect:wf,useImperativeHandle:ky,useInsertionEffect:Ay,useLayoutEffect:Py,useMemo:Dy,useReducer:vf,useRef:Sy,useState:function(){return vf(Ol)},useDebugValue:Ef,useDeferredValue:function(i){var o=wr();return Xt===null?o.memoizedState=i:by(o,Xt.memoizedState,i)},useTransition:function(){var i=vf(Ol)[0],o=wr().memoizedState;return[i,o]},useMutableSource:gy,useSyncExternalStore:yy,useId:Ny,unstable_isNewReconciler:!1};function Mr(i,o){if(i&&i.defaultProps){o=pe({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function If(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:pe({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Nc={isMounted:function(i){return(i=i._reactInternals)?_e(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=Dn(),p=ys(i),y=xi(d,p);y.payload=o,l!=null&&(y.callback=l),o=fs(i,y,p),o!==null&&(jr(o,i,p,d),Rc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=Dn(),p=ys(i),y=xi(d,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=fs(i,y,p),o!==null&&(jr(o,i,p,d),Rc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Dn(),d=ys(i),p=xi(l,d);p.tag=2,o!=null&&(p.callback=o),o=fs(i,p,d),o!==null&&(jr(o,i,d,l),Rc(o,i,d))}};function My(i,o,l,d,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,E):o.prototype&&o.prototype.isPureReactComponent?!Tl(l,d)||!Tl(p,y):!0}function Fy(i,o,l){var d=!1,p=cs,y=o.contextType;return typeof y=="object"&&y!==null?y=vr(y):(p=zn(o)?so:_n.current,d=o.contextTypes,y=(d=d!=null)?fa(i,p):cs),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Nc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function Uy(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&Nc.enqueueReplaceState(o,o.state,null)}function Tf(i,o,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},uf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=vr(y):(y=zn(o)?so:_n.current,p.context=fa(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(If(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Nc.enqueueReplaceState(p,p.state,null),Ac(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Ea(i,o){try{var l="",d=o;do l+=Le(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Sf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Rf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var oS=typeof WeakMap=="function"?WeakMap:Map;function jy(i,o,l){l=xi(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){jc||(jc=!0,jf=d),Rf(i,o)},l}function By(i,o,l){l=xi(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){Rf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Rf(i,o),typeof d!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),l}function zy(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new oS;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),i=wS.bind(null,i,o,l),o.then(i,i))}function $y(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function qy(i,o,l,d,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=xi(-1,1),o.tag=2,fs(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var aS=ae.ReactCurrentOwner,$n=!1;function xn(i,o,l,d){o.child=i===null?cy(o,null,l,d):ya(o,i.child,l,d)}function Ky(i,o,l,d,p){l=l.render;var y=o.ref;return va(o,p),d=gf(i,o,l,d,y,p),l=yf(),i!==null&&!$n?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Di(i,o,p)):(Rt&&l&&Xd(o),o.flags|=1,xn(i,o,d,p),o.child)}function Gy(i,o,l,d,p){if(i===null){var y=l.type;return typeof y=="function"&&!Wf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,Wy(i,o,y,d,p)):(i=Gc(l.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:Tl,l(E,d)&&i.ref===o.ref)return Di(i,o,p)}return o.flags|=1,i=vs(y,d),i.ref=o.ref,i.return=o,o.child=i}function Wy(i,o,l,d,p){if(i!==null){var y=i.memoizedProps;if(Tl(y,d)&&i.ref===o.ref)if($n=!1,o.pendingProps=d=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&($n=!0);else return o.lanes=i.lanes,Di(i,o,p)}return Af(i,o,l,d,p)}function Hy(i,o,l){var d=o.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Ta,ar),ar|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,vt(Ta,ar),ar|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,vt(Ta,ar),ar|=d}else y!==null?(d=y.baseLanes|l,o.memoizedState=null):d=l,vt(Ta,ar),ar|=d;return xn(i,o,p,l),o.child}function Qy(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Af(i,o,l,d,p){var y=zn(l)?so:_n.current;return y=fa(o,y),va(o,p),l=gf(i,o,l,d,y,p),d=yf(),i!==null&&!$n?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Di(i,o,p)):(Rt&&d&&Xd(o),o.flags|=1,xn(i,o,l,p),o.child)}function Jy(i,o,l,d,p){if(zn(l)){var y=!0;yc(o)}else y=!1;if(va(o,p),o.stateNode===null)Lc(i,o),Fy(o,l,d),Tf(o,l,d,p),d=!0;else if(i===null){var E=o.stateNode,C=o.memoizedProps;E.props=C;var b=E.context,G=l.contextType;typeof G=="object"&&G!==null?G=vr(G):(G=zn(l)?so:_n.current,G=fa(o,G));var ne=l.getDerivedStateFromProps,ie=typeof ne=="function"||typeof E.getSnapshotBeforeUpdate=="function";ie||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==d||b!==G)&&Uy(o,E,d,G),ds=!1;var Z=o.memoizedState;E.state=Z,Ac(o,d,E,p),b=o.memoizedState,C!==d||Z!==b||Bn.current||ds?(typeof ne=="function"&&(If(o,l,ne,d),b=o.memoizedState),(C=ds||My(o,l,C,d,Z,b,G))?(ie||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=b),E.props=d,E.state=b,E.context=G,d=C):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,dy(i,o),C=o.memoizedProps,G=o.type===o.elementType?C:Mr(o.type,C),E.props=G,ie=o.pendingProps,Z=E.context,b=l.contextType,typeof b=="object"&&b!==null?b=vr(b):(b=zn(l)?so:_n.current,b=fa(o,b));var ge=l.getDerivedStateFromProps;(ne=typeof ge=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==ie||Z!==b)&&Uy(o,E,d,b),ds=!1,Z=o.memoizedState,E.state=Z,Ac(o,d,E,p);var Te=o.memoizedState;C!==ie||Z!==Te||Bn.current||ds?(typeof ge=="function"&&(If(o,l,ge,d),Te=o.memoizedState),(G=ds||My(o,l,G,d,Z,Te,b)||!1)?(ne||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,Te,b),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,Te,b)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Te),E.props=d,E.state=Te,E.context=b,d=G):(typeof E.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),d=!1)}return Pf(i,o,l,d,y,p)}function Pf(i,o,l,d,p,y){Qy(i,o);var E=(o.flags&128)!==0;if(!d&&!E)return p&&ty(o,l,!1),Di(i,o,y);d=o.stateNode,aS.current=o;var C=E&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&E?(o.child=ya(o,i.child,null,y),o.child=ya(o,null,C,y)):xn(i,o,C,y),o.memoizedState=d.state,p&&ty(o,l,!0),o.child}function Yy(i){var o=i.stateNode;o.pendingContext?Zg(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Zg(i,o.context,!1),cf(i,o.containerInfo)}function Xy(i,o,l,d,p){return ga(),nf(p),o.flags|=256,xn(i,o,l,d),o.child}var Cf={dehydrated:null,treeContext:null,retryLane:0};function kf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Zy(i,o,l){var d=o.pendingProps,p=xt.current,y=!1,E=(o.flags&128)!==0,C;if((C=E)||(C=i!==null&&i.memoizedState===null?!1:(p&2)!==0),C?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),vt(xt,p&1),i===null)return tf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,i=d.fallback,y?(d=o.mode,y=o.child,E={mode:"hidden",children:E},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Wc(E,d,0,null),i=go(i,d,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=kf(l),o.memoizedState=Cf,i):xf(o,E));if(p=i.memoizedState,p!==null&&(C=p.dehydrated,C!==null))return lS(i,o,E,d,C,p,l);if(y){y=d.fallback,E=o.mode,p=i.child,C=p.sibling;var b={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=b,o.deletions=null):(d=vs(p,b),d.subtreeFlags=p.subtreeFlags&14680064),C!==null?y=vs(C,y):(y=go(y,E,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,E=i.child.memoizedState,E=E===null?kf(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~l,o.memoizedState=Cf,d}return y=i.child,i=y.sibling,d=vs(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function xf(i,o){return o=Wc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Vc(i,o,l,d){return d!==null&&nf(d),ya(o,i.child,null,l),i=xf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function lS(i,o,l,d,p,y,E){if(l)return o.flags&256?(o.flags&=-257,d=Sf(Error(t(422))),Vc(i,o,E,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=Wc({mode:"visible",children:d.children},p,0,null),y=go(y,p,E,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&ya(o,i.child,null,E),o.child.memoizedState=kf(E),o.memoizedState=Cf,y);if((o.mode&1)===0)return Vc(i,o,E,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var C=d.dgst;return d=C,y=Error(t(419)),d=Sf(y,d,void 0),Vc(i,o,E,d)}if(C=(E&i.childLanes)!==0,$n||C){if(d=an,d!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|E))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,ki(i,p),jr(d,i,p,-1))}return Gf(),d=Sf(Error(t(421))),Vc(i,o,E,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=ES.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,or=ls(p.nextSibling),sr=o,Rt=!0,Or=null,i!==null&&(yr[_r++]=Pi,yr[_r++]=Ci,yr[_r++]=oo,Pi=i.id,Ci=i.overflow,oo=o),o=xf(o,d.children),o.flags|=4096,o)}function e_(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),af(i.return,o,l)}function Df(i,o,l,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function t_(i,o,l){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(xn(i,o,d.children,l),d=xt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&e_(i,l,o);else if(i.tag===19)e_(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(vt(xt,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&Pc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Df(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Pc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Df(o,!0,l,null,y);break;case"together":Df(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Lc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Di(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),ho|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=vs(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=vs(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function uS(i,o,l){switch(o.tag){case 3:Yy(o),ga();break;case 5:my(o);break;case 1:zn(o.type)&&yc(o);break;case 4:cf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;vt(Tc,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(vt(xt,xt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Zy(i,o,l):(vt(xt,xt.current&1),i=Di(i,o,l),i!==null?i.sibling:null);vt(xt,xt.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(i.flags&128)!==0){if(d)return t_(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),vt(xt,xt.current),d)break;return null;case 22:case 23:return o.lanes=0,Hy(i,o,l)}return Di(i,o,l)}var n_,bf,r_,i_;n_=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},bf=function(){},r_=function(i,o,l,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,uo(ii.current);var y=null;switch(l){case"input":p=Kr(i,p),d=Kr(i,d),y=[];break;case"select":p=pe({},p,{value:void 0}),d=pe({},d,{value:void 0}),y=[];break;case"textarea":p=Ws(i,p),d=Ws(i,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=pc)}Ji(l,d);var E;l=null;for(G in p)if(!d.hasOwnProperty(G)&&p.hasOwnProperty(G)&&p[G]!=null)if(G==="style"){var C=p[G];for(E in C)C.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in d){var b=d[G];if(C=p?.[G],d.hasOwnProperty(G)&&b!==C&&(b!=null||C!=null))if(G==="style")if(C){for(E in C)!C.hasOwnProperty(E)||b&&b.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in b)b.hasOwnProperty(E)&&C[E]!==b[E]&&(l||(l={}),l[E]=b[E])}else l||(y||(y=[]),y.push(G,l)),l=b;else G==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,C=C?C.__html:void 0,b!=null&&C!==b&&(y=y||[]).push(G,b)):G==="children"?typeof b!="string"&&typeof b!="number"||(y=y||[]).push(G,""+b):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(b!=null&&G==="onScroll"&&Et("scroll",i),y||C===b||(y=[])):(y=y||[]).push(G,b))}l&&(y=y||[]).push("style",l);var G=y;(o.updateQueue=G)&&(o.flags|=4)}},i_=function(i,o,l,d){l!==d&&(o.flags|=4)};function Fl(i,o){if(!Rt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function wn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function cS(i,o,l){var d=o.pendingProps;switch(Zd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(o),null;case 1:return zn(o.type)&&gc(),wn(o),null;case 3:return d=o.stateNode,wa(),It(Bn),It(_n),ff(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Ec(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Or!==null&&($f(Or),Or=null))),bf(i,o),wn(o),null;case 5:hf(o);var p=uo(Nl.current);if(l=o.type,i!==null&&o.stateNode!=null)r_(i,o,l,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return wn(o),null}if(i=uo(ii.current),Ec(o)){d=o.stateNode,l=o.type;var y=o.memoizedProps;switch(d[ri]=o,d[Cl]=y,i=(o.mode&1)!==0,l){case"dialog":Et("cancel",d),Et("close",d);break;case"iframe":case"object":case"embed":Et("load",d);break;case"video":case"audio":for(p=0;p<Rl.length;p++)Et(Rl[p],d);break;case"source":Et("error",d);break;case"img":case"image":case"link":Et("error",d),Et("load",d);break;case"details":Et("toggle",d);break;case"input":Gi(d,y),Et("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Et("invalid",d);break;case"textarea":Wi(d,y),Et("invalid",d)}Ji(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var C=y[E];E==="children"?typeof C=="string"?d.textContent!==C&&(y.suppressHydrationWarning!==!0&&fc(d.textContent,C,i),p=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&fc(d.textContent,C,i),p=["children",""+C]):s.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&Et("scroll",d)}switch(l){case"input":Sr(d),Ko(d,y,!0);break;case"textarea":Sr(d),Pr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=pc)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Lt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=E.createElement(l,{is:d.is}):(i=E.createElement(l),l==="select"&&(E=i,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):i=E.createElementNS(i,l),i[ri]=o,i[Cl]=d,n_(i,o,!1,!1),o.stateNode=i;e:{switch(E=Hs(l,d),l){case"dialog":Et("cancel",i),Et("close",i),p=d;break;case"iframe":case"object":case"embed":Et("load",i),p=d;break;case"video":case"audio":for(p=0;p<Rl.length;p++)Et(Rl[p],i);p=d;break;case"source":Et("error",i),p=d;break;case"img":case"image":case"link":Et("error",i),Et("load",i),p=d;break;case"details":Et("toggle",i),p=d;break;case"input":Gi(i,d),p=Kr(i,d),Et("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=pe({},d,{value:void 0}),Et("invalid",i);break;case"textarea":Wi(i,d),p=Ws(i,d),Et("invalid",i);break;default:p=d}Ji(l,p),C=p;for(y in C)if(C.hasOwnProperty(y)){var b=C[y];y==="style"?Hi(i,b):y==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Cn(i,b)):y==="children"?typeof b=="string"?(l!=="textarea"||b!=="")&&Cr(i,b):typeof b=="number"&&Cr(i,""+b):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?b!=null&&y==="onScroll"&&Et("scroll",i):b!=null&&ee(i,y,b,E))}switch(l){case"input":Sr(i),Ko(i,d,!1);break;case"textarea":Sr(i),Pr(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Xe(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?Ar(i,!!d.multiple,y,!1):d.defaultValue!=null&&Ar(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=pc)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return wn(o),null;case 6:if(i&&o.stateNode!=null)i_(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(l=uo(Nl.current),uo(ii.current),Ec(o)){if(d=o.stateNode,l=o.memoizedProps,d[ri]=o,(y=d.nodeValue!==l)&&(i=sr,i!==null))switch(i.tag){case 3:fc(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&fc(d.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[ri]=o,o.stateNode=d}return wn(o),null;case 13:if(It(xt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Rt&&or!==null&&(o.mode&1)!==0&&(o.flags&128)===0)ay(),ga(),o.flags|=98560,y=!1;else if(y=Ec(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[ri]=o}else ga(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;wn(o),y=!1}else Or!==null&&($f(Or),Or=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(xt.current&1)!==0?Zt===0&&(Zt=3):Gf())),o.updateQueue!==null&&(o.flags|=4),wn(o),null);case 4:return wa(),bf(i,o),i===null&&Al(o.stateNode.containerInfo),wn(o),null;case 10:return of(o.type._context),wn(o),null;case 17:return zn(o.type)&&gc(),wn(o),null;case 19:if(It(xt),y=o.memoizedState,y===null)return wn(o),null;if(d=(o.flags&128)!==0,E=y.rendering,E===null)if(d)Fl(y,!1);else{if(Zt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(E=Pc(i),E!==null){for(o.flags|=128,Fl(y,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)y=l,i=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return vt(xt,xt.current&1|2),o.child}i=i.sibling}y.tail!==null&&Qe()>Sa&&(o.flags|=128,d=!0,Fl(y,!1),o.lanes=4194304)}else{if(!d)if(i=Pc(E),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Fl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Rt)return wn(o),null}else 2*Qe()-y.renderingStartTime>Sa&&l!==1073741824&&(o.flags|=128,d=!0,Fl(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(l=y.last,l!==null?l.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Qe(),o.sibling=null,l=xt.current,vt(xt,d?l&1|2:l&1),o):(wn(o),null);case 22:case 23:return Kf(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(ar&1073741824)!==0&&(wn(o),o.subtreeFlags&6&&(o.flags|=8192)):wn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function hS(i,o){switch(Zd(o),o.tag){case 1:return zn(o.type)&&gc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return wa(),It(Bn),It(_n),ff(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return hf(o),null;case 13:if(It(xt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ga()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return It(xt),null;case 4:return wa(),null;case 10:return of(o.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var Oc=!1,En=!1,dS=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Ia(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Mt(i,o,d)}else l.current=null}function Nf(i,o,l){try{l()}catch(d){Mt(i,o,d)}}var s_=!1;function fS(i,o){if(qd=ss,i=Mg(),Od(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,C=-1,b=-1,G=0,ne=0,ie=i,Z=null;t:for(;;){for(var ge;ie!==l||p!==0&&ie.nodeType!==3||(C=E+p),ie!==y||d!==0&&ie.nodeType!==3||(b=E+d),ie.nodeType===3&&(E+=ie.nodeValue.length),(ge=ie.firstChild)!==null;)Z=ie,ie=ge;for(;;){if(ie===i)break t;if(Z===l&&++G===p&&(C=E),Z===y&&++ne===d&&(b=E),(ge=ie.nextSibling)!==null)break;ie=Z,Z=ie.parentNode}ie=ge}l=C===-1||b===-1?null:{start:C,end:b}}else l=null}l=l||{start:0,end:0}}else l=null;for(Kd={focusedElem:i,selectionRange:l},ss=!1,Ie=o;Ie!==null;)if(o=Ie,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ie=i;else for(;Ie!==null;){o=Ie;try{var Te=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ae=Te.memoizedProps,jt=Te.memoizedState,z=o.stateNode,V=z.getSnapshotBeforeUpdate(o.elementType===o.type?Ae:Mr(o.type,Ae),jt);z.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var q=o.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){Mt(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,Ie=i;break}Ie=o.return}return Te=s_,s_=!1,Te}function Ul(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Nf(o,l,y)}p=p.next}while(p!==d)}}function Mc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function Vf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function o_(i){var o=i.alternate;o!==null&&(i.alternate=null,o_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[ri],delete o[Cl],delete o[Qd],delete o[QT],delete o[JT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function a_(i){return i.tag===5||i.tag===3||i.tag===4}function l_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||a_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lf(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=pc));else if(d!==4&&(i=i.child,i!==null))for(Lf(i,o,l),i=i.sibling;i!==null;)Lf(i,o,l),i=i.sibling}function Of(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Of(i,o,l),i=i.sibling;i!==null;)Of(i,o,l),i=i.sibling}var fn=null,Fr=!1;function ps(i,o,l){for(l=l.child;l!==null;)u_(i,o,l),l=l.sibling}function u_(i,o,l){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(ut,l)}catch{}switch(l.tag){case 5:En||Ia(l,o);case 6:var d=fn,p=Fr;fn=null,ps(i,o,l),fn=d,Fr=p,fn!==null&&(Fr?(i=fn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):fn.removeChild(l.stateNode));break;case 18:fn!==null&&(Fr?(i=fn,l=l.stateNode,i.nodeType===8?Hd(i.parentNode,l):i.nodeType===1&&Hd(i,l),Nr(i)):Hd(fn,l.stateNode));break;case 4:d=fn,p=Fr,fn=l.stateNode.containerInfo,Fr=!0,ps(i,o,l),fn=d,Fr=p;break;case 0:case 11:case 14:case 15:if(!En&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&Nf(l,o,E),p=p.next}while(p!==d)}ps(i,o,l);break;case 1:if(!En&&(Ia(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(C){Mt(l,o,C)}ps(i,o,l);break;case 21:ps(i,o,l);break;case 22:l.mode&1?(En=(d=En)||l.memoizedState!==null,ps(i,o,l),En=d):ps(i,o,l);break;default:ps(i,o,l)}}function c_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new dS),o.forEach(function(d){var p=IS.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Ur(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=i,E=o,C=E;e:for(;C!==null;){switch(C.tag){case 5:fn=C.stateNode,Fr=!1;break e;case 3:fn=C.stateNode.containerInfo,Fr=!0;break e;case 4:fn=C.stateNode.containerInfo,Fr=!0;break e}C=C.return}if(fn===null)throw Error(t(160));u_(y,E,p),fn=null,Fr=!1;var b=p.alternate;b!==null&&(b.return=null),p.return=null}catch(G){Mt(p,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)h_(o,i),o=o.sibling}function h_(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ur(o,i),oi(i),d&4){try{Ul(3,i,i.return),Mc(3,i)}catch(Ae){Mt(i,i.return,Ae)}try{Ul(5,i,i.return)}catch(Ae){Mt(i,i.return,Ae)}}break;case 1:Ur(o,i),oi(i),d&512&&l!==null&&Ia(l,l.return);break;case 5:if(Ur(o,i),oi(i),d&512&&l!==null&&Ia(l,l.return),i.flags&32){var p=i.stateNode;try{Cr(p,"")}catch(Ae){Mt(i,i.return,Ae)}}if(d&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=l!==null?l.memoizedProps:y,C=i.type,b=i.updateQueue;if(i.updateQueue=null,b!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&Xn(p,y),Hs(C,E);var G=Hs(C,y);for(E=0;E<b.length;E+=2){var ne=b[E],ie=b[E+1];ne==="style"?Hi(p,ie):ne==="dangerouslySetInnerHTML"?Cn(p,ie):ne==="children"?Cr(p,ie):ee(p,ne,ie,G)}switch(C){case"input":Gs(p,y);break;case"textarea":Ln(p,y);break;case"select":var Z=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Ar(p,!!y.multiple,ge,!1):Z!==!!y.multiple&&(y.defaultValue!=null?Ar(p,!!y.multiple,y.defaultValue,!0):Ar(p,!!y.multiple,y.multiple?[]:"",!1))}p[Cl]=y}catch(Ae){Mt(i,i.return,Ae)}}break;case 6:if(Ur(o,i),oi(i),d&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Ae){Mt(i,i.return,Ae)}}break;case 3:if(Ur(o,i),oi(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Nr(o.containerInfo)}catch(Ae){Mt(i,i.return,Ae)}break;case 4:Ur(o,i),oi(i);break;case 13:Ur(o,i),oi(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Uf=Qe())),d&4&&c_(i);break;case 22:if(ne=l!==null&&l.memoizedState!==null,i.mode&1?(En=(G=En)||ne,Ur(o,i),En=G):Ur(o,i),oi(i),d&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!ne&&(i.mode&1)!==0)for(Ie=i,ne=i.child;ne!==null;){for(ie=Ie=ne;Ie!==null;){switch(Z=Ie,ge=Z.child,Z.tag){case 0:case 11:case 14:case 15:Ul(4,Z,Z.return);break;case 1:Ia(Z,Z.return);var Te=Z.stateNode;if(typeof Te.componentWillUnmount=="function"){d=Z,l=Z.return;try{o=d,Te.props=o.memoizedProps,Te.state=o.memoizedState,Te.componentWillUnmount()}catch(Ae){Mt(d,l,Ae)}}break;case 5:Ia(Z,Z.return);break;case 22:if(Z.memoizedState!==null){p_(ie);continue}}ge!==null?(ge.return=Z,Ie=ge):p_(ie)}ne=ne.sibling}e:for(ne=null,ie=i;;){if(ie.tag===5){if(ne===null){ne=ie;try{p=ie.stateNode,G?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=ie.stateNode,b=ie.memoizedProps.style,E=b!=null&&b.hasOwnProperty("display")?b.display:null,C.style.display=On("display",E))}catch(Ae){Mt(i,i.return,Ae)}}}else if(ie.tag===6){if(ne===null)try{ie.stateNode.nodeValue=G?"":ie.memoizedProps}catch(Ae){Mt(i,i.return,Ae)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;ne===ie&&(ne=null),ie=ie.return}ne===ie&&(ne=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Ur(o,i),oi(i),d&4&&c_(i);break;case 21:break;default:Ur(o,i),oi(i)}}function oi(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(a_(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Cr(p,""),d.flags&=-33);var y=l_(i);Of(i,y,p);break;case 3:case 4:var E=d.stateNode.containerInfo,C=l_(i);Lf(i,C,E);break;default:throw Error(t(161))}}catch(b){Mt(i,i.return,b)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function pS(i,o,l){Ie=i,d_(i)}function d_(i,o,l){for(var d=(i.mode&1)!==0;Ie!==null;){var p=Ie,y=p.child;if(p.tag===22&&d){var E=p.memoizedState!==null||Oc;if(!E){var C=p.alternate,b=C!==null&&C.memoizedState!==null||En;C=Oc;var G=En;if(Oc=E,(En=b)&&!G)for(Ie=p;Ie!==null;)E=Ie,b=E.child,E.tag===22&&E.memoizedState!==null?m_(p):b!==null?(b.return=E,Ie=b):m_(p);for(;y!==null;)Ie=y,d_(y),y=y.sibling;Ie=p,Oc=C,En=G}f_(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Ie=y):f_(i)}}function f_(i){for(;Ie!==null;){var o=Ie;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:En||Mc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!En)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Mr(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&py(o,y,d);break;case 3:var E=o.updateQueue;if(E!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}py(o,E,l)}break;case 5:var C=o.stateNode;if(l===null&&o.flags&4){l=C;var b=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&l.focus();break;case"img":b.src&&(l.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var ne=G.memoizedState;if(ne!==null){var ie=ne.dehydrated;ie!==null&&Nr(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}En||o.flags&512&&Vf(o)}catch(Z){Mt(o,o.return,Z)}}if(o===i){Ie=null;break}if(l=o.sibling,l!==null){l.return=o.return,Ie=l;break}Ie=o.return}}function p_(i){for(;Ie!==null;){var o=Ie;if(o===i){Ie=null;break}var l=o.sibling;if(l!==null){l.return=o.return,Ie=l;break}Ie=o.return}}function m_(i){for(;Ie!==null;){var o=Ie;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Mc(4,o)}catch(b){Mt(o,l,b)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(b){Mt(o,p,b)}}var y=o.return;try{Vf(o)}catch(b){Mt(o,y,b)}break;case 5:var E=o.return;try{Vf(o)}catch(b){Mt(o,E,b)}}}catch(b){Mt(o,o.return,b)}if(o===i){Ie=null;break}var C=o.sibling;if(C!==null){C.return=o.return,Ie=C;break}Ie=o.return}}var mS=Math.ceil,Fc=ae.ReactCurrentDispatcher,Mf=ae.ReactCurrentOwner,Er=ae.ReactCurrentBatchConfig,ot=0,an=null,Gt=null,pn=0,ar=0,Ta=us(0),Zt=0,jl=null,ho=0,Uc=0,Ff=0,Bl=null,qn=null,Uf=0,Sa=1/0,bi=null,jc=!1,jf=null,ms=null,Bc=!1,gs=null,zc=0,zl=0,Bf=null,$c=-1,qc=0;function Dn(){return(ot&6)!==0?Qe():$c!==-1?$c:$c=Qe()}function ys(i){return(i.mode&1)===0?1:(ot&2)!==0&&pn!==0?pn&-pn:XT.transition!==null?(qc===0&&(qc=Zs()),qc):(i=nt,i!==0||(i=window.event,i=i===void 0?16:gl(i.type)),i)}function jr(i,o,l,d){if(50<zl)throw zl=0,Bf=null,Error(t(185));ts(i,l,d),((ot&2)===0||i!==an)&&(i===an&&((ot&2)===0&&(Uc|=l),Zt===4&&_s(i,pn)),Kn(i,d),l===1&&ot===0&&(o.mode&1)===0&&(Sa=Qe()+500,_c&&hs()))}function Kn(i,o){var l=i.callbackNode;wi(i,o);var d=Xs(i,i===an?pn:0);if(d===0)l!==null&&fr(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&fr(l),o===1)i.tag===0?YT(y_.bind(null,i)):ny(y_.bind(null,i)),WT(function(){(ot&6)===0&&hs()}),l=null;else{switch(rs(d)){case 1:l=tr;break;case 4:l=yn;break;case 16:l=cn;break;case 536870912:l=Je;break;default:l=cn}l=R_(l,g_.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function g_(i,o){if($c=-1,qc=0,(ot&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Ra()&&i.callbackNode!==l)return null;var d=Xs(i,i===an?pn:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=Kc(i,d);else{o=d;var p=ot;ot|=2;var y=v_();(an!==i||pn!==o)&&(bi=null,Sa=Qe()+500,po(i,o));do try{_S();break}catch(C){__(i,C)}while(!0);sf(),Fc.current=y,ot=p,Gt!==null?o=0:(an=null,pn=0,o=Zt)}if(o!==0){if(o===2&&(p=nr(i),p!==0&&(d=p,o=zf(i,p))),o===1)throw l=jl,po(i,0),_s(i,d),Kn(i,Qe()),l;if(o===6)_s(i,d);else{if(p=i.current.alternate,(d&30)===0&&!gS(p)&&(o=Kc(i,d),o===2&&(y=nr(i),y!==0&&(d=y,o=zf(i,y))),o===1))throw l=jl,po(i,0),_s(i,d),Kn(i,Qe()),l;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:mo(i,qn,bi);break;case 3:if(_s(i,d),(d&130023424)===d&&(o=Uf+500-Qe(),10<o)){if(Xs(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){Dn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Wd(mo.bind(null,i,qn,bi),o);break}mo(i,qn,bi);break;case 4:if(_s(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var E=31-Ze(d);y=1<<E,E=o[E],E>p&&(p=E),d&=~y}if(d=p,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*mS(d/1960))-d,10<d){i.timeoutHandle=Wd(mo.bind(null,i,qn,bi),d);break}mo(i,qn,bi);break;case 5:mo(i,qn,bi);break;default:throw Error(t(329))}}}return Kn(i,Qe()),i.callbackNode===l?g_.bind(null,i):null}function zf(i,o){var l=Bl;return i.current.memoizedState.isDehydrated&&(po(i,o).flags|=256),i=Kc(i,o),i!==2&&(o=qn,qn=l,o!==null&&$f(o)),i}function $f(i){qn===null?qn=i:qn.push.apply(qn,i)}function gS(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Lr(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function _s(i,o){for(o&=~Ff,o&=~Uc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Ze(o),d=1<<l;i[l]=-1,o&=~d}}function y_(i){if((ot&6)!==0)throw Error(t(327));Ra();var o=Xs(i,0);if((o&1)===0)return Kn(i,Qe()),null;var l=Kc(i,o);if(i.tag!==0&&l===2){var d=nr(i);d!==0&&(o=d,l=zf(i,d))}if(l===1)throw l=jl,po(i,0),_s(i,o),Kn(i,Qe()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,mo(i,qn,bi),Kn(i,Qe()),null}function qf(i,o){var l=ot;ot|=1;try{return i(o)}finally{ot=l,ot===0&&(Sa=Qe()+500,_c&&hs())}}function fo(i){gs!==null&&gs.tag===0&&(ot&6)===0&&Ra();var o=ot;ot|=1;var l=Er.transition,d=nt;try{if(Er.transition=null,nt=1,i)return i()}finally{nt=d,Er.transition=l,ot=o,(ot&6)===0&&hs()}}function Kf(){ar=Ta.current,It(Ta)}function po(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,GT(l)),Gt!==null)for(l=Gt.return;l!==null;){var d=l;switch(Zd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&gc();break;case 3:wa(),It(Bn),It(_n),ff();break;case 5:hf(d);break;case 4:wa();break;case 13:It(xt);break;case 19:It(xt);break;case 10:of(d.type._context);break;case 22:case 23:Kf()}l=l.return}if(an=i,Gt=i=vs(i.current,null),pn=ar=o,Zt=0,jl=null,Ff=Uc=ho=0,qn=Bl=null,lo!==null){for(o=0;o<lo.length;o++)if(l=lo[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,d.next=E}l.pending=d}lo=null}return i}function __(i,o){do{var l=Gt;try{if(sf(),Cc.current=bc,kc){for(var d=Dt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}kc=!1}if(co=0,on=Xt=Dt=null,Vl=!1,Ll=0,Mf.current=null,l===null||l.return===null){Zt=1,jl=o,Gt=null;break}e:{var y=i,E=l.return,C=l,b=o;if(o=pn,C.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=b,ne=C,ie=ne.tag;if((ne.mode&1)===0&&(ie===0||ie===11||ie===15)){var Z=ne.alternate;Z?(ne.updateQueue=Z.updateQueue,ne.memoizedState=Z.memoizedState,ne.lanes=Z.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ge=$y(E);if(ge!==null){ge.flags&=-257,qy(ge,E,C,y,o),ge.mode&1&&zy(y,G,o),o=ge,b=G;var Te=o.updateQueue;if(Te===null){var Ae=new Set;Ae.add(b),o.updateQueue=Ae}else Te.add(b);break e}else{if((o&1)===0){zy(y,G,o),Gf();break e}b=Error(t(426))}}else if(Rt&&C.mode&1){var jt=$y(E);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),qy(jt,E,C,y,o),nf(Ea(b,C));break e}}y=b=Ea(b,C),Zt!==4&&(Zt=2),Bl===null?Bl=[y]:Bl.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=jy(y,b,o);fy(y,z);break e;case 1:C=b;var V=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(ms===null||!ms.has(q)))){y.flags|=65536,o&=-o,y.lanes|=o;var se=By(y,C,o);fy(y,se);break e}}y=y.return}while(y!==null)}E_(l)}catch(Ce){o=Ce,Gt===l&&l!==null&&(Gt=l=l.return);continue}break}while(!0)}function v_(){var i=Fc.current;return Fc.current=bc,i===null?bc:i}function Gf(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),an===null||(ho&268435455)===0&&(Uc&268435455)===0||_s(an,pn)}function Kc(i,o){var l=ot;ot|=2;var d=v_();(an!==i||pn!==o)&&(bi=null,po(i,o));do try{yS();break}catch(p){__(i,p)}while(!0);if(sf(),ot=l,Fc.current=d,Gt!==null)throw Error(t(261));return an=null,pn=0,Zt}function yS(){for(;Gt!==null;)w_(Gt)}function _S(){for(;Gt!==null&&!Qr();)w_(Gt)}function w_(i){var o=S_(i.alternate,i,ar);i.memoizedProps=i.pendingProps,o===null?E_(i):Gt=o,Mf.current=null}function E_(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=cS(l,o,ar),l!==null){Gt=l;return}}else{if(l=hS(l,o),l!==null){l.flags&=32767,Gt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Zt=6,Gt=null;return}}if(o=o.sibling,o!==null){Gt=o;return}Gt=o=i}while(o!==null);Zt===0&&(Zt=5)}function mo(i,o,l){var d=nt,p=Er.transition;try{Er.transition=null,nt=1,vS(i,o,l,d)}finally{Er.transition=p,nt=d}return null}function vS(i,o,l,d){do Ra();while(gs!==null);if((ot&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(yt(i,y),i===an&&(Gt=an=null,pn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Bc||(Bc=!0,R_(cn,function(){return Ra(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Er.transition,Er.transition=null;var E=nt;nt=1;var C=ot;ot|=4,Mf.current=null,fS(i,l),h_(l,i),UT(Kd),ss=!!qd,Kd=qd=null,i.current=l,pS(l),er(),ot=C,nt=E,Er.transition=y}else i.current=l;if(Bc&&(Bc=!1,gs=i,zc=p),y=i.pendingLanes,y===0&&(ms=null),Yr(l.stateNode),Kn(i,Qe()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(jc)throw jc=!1,i=jf,jf=null,i;return(zc&1)!==0&&i.tag!==0&&Ra(),y=i.pendingLanes,(y&1)!==0?i===Bf?zl++:(zl=0,Bf=i):zl=0,hs(),null}function Ra(){if(gs!==null){var i=rs(zc),o=Er.transition,l=nt;try{if(Er.transition=null,nt=16>i?16:i,gs===null)var d=!1;else{if(i=gs,gs=null,zc=0,(ot&6)!==0)throw Error(t(331));var p=ot;for(ot|=4,Ie=i.current;Ie!==null;){var y=Ie,E=y.child;if((Ie.flags&16)!==0){var C=y.deletions;if(C!==null){for(var b=0;b<C.length;b++){var G=C[b];for(Ie=G;Ie!==null;){var ne=Ie;switch(ne.tag){case 0:case 11:case 15:Ul(8,ne,y)}var ie=ne.child;if(ie!==null)ie.return=ne,Ie=ie;else for(;Ie!==null;){ne=Ie;var Z=ne.sibling,ge=ne.return;if(o_(ne),ne===G){Ie=null;break}if(Z!==null){Z.return=ge,Ie=Z;break}Ie=ge}}}var Te=y.alternate;if(Te!==null){var Ae=Te.child;if(Ae!==null){Te.child=null;do{var jt=Ae.sibling;Ae.sibling=null,Ae=jt}while(Ae!==null)}}Ie=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,Ie=E;else e:for(;Ie!==null;){if(y=Ie,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ul(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,Ie=z;break e}Ie=y.return}}var V=i.current;for(Ie=V;Ie!==null;){E=Ie;var q=E.child;if((E.subtreeFlags&2064)!==0&&q!==null)q.return=E,Ie=q;else e:for(E=V;Ie!==null;){if(C=Ie,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Mc(9,C)}}catch(Ce){Mt(C,C.return,Ce)}if(C===E){Ie=null;break e}var se=C.sibling;if(se!==null){se.return=C.return,Ie=se;break e}Ie=C.return}}if(ot=p,hs(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(ut,i)}catch{}d=!0}return d}finally{nt=l,Er.transition=o}}return!1}function I_(i,o,l){o=Ea(l,o),o=jy(i,o,1),i=fs(i,o,1),o=Dn(),i!==null&&(ts(i,1,o),Kn(i,o))}function Mt(i,o,l){if(i.tag===3)I_(i,i,l);else for(;o!==null;){if(o.tag===3){I_(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ms===null||!ms.has(d))){i=Ea(l,i),i=By(o,i,1),o=fs(o,i,1),i=Dn(),o!==null&&(ts(o,1,i),Kn(o,i));break}}o=o.return}}function wS(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=Dn(),i.pingedLanes|=i.suspendedLanes&l,an===i&&(pn&l)===l&&(Zt===4||Zt===3&&(pn&130023424)===pn&&500>Qe()-Uf?po(i,0):Ff|=l),Kn(i,o)}function T_(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ho,Ho<<=1,(Ho&130023424)===0&&(Ho=4194304)));var l=Dn();i=ki(i,o),i!==null&&(ts(i,o,l),Kn(i,l))}function ES(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),T_(i,l)}function IS(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),T_(i,l)}var S_;S_=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Bn.current)$n=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return $n=!1,uS(i,o,l);$n=(i.flags&131072)!==0}else $n=!1,Rt&&(o.flags&1048576)!==0&&ry(o,wc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Lc(i,o),i=o.pendingProps;var p=fa(o,_n.current);va(o,l),p=gf(null,o,d,i,p,l);var y=yf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,zn(d)?(y=!0,yc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,uf(o),p.updater=Nc,o.stateNode=p,p._reactInternals=o,Tf(o,d,i,l),o=Pf(null,o,d,!0,y,l)):(o.tag=0,Rt&&y&&Xd(o),xn(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(Lc(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=SS(d),i=Mr(d,i),p){case 0:o=Af(null,o,d,i,l);break e;case 1:o=Jy(null,o,d,i,l);break e;case 11:o=Ky(null,o,d,i,l);break e;case 14:o=Gy(null,o,d,Mr(d.type,i),l);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Mr(d,p),Af(i,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Mr(d,p),Jy(i,o,d,p,l);case 3:e:{if(Yy(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,p=y.element,dy(i,o),Ac(o,d,null,l);var E=o.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Ea(Error(t(423)),o),o=Xy(i,o,d,l,p);break e}else if(d!==p){p=Ea(Error(t(424)),o),o=Xy(i,o,d,l,p);break e}else for(or=ls(o.stateNode.containerInfo.firstChild),sr=o,Rt=!0,Or=null,l=cy(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ga(),d===p){o=Di(i,o,l);break e}xn(i,o,d,l)}o=o.child}return o;case 5:return my(o),i===null&&tf(o),d=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,Gd(d,p)?E=null:y!==null&&Gd(d,y)&&(o.flags|=32),Qy(i,o),xn(i,o,E,l),o.child;case 6:return i===null&&tf(o),null;case 13:return Zy(i,o,l);case 4:return cf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=ya(o,null,d,l):xn(i,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Mr(d,p),Ky(i,o,d,p,l);case 7:return xn(i,o,o.pendingProps,l),o.child;case 8:return xn(i,o,o.pendingProps.children,l),o.child;case 12:return xn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,vt(Tc,d._currentValue),d._currentValue=E,y!==null)if(Lr(y.value,E)){if(y.children===p.children&&!Bn.current){o=Di(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var C=y.dependencies;if(C!==null){E=y.child;for(var b=C.firstContext;b!==null;){if(b.context===d){if(y.tag===1){b=xi(-1,l&-l),b.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var ne=G.pending;ne===null?b.next=b:(b.next=ne.next,ne.next=b),G.pending=b}}y.lanes|=l,b=y.alternate,b!==null&&(b.lanes|=l),af(y.return,l,o),C.lanes|=l;break}b=b.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,C=E.alternate,C!==null&&(C.lanes|=l),af(E,l,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}xn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,va(o,l),p=vr(p),d=d(p),o.flags|=1,xn(i,o,d,l),o.child;case 14:return d=o.type,p=Mr(d,o.pendingProps),p=Mr(d.type,p),Gy(i,o,d,p,l);case 15:return Wy(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Mr(d,p),Lc(i,o),o.tag=1,zn(d)?(i=!0,yc(o)):i=!1,va(o,l),Fy(o,d,p),Tf(o,d,p,l),Pf(null,o,d,!0,i,l);case 19:return t_(i,o,l);case 22:return Hy(i,o,l)}throw Error(t(156,o.tag))};function R_(i,o){return ht(i,o)}function TS(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(i,o,l,d){return new TS(i,o,l,d)}function Wf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function SS(i){if(typeof i=="function")return Wf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===_t)return 14}return 2}function vs(i,o){var l=i.alternate;return l===null?(l=Ir(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Gc(i,o,l,d,p,y){var E=2;if(d=i,typeof i=="function")Wf(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case I:return go(l.children,p,y,o);case R:E=8,p|=8;break;case A:return i=Ir(12,l,o,p|2),i.elementType=A,i.lanes=y,i;case k:return i=Ir(13,l,o,p),i.elementType=k,i.lanes=y,i;case Ye:return i=Ir(19,l,o,p),i.elementType=Ye,i.lanes=y,i;case st:return Wc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case x:E=10;break e;case N:E=9;break e;case L:E=11;break e;case _t:E=14;break e;case Ut:E=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Ir(E,l,o,p),o.elementType=i,o.type=d,o.lanes=y,o}function go(i,o,l,d){return i=Ir(7,i,d,o),i.lanes=l,i}function Wc(i,o,l,d){return i=Ir(22,i,d,o),i.elementType=st,i.lanes=l,i.stateNode={isHidden:!1},i}function Hf(i,o,l){return i=Ir(6,i,null,o),i.lanes=l,i}function Qf(i,o,l){return o=Ir(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function RS(i,o,l,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=es(0),this.expirationTimes=es(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Jf(i,o,l,d,p,y,E,C,b){return i=new RS(i,o,l,C,b),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Ir(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},uf(y),i}function AS(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function A_(i){if(!i)return cs;i=i._reactInternals;e:{if(_e(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(zn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(zn(l))return ey(i,l,o)}return o}function P_(i,o,l,d,p,y,E,C,b){return i=Jf(l,d,!0,i,p,y,E,C,b),i.context=A_(null),l=i.current,d=Dn(),p=ys(l),y=xi(d,p),y.callback=o??null,fs(l,y,p),i.current.lanes=p,ts(i,p,d),Kn(i,d),i}function Hc(i,o,l,d){var p=o.current,y=Dn(),E=ys(p);return l=A_(l),o.context===null?o.context=l:o.pendingContext=l,o=xi(y,E),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=fs(p,o,E),i!==null&&(jr(i,p,E,y),Rc(i,p,E)),E}function Qc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function C_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Yf(i,o){C_(i,o),(i=i.alternate)&&C_(i,o)}function PS(){return null}var k_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Xf(i){this._internalRoot=i}Jc.prototype.render=Xf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Hc(i,o,null,null)},Jc.prototype.unmount=Xf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;fo(function(){Hc(null,i,null,null)}),o[Ri]=null}};function Jc(i){this._internalRoot=i}Jc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ju();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Zr.length&&o!==0&&o<Zr[l].priority;l++);Zr.splice(l,0,i),l===0&&Zu(i)}};function Zf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Yc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function x_(){}function CS(i,o,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var G=Qc(E);y.call(G)}}var E=P_(o,d,i,0,null,!1,!1,"",x_);return i._reactRootContainer=E,i[Ri]=E.current,Al(i.nodeType===8?i.parentNode:i),fo(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var C=d;d=function(){var G=Qc(b);C.call(G)}}var b=Jf(i,0,!1,null,null,!1,!1,"",x_);return i._reactRootContainer=b,i[Ri]=b.current,Al(i.nodeType===8?i.parentNode:i),fo(function(){Hc(o,b,l,d)}),b}function Xc(i,o,l,d,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var C=p;p=function(){var b=Qc(E);C.call(b)}}Hc(o,E,i,p)}else E=CS(l,o,i,p,d);return Qc(E)}Hu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=Zi(o.pendingLanes);l!==0&&(ns(o,l|1),Kn(o,Qe()),(ot&6)===0&&(Sa=Qe()+500,hs()))}break;case 13:fo(function(){var d=ki(i,1);if(d!==null){var p=Dn();jr(d,i,1,p)}}),Yf(i,1)}},Qo=function(i){if(i.tag===13){var o=ki(i,134217728);if(o!==null){var l=Dn();jr(o,i,134217728,l)}Yf(i,134217728)}},Qu=function(i){if(i.tag===13){var o=ys(i),l=ki(i,o);if(l!==null){var d=Dn();jr(l,i,o,d)}Yf(i,o)}},Ju=function(){return nt},Yu=function(i,o){var l=nt;try{return nt=i,o()}finally{nt=l}},vi=function(i,o,l){switch(o){case"input":if(Gs(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var p=mc(d);if(!p)throw Error(t(90));Vt(d),Gs(d,p)}}}break;case"textarea":Ln(i,l);break;case"select":o=l.value,o!=null&&Ar(i,!!l.multiple,o,!1)}},Wr=qf,Hr=fo;var kS={usingClientEntryPoint:!1,Events:[kl,ha,mc,Zn,Qs,qf]},$l={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xS={bundleType:$l.bundleType,version:$l.version,rendererPackageName:$l.rendererPackageName,rendererConfig:$l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=at(i),i===null?null:i.stateNode},findFiberByHostInstance:$l.findFiberByHostInstance||PS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{ut=Zc.inject(xS),qt=Zc}catch{}}return Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kS,Gn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zf(o))throw Error(t(200));return AS(i,o,null,l)},Gn.createRoot=function(i,o){if(!Zf(i))throw Error(t(299));var l=!1,d="",p=k_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Jf(i,1,!1,null,null,l,!1,d,p),i[Ri]=o.current,Al(i.nodeType===8?i.parentNode:i),new Xf(o)},Gn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=at(o),i=i===null?null:i.stateNode,i},Gn.flushSync=function(i){return fo(i)},Gn.hydrate=function(i,o,l){if(!Yc(o))throw Error(t(200));return Xc(null,i,o,!0,l)},Gn.hydrateRoot=function(i,o,l){if(!Zf(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",E=k_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),o=P_(o,null,i,1,l??null,p,!1,y,E),i[Ri]=o.current,Al(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Jc(o)},Gn.render=function(i,o,l){if(!Yc(o))throw Error(t(200));return Xc(null,i,o,!1,l)},Gn.unmountComponentAtNode=function(i){if(!Yc(i))throw Error(t(40));return i._reactRootContainer?(fo(function(){Xc(null,null,i,!1,function(){i._reactRootContainer=null,i[Ri]=null})}),!0):!1},Gn.unstable_batchedUpdates=qf,Gn.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!Yc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Xc(i,o,l,!1,d)},Gn.version="18.3.1-next-f1338f8080-20240426",Gn}var F_;function Jw(){if(F_)return np.exports;F_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),np.exports=FS(),np.exports}var U_;function US(){if(U_)return eh;U_=1;var n=Jw();return eh.createRoot=n.createRoot,eh.hydrateRoot=n.hydrateRoot,eh}var jS=US(),Yw=Jw();const BS=Qw(Yw),zS=Hw({__proto__:null,default:BS},[Yw]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function At(){return At=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},At.apply(this,arguments)}var Ht;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ht||(Ht={}));const j_="popstate";function $S(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:h}=r.location;return fu("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Do(s)}return KS(e,t,null,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $a(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qS(){return Math.random().toString(36).substr(2,8)}function B_(n,e){return{usr:n.state,key:n.key,idx:e}}function fu(n,e,t,r){return t===void 0&&(t=null),At({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?js(e):e,{state:t,key:e&&e.key||r||qS()})}function Do(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function js(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function KS(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h=Ht.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(At({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function w(){h=Ht.Pop;let U=_(),oe=U==null?null:U-m;m=U,f&&f({action:h,location:M.location,delta:oe})}function T(U,oe){h=Ht.Push;let H=fu(M.location,U,oe);m=_()+1;let ee=B_(H,m),ae=M.createHref(H);try{u.pushState(ee,"",ae)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(ae)}a&&f&&f({action:h,location:M.location,delta:1})}function P(U,oe){h=Ht.Replace;let H=fu(M.location,U,oe);m=_();let ee=B_(H,m),ae=M.createHref(H);u.replaceState(ee,"",ae),a&&f&&f({action:h,location:M.location,delta:0})}function j(U){let oe=s.location.origin!=="null"?s.location.origin:s.location.href,H=typeof U=="string"?U:Do(U);return H=H.replace(/ $/,"%20"),Ke(oe,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,oe)}let M={get action(){return h},get location(){return n(s,u)},listen(U){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(j_,w),f=U,()=>{s.removeEventListener(j_,w),f=null}},createHref(U){return e(s,U)},createURL:j,encodeLocation(U){let oe=j(U);return{pathname:oe.pathname,search:oe.search,hash:oe.hash}},push:T,replace:P,go(U){return u.go(U)}};return M}var ft;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ft||(ft={}));const GS=new Set(["lazy","caseSensitive","path","id","index","children"]);function WS(n){return n.index===!0}function Sh(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((s,a)=>{let u=[...t,String(a)],h=typeof s.id=="string"?s.id:u.join("-");if(Ke(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ke(!r[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),WS(s)){let f=At({},s,e(s),{id:h});return r[h]=f,f}else{let f=At({},s,e(s),{id:h,children:void 0});return r[h]=f,s.children&&(f.children=Sh(s.children,e,u,r)),f}})}function wo(n,e,t){return t===void 0&&(t="/"),uh(n,e,t,!1)}function uh(n,e,t,r){let s=typeof e=="string"?js(e):e,a=ji(s.pathname||"/",t);if(a==null)return null;let u=Xw(n);QS(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=oR(a);h=iR(u[f],m,r)}return h}function HS(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function Xw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Ke(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Ui([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Ke(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Xw(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:nR(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of Zw(a.path))s(a,u,f)}),e}function Zw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=Zw(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function QS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const JS=/^:[\w-]+$/,YS=3,XS=2,ZS=1,eR=10,tR=-2,z_=n=>n==="*";function nR(n,e){let t=n.split("/"),r=t.length;return t.some(z_)&&(r+=tR),e&&(r+=XS),t.filter(s=>!z_(s)).reduce((s,a)=>s+(JS.test(a)?YS:a===""?ZS:eR),r)}function rR(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function iR(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=Rh({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),T=f.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=Rh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:Ui([a,w.pathname]),pathnameBase:uR(Ui([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=Ui([a,w.pathnameBase]))}return u}function Rh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=sR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,_,w)=>{let{paramName:T,isOptional:P}=_;if(T==="*"){let M=h[w]||"";u=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const j=h[w];return P&&!j?m[T]=void 0:m[T]=(j||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function sR(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),$a(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function oR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $a(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function ji(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function aR(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?js(n):n;return{pathname:t?t.startsWith("/")?t:lR(t,e):e,search:cR(r),hash:hR(s)}}function lR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function sp(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Jh(n,e){let t=eE(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Yh(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=js(n):(s=At({},n),Ke(!s.pathname||!s.pathname.includes("?"),sp("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),sp("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),sp("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}h=w>=0?e[w]:"/"}let f=aR(s,h),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Ui=n=>n.join("/").replace(/\/\/+/g,"/"),uR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),cR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,hR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Ah{constructor(e,t,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=t||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function pu(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const tE=["post","put","patch","delete"],dR=new Set(tE),fR=["get",...tE],pR=new Set(fR),mR=new Set([301,302,303,307,308]),gR=new Set([307,308]),op={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Kl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},um=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_R=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),nE="remix-router-transitions";function vR(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;Ke(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(n.mapRouteProperties)s=n.mapRouteProperties;else if(n.detectErrorBoundary){let D=n.detectErrorBoundary;s=O=>({hasErrorBoundary:D(O)})}else s=_R;let a={},u=Sh(n.routes,s,void 0,a),h,f=n.basename||"/",m=n.dataStrategy||TR,_=n.patchRoutesOnNavigation,w=At({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),T=null,P=new Set,j=null,M=null,U=null,oe=n.hydrationData!=null,H=wo(u,n.history.location,f),ee=!1,ae=null;if(H==null&&!_){let D=Wn(404,{pathname:n.history.location.pathname}),{matches:O,route:K}=Z_(u);H=O,ae={[K.id]:D}}H&&!n.hydrationData&&Hr(H,u,n.history.location.pathname).active&&(H=null);let de;if(H)if(H.some(D=>D.route.lazy))de=!1;else if(!H.some(D=>D.route.loader))de=!0;else if(w.v7_partialHydration){let D=n.hydrationData?n.hydrationData.loaderData:null,O=n.hydrationData?n.hydrationData.errors:null;if(O){let K=H.findIndex(X=>O[X.route.id]!==void 0);de=H.slice(0,K+1).every(X=>!Tp(X.route,D,O))}else de=H.every(K=>!Tp(K.route,D,O))}else de=n.hydrationData!=null;else if(de=!1,H=[],w.v7_partialHydration){let D=Hr(null,u,n.history.location.pathname);D.active&&D.matches&&(ee=!0,H=D.matches)}let me,I={historyAction:n.history.action,location:n.history.location,matches:H,initialized:de,navigation:op,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ae,fetchers:new Map,blockers:new Map},R=Ht.Pop,A=!1,x,N=!1,L=new Map,k=null,Ye=!1,_t=!1,Ut=[],st=new Set,re=new Map,ke=0,pe=-1,F=new Map,Q=new Set,Se=new Map,je=new Map,Le=new Set,$e=new Map,qe=new Map,Xe;function mt(){if(T=n.history.listen(D=>{let{action:O,location:K,delta:X}=D;if(Xe){Xe(),Xe=void 0;return}$a(qe.size===0||X!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=vi({currentLocation:I.location,nextLocation:K,historyAction:O});if(ce&&X!=null){let we=new Promise(be=>{Xe=be});n.history.go(X*-1),kr(ce,{state:"blocked",location:K,proceed(){kr(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),we.then(()=>n.history.go(X))},reset(){let be=new Map(I.blockers);be.set(ce,Kl),Vt({blockers:be})}});return}return Xn(O,K)}),t){MR(e,L);let D=()=>FR(e,L);e.addEventListener("pagehide",D),k=()=>e.removeEventListener("pagehide",D)}return I.initialized||Xn(Ht.Pop,I.location,{initialHydration:!0}),me}function $t(){T&&T(),k&&k(),P.clear(),x&&x.abort(),I.fetchers.forEach((D,O)=>dr(O)),I.blockers.forEach((D,O)=>Gr(O))}function Sr(D){return P.add(D),()=>P.delete(D)}function Vt(D,O){O===void 0&&(O={}),I=At({},I,D);let K=[],X=[];w.v7_fetcherPersist&&I.fetchers.forEach((ce,we)=>{ce.state==="idle"&&(Le.has(we)?X.push(we):K.push(we))}),Le.forEach(ce=>{!I.fetchers.has(ce)&&!re.has(ce)&&X.push(ce)}),[...P].forEach(ce=>ce(I,{deletedFetchers:X,viewTransitionOpts:O.viewTransitionOpts,flushSync:O.flushSync===!0})),w.v7_fetcherPersist?(K.forEach(ce=>I.fetchers.delete(ce)),X.forEach(ce=>dr(ce))):X.forEach(ce=>Le.delete(ce))}function Pn(D,O,K){var X,ce;let{flushSync:we}=K===void 0?{}:K,be=I.actionData!=null&&I.navigation.formMethod!=null&&Br(I.navigation.formMethod)&&I.navigation.state==="loading"&&((X=D.state)==null?void 0:X._isRedirect)!==!0,Ee;O.actionData?Object.keys(O.actionData).length>0?Ee=O.actionData:Ee=null:be?Ee=I.actionData:Ee=null;let ve=O.loaderData?Y_(I.loaderData,O.loaderData,O.matches||[],O.errors):I.loaderData,ye=I.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((Fe,Ot)=>ye.set(Ot,Kl)));let _e=A===!0||I.navigation.formMethod!=null&&Br(I.navigation.formMethod)&&((ce=D.state)==null?void 0:ce._isRedirect)!==!0;h&&(u=h,h=void 0),Ye||R===Ht.Pop||(R===Ht.Push?n.history.push(D,D.state):R===Ht.Replace&&n.history.replace(D,D.state));let Oe;if(R===Ht.Pop){let Fe=L.get(I.location.pathname);Fe&&Fe.has(D.pathname)?Oe={currentLocation:I.location,nextLocation:D}:L.has(D.pathname)&&(Oe={currentLocation:D,nextLocation:I.location})}else if(N){let Fe=L.get(I.location.pathname);Fe?Fe.add(D.pathname):(Fe=new Set([D.pathname]),L.set(I.location.pathname,Fe)),Oe={currentLocation:I.location,nextLocation:D}}Vt(At({},O,{actionData:Ee,loaderData:ve,historyAction:R,location:D,initialized:!0,navigation:op,revalidation:"idle",restoreScrollPosition:Wr(D,O.matches||I.matches),preventScrollReset:_e,blockers:ye}),{viewTransitionOpts:Oe,flushSync:we===!0}),R=Ht.Pop,A=!1,N=!1,Ye=!1,_t=!1,Ut=[]}async function Kr(D,O){if(typeof D=="number"){n.history.go(D);return}let K=Ip(I.location,I.matches,f,w.v7_prependBasename,D,w.v7_relativeSplatPath,O?.fromRouteId,O?.relative),{path:X,submission:ce,error:we}=$_(w.v7_normalizeFormMethod,!1,K,O),be=I.location,Ee=fu(I.location,X,O&&O.state);Ee=At({},Ee,n.history.encodeLocation(Ee));let ve=O&&O.replace!=null?O.replace:void 0,ye=Ht.Push;ve===!0?ye=Ht.Replace:ve===!1||ce!=null&&Br(ce.formMethod)&&ce.formAction===I.location.pathname+I.location.search&&(ye=Ht.Replace);let _e=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,Oe=(O&&O.flushSync)===!0,Fe=vi({currentLocation:be,nextLocation:Ee,historyAction:ye});if(Fe){kr(Fe,{state:"blocked",location:Ee,proceed(){kr(Fe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),Kr(D,O)},reset(){let Ot=new Map(I.blockers);Ot.set(Fe,Kl),Vt({blockers:Ot})}});return}return await Xn(ye,Ee,{submission:ce,pendingError:we,preventScrollReset:_e,replace:O&&O.replace,enableViewTransition:O&&O.viewTransition,flushSync:Oe})}function Gi(){if(Ct(),Vt({revalidation:"loading"}),I.navigation.state!=="submitting"){if(I.navigation.state==="idle"){Xn(I.historyAction,I.location,{startUninterruptedRevalidation:!0});return}Xn(R||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:N===!0})}}async function Xn(D,O,K){x&&x.abort(),x=null,R=D,Ye=(K&&K.startUninterruptedRevalidation)===!0,Qs(I.location,I.matches),A=(K&&K.preventScrollReset)===!0,N=(K&&K.enableViewTransition)===!0;let X=h||u,ce=K&&K.overrideNavigation,we=K!=null&&K.initialHydration&&I.matches&&I.matches.length>0&&!ee?I.matches:wo(X,O,f),be=(K&&K.flushSync)===!0;if(we&&I.initialized&&!_t&&kR(I.location,O)&&!(K&&K.submission&&Br(K.submission.formMethod))){Pn(O,{matches:we},{flushSync:be});return}let Ee=Hr(we,X,O.pathname);if(Ee.active&&Ee.matches&&(we=Ee.matches),!we){let{error:at,notFoundMatches:We,route:ht}=gn(O.pathname);Pn(O,{matches:We,loaderData:{},errors:{[ht.id]:at}},{flushSync:be});return}x=new AbortController;let ve=Aa(n.history,O,x.signal,K&&K.submission),ye;if(K&&K.pendingError)ye=[Eo(we).route.id,{type:ft.error,error:K.pendingError}];else if(K&&K.submission&&Br(K.submission.formMethod)){let at=await Gs(ve,O,K.submission,we,Ee.active,{replace:K.replace,flushSync:be});if(at.shortCircuited)return;if(at.pendingActionResult){let[We,ht]=at.pendingActionResult;if(lr(ht)&&pu(ht.error)&&ht.error.status===404){x=null,Pn(O,{matches:at.matches,loaderData:{},errors:{[We]:ht.error}});return}}we=at.matches||we,ye=at.pendingActionResult,ce=ap(O,K.submission),be=!1,Ee.active=!1,ve=Aa(n.history,ve.url,ve.signal)}let{shortCircuited:_e,matches:Oe,loaderData:Fe,errors:Ot}=await Ko(ve,O,we,Ee.active,ce,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,be,ye);_e||(x=null,Pn(O,At({matches:Oe||we},X_(ye),{loaderData:Fe,errors:Ot})))}async function Gs(D,O,K,X,ce,we){we===void 0&&(we={}),Ct();let be=LR(O,K);if(Vt({navigation:be},{flushSync:we.flushSync===!0}),ce){let ye=await Fn(X,O.pathname,D.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let _e=Eo(ye.partialMatches).route.id;return{matches:ye.partialMatches,pendingActionResult:[_e,{type:ft.error,error:ye.error}]}}else if(ye.matches)X=ye.matches;else{let{notFoundMatches:_e,error:Oe,route:Fe}=gn(O.pathname);return{matches:_e,pendingActionResult:[Fe.id,{type:ft.error,error:Oe}]}}}let Ee,ve=Zl(X,O);if(!ve.route.action&&!ve.route.lazy)Ee={type:ft.error,error:Wn(405,{method:D.method,pathname:O.pathname,routeId:ve.route.id})};else if(Ee=(await Pr("action",I,D,[ve],X,null))[ve.route.id],D.signal.aborted)return{shortCircuited:!0};if(Ao(Ee)){let ye;return we&&we.replace!=null?ye=we.replace:ye=H_(Ee.response.headers.get("Location"),new URL(D.url),f)===I.location.pathname+I.location.search,await Ln(D,Ee,!0,{submission:K,replace:ye}),{shortCircuited:!0}}if(xs(Ee))throw Wn(400,{type:"defer-action"});if(lr(Ee)){let ye=Eo(X,ve.route.id);return(we&&we.replace)!==!0&&(R=Ht.Push),{matches:X,pendingActionResult:[ye.route.id,Ee]}}return{matches:X,pendingActionResult:[ve.route.id,Ee]}}async function Ko(D,O,K,X,ce,we,be,Ee,ve,ye,_e){let Oe=ce||ap(O,we),Fe=we||be||tv(Oe),Ot=!Ye&&(!w.v7_partialHydration||!ve);if(X){if(Ot){let ut=yi(_e);Vt(At({navigation:Oe},ut!==void 0?{actionData:ut}:{}),{flushSync:ye})}let Je=await Fn(K,O.pathname,D.signal);if(Je.type==="aborted")return{shortCircuited:!0};if(Je.type==="error"){let ut=Eo(Je.partialMatches).route.id;return{matches:Je.partialMatches,loaderData:{},errors:{[ut]:Je.error}}}else if(Je.matches)K=Je.matches;else{let{error:ut,notFoundMatches:qt,route:Yr}=gn(O.pathname);return{matches:qt,loaderData:{},errors:{[Yr.id]:ut}}}}let at=h||u,[We,ht]=K_(n.history,I,K,Fe,O,w.v7_partialHydration&&ve===!0,w.v7_skipActionErrorRevalidation,_t,Ut,st,Le,Se,Q,at,f,_e);if(Mn(Je=>!(K&&K.some(ut=>ut.route.id===Je))||We&&We.some(ut=>ut.route.id===Je)),pe=++ke,We.length===0&&ht.length===0){let Je=Qi();return Pn(O,At({matches:K,loaderData:{},errors:_e&&lr(_e[1])?{[_e[0]]:_e[1].error}:null},X_(_e),Je?{fetchers:new Map(I.fetchers)}:{}),{flushSync:ye}),{shortCircuited:!0}}if(Ot){let Je={};if(!X){Je.navigation=Oe;let ut=yi(_e);ut!==void 0&&(Je.actionData=ut)}ht.length>0&&(Je.fetchers=Rr(ht)),Vt(Je,{flushSync:ye})}ht.forEach(Je=>{On(Je.key),Je.controller&&re.set(Je.key,Je.controller)});let fr=()=>ht.forEach(Je=>On(Je.key));x&&x.signal.addEventListener("abort",fr);let{loaderResults:Qr,fetcherResults:er}=await Lt(I,K,We,ht,D);if(D.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",fr),ht.forEach(Je=>re.delete(Je.key));let Qe=th(Qr);if(Qe)return await Ln(D,Qe.result,!0,{replace:Ee}),{shortCircuited:!0};if(Qe=th(er),Qe)return Q.add(Qe.key),await Ln(D,Qe.result,!0,{replace:Ee}),{shortCircuited:!0};let{loaderData:Xi,errors:tr}=J_(I,K,Qr,_e,ht,er,$e);$e.forEach((Je,ut)=>{Je.subscribe(qt=>{(qt||Je.done)&&$e.delete(ut)})}),w.v7_partialHydration&&ve&&I.errors&&(tr=At({},I.errors,tr));let yn=Qi(),cn=Ji(pe),Jr=yn||cn||ht.length>0;return At({matches:K,loaderData:Xi,errors:tr},Jr?{fetchers:new Map(I.fetchers)}:{})}function yi(D){if(D&&!lr(D[1]))return{[D[0]]:D[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function Rr(D){return D.forEach(O=>{let K=I.fetchers.get(O.key),X=Gl(void 0,K?K.data:void 0);I.fetchers.set(O.key,X)}),new Map(I.fetchers)}function Ar(D,O,K,X){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");On(D);let ce=(X&&X.flushSync)===!0,we=h||u,be=Ip(I.location,I.matches,f,w.v7_prependBasename,K,w.v7_relativeSplatPath,O,X?.relative),Ee=wo(we,be,f),ve=Hr(Ee,we,be);if(ve.active&&ve.matches&&(Ee=ve.matches),!Ee){Cn(D,O,Wn(404,{pathname:be}),{flushSync:ce});return}let{path:ye,submission:_e,error:Oe}=$_(w.v7_normalizeFormMethod,!0,be,X);if(Oe){Cn(D,O,Oe,{flushSync:ce});return}let Fe=Zl(Ee,ye),Ot=(X&&X.preventScrollReset)===!0;if(_e&&Br(_e.formMethod)){Ws(D,O,ye,Fe,Ee,ve.active,ce,Ot,_e);return}Se.set(D,{routeId:O,path:ye}),Wi(D,O,ye,Fe,Ee,ve.active,ce,Ot,_e)}async function Ws(D,O,K,X,ce,we,be,Ee,ve){Ct(),Se.delete(D);function ye(Ze){if(!Ze.route.action&&!Ze.route.lazy){let pr=Wn(405,{method:ve.formMethod,pathname:K,routeId:O});return Cn(D,O,pr,{flushSync:be}),!0}return!1}if(!we&&ye(X))return;let _e=I.fetchers.get(D);rn(D,OR(ve,_e),{flushSync:be});let Oe=new AbortController,Fe=Aa(n.history,K,Oe.signal,ve);if(we){let Ze=await Fn(ce,new URL(Fe.url).pathname,Fe.signal,D);if(Ze.type==="aborted")return;if(Ze.type==="error"){Cn(D,O,Ze.error,{flushSync:be});return}else if(Ze.matches){if(ce=Ze.matches,X=Zl(ce,K),ye(X))return}else{Cn(D,O,Wn(404,{pathname:K}),{flushSync:be});return}}re.set(D,Oe);let Ot=ke,We=(await Pr("action",I,Fe,[X],ce,D))[X.route.id];if(Fe.signal.aborted){re.get(D)===Oe&&re.delete(D);return}if(w.v7_fetcherPersist&&Le.has(D)){if(Ao(We)||lr(We)){rn(D,Rs(void 0));return}}else{if(Ao(We))if(re.delete(D),pe>Ot){rn(D,Rs(void 0));return}else return Q.add(D),rn(D,Gl(ve)),Ln(Fe,We,!1,{fetcherSubmission:ve,preventScrollReset:Ee});if(lr(We)){Cn(D,O,We.error);return}}if(xs(We))throw Wn(400,{type:"defer-action"});let ht=I.navigation.location||I.location,fr=Aa(n.history,ht,Oe.signal),Qr=h||u,er=I.navigation.state!=="idle"?wo(Qr,I.navigation.location,f):I.matches;Ke(er,"Didn't find any matches after fetcher action");let Qe=++ke;F.set(D,Qe);let Xi=Gl(ve,We.data);I.fetchers.set(D,Xi);let[tr,yn]=K_(n.history,I,er,ve,ht,!1,w.v7_skipActionErrorRevalidation,_t,Ut,st,Le,Se,Q,Qr,f,[X.route.id,We]);yn.filter(Ze=>Ze.key!==D).forEach(Ze=>{let pr=Ze.key,Ys=I.fetchers.get(pr),Go=Gl(void 0,Ys?Ys.data:void 0);I.fetchers.set(pr,Go),On(pr),Ze.controller&&re.set(pr,Ze.controller)}),Vt({fetchers:new Map(I.fetchers)});let cn=()=>yn.forEach(Ze=>On(Ze.key));Oe.signal.addEventListener("abort",cn);let{loaderResults:Jr,fetcherResults:Je}=await Lt(I,er,tr,yn,fr);if(Oe.signal.aborted)return;Oe.signal.removeEventListener("abort",cn),F.delete(D),re.delete(D),yn.forEach(Ze=>re.delete(Ze.key));let ut=th(Jr);if(ut)return Ln(fr,ut.result,!1,{preventScrollReset:Ee});if(ut=th(Je),ut)return Q.add(ut.key),Ln(fr,ut.result,!1,{preventScrollReset:Ee});let{loaderData:qt,errors:Yr}=J_(I,er,Jr,void 0,yn,Je,$e);if(I.fetchers.has(D)){let Ze=Rs(We.data);I.fetchers.set(D,Ze)}Ji(Qe),I.navigation.state==="loading"&&Qe>pe?(Ke(R,"Expected pending action"),x&&x.abort(),Pn(I.navigation.location,{matches:er,loaderData:qt,errors:Yr,fetchers:new Map(I.fetchers)})):(Vt({errors:Yr,loaderData:Y_(I.loaderData,qt,er,Yr),fetchers:new Map(I.fetchers)}),_t=!1)}async function Wi(D,O,K,X,ce,we,be,Ee,ve){let ye=I.fetchers.get(D);rn(D,Gl(ve,ye?ye.data:void 0),{flushSync:be});let _e=new AbortController,Oe=Aa(n.history,K,_e.signal);if(we){let We=await Fn(ce,new URL(Oe.url).pathname,Oe.signal,D);if(We.type==="aborted")return;if(We.type==="error"){Cn(D,O,We.error,{flushSync:be});return}else if(We.matches)ce=We.matches,X=Zl(ce,K);else{Cn(D,O,Wn(404,{pathname:K}),{flushSync:be});return}}re.set(D,_e);let Fe=ke,at=(await Pr("loader",I,Oe,[X],ce,D))[X.route.id];if(xs(at)&&(at=await cm(at,Oe.signal,!0)||at),re.get(D)===_e&&re.delete(D),!Oe.signal.aborted){if(Le.has(D)){rn(D,Rs(void 0));return}if(Ao(at))if(pe>Fe){rn(D,Rs(void 0));return}else{Q.add(D),await Ln(Oe,at,!1,{preventScrollReset:Ee});return}if(lr(at)){Cn(D,O,at.error);return}Ke(!xs(at),"Unhandled fetcher deferred data"),rn(D,Rs(at.data))}}async function Ln(D,O,K,X){let{submission:ce,fetcherSubmission:we,preventScrollReset:be,replace:Ee}=X===void 0?{}:X;O.response.headers.has("X-Remix-Revalidate")&&(_t=!0);let ve=O.response.headers.get("Location");Ke(ve,"Expected a Location header on the redirect Response"),ve=H_(ve,new URL(D.url),f);let ye=fu(I.location,ve,{_isRedirect:!0});if(t){let We=!1;if(O.response.headers.has("X-Remix-Reload-Document"))We=!0;else if(um.test(ve)){const ht=n.history.createURL(ve);We=ht.origin!==e.location.origin||ji(ht.pathname,f)==null}if(We){Ee?e.location.replace(ve):e.location.assign(ve);return}}x=null;let _e=Ee===!0||O.response.headers.has("X-Remix-Replace")?Ht.Replace:Ht.Push,{formMethod:Oe,formAction:Fe,formEncType:Ot}=I.navigation;!ce&&!we&&Oe&&Fe&&Ot&&(ce=tv(I.navigation));let at=ce||we;if(gR.has(O.response.status)&&at&&Br(at.formMethod))await Xn(_e,ye,{submission:At({},at,{formAction:ve}),preventScrollReset:be||A,enableViewTransition:K?N:void 0});else{let We=ap(ye,ce);await Xn(_e,ye,{overrideNavigation:We,fetcherSubmission:we,preventScrollReset:be||A,enableViewTransition:K?N:void 0})}}async function Pr(D,O,K,X,ce,we){let be,Ee={};try{be=await SR(m,D,O,K,X,ce,we,a,s)}catch(ve){return X.forEach(ye=>{Ee[ye.route.id]={type:ft.error,error:ve}}),Ee}for(let[ve,ye]of Object.entries(be))if(xR(ye)){let _e=ye.result;Ee[ve]={type:ft.redirect,response:PR(_e,K,ve,ce,f,w.v7_relativeSplatPath)}}else Ee[ve]=await AR(ye);return Ee}async function Lt(D,O,K,X,ce){let we=D.matches,be=Pr("loader",D,ce,K,O,null),Ee=Promise.all(X.map(async _e=>{if(_e.matches&&_e.match&&_e.controller){let Fe=(await Pr("loader",D,Aa(n.history,_e.path,_e.controller.signal),[_e.match],_e.matches,_e.key))[_e.match.route.id];return{[_e.key]:Fe}}else return Promise.resolve({[_e.key]:{type:ft.error,error:Wn(404,{pathname:_e.path})}})})),ve=await be,ye=(await Ee).reduce((_e,Oe)=>Object.assign(_e,Oe),{});return await Promise.all([NR(O,ve,ce.signal,we,D.loaderData),VR(O,ye,X)]),{loaderResults:ve,fetcherResults:ye}}function Ct(){_t=!0,Ut.push(...Mn()),Se.forEach((D,O)=>{re.has(O)&&st.add(O),On(O)})}function rn(D,O,K){K===void 0&&(K={}),I.fetchers.set(D,O),Vt({fetchers:new Map(I.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function Cn(D,O,K,X){X===void 0&&(X={});let ce=Eo(I.matches,O);dr(D),Vt({errors:{[ce.route.id]:K},fetchers:new Map(I.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function Cr(D){return je.set(D,(je.get(D)||0)+1),Le.has(D)&&Le.delete(D),I.fetchers.get(D)||yR}function dr(D){let O=I.fetchers.get(D);re.has(D)&&!(O&&O.state==="loading"&&F.has(D))&&On(D),Se.delete(D),F.delete(D),Q.delete(D),w.v7_fetcherPersist&&Le.delete(D),st.delete(D),I.fetchers.delete(D)}function _i(D){let O=(je.get(D)||0)-1;O<=0?(je.delete(D),Le.add(D),w.v7_fetcherPersist||dr(D)):je.set(D,O),Vt({fetchers:new Map(I.fetchers)})}function On(D){let O=re.get(D);O&&(O.abort(),re.delete(D))}function Hi(D){for(let O of D){let K=Cr(O),X=Rs(K.data);I.fetchers.set(O,X)}}function Qi(){let D=[],O=!1;for(let K of Q){let X=I.fetchers.get(K);Ke(X,"Expected fetcher: "+K),X.state==="loading"&&(Q.delete(K),D.push(K),O=!0)}return Hi(D),O}function Ji(D){let O=[];for(let[K,X]of F)if(X<D){let ce=I.fetchers.get(K);Ke(ce,"Expected fetcher: "+K),ce.state==="loading"&&(On(K),F.delete(K),O.push(K))}return Hi(O),O.length>0}function Hs(D,O){let K=I.blockers.get(D)||Kl;return qe.get(D)!==O&&qe.set(D,O),K}function Gr(D){I.blockers.delete(D),qe.delete(D)}function kr(D,O){let K=I.blockers.get(D)||Kl;Ke(K.state==="unblocked"&&O.state==="blocked"||K.state==="blocked"&&O.state==="blocked"||K.state==="blocked"&&O.state==="proceeding"||K.state==="blocked"&&O.state==="unblocked"||K.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+K.state+" -> "+O.state);let X=new Map(I.blockers);X.set(D,O),Vt({blockers:X})}function vi(D){let{currentLocation:O,nextLocation:K,historyAction:X}=D;if(qe.size===0)return;qe.size>1&&$a(!1,"A router only supports one blocker at a time");let ce=Array.from(qe.entries()),[we,be]=ce[ce.length-1],Ee=I.blockers.get(we);if(!(Ee&&Ee.state==="proceeding")&&be({currentLocation:O,nextLocation:K,historyAction:X}))return we}function gn(D){let O=Wn(404,{pathname:D}),K=h||u,{matches:X,route:ce}=Z_(K);return Mn(),{notFoundMatches:X,route:ce,error:O}}function Mn(D){let O=[];return $e.forEach((K,X)=>{(!D||D(X))&&(K.cancel(),O.push(X),$e.delete(X))}),O}function Yi(D,O,K){if(j=D,U=O,M=K||null,!oe&&I.navigation===op){oe=!0;let X=Wr(I.location,I.matches);X!=null&&Vt({restoreScrollPosition:X})}return()=>{j=null,U=null,M=null}}function Zn(D,O){return M&&M(D,O.map(X=>HS(X,I.loaderData)))||D.key}function Qs(D,O){if(j&&U){let K=Zn(D,O);j[K]=U()}}function Wr(D,O){if(j){let K=Zn(D,O),X=j[K];if(typeof X=="number")return X}return null}function Hr(D,O,K){if(_)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:uh(O,K,f,!0)}}else return{active:!0,matches:uh(O,K,f,!0)||[]};return{active:!1,matches:null}}async function Fn(D,O,K,X){if(!_)return{type:"success",matches:D};let ce=D;for(;;){let we=h==null,be=h||u,Ee=a;try{await _({signal:K,path:O,matches:ce,fetcherKey:X,patch:(_e,Oe)=>{K.aborted||W_(_e,Oe,be,Ee,s)}})}catch(_e){return{type:"error",error:_e,partialMatches:ce}}finally{we&&!K.aborted&&(u=[...u])}if(K.aborted)return{type:"aborted"};let ve=wo(be,O,f);if(ve)return{type:"success",matches:ve};let ye=uh(be,O,f,!0);if(!ye||ce.length===ye.length&&ce.every((_e,Oe)=>_e.route.id===ye[Oe].route.id))return{type:"success",matches:null};ce=ye}}function Js(D){a={},h=Sh(D,s,void 0,a)}function kt(D,O){let K=h==null;W_(D,O,h||u,a,s),K&&(u=[...u],Vt({}))}return me={get basename(){return f},get future(){return w},get state(){return I},get routes(){return u},get window(){return e},initialize:mt,subscribe:Sr,enableScrollRestoration:Yi,navigate:Kr,fetch:Ar,revalidate:Gi,createHref:D=>n.history.createHref(D),encodeLocation:D=>n.history.encodeLocation(D),getFetcher:Cr,deleteFetcher:_i,dispose:$t,getBlocker:Hs,deleteBlocker:Gr,patchRoutes:kt,_internalFetchControllers:re,_internalActiveDeferreds:$e,_internalSetRoutes:Js},me}function wR(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ip(n,e,t,r,s,a,u,h){let f,m;if(u){f=[];for(let w of e)if(f.push(w),w.route.id===u){m=w;break}}else f=e,m=e[e.length-1];let _=Yh(s||".",Jh(f,a),ji(n.pathname,t)||n.pathname,h==="path");if(s==null&&(_.search=n.search,_.hash=n.hash),(s==null||s===""||s===".")&&m){let w=hm(_.search);if(m.route.index&&!w)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&w){let T=new URLSearchParams(_.search),P=T.getAll("index");T.delete("index"),P.filter(M=>M).forEach(M=>T.append("index",M));let j=T.toString();_.search=j?"?"+j:""}}return r&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Ui([t,_.pathname])),Do(_)}function $_(n,e,t,r){if(!r||!wR(r))return{path:t};if(r.formMethod&&!bR(r.formMethod))return{path:t,error:Wn(405,{method:r.formMethod})};let s=()=>({path:t,error:Wn(400,{type:"invalid-body"})}),a=r.formMethod||"get",u=n?a.toUpperCase():a.toLowerCase(),h=sE(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Br(u))return s();let T=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((P,j)=>{let[M,U]=j;return""+P+M+"="+U+`
`},""):String(r.body);return{path:t,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:void 0,text:T}}}else if(r.formEncType==="application/json"){if(!Br(u))return s();try{let T=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:T,text:void 0}}}catch{return s()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let f,m;if(r.formData)f=Sp(r.formData),m=r.formData;else if(r.body instanceof FormData)f=Sp(r.body),m=r.body;else if(r.body instanceof URLSearchParams)f=r.body,m=Q_(f);else if(r.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(r.body),m=Q_(f)}catch{return s()}let _={formMethod:u,formAction:h,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Br(_.formMethod))return{path:t,submission:_};let w=js(t);return e&&w.search&&hm(w.search)&&f.append("index",""),w.search="?"+f,{path:Do(w),submission:_}}function q_(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function K_(n,e,t,r,s,a,u,h,f,m,_,w,T,P,j,M){let U=M?lr(M[1])?M[1].error:M[1].data:void 0,oe=n.createURL(e.location),H=n.createURL(s),ee=t;a&&e.errors?ee=q_(t,Object.keys(e.errors)[0],!0):M&&lr(M[1])&&(ee=q_(t,M[0]));let ae=M?M[1].statusCode:void 0,de=u&&ae&&ae>=400,me=ee.filter((R,A)=>{let{route:x}=R;if(x.lazy)return!0;if(x.loader==null)return!1;if(a)return Tp(x,e.loaderData,e.errors);if(ER(e.loaderData,e.matches[A],R)||f.some(k=>k===R.route.id))return!0;let N=e.matches[A],L=R;return G_(R,At({currentUrl:oe,currentParams:N.params,nextUrl:H,nextParams:L.params},r,{actionResult:U,actionStatus:ae,defaultShouldRevalidate:de?!1:h||oe.pathname+oe.search===H.pathname+H.search||oe.search!==H.search||rE(N,L)}))}),I=[];return w.forEach((R,A)=>{if(a||!t.some(Ye=>Ye.route.id===R.routeId)||_.has(A))return;let x=wo(P,R.path,j);if(!x){I.push({key:A,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(A),L=Zl(x,R.path),k=!1;T.has(A)?k=!1:m.has(A)?(m.delete(A),k=!0):N&&N.state!=="idle"&&N.data===void 0?k=h:k=G_(L,At({currentUrl:oe,currentParams:e.matches[e.matches.length-1].params,nextUrl:H,nextParams:t[t.length-1].params},r,{actionResult:U,actionStatus:ae,defaultShouldRevalidate:de?!1:h})),k&&I.push({key:A,routeId:R.routeId,path:R.path,matches:x,match:L,controller:new AbortController})}),[me,I]}function Tp(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function ER(n,e,t){let r=!e||t.route.id!==e.route.id,s=n[t.route.id]===void 0;return r||s}function rE(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function G_(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function W_(n,e,t,r,s){var a;let u;if(n){let m=r[n];Ke(m,"No route found to patch children into: routeId = "+n),m.children||(m.children=[]),u=m.children}else u=t;let h=e.filter(m=>!u.some(_=>iE(m,_))),f=Sh(h,s,[n||"_","patch",String(((a=u)==null?void 0:a.length)||"0")],r);u.push(...f)}function iE(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>iE(t,a))}):!1}async function IR(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];Ke(s,"No route found in manifest");let a={};for(let u in r){let f=s[u]!==void 0&&u!=="hasErrorBoundary";$a(!f,'Route "'+s.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!f&&!GS.has(u)&&(a[u]=r[u])}Object.assign(s,a),Object.assign(s,At({},e(s),{lazy:void 0}))}async function TR(n){let{matches:e}=n,t=e.filter(s=>s.shouldLoad);return(await Promise.all(t.map(s=>s.resolve()))).reduce((s,a,u)=>Object.assign(s,{[t[u].route.id]:a}),{})}async function SR(n,e,t,r,s,a,u,h,f,m){let _=a.map(P=>P.route.lazy?IR(P.route,f,h):void 0),w=a.map((P,j)=>{let M=_[j],U=s.some(H=>H.route.id===P.route.id);return At({},P,{shouldLoad:U,resolve:async H=>(H&&r.method==="GET"&&(P.route.lazy||P.route.loader)&&(U=!0),U?RR(e,r,P,M,H,m):Promise.resolve({type:ft.data,result:void 0}))})}),T=await n({matches:w,request:r,params:a[0].params,fetcherKey:u,context:m});try{await Promise.all(_)}catch{}return T}async function RR(n,e,t,r,s,a){let u,h,f=m=>{let _,w=new Promise((j,M)=>_=M);h=()=>_(),e.signal.addEventListener("abort",h);let T=j=>typeof m!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):m({request:e,params:t.params,context:a},...j!==void 0?[j]:[]),P=(async()=>{try{return{type:"data",result:await(s?s(M=>T(M)):T())}}catch(j){return{type:"error",result:j}}})();return Promise.race([P,w])};try{let m=t.route[n];if(r)if(m){let _,[w]=await Promise.all([f(m).catch(T=>{_=T}),r]);if(_!==void 0)throw _;u=w}else if(await r,m=t.route[n],m)u=await f(m);else if(n==="action"){let _=new URL(e.url),w=_.pathname+_.search;throw Wn(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:ft.data,result:void 0};else if(m)u=await f(m);else{let _=new URL(e.url),w=_.pathname+_.search;throw Wn(404,{pathname:w})}Ke(u.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(m){return{type:ft.error,result:m}}finally{h&&e.signal.removeEventListener("abort",h)}return u}async function AR(n){let{result:e,type:t}=n;if(oE(e)){let w;try{let T=e.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?e.body==null?w=null:w=await e.json():w=await e.text()}catch(T){return{type:ft.error,error:T}}return t===ft.error?{type:ft.error,error:new Ah(e.status,e.statusText,w),statusCode:e.status,headers:e.headers}:{type:ft.data,data:w,statusCode:e.status,headers:e.headers}}if(t===ft.error){if(ev(e)){var r,s;if(e.data instanceof Error){var a,u;return{type:ft.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:ft.error,error:new Ah(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:pu(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:ft.error,error:e,statusCode:pu(e)?e.status:void 0}}if(DR(e)){var h,f;return{type:ft.deferred,deferredData:e,statusCode:(h=e.init)==null?void 0:h.status,headers:((f=e.init)==null?void 0:f.headers)&&new Headers(e.init.headers)}}if(ev(e)){var m,_;return{type:ft.data,data:e.data,statusCode:(m=e.init)==null?void 0:m.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:ft.data,data:e}}function PR(n,e,t,r,s,a){let u=n.headers.get("Location");if(Ke(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!um.test(u)){let h=r.slice(0,r.findIndex(f=>f.route.id===t)+1);u=Ip(new URL(e.url),h,s,!0,u,a),n.headers.set("Location",u)}return n}function H_(n,e,t){if(um.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=ji(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return n}function Aa(n,e,t,r){let s=n.createURL(sE(e)).toString(),a={signal:t};if(r&&Br(r.formMethod)){let{formMethod:u,formEncType:h}=r;a.method=u.toUpperCase(),h==="application/json"?(a.headers=new Headers({"Content-Type":h}),a.body=JSON.stringify(r.json)):h==="text/plain"?a.body=r.text:h==="application/x-www-form-urlencoded"&&r.formData?a.body=Sp(r.formData):a.body=r.formData}return new Request(s,a)}function Sp(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function Q_(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function CR(n,e,t,r,s){let a={},u=null,h,f=!1,m={},_=t&&lr(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let T=w.route.id,P=e[T];if(Ke(!Ao(P),"Cannot handle redirect results in processLoaderData"),lr(P)){let j=P.error;_!==void 0&&(j=_,_=void 0),u=u||{};{let M=Eo(n,T);u[M.route.id]==null&&(u[M.route.id]=j)}a[T]=void 0,f||(f=!0,h=pu(P.error)?P.error.status:500),P.headers&&(m[T]=P.headers)}else xs(P)?(r.set(T,P.deferredData),a[T]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!f&&(h=P.statusCode),P.headers&&(m[T]=P.headers)):(a[T]=P.data,P.statusCode&&P.statusCode!==200&&!f&&(h=P.statusCode),P.headers&&(m[T]=P.headers))}),_!==void 0&&t&&(u={[t[0]]:_},a[t[0]]=void 0),{loaderData:a,errors:u,statusCode:h||200,loaderHeaders:m}}function J_(n,e,t,r,s,a,u){let{loaderData:h,errors:f}=CR(e,t,r,u);return s.forEach(m=>{let{key:_,match:w,controller:T}=m,P=a[_];if(Ke(P,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(lr(P)){let j=Eo(n.matches,w?.route.id);f&&f[j.route.id]||(f=At({},f,{[j.route.id]:P.error})),n.fetchers.delete(_)}else if(Ao(P))Ke(!1,"Unhandled fetcher revalidation redirect");else if(xs(P))Ke(!1,"Unhandled fetcher deferred data");else{let j=Rs(P.data);n.fetchers.set(_,j)}}),{loaderData:h,errors:f}}function Y_(n,e,t,r){let s=At({},e);for(let a of t){let u=a.route.id;if(e.hasOwnProperty(u)?e[u]!==void 0&&(s[u]=e[u]):n[u]!==void 0&&a.route.loader&&(s[u]=n[u]),r&&r.hasOwnProperty(u))break}return s}function X_(n){return n?lr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Eo(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function Z_(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Wn(n,e){let{pathname:t,routeId:r,method:s,type:a,message:u}=e===void 0?{}:e,h="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(h="Bad Request",s&&t&&r?f="You made a "+s+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?f="defer() is not supported in actions":a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(h="Forbidden",f='Route "'+r+'" does not match URL "'+t+'"'):n===404?(h="Not Found",f='No route matches URL "'+t+'"'):n===405&&(h="Method Not Allowed",s&&t&&r?f="You made a "+s.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(f='Invalid request method "'+s.toUpperCase()+'"')),new Ah(n||500,h,new Error(f),!0)}function th(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(Ao(s))return{key:r,result:s}}}function sE(n){let e=typeof n=="string"?js(n):n;return Do(At({},e,{hash:""}))}function kR(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function xR(n){return oE(n.result)&&mR.has(n.result.status)}function xs(n){return n.type===ft.deferred}function lr(n){return n.type===ft.error}function Ao(n){return(n&&n.type)===ft.redirect}function ev(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function DR(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function oE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function bR(n){return pR.has(n.toLowerCase())}function Br(n){return dR.has(n.toLowerCase())}async function NR(n,e,t,r,s){let a=Object.entries(e);for(let u=0;u<a.length;u++){let[h,f]=a[u],m=n.find(T=>T?.route.id===h);if(!m)continue;let _=r.find(T=>T.route.id===m.route.id),w=_!=null&&!rE(_,m)&&(s&&s[m.route.id])!==void 0;xs(f)&&w&&await cm(f,t,!1).then(T=>{T&&(e[h]=T)})}}async function VR(n,e,t){for(let r=0;r<t.length;r++){let{key:s,routeId:a,controller:u}=t[r],h=e[s];n.find(m=>m?.route.id===a)&&xs(h)&&(Ke(u,"Expected an AbortController for revalidating fetcher deferred result"),await cm(h,u.signal,!0).then(m=>{m&&(e[s]=m)}))}}async function cm(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:ft.data,data:n.deferredData.unwrappedData}}catch(s){return{type:ft.error,error:s}}return{type:ft.data,data:n.deferredData.data}}}function hm(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Zl(n,e){let t=typeof e=="string"?js(e).search:e.search;if(n[n.length-1].route.index&&hm(t||""))return n[n.length-1];let r=eE(n);return r[r.length-1]}function tv(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:u}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function ap(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LR(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Gl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function OR(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Rs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function MR(n,e){try{let t=n.sessionStorage.getItem(nE);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function FR(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(nE,JSON.stringify(t))}catch(r){$a(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(){return Ph=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ph.apply(this,arguments)}const Du=Y.createContext(null),dm=Y.createContext(null),qi=Y.createContext(null),fm=Y.createContext(null),mi=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),aE=Y.createContext(null);function UR(n,e){let{relative:t}=e===void 0?{}:e;sl()||Ke(!1);let{basename:r,navigator:s}=Y.useContext(qi),{hash:a,pathname:u,search:h}=Xh(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:Ui([r,u])),s.createHref({pathname:f,search:h,hash:a})}function sl(){return Y.useContext(fm)!=null}function Bo(){return sl()||Ke(!1),Y.useContext(fm).location}function lE(n){Y.useContext(qi).static||Y.useLayoutEffect(n)}function uE(){let{isDataRoute:n}=Y.useContext(mi);return n?ZR():jR()}function jR(){sl()||Ke(!1);let n=Y.useContext(Du),{basename:e,future:t,navigator:r}=Y.useContext(qi),{matches:s}=Y.useContext(mi),{pathname:a}=Bo(),u=JSON.stringify(Jh(s,t.v7_relativeSplatPath)),h=Y.useRef(!1);return lE(()=>{h.current=!0}),Y.useCallback(function(m,_){if(_===void 0&&(_={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let w=Yh(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Ui([e,w.pathname])),(_.replace?r.replace:r.push)(w,_.state,_)},[e,r,u,a,n])}const BR=Y.createContext(null);function zR(n){let e=Y.useContext(mi).outlet;return e&&Y.createElement(BR.Provider,{value:n},e)}function HN(){let{matches:n}=Y.useContext(mi),e=n[n.length-1];return e?e.params:{}}function Xh(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=Y.useContext(qi),{matches:s}=Y.useContext(mi),{pathname:a}=Bo(),u=JSON.stringify(Jh(s,r.v7_relativeSplatPath));return Y.useMemo(()=>Yh(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function $R(n,e,t,r){sl()||Ke(!1);let{navigator:s}=Y.useContext(qi),{matches:a}=Y.useContext(mi),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Bo(),_;_=m;let w=_.pathname||"/",T=w;if(f!=="/"){let M=f.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(M.length).join("/")}let P=wo(n,{pathname:T});return HR(P&&P.map(M=>Object.assign({},M,{params:Object.assign({},h,M.params),pathname:Ui([f,s.encodeLocation?s.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?f:Ui([f,s.encodeLocation?s.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,t,r)}function qR(){let n=XR(),e=pu(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:s},t):null,null)}const KR=Y.createElement(qR,null);class GR extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(mi.Provider,{value:this.props.routeContext},Y.createElement(aE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WR(n){let{routeContext:e,match:t,children:r}=n,s=Y.useContext(Du);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(mi.Provider,{value:e},r)}function HR(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(s=t)==null?void 0:s.errors;if(h!=null){let _=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);_>=0||Ke(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let w=u[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=_),w.route.id){let{loaderData:T,errors:P}=t,j=w.route.loader&&T[w.route.id]===void 0&&(!P||P[w.route.id]===void 0);if(w.route.lazy||j){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,w,T)=>{let P,j=!1,M=null,U=null;t&&(P=h&&w.route.id?h[w.route.id]:void 0,M=w.route.errorElement||KR,f&&(m<0&&T===0?(eA("route-fallback"),j=!0,U=null):m===T&&(j=!0,U=w.route.hydrateFallbackElement||null)));let oe=e.concat(u.slice(0,T+1)),H=()=>{let ee;return P?ee=M:j?ee=U:w.route.Component?ee=Y.createElement(w.route.Component,null):w.route.element?ee=w.route.element:ee=_,Y.createElement(WR,{match:w,routeContext:{outlet:_,matches:oe,isDataRoute:t!=null},children:ee})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?Y.createElement(GR,{location:t.location,revalidation:t.revalidation,component:M,error:P,children:H(),routeContext:{outlet:null,matches:oe,isDataRoute:!0}}):H()},null)}var cE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(cE||{}),hE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(hE||{});function QR(n){let e=Y.useContext(Du);return e||Ke(!1),e}function JR(n){let e=Y.useContext(dm);return e||Ke(!1),e}function YR(n){let e=Y.useContext(mi);return e||Ke(!1),e}function dE(n){let e=YR(),t=e.matches[e.matches.length-1];return t.route.id||Ke(!1),t.route.id}function XR(){var n;let e=Y.useContext(aE),t=JR(),r=dE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function ZR(){let{router:n}=QR(cE.UseNavigateStable),e=dE(hE.UseNavigateStable),t=Y.useRef(!1);return lE(()=>{t.current=!0}),Y.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Ph({fromRouteId:e},a)))},[n,e])}const nv={};function eA(n,e,t){nv[n]||(nv[n]=!0)}function tA(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function nA(n){let{to:e,replace:t,state:r,relative:s}=n;sl()||Ke(!1);let{future:a,static:u}=Y.useContext(qi),{matches:h}=Y.useContext(mi),{pathname:f}=Bo(),m=uE(),_=Yh(e,Jh(h,a.v7_relativeSplatPath),f,s==="path"),w=JSON.stringify(_);return Y.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:s}),[m,w,s,t,r]),null}function rA(n){return zR(n.context)}function iA(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Ht.Pop,navigator:a,static:u=!1,future:h}=n;sl()&&Ke(!1);let f=e.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:f,navigator:a,static:u,future:Ph({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=js(r));let{pathname:_="/",search:w="",hash:T="",state:P=null,key:j="default"}=r,M=Y.useMemo(()=>{let U=ji(_,f);return U==null?null:{location:{pathname:U,search:w,hash:T,state:P,key:j},navigationType:s}},[f,_,w,T,P,j,s]);return M==null?null:Y.createElement(qi.Provider,{value:m},Y.createElement(fm.Provider,{children:t,value:M}))}new Promise(()=>{});function sA(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:Y.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Y.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:Y.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qa.apply(this,arguments)}function fE(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function oA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aA(n,e){return n.button===0&&(!e||e==="_self")&&!oA(n)}const lA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cA="6";try{window.__reactRouterVersion=cA}catch{}function hA(n,e){return vR({basename:e?.basename,future:qa({},e?.future,{v7_prependBasename:!0}),history:$S({window:e?.window}),hydrationData:e?.hydrationData||dA(),routes:n,mapRouteProperties:sA,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function dA(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=qa({},e,{errors:fA(e.errors)})),e}function fA(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new Ah(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let u=new a(s.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}const pE=Y.createContext({isTransitioning:!1}),pA=Y.createContext(new Map),mA="startTransition",rv=LS[mA],gA="flushSync",iv=zS[gA];function yA(n){rv?rv(n):n()}function Wl(n){iv?iv(n):n()}let _A=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function vA(n){let{fallbackElement:e,router:t,future:r}=n,[s,a]=Y.useState(t.state),[u,h]=Y.useState(),[f,m]=Y.useState({isTransitioning:!1}),[_,w]=Y.useState(),[T,P]=Y.useState(),[j,M]=Y.useState(),U=Y.useRef(new Map),{v7_startTransition:oe}=r||{},H=Y.useCallback(R=>{oe?yA(R):R()},[oe]),ee=Y.useCallback((R,A)=>{let{deletedFetchers:x,flushSync:N,viewTransitionOpts:L}=A;R.fetchers.forEach((Ye,_t)=>{Ye.data!==void 0&&U.current.set(_t,Ye.data)}),x.forEach(Ye=>U.current.delete(Ye));let k=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!L||k){N?Wl(()=>a(R)):H(()=>a(R));return}if(N){Wl(()=>{T&&(_&&_.resolve(),T.skipTransition()),m({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let Ye=t.window.document.startViewTransition(()=>{Wl(()=>a(R))});Ye.finished.finally(()=>{Wl(()=>{w(void 0),P(void 0),h(void 0),m({isTransitioning:!1})})}),Wl(()=>P(Ye));return}T?(_&&_.resolve(),T.skipTransition(),M({state:R,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(h(R),m({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[t.window,T,_,U,H]);Y.useLayoutEffect(()=>t.subscribe(ee),[t,ee]),Y.useEffect(()=>{f.isTransitioning&&!f.flushSync&&w(new _A)},[f]),Y.useEffect(()=>{if(_&&u&&t.window){let R=u,A=_.promise,x=t.window.document.startViewTransition(async()=>{H(()=>a(R)),await A});x.finished.finally(()=>{w(void 0),P(void 0),h(void 0),m({isTransitioning:!1})}),P(x)}},[H,u,_,t.window]),Y.useEffect(()=>{_&&u&&s.location.key===u.location.key&&_.resolve()},[_,T,s.location,u]),Y.useEffect(()=>{!f.isTransitioning&&j&&(h(j.state),m({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}),M(void 0))},[f.isTransitioning,j]),Y.useEffect(()=>{},[]);let ae=Y.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:R=>t.navigate(R),push:(R,A,x)=>t.navigate(R,{state:A,preventScrollReset:x?.preventScrollReset}),replace:(R,A,x)=>t.navigate(R,{replace:!0,state:A,preventScrollReset:x?.preventScrollReset})}),[t]),de=t.basename||"/",me=Y.useMemo(()=>({router:t,navigator:ae,static:!1,basename:de}),[t,ae,de]),I=Y.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return Y.useEffect(()=>tA(r,t.future),[r,t.future]),Y.createElement(Y.Fragment,null,Y.createElement(Du.Provider,{value:me},Y.createElement(dm.Provider,{value:s},Y.createElement(pA.Provider,{value:U.current},Y.createElement(pE.Provider,{value:f},Y.createElement(iA,{basename:de,location:s.location,navigationType:s.historyAction,navigator:ae,future:I},s.initialized||t.future.v7_partialHydration?Y.createElement(wA,{routes:t.routes,future:t.future,state:s}):e))))),null)}const wA=Y.memo(EA);function EA(n){let{routes:e,future:t,state:r}=n;return $R(e,void 0,r,t)}const IA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mE=Y.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:u,state:h,target:f,to:m,preventScrollReset:_,viewTransition:w}=e,T=fE(e,lA),{basename:P}=Y.useContext(qi),j,M=!1;if(typeof m=="string"&&TA.test(m)&&(j=m,IA))try{let ee=new URL(window.location.href),ae=m.startsWith("//")?new URL(ee.protocol+m):new URL(m),de=ji(ae.pathname,P);ae.origin===ee.origin&&de!=null?m=de+ae.search+ae.hash:M=!0}catch{}let U=UR(m,{relative:s}),oe=AA(m,{replace:u,state:h,target:f,preventScrollReset:_,relative:s,viewTransition:w});function H(ee){r&&r(ee),ee.defaultPrevented||oe(ee)}return Y.createElement("a",qa({},T,{href:j||U,onClick:M||a?r:H,ref:t,target:f}))}),SA=Y.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:u=!1,style:h,to:f,viewTransition:m,children:_}=e,w=fE(e,uA),T=Xh(f,{relative:w.relative}),P=Bo(),j=Y.useContext(dm),{navigator:M,basename:U}=Y.useContext(qi),oe=j!=null&&PA(T)&&m===!0,H=M.encodeLocation?M.encodeLocation(T).pathname:T.pathname,ee=P.pathname,ae=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(ee=ee.toLowerCase(),ae=ae?ae.toLowerCase():null,H=H.toLowerCase()),ae&&U&&(ae=ji(ae,U)||ae);const de=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let me=ee===H||!u&&ee.startsWith(H)&&ee.charAt(de)==="/",I=ae!=null&&(ae===H||!u&&ae.startsWith(H)&&ae.charAt(H.length)==="/"),R={isActive:me,isPending:I,isTransitioning:oe},A=me?r:void 0,x;typeof a=="function"?x=a(R):x=[a,me?"active":null,I?"pending":null,oe?"transitioning":null].filter(Boolean).join(" ");let N=typeof h=="function"?h(R):h;return Y.createElement(mE,qa({},w,{"aria-current":A,className:x,ref:t,style:N,to:f,viewTransition:m}),typeof _=="function"?_(R):_)});var Rp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Rp||(Rp={}));var sv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sv||(sv={}));function RA(n){let e=Y.useContext(Du);return e||Ke(!1),e}function AA(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:u,viewTransition:h}=e===void 0?{}:e,f=uE(),m=Bo(),_=Xh(n,{relative:u});return Y.useCallback(w=>{if(aA(w,t)){w.preventDefault();let T=r!==void 0?r:Do(m)===Do(_);f(n,{replace:T,state:s,preventScrollReset:a,relative:u,viewTransition:h})}},[m,f,_,r,s,t,n,a,u,h])}function PA(n,e){e===void 0&&(e={});let t=Y.useContext(pE);t==null&&Ke(!1);let{basename:r}=RA(Rp.useViewTransitionState),s=Xh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=ji(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=ji(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Rh(s.pathname,u)!=null||Rh(s.pathname,a)!=null}const CA="modulepreload",kA=function(n){return"/fsae-dashboard/"+n},ov={},Bs=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(_=>Promise.resolve(_).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");s=f(t.map(m=>{if(m=kA(m),m in ov)return;ov[m]=!0;const _=m.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const T=document.createElement("link");if(T.rel=_?"stylesheet":CA,_||(T.as="script"),T.crossOrigin="",T.href=m,h&&T.setAttribute("nonce",h),document.head.appendChild(T),_)return new Promise((P,j)=>{T.addEventListener("load",P),T.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return s.then(u=>{for(const h of u||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})};var av={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},xA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},yE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,h=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,w=(a&3)<<4|h>>4;let T=(h&15)<<2|m>>6,P=m&63;f||(P=64,u||(T=64)),r.push(t[_],t[w],t[T],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||m==null||w==null)throw new DA;const T=a<<2|h>>4;if(r.push(T),m!==64){const P=h<<4&240|m>>2;if(r.push(P),w!==64){const j=m<<6&192|w;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bA=function(n){const e=gE(n);return yE.encodeByteArray(e,!0)},_E=function(n){return bA(n).replace(/\./g,"")},vE=function(n){try{return yE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=()=>NA().__FIREBASE_DEFAULTS__,LA=()=>{if(typeof process>"u"||typeof av>"u")return;const n=av.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&vE(n[1]);return e&&JSON.parse(e)},Zh=()=>{try{return VA()||LA()||OA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wE=n=>{var e,t;return(t=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},MA=n=>{const e=wE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},EE=()=>{var n;return(n=Zh())===null||n===void 0?void 0:n.config},IE=n=>{var e;return(e=Zh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function jA(){var n;const e=(n=Zh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qA(){const n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function TE(){return!jA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SE(){try{return typeof indexedDB=="object"}catch{return!1}}function KA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="FirebaseError";class gi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=GA,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?WA(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new gi(s,h,r)}}function WA(n,e){return n.replace(HA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HA=/\{\$([^}]+)}/g;function QA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(lv(a)&&lv(u)){if(!mu(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function lv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JA(n,e){const t=new YA(n,e);return t.subscribe.bind(t)}class YA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=lp),s.error===void 0&&(s.error=lp),s.complete===void 0&&(s.complete=lp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n){return n&&n._delegate?n._delegate:n}class Os{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new FA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tP(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eP(n){return n===_o?void 0:n}function tP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(et||(et={}));const rP={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},iP=et.INFO,sP={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},oP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=sP[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=iP,this._logHandler=oP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const aP=(n,e)=>e.some(t=>n instanceof t);let uv,cv;function lP(){return uv||(uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uP(){return cv||(cv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RE=new WeakMap,Ap=new WeakMap,AE=new WeakMap,up=new WeakMap,mm=new WeakMap;function cP(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(bs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&RE.set(t,n)}).catch(()=>{}),mm.set(e,n),e}function hP(n){if(Ap.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Ap.set(n,e)}let Pp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function dP(n){Pp=n(Pp)}function fP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cp(this),e,...t);return AE.set(r,e.sort?e.sort():[e]),bs(r)}:uP().includes(n)?function(...e){return n.apply(cp(this),e),bs(RE.get(this))}:function(...e){return bs(n.apply(cp(this),e))}}function pP(n){return typeof n=="function"?fP(n):(n instanceof IDBTransaction&&hP(n),aP(n,lP())?new Proxy(n,Pp):n)}function bs(n){if(n instanceof IDBRequest)return cP(n);if(up.has(n))return up.get(n);const e=pP(n);return e!==n&&(up.set(n,e),mm.set(e,n)),e}const cp=n=>mm.get(n);function mP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),h=bs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(bs(u.result),f.oldVersion,f.newVersion,bs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const gP=["get","getKey","getAll","getAllKeys","count"],yP=["put","add","delete","clear"],hp=new Map;function hv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=yP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gP.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&f.done]))[0]};return hp.set(e,a),a}dP(n=>({...n,get:(e,t,r)=>hv(e,t)||n.get(e,t,r),has:(e,t)=>!!hv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vP(n){const e=n.getComponent();return e?.type==="VERSION"}const Cp="@firebase/app",dv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new pm("@firebase/app"),wP="@firebase/app-compat",EP="@firebase/analytics-compat",IP="@firebase/analytics",TP="@firebase/app-check-compat",SP="@firebase/app-check",RP="@firebase/auth",AP="@firebase/auth-compat",PP="@firebase/database",CP="@firebase/data-connect",kP="@firebase/database-compat",xP="@firebase/functions",DP="@firebase/functions-compat",bP="@firebase/installations",NP="@firebase/installations-compat",VP="@firebase/messaging",LP="@firebase/messaging-compat",OP="@firebase/performance",MP="@firebase/performance-compat",FP="@firebase/remote-config",UP="@firebase/remote-config-compat",jP="@firebase/storage",BP="@firebase/storage-compat",zP="@firebase/firestore",$P="@firebase/vertexai-preview",qP="@firebase/firestore-compat",KP="firebase",GP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="[DEFAULT]",WP={[Cp]:"fire-core",[wP]:"fire-core-compat",[IP]:"fire-analytics",[EP]:"fire-analytics-compat",[SP]:"fire-app-check",[TP]:"fire-app-check-compat",[RP]:"fire-auth",[AP]:"fire-auth-compat",[PP]:"fire-rtdb",[CP]:"fire-data-connect",[kP]:"fire-rtdb-compat",[xP]:"fire-fn",[DP]:"fire-fn-compat",[bP]:"fire-iid",[NP]:"fire-iid-compat",[VP]:"fire-fcm",[LP]:"fire-fcm-compat",[OP]:"fire-perf",[MP]:"fire-perf-compat",[FP]:"fire-rc",[UP]:"fire-rc-compat",[jP]:"fire-gcs",[BP]:"fire-gcs-compat",[zP]:"fire-fst",[qP]:"fire-fst-compat",[$P]:"fire-vertex","fire-js":"fire-js",[KP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new Map,HP=new Map,xp=new Map;function fv(n,e){try{n.container.addComponent(e)}catch(t){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bo(n){const e=n.name;if(xp.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,n);for(const t of gu.values())fv(t,n);for(const t of HP.values())fv(t,n);return!0}function ed(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new bu("app","Firebase",QP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=GP;function PE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ns.create("bad-app-name",{appName:String(s)});if(t||(t=EE()),!t)throw Ns.create("no-options");const a=gu.get(s);if(a){if(mu(t,a.options)&&mu(r,a.config))return a;throw Ns.create("duplicate-app",{appName:s})}const u=new nP(s);for(const f of xp.values())u.addComponent(f);const h=new JP(t,r,u);return gu.set(s,h),h}function gm(n=kp){const e=gu.get(n);if(!e&&n===kp&&EE())return PE();if(!e)throw Ns.create("no-app",{appName:n});return e}function YP(){return Array.from(gu.values())}function ui(n,e,t){var r;let s=(r=WP[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(h.join(" "));return}bo(new Os(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="firebase-heartbeat-database",ZP=1,yu="firebase-heartbeat-store";let dp=null;function CE(){return dp||(dp=mP(XP,ZP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ns.create("idb-open",{originalErrorMessage:n.message})})),dp}async function eC(n){try{const t=(await CE()).transaction(yu),r=await t.objectStore(yu).get(kE(n));return await t.done,r}catch(e){if(e instanceof gi)Bi.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});Bi.warn(t.message)}}}async function pv(n,e){try{const r=(await CE()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,kE(n)),await r.done}catch(t){if(t instanceof gi)Bi.warn(t.message);else{const r=Ns.create("idb-set",{originalErrorMessage:t?.message});Bi.warn(r.message)}}}function kE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1024,nC=720*60*60*1e3;class rC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=mv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=nC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=mv(),{heartbeatsToSend:r,unsentEntries:s}=iC(this._heartbeatsCache.heartbeats),a=_E(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Bi.warn(t),""}}}function mv(){return new Date().toISOString().substring(0,10)}function iC(n,e=tC){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),gv(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),gv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SE()?KA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return pv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return pv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gv(n){return _E(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n){bo(new Os("platform-logger",e=>new _P(e),"PRIVATE")),bo(new Os("heartbeat",e=>new rC(e),"PRIVATE")),ui(Cp,dv,n),ui(Cp,dv,"esm2017"),ui("fire-js","")}oC("");function ym(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aC=xE,DE=new bu("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new pm("@firebase/auth");function lC(n,...e){Ch.logLevel<=et.WARN&&Ch.warn(`Auth (${ol}): ${n}`,...e)}function ch(n,...e){Ch.logLevel<=et.ERROR&&Ch.error(`Auth (${ol}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(n,...e){throw vm(n,...e)}function $r(n,...e){return vm(n,...e)}function _m(n,e,t){const r=Object.assign(Object.assign({},aC()),{[e]:t});return new bu("auth","Firebase",r).create(e,{appName:n.name})}function Co(n){return _m(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uC(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&di(n,"argument-error"),_m(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return DE.create(n,...e)}function Ue(n,e,...t){if(!n)throw vm(e,...t)}function Li(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ch(e),new Error(e)}function zi(n,e){n||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function cC(){return yv()==="http:"||yv()==="https:"}function yv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cC()||zA()||"connection"in navigator)?navigator.onLine:!0}function dC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t){this.shortDelay=e,this.longDelay=t,zi(t>e,"Short delay should be less than long delay!"),this.isMobile=UA()||$A()}get(){return hC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n,e){zi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Vu(3e4,6e4);function Em(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function al(n,e,t,r,s={}){return NE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=Nu(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return BA()||(m.referrerPolicy="no-referrer"),bE.fetch()(VE(n,n.config.apiHost,t,h),m)})}async function NE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},fC),e);try{const s=new gC(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw nh(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw nh(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw nh(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _m(n,_,m);di(n,_)}}catch(s){if(s instanceof gi)throw s;di(n,"network-request-failed",{message:String(s)})}}async function mC(n,e,t,r,s={}){const a=await al(n,e,t,r,s);return"mfaPendingCredential"in a&&di(n,"multi-factor-auth-required",{_serverResponse:a}),a}function VE(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?wm(n.config,s):`${n.config.apiScheme}://${s}`}class gC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($r(this.auth,"network-request-failed")),pC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=$r(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(n,e){return al(n,"POST","/v1/accounts:delete",e)}async function LE(n,e){return al(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _C(n,e=!1){const t=Jt(n),r=await t.getIdToken(e),s=Im(r);Ue(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:r,authTime:su(fp(s.auth_time)),issuedAtTime:su(fp(s.iat)),expirationTime:su(fp(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function fp(n){return Number(n)*1e3}function Im(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ch("JWT malformed, contained fewer than 3 sections"),null;try{const s=vE(t);return s?JSON.parse(s):(ch("Failed to decode base64 JWT payload"),null)}catch(s){return ch("Caught error parsing JWT payload as JSON",s?.toString()),null}}function _v(n){const e=Im(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gi&&vC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function vC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await _u(n,LE(t,{idToken:r}));Ue(s?.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?OE(a.providerUserInfo):[],h=IC(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!h?.length,_=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new bp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function EC(n){const e=Jt(n);await kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IC(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function OE(n){return n.map(e=>{var{providerId:t}=e,r=ym(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(n,e){const t=await NE(n,{},async()=>{const r=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=VE(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",bE.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SC(n,e){return al(n,"POST","/v2/accounts:revokeToken",Em(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_v(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=_v(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await TC(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new Ma;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Ue(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Ue(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Oi{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new bp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _u(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _C(this,e)}reload(){return EC(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await _u(this,yC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,h,f,m,_;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,j=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(h=t.tenantId)!==null&&h!==void 0?h:void 0,U=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,oe=(m=t.createdAt)!==null&&m!==void 0?m:void 0,H=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ee,emailVerified:ae,isAnonymous:de,providerData:me,stsTokenManager:I}=t;Ue(ee&&I,e,"internal-error");const R=Ma.fromJSON(this.name,I);Ue(typeof ee=="string",e,"internal-error"),Es(w,e.name),Es(T,e.name),Ue(typeof ae=="boolean",e,"internal-error"),Ue(typeof de=="boolean",e,"internal-error"),Es(P,e.name),Es(j,e.name),Es(M,e.name),Es(U,e.name),Es(oe,e.name),Es(H,e.name);const A=new Oi({uid:ee,auth:e,email:T,emailVerified:ae,displayName:w,isAnonymous:de,photoURL:j,phoneNumber:P,tenantId:M,stsTokenManager:R,createdAt:oe,lastLoginAt:H});return me&&Array.isArray(me)&&(A.providerData=me.map(x=>Object.assign({},x))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ma;s.updateFromServerResponse(t);const a=new Oi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ue(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?OE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,h=new Ma;h.updateFromIdToken(r);const f=new Oi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;function Mi(n){zi(n instanceof Function,"Expected a class definition");let e=vv.get(n);return e?(zi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ME.type="NONE";const wv=ME;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(n,e,t){return`firebase:${n}:${e}:${t}`}class Fa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=hh(this.userKey,s.apiKey,a),this.fullPersistenceKey=hh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Oi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Fa(Mi(wv),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Mi(wv);const u=hh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(u);if(_){const w=Oi._fromJSON(e,_);m!==a&&(h=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Fa(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Fa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(qE(e))return"Webos";if(UE(e))return"Safari";if((e.includes("chrome/")||jE(e))&&!e.includes("edge/"))return"Chrome";if(zE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function FE(n=tn()){return/firefox\//i.test(n)}function UE(n=tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jE(n=tn()){return/crios\//i.test(n)}function BE(n=tn()){return/iemobile/i.test(n)}function zE(n=tn()){return/android/i.test(n)}function $E(n=tn()){return/blackberry/i.test(n)}function qE(n=tn()){return/webos/i.test(n)}function Tm(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RC(n=tn()){var e;return Tm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AC(){return qA()&&document.documentMode===10}function KE(n=tn()){return Tm(n)||zE(n)||qE(n)||$E(n)||/windows phone/i.test(n)||BE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n,e=[]){let t;switch(n){case"Browser":t=Ev(tn());break;case"Worker":t=`${Ev(tn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(n,e={}){return al(n,"GET","/v2/passwordPolicy",Em(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=6;class xC{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:kC,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new PC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mi(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Fa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await LE(this,{idToken:e}),r=await Oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject(Co(this));const t=e?Jt(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CC(this),t=new xC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await SC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mi(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[Mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&lC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function td(n){return Jt(n)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=JA(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bC(n){Sm=n}function NC(n){return Sm.loadJS(n)}function VC(){return Sm.gapiScript}function LC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n,e){const t=ed(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(mu(a,e??{}))return s;di(s,"already-initialized")}return t.initialize({options:e})}function MC(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Mi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function FC(n,e,t){const r=td(n);Ue(r._canInitEmulator,r,"emulator-config-failed"),Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=WE(e),{host:u,port:h}=UC(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),jC()}function WE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function UC(n){const e=WE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Tv(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:Tv(u)}}}function Tv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,t){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(n,e){return mC(n,"POST","/v1/accounts:signInWithIdp",Em(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="http://localhost";class No extends HE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):di("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=ym(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new No(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ua(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ua(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ua(e,t)}buildRequest(){const e={requestUri:BC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends Rm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Lu{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return No._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ni.credential(t,r)}catch{return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com";Ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Lu{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Lu{constructor(){super("twitter.com")}static credential(e,t){return No._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Cs.credential(t,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Oi._fromIdTokenResponse(e,r,s),u=Sv(r);return new Ka({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Sv(r);return new Ka({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Sv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends gi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new xh(e,t,r,s)}}function QE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(n,a,e,r):a})}async function zC(n,e,t=!1){const r=await _u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ka._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(n,e,t=!1){const{auth:r}=n;if(Vi(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const a=await _u(n,QE(r,s,e,n),t);Ue(a.idToken,r,"internal-error");const u=Im(a.idToken);Ue(u,r,"internal-error");const{sub:h}=u;return Ue(n.uid===h,r,"user-mismatch"),Ka._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&di(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(n,e,t=!1){if(Vi(n.app))return Promise.reject(Co(n));const r="signIn",s=await QE(n,r,e),a=await Ka._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}function KC(n,e,t,r){return Jt(n).onIdTokenChanged(e,t,r)}function GC(n,e,t){return Jt(n).beforeAuthStateChanged(e,t)}function JE(n,e,t,r){return Jt(n).onAuthStateChanged(e,t,r)}function WC(n){return Jt(n).signOut()}const Dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=1e3,QC=10;class XE extends YE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);AC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QC):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},HC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XE.type="LOCAL";const JC=XE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends YE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZE.type="SESSION";const eI=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await YC(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=Am("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function ZC(n){ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function ek(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function nk(){return tI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebaseLocalStorageDb",rk=1,bh="firebaseLocalStorage",rI="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rd(n,e){return n.transaction([bh],e?"readwrite":"readonly").objectStore(bh)}function ik(){const n=indexedDB.deleteDatabase(nI);return new Ou(n).toPromise()}function Np(){const n=indexedDB.open(nI,rk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(bh,{keyPath:rI})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(bh)?e(r):(r.close(),await ik(),e(await Np()))})})}async function Rv(n,e,t){const r=rd(n,!0).put({[rI]:e,value:t});return new Ou(r).toPromise()}async function sk(n,e){const t=rd(n,!1).get(e),r=await new Ou(t).toPromise();return r===void 0?null:r.value}function Av(n,e){const t=rd(n,!0).delete(e);return new Ou(t).toPromise()}const ok=800,ak=3;class iI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Np(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ak)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(nk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ek(),!this.activeServiceWorker)return;this.sender=new XC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Np();return await Rv(e,Dh,"1"),await Av(e,Dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Av(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=rd(s,!1).getAll();return new Ou(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iI.type="LOCAL";const lk=iI;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(n,e){return e?Mi(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends HE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ua(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ua(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uk(n){return qC(n.auth,new Pm(n),n.bypassAuthState)}function ck(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),$C(t,new Pm(n),n.bypassAuthState)}async function hk(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),zC(t,new Pm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uk;case"linkViaPopup":case"linkViaRedirect":return hk;case"reauthViaPopup":case"reauthViaRedirect":return ck;default:di(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new Vu(2e3,1e4);async function fk(n,e,t){if(Vi(n.app))return Promise.reject($r(n,"operation-not-supported-in-this-environment"));const r=td(n);uC(n,e,Rm);const s=sI(r,t);return new Po(r,"signInViaPopup",e,s).executeNotNull()}class Po extends oI{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){zi(this.filter.length===1,"Popup operations only handle one event");const e=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dk.get())};e()}}Po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="pendingRedirect",dh=new Map;class mk extends oI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const r=await gk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gk(n,e){const t=vk(e),r=_k(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function yk(n,e){dh.set(n._key(),e)}function _k(n){return Mi(n._redirectPersistence)}function vk(n){return hh(pk,n.config.apiKey,n.name)}async function wk(n,e,t=!1){if(Vi(n.app))return Promise.reject(Co(n));const r=td(n),s=sI(r,e),u=await new mk(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=600*1e3;class Ik{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!aI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError($r(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pv(e))}saveEventToCache(e){this.cachedEventUids.add(Pv(e)),this.lastProcessedEventTime=Date.now()}}function Pv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Tk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e={}){return al(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ak=/^https?/;async function Pk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Sk(n);for(const t of e)try{if(Ck(t))return}catch{}di(n,"unauthorized-domain")}function Ck(n){const e=Dp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!Ak.test(t))return!1;if(Rk.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Vu(3e4,6e4);function Cv(){const n=ci().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xk(n){return new Promise((e,t)=>{var r,s,a;function u(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),t($r(n,"network-request-failed"))},timeout:kk.get()})}if(!((s=(r=ci().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ci().gapi)===null||a===void 0)&&a.load)u();else{const h=LC("iframefcb");return ci()[h]=()=>{gapi.load?u():t($r(n,"network-request-failed"))},NC(`${VC()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw fh=null,e})}let fh=null;function Dk(n){return fh=fh||xk(n),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new Vu(5e3,15e3),Nk="__/auth/iframe",Vk="emulator/auth/iframe",Lk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ok=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mk(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wm(e,Vk):`https://${n.config.authDomain}/${Nk}`,r={apiKey:e.apiKey,appName:n.name,v:ol},s=Ok.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Nu(r).slice(1)}`}async function Fk(n){const e=await Dk(n),t=ci().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:Mk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=$r(n,"network-request-failed"),h=ci().setTimeout(()=>{a(u)},bk.get());function f(){ci().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,Bk=600,zk="_blank",$k="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qk(n,e,t,r=jk,s=Bk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},Uk),{width:r.toString(),height:s.toString(),top:a,left:u}),m=tn().toLowerCase();t&&(h=jE(m)?zk:t),FE(m)&&(e=e||$k,f.scrollbars="yes");const _=Object.entries(f).reduce((T,[P,j])=>`${T}${P}=${j},`,"");if(RC(m)&&h!=="_self")return Kk(e||"",h),new kv(null);const w=window.open(e||"",h,_);Ue(w,n,"popup-blocked");try{w.focus()}catch{}return new kv(w)}function Kk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="__/auth/handler",Wk="emulator/auth/handler",Hk=encodeURIComponent("fac");async function xv(n,e,t,r,s,a){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ol,eventId:s};if(e instanceof Rm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",QA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))u[_]=w}if(e instanceof Lu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),m=f?`#${Hk}=${encodeURIComponent(f)}`:"";return`${Qk(n)}?${Nu(h).slice(1)}${m}`}function Qk({config:n}){return n.emulator?wm(n,Wk):`https://${n.authDomain}/${Gk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="webStorageSupport";class Jk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eI,this._completeRedirectFn=wk,this._overrideRedirectResult=yk}async _openPopup(e,t,r,s){var a;zi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await xv(e,t,r,Dp(),s);return qk(e,u,Am())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await xv(e,t,r,Dp(),s);return ZC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(zi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Fk(e),r=new Ik(e);return t.register("authEvent",s=>(Ue(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pp,{type:pp},s=>{var a;const u=(a=s?.[0])===null||a===void 0?void 0:a[pp];u!==void 0&&t(!!u),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KE()||UE()||Tm()}}const Yk=Jk;var Dv="@firebase/auth",bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ex(n){bo(new Os("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Ue(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GE(n)},m=new DC(r,s,a,f);return MC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),bo(new Os("auth-internal",e=>{const t=td(e.getProvider("auth").getImmediate());return(r=>new Xk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(Dv,bv,Zk(n)),ui(Dv,bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=300,nx=IE("authIdTokenMaxAge")||tx;let Nv=null;const rx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>nx)return;const s=t?.token;Nv!==s&&(Nv=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Cm(n=gm()){const e=ed(n,"auth");if(e.isInitialized())return e.getImmediate();const t=OC(n,{popupRedirectResolver:Yk,persistence:[lk,JC,eI]}),r=IE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=rx(a.toString());GC(t,u,()=>u(t.currentUser)),KC(t,h=>u(h))}}const s=wE("auth");return s&&FC(t,`http://${s}`),t}function ix(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}bC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=$r("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",ix().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ex("Browser");var sx="firebase",ox="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(sx,ox,"app");var Vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,lI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function A(){}A.prototype=R.prototype,I.D=R.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(x,N,L){for(var k=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)k[Ye-2]=arguments[Ye];return R.prototype[N].apply(x,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,R,A){A||(A=0);var x=Array(16);if(typeof R=="string")for(var N=0;16>N;++N)x[N]=R.charCodeAt(A++)|R.charCodeAt(A++)<<8|R.charCodeAt(A++)<<16|R.charCodeAt(A++)<<24;else for(N=0;16>N;++N)x[N]=R[A++]|R[A++]<<8|R[A++]<<16|R[A++]<<24;R=I.g[0],A=I.g[1],N=I.g[2];var L=I.g[3],k=R+(L^A&(N^L))+x[0]+3614090360&4294967295;R=A+(k<<7&4294967295|k>>>25),k=L+(N^R&(A^N))+x[1]+3905402710&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(A^L&(R^A))+x[2]+606105819&4294967295,N=L+(k<<17&4294967295|k>>>15),k=A+(R^N&(L^R))+x[3]+3250441966&4294967295,A=N+(k<<22&4294967295|k>>>10),k=R+(L^A&(N^L))+x[4]+4118548399&4294967295,R=A+(k<<7&4294967295|k>>>25),k=L+(N^R&(A^N))+x[5]+1200080426&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(A^L&(R^A))+x[6]+2821735955&4294967295,N=L+(k<<17&4294967295|k>>>15),k=A+(R^N&(L^R))+x[7]+4249261313&4294967295,A=N+(k<<22&4294967295|k>>>10),k=R+(L^A&(N^L))+x[8]+1770035416&4294967295,R=A+(k<<7&4294967295|k>>>25),k=L+(N^R&(A^N))+x[9]+2336552879&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(A^L&(R^A))+x[10]+4294925233&4294967295,N=L+(k<<17&4294967295|k>>>15),k=A+(R^N&(L^R))+x[11]+2304563134&4294967295,A=N+(k<<22&4294967295|k>>>10),k=R+(L^A&(N^L))+x[12]+1804603682&4294967295,R=A+(k<<7&4294967295|k>>>25),k=L+(N^R&(A^N))+x[13]+4254626195&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(A^L&(R^A))+x[14]+2792965006&4294967295,N=L+(k<<17&4294967295|k>>>15),k=A+(R^N&(L^R))+x[15]+1236535329&4294967295,A=N+(k<<22&4294967295|k>>>10),k=R+(N^L&(A^N))+x[1]+4129170786&4294967295,R=A+(k<<5&4294967295|k>>>27),k=L+(A^N&(R^A))+x[6]+3225465664&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^A&(L^R))+x[11]+643717713&4294967295,N=L+(k<<14&4294967295|k>>>18),k=A+(L^R&(N^L))+x[0]+3921069994&4294967295,A=N+(k<<20&4294967295|k>>>12),k=R+(N^L&(A^N))+x[5]+3593408605&4294967295,R=A+(k<<5&4294967295|k>>>27),k=L+(A^N&(R^A))+x[10]+38016083&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^A&(L^R))+x[15]+3634488961&4294967295,N=L+(k<<14&4294967295|k>>>18),k=A+(L^R&(N^L))+x[4]+3889429448&4294967295,A=N+(k<<20&4294967295|k>>>12),k=R+(N^L&(A^N))+x[9]+568446438&4294967295,R=A+(k<<5&4294967295|k>>>27),k=L+(A^N&(R^A))+x[14]+3275163606&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^A&(L^R))+x[3]+4107603335&4294967295,N=L+(k<<14&4294967295|k>>>18),k=A+(L^R&(N^L))+x[8]+1163531501&4294967295,A=N+(k<<20&4294967295|k>>>12),k=R+(N^L&(A^N))+x[13]+2850285829&4294967295,R=A+(k<<5&4294967295|k>>>27),k=L+(A^N&(R^A))+x[2]+4243563512&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^A&(L^R))+x[7]+1735328473&4294967295,N=L+(k<<14&4294967295|k>>>18),k=A+(L^R&(N^L))+x[12]+2368359562&4294967295,A=N+(k<<20&4294967295|k>>>12),k=R+(A^N^L)+x[5]+4294588738&4294967295,R=A+(k<<4&4294967295|k>>>28),k=L+(R^A^N)+x[8]+2272392833&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^A)+x[11]+1839030562&4294967295,N=L+(k<<16&4294967295|k>>>16),k=A+(N^L^R)+x[14]+4259657740&4294967295,A=N+(k<<23&4294967295|k>>>9),k=R+(A^N^L)+x[1]+2763975236&4294967295,R=A+(k<<4&4294967295|k>>>28),k=L+(R^A^N)+x[4]+1272893353&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^A)+x[7]+4139469664&4294967295,N=L+(k<<16&4294967295|k>>>16),k=A+(N^L^R)+x[10]+3200236656&4294967295,A=N+(k<<23&4294967295|k>>>9),k=R+(A^N^L)+x[13]+681279174&4294967295,R=A+(k<<4&4294967295|k>>>28),k=L+(R^A^N)+x[0]+3936430074&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^A)+x[3]+3572445317&4294967295,N=L+(k<<16&4294967295|k>>>16),k=A+(N^L^R)+x[6]+76029189&4294967295,A=N+(k<<23&4294967295|k>>>9),k=R+(A^N^L)+x[9]+3654602809&4294967295,R=A+(k<<4&4294967295|k>>>28),k=L+(R^A^N)+x[12]+3873151461&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^A)+x[15]+530742520&4294967295,N=L+(k<<16&4294967295|k>>>16),k=A+(N^L^R)+x[2]+3299628645&4294967295,A=N+(k<<23&4294967295|k>>>9),k=R+(N^(A|~L))+x[0]+4096336452&4294967295,R=A+(k<<6&4294967295|k>>>26),k=L+(A^(R|~N))+x[7]+1126891415&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~A))+x[14]+2878612391&4294967295,N=L+(k<<15&4294967295|k>>>17),k=A+(L^(N|~R))+x[5]+4237533241&4294967295,A=N+(k<<21&4294967295|k>>>11),k=R+(N^(A|~L))+x[12]+1700485571&4294967295,R=A+(k<<6&4294967295|k>>>26),k=L+(A^(R|~N))+x[3]+2399980690&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~A))+x[10]+4293915773&4294967295,N=L+(k<<15&4294967295|k>>>17),k=A+(L^(N|~R))+x[1]+2240044497&4294967295,A=N+(k<<21&4294967295|k>>>11),k=R+(N^(A|~L))+x[8]+1873313359&4294967295,R=A+(k<<6&4294967295|k>>>26),k=L+(A^(R|~N))+x[15]+4264355552&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~A))+x[6]+2734768916&4294967295,N=L+(k<<15&4294967295|k>>>17),k=A+(L^(N|~R))+x[13]+1309151649&4294967295,A=N+(k<<21&4294967295|k>>>11),k=R+(N^(A|~L))+x[4]+4149444226&4294967295,R=A+(k<<6&4294967295|k>>>26),k=L+(A^(R|~N))+x[11]+3174756917&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~A))+x[2]+718787259&4294967295,N=L+(k<<15&4294967295|k>>>17),k=A+(L^(N|~R))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+L&4294967295}r.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var A=R-this.blockSize,x=this.B,N=this.h,L=0;L<R;){if(N==0)for(;L<=A;)s(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<R;)if(x[N++]=I.charCodeAt(L++),N==this.blockSize){s(this,x),N=0;break}}else for(;L<R;)if(x[N++]=I[L++],N==this.blockSize){s(this,x),N=0;break}}this.h=N,this.o+=R},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var A=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=A&255,A/=256;for(this.u(I),I=Array(16),R=A=0;4>R;++R)for(var x=0;32>x;x+=8)I[A++]=this.g[R]>>>x&255;return I};function a(I,R){var A=h;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=R(I)}function u(I,R){this.h=R;for(var A=[],x=!0,N=I.length-1;0<=N;N--){var L=I[N]|0;x&&L==R||(A[N]=L,x=!1)}this.g=A}var h={};function f(I){return-128<=I&&128>I?a(I,function(R){return new u([R|0],0>R?-1:0)}):new u([I|0],0>I?-1:0)}function m(I){if(isNaN(I)||!isFinite(I))return w;if(0>I)return U(m(-I));for(var R=[],A=1,x=0;I>=A;x++)R[x]=I/A|0,A*=4294967296;return new u(R,0)}function _(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return U(_(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=m(Math.pow(R,8)),x=w,N=0;N<I.length;N+=8){var L=Math.min(8,I.length-N),k=parseInt(I.substring(N,N+L),R);8>L?(L=m(Math.pow(R,L)),x=x.j(L).add(m(k))):(x=x.j(A),x=x.add(m(k)))}return x}var w=f(0),T=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-U(this).m();for(var I=0,R=1,A=0;A<this.g.length;A++){var x=this.i(A);I+=(0<=x?x:4294967296+x)*R,R*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(j(this))return"0";if(M(this))return"-"+U(this).toString(I);for(var R=m(Math.pow(I,6)),A=this,x="";;){var N=ae(A,R).g;A=oe(A,N.j(R));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=N,j(A))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function j(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=oe(this,I),M(I)?-1:j(I)?0:1};function U(I){for(var R=I.g.length,A=[],x=0;x<R;x++)A[x]=~I.g[x];return new u(A,~I.h).add(T)}n.abs=function(){return M(this)?U(this):this},n.add=function(I){for(var R=Math.max(this.g.length,I.g.length),A=[],x=0,N=0;N<=R;N++){var L=x+(this.i(N)&65535)+(I.i(N)&65535),k=(L>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);x=k>>>16,L&=65535,k&=65535,A[N]=k<<16|L}return new u(A,A[A.length-1]&-2147483648?-1:0)};function oe(I,R){return I.add(U(R))}n.j=function(I){if(j(this)||j(I))return w;if(M(this))return M(I)?U(this).j(U(I)):U(U(this).j(I));if(M(I))return U(this.j(U(I)));if(0>this.l(P)&&0>I.l(P))return m(this.m()*I.m());for(var R=this.g.length+I.g.length,A=[],x=0;x<2*R;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<I.g.length;N++){var L=this.i(x)>>>16,k=this.i(x)&65535,Ye=I.i(N)>>>16,_t=I.i(N)&65535;A[2*x+2*N]+=k*_t,H(A,2*x+2*N),A[2*x+2*N+1]+=L*_t,H(A,2*x+2*N+1),A[2*x+2*N+1]+=k*Ye,H(A,2*x+2*N+1),A[2*x+2*N+2]+=L*Ye,H(A,2*x+2*N+2)}for(x=0;x<R;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=R;x<2*R;x++)A[x]=0;return new u(A,0)};function H(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function ee(I,R){this.g=I,this.h=R}function ae(I,R){if(j(R))throw Error("division by zero");if(j(I))return new ee(w,w);if(M(I))return R=ae(U(I),R),new ee(U(R.g),U(R.h));if(M(R))return R=ae(I,U(R)),new ee(U(R.g),R.h);if(30<I.g.length){if(M(I)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var A=T,x=R;0>=x.l(I);)A=de(A),x=de(x);var N=me(A,1),L=me(x,1);for(x=me(x,2),A=me(A,2);!j(x);){var k=L.add(x);0>=k.l(I)&&(N=N.add(A),L=k),x=me(x,1),A=me(A,1)}return R=oe(I,N.j(R)),new ee(N,R)}for(N=w;0<=I.l(R);){for(A=Math.max(1,Math.floor(I.m()/R.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=m(A),k=L.j(R);M(k)||0<k.l(I);)A-=x,L=m(A),k=L.j(R);j(L)&&(L=T),N=N.add(L),I=oe(I,k)}return new ee(N,I)}n.A=function(I){return ae(this,I).h},n.and=function(I){for(var R=Math.max(this.g.length,I.g.length),A=[],x=0;x<R;x++)A[x]=this.i(x)&I.i(x);return new u(A,this.h&I.h)},n.or=function(I){for(var R=Math.max(this.g.length,I.g.length),A=[],x=0;x<R;x++)A[x]=this.i(x)|I.i(x);return new u(A,this.h|I.h)},n.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),A=[],x=0;x<R;x++)A[x]=this.i(x)^I.i(x);return new u(A,this.h^I.h)};function de(I){for(var R=I.g.length+1,A=[],x=0;x<R;x++)A[x]=I.i(x)<<1|I.i(x-1)>>>31;return new u(A,I.h)}function me(I,R){var A=R>>5;R%=32;for(var x=I.g.length-A,N=[],L=0;L<x;L++)N[L]=0<R?I.i(L+A)>>>R|I.i(L+A+1)<<32-R:I.i(L+A);return new u(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,ko=u}).apply(typeof Vv<"u"?Vv:typeof self<"u"?self:typeof window<"u"?window:{});var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uI,eu,cI,ph,Vp,hI,dI,fI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof rh=="object"&&rh];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var B=c[S];if(!(B in v))break e;v=v[B]}c=c[c.length-1],S=v[c],g=g(S),g!=S&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var v=0,S=!1,B={next:function(){if(!S&&v<c.length){var W=v++;return{value:g(W,c[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,v){return c.call.apply(c.bind,arguments)}function w(c,g,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function T(c,g,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,T.apply(null,arguments)}function P(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function j(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,B,W){for(var ue=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ue[dt-2]=arguments[dt];return g.prototype[B].apply(S,ue)}}function M(c){const g=c.length;if(0<g){const v=Array(g);for(let S=0;S<g;S++)v[S]=c[S];return v}return[]}function U(c,g){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(f(S)){const B=c.length||0,W=S.length||0;c.length=B+W;for(let ue=0;ue<W;ue++)c[B+ue]=S[ue]}else c.push(S)}}class oe{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function H(c){return/^[\s\xa0]*$/.test(c)}function ee(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function ae(c){return ae[" "](c),c}ae[" "]=function(){};var de=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function me(c,g,v){for(const S in c)g.call(v,c[S],S,c)}function I(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function R(c){const g={};for(const v in c)g[v]=c[v];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)c[v]=S[v];for(let W=0;W<A.length;W++)v=A[W],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function N(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function L(c){h.setTimeout(()=>{throw c},0)}function k(){var c=ke;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ye{constructor(){this.h=this.g=null}add(g,v){const S=_t.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var _t=new oe(()=>new Ut,c=>c.reset());class Ut{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let st,re=!1,ke=new Ye,pe=()=>{const c=h.Promise.resolve(void 0);st=()=>{c.then(F)}};var F=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(v){L(v)}var g=_t;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var je=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,g),h.removeEventListener("test",v,g)}catch{}return c})();function Le(c,g){if(Se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(de){e:{try{ae(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:$e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Le.aa.h.call(this)}}j(Le,Se);var $e={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function mt(c,g,v,S,B){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=B,this.key=++Xe,this.da=this.fa=!1}function $t(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Sr(c){this.src=c,this.g={},this.h=0}Sr.prototype.add=function(c,g,v,S,B){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ue=Pn(c,g,S,B);return-1<ue?(g=c[ue],v||(g.fa=!1)):(g=new mt(g,this.src,W,!!S,B),g.fa=v,c.push(g)),g};function Vt(c,g){var v=g.type;if(v in c.g){var S=c.g[v],B=Array.prototype.indexOf.call(S,g,void 0),W;(W=0<=B)&&Array.prototype.splice.call(S,B,1),W&&($t(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Pn(c,g,v,S){for(var B=0;B<c.length;++B){var W=c[B];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==S)return B}return-1}var Kr="closure_lm_"+(1e6*Math.random()|0),Gi={};function Xn(c,g,v,S,B){if(Array.isArray(g)){for(var W=0;W<g.length;W++)Xn(c,g[W],v,S,B);return null}return v=Pr(v),c&&c[qe]?c.K(g,v,m(S)?!!S.capture:!1,B):Gs(c,g,v,!1,S,B)}function Gs(c,g,v,S,B,W){if(!g)throw Error("Invalid event type");var ue=m(B)?!!B.capture:!!B,dt=Wi(c);if(dt||(c[Kr]=dt=new Sr(c)),v=dt.add(g,v,S,ue,W),v.proxy)return v;if(S=Ko(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)je||(B=ue),B===void 0&&(B=!1),c.addEventListener(g.toString(),S,B);else if(c.attachEvent)c.attachEvent(Ar(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ko(){function c(v){return g.call(c.src,c.listener,v)}const g=Ws;return c}function yi(c,g,v,S,B){if(Array.isArray(g))for(var W=0;W<g.length;W++)yi(c,g[W],v,S,B);else S=m(S)?!!S.capture:!!S,v=Pr(v),c&&c[qe]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],v=Pn(W,v,S,B),-1<v&&($t(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=Wi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Pn(g,v,S,B)),(v=-1<c?g[c]:null)&&Rr(v))}function Rr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[qe])Vt(g.i,c);else{var v=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(v,S,c.capture):g.detachEvent?g.detachEvent(Ar(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=Wi(g))?(Vt(v,c),v.h==0&&(v.src=null,g[Kr]=null)):$t(c)}}}function Ar(c){return c in Gi?Gi[c]:Gi[c]="on"+c}function Ws(c,g){if(c.da)c=!0;else{g=new Le(g,this);var v=c.listener,S=c.ha||c.src;c.fa&&Rr(c),c=v.call(S,g)}return c}function Wi(c){return c=c[Kr],c instanceof Sr?c:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pr(c){return typeof c=="function"?c:(c[Ln]||(c[Ln]=function(g){return c.handleEvent(g)}),c[Ln])}function Lt(){Q.call(this),this.i=new Sr(this),this.M=this,this.F=null}j(Lt,Q),Lt.prototype[qe]=!0,Lt.prototype.removeEventListener=function(c,g,v,S){yi(this,c,g,v,S)};function Ct(c,g){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new Se(g,c);else if(g instanceof Se)g.target=g.target||c;else{var B=g;g=new Se(S,c),x(g,B)}if(B=!0,v)for(var W=v.length-1;0<=W;W--){var ue=g.g=v[W];B=rn(ue,S,!0,g)&&B}if(ue=g.g=c,B=rn(ue,S,!0,g)&&B,B=rn(ue,S,!1,g)&&B,v)for(W=0;W<v.length;W++)ue=g.g=v[W],B=rn(ue,S,!1,g)&&B}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],S=0;S<v.length;S++)$t(v[S]);delete c.g[g],c.h--}}this.F=null},Lt.prototype.K=function(c,g,v,S){return this.i.add(String(c),g,!1,v,S)},Lt.prototype.L=function(c,g,v,S){return this.i.add(String(c),g,!0,v,S)};function rn(c,g,v,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,W=0;W<g.length;++W){var ue=g[W];if(ue&&!ue.da&&ue.capture==v){var dt=ue.listener,Yt=ue.ha||ue.src;ue.fa&&Vt(c.i,ue),B=dt.call(Yt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Cn(c,g,v){if(typeof c=="function")v&&(c=T(c,v));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Cr(c){c.g=Cn(()=>{c.g=null,c.i&&(c.i=!1,Cr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class dr extends Q{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(c){Q.call(this),this.h=c,this.g={}}j(_i,Q);var On=[];function Hi(c){me(c.g,function(g,v){this.g.hasOwnProperty(v)&&Rr(g)},c),c.g={}}_i.prototype.N=function(){_i.aa.N.call(this),Hi(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qi=h.JSON.stringify,Ji=h.JSON.parse,Hs=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Gr(){}Gr.prototype.h=null;function kr(c){return c.h||(c.h=c.i())}function vi(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){Se.call(this,"d")}j(Mn,Se);function Yi(){Se.call(this,"c")}j(Yi,Se);var Zn={},Qs=null;function Wr(){return Qs=Qs||new Lt}Zn.La="serverreachability";function Hr(c){Se.call(this,Zn.La,c)}j(Hr,Se);function Fn(c){const g=Wr();Ct(g,new Hr(g))}Zn.STAT_EVENT="statevent";function Js(c,g){Se.call(this,Zn.STAT_EVENT,c),this.stat=g}j(Js,Se);function kt(c){const g=Wr();Ct(g,new Js(g,c))}Zn.Ma="timingevent";function D(c,g){Se.call(this,Zn.Ma,c),this.size=g}j(D,Se);function O(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function K(){this.g=!0}K.prototype.xa=function(){this.g=!1};function X(c,g,v,S,B,W){c.info(function(){if(c.g)if(W)for(var ue="",dt=W.split("&"),Yt=0;Yt<dt.length;Yt++){var rt=dt[Yt].split("=");if(1<rt.length){var sn=rt[0];rt=rt[1];var Kt=sn.split("_");ue=2<=Kt.length&&Kt[1]=="type"?ue+(sn+"="+rt+"&"):ue+(sn+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+v+`
`+ue})}function ce(c,g,v,S,B,W,ue){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+v+`
`+W+" "+ue})}function we(c,g,v,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ee(c,v)+(S?" "+S:"")})}function be(c,g){c.info(function(){return"TIMEOUT: "+g})}K.prototype.info=function(){};function Ee(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<B.length;ue++)B[ue]=""}}}}return Qi(v)}catch{return g}}var ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ye={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_e;function Oe(){}j(Oe,Gr),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},_e=new Oe;function Fe(c,g,v,S){this.j=c,this.i=g,this.l=v,this.R=S||1,this.U=new _i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var at={},We={};function ht(c,g,v){c.L=1,c.v=ns(nr(g)),c.m=v,c.P=!0,fr(c,null)}function fr(c,g){c.F=Date.now(),Qe(c),c.A=nr(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),is(v.i,"t",S),c.C=0,v=c.j.J,c.h=new Ot,c.g=sc(c.j,v?g:null,!c.m),0<c.O&&(c.M=new dr(T(c.Y,c,c.g),c.O)),g=c.U,v=c.g,S=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(On[0]=B.toString()),B=On);for(var W=0;W<B.length;W++){var ue=Xn(v,B[W],S||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Fn(),X(c.i,c.u,c.A,c.l,c.R,c.m)}Fe.prototype.ca=function(c){c=c.target;const g=this.M;g&&jn(c)==3?g.j():this.Y(c)},Fe.prototype.Y=function(c){try{if(c==this.g)e:{const Kt=jn(this.g);var g=this.g.Ba();const gr=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||yl(this.g)))){this.J||Kt!=4||g==7||(g==8||0>=gr?Fn(3):Fn(2)),tr(this);var v=this.g.Z();this.X=v;t:if(Qr(this)){var S=yl(this.g);c="";var B=S.length,W=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),yn(this);var ue="";break t}this.h.i=new h.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(W&&g==B-1)});S.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,ce(this.i,this.u,this.A,this.l,this.R,Kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Yt=this.g;if((dt=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(dt)){var rt=dt;break t}}rt=null}if(v=rt)we(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jr(this,v);else{this.o=!1,this.s=3,kt(12),cn(this),yn(this);break e}}if(this.P){v=!0;let ir;for(;!this.J&&this.C<ue.length;)if(ir=er(this,ue),ir==We){Kt==4&&(this.s=4,kt(14),v=!1),we(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==at){this.s=4,kt(15),we(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else we(this.i,this.l,ir,null),Jr(this,ir);if(Qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||ue.length!=0||this.h.h||(this.s=1,kt(16),v=!1),this.o=this.o&&v,!v)we(this.i,this.l,ue,"[Invalid Chunked Response]"),cn(this),yn(this);else if(0<ue.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),vl(sn),sn.M=!0,kt(11))}}else we(this.i,this.l,ue,null),Jr(this,ue);Kt==4&&cn(this),this.o&&!this.J&&(Kt==4?ra(this.j,this):(this.o=!1,Qe(this)))}else Xo(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),cn(this),yn(this)}}}catch{}finally{}};function Qr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function er(c,g){var v=c.C,S=g.indexOf(`
`,v);return S==-1?We:(v=Number(g.substring(v,S)),isNaN(v)?at:(S+=1,S+v>g.length?We:(g=g.slice(S,S+v),c.C=S+v,g)))}Fe.prototype.cancel=function(){this.J=!0,cn(this)};function Qe(c){c.S=Date.now()+c.I,Xi(c,c.I)}function Xi(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=O(T(c.ba,c),g)}function tr(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Fe.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(be(this.i,this.A),this.L!=2&&(Fn(),kt(17)),cn(this),this.s=2,yn(this)):Xi(this,this.S-c)};function yn(c){c.j.G==0||c.J||ra(c.j,c)}function cn(c){tr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Hi(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Jr(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||Ze(v.h,c))){if(!c.K&&Ze(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)na(v),Vr(v);else break e;ta(v),kt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=O(T(v.Za,v),6e3));if(1>=Yr(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Si(v,11)}else if((c.K||v.g==c)&&na(v),!H(g))for(B=v.Da.g.parse(g),g=0;g<B.length;g++){let rt=B[g];if(v.T=rt[0],rt=rt[1],v.G==2)if(rt[0]=="c"){v.K=rt[1],v.ia=rt[2];const sn=rt[3];sn!=null&&(v.la=sn,v.j.info("VER="+v.la));const Kt=rt[4];Kt!=null&&(v.Aa=Kt,v.j.info("SVER="+v.Aa));const gr=rt[5];gr!=null&&typeof gr=="number"&&0<gr&&(S=1.5*gr,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ir=c.g;if(ir){const ro=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var W=S.h;W.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(pr(W,W.h),W.h=null))}if(S.D){const sa=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;sa&&(S.ya=sa,yt(S.I,S.D,sa))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ue=c;if(S.qa=ic(S,S.J?S.ia:null,S.W),ue.K){Ys(S.h,ue);var dt=ue,Yt=S.L;Yt&&(dt.I=Yt),dt.B&&(tr(dt),Qe(dt)),S.g=ue}else no(S);0<v.i.length&&ti(v)}else rt[0]!="stop"&&rt[0]!="close"||Si(v,7);else v.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Si(v,7):dn(v):rt[0]!="noop"&&v.l&&v.l.ta(rt),v.v=0)}}Fn(4)}catch{}}var Je=class{constructor(c,g){this.g=c,this.map=g}};function ut(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qt(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Yr(c){return c.h?1:c.g?c.g.size:0}function Ze(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function pr(c,g){c.g?c.g.add(g):c.h=g}function Ys(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}ut.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Go(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return M(c.i)}function Wo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],v=c.length,S=0;S<v;S++)g.push(c[S]);return g}g=[],v=0;for(S in c)g[v++]=c[S];return g}function Ho(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const S in c)g[v++]=S;return g}}}function Zi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=Ho(c),S=Wo(c),B=S.length,W=0;W<B;W++)g.call(void 0,S[W],v&&v[W],c)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kd(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),B=null;if(0<=S){var W=c[v].substring(0,S);B=c[v].substring(S+1)}else W=c[v];g(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function wi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof wi){this.h=c.h,Zs(this,c.j),this.o=c.o,this.g=c.g,es(this,c.s),this.l=c.l;var g=c.i,v=new Xr;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),ts(this,v),this.m=c.m}else c&&(g=String(c).match(Xs))?(this.h=!1,Zs(this,g[1]||"",!0),this.o=nt(g[2]||""),this.g=nt(g[3]||"",!0),es(this,g[4]),this.l=nt(g[5]||"",!0),ts(this,g[6]||"",!0),this.m=nt(g[7]||"")):(this.h=!1,this.i=new Xr(null,this.h))}wi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(rs(g,Qo,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(rs(g,Qo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(rs(v,v.charAt(0)=="/"?Ju:Qu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",rs(v,pl)),c.join("")};function nr(c){return new wi(c)}function Zs(c,g,v){c.j=v?nt(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function es(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ts(c,g,v){g instanceof Xr?(c.i=g,Zr(c.i,c.h)):(v||(g=rs(g,Yu)),c.i=new Xr(g,c.h))}function yt(c,g,v){c.i.set(g,v)}function ns(c){return yt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function nt(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function rs(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,Hu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Hu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Qo=/[#\/\?@]/g,Qu=/[#\?:]/g,Ju=/[#\?]/g,Yu=/[#\?@]/g,pl=/#/g;function Xr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function hn(c){c.g||(c.g=new Map,c.h=0,c.i&&kd(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Xr.prototype,n.add=function(c,g){hn(this),this.i=null,c=mr(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function xr(c,g){hn(c),g=mr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Dr(c,g){return hn(c),g=mr(c,g),c.g.has(g)}n.forEach=function(c,g){hn(this),this.g.forEach(function(v,S){v.forEach(function(B){c.call(g,B,S,this)},this)},this)},n.na=function(){hn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let S=0;S<g.length;S++){const B=c[S];for(let W=0;W<B.length;W++)v.push(g[S])}return v},n.V=function(c){hn(this);let g=[];if(typeof c=="string")Dr(this,c)&&(g=g.concat(this.g.get(mr(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},n.set=function(c,g){return hn(this),this.i=null,c=mr(this,c),Dr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function is(c,g,v){xr(c,g),0<v.length&&(c.i=null,c.g.set(mr(c,g),M(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var S=g[v];const W=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var B=W;ue[S]!==""&&(B+="="+encodeURIComponent(String(ue[S]))),c.push(B)}}return this.i=c.join("&")};function mr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Zr(c,g){g&&!c.j&&(hn(c),c.i=null,c.g.forEach(function(v,S){var B=S.toLowerCase();S!=B&&(xr(this,S),is(this,B,v))},c)),c.j=g}function xd(c,g){const v=new K;if(h.Image){const S=new Image;S.onload=P(Un,v,"TestLoadImage: loaded",!0,g,S),S.onerror=P(Un,v,"TestLoadImage: error",!1,g,S),S.onabort=P(Un,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=P(Un,v,"TestLoadImage: timeout",!1,g,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function Xu(c,g){const v=new K,S=new AbortController,B=setTimeout(()=>{S.abort(),Un(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(W=>{clearTimeout(B),W.ok?Un(v,"TestPingServer: ok",!0,g):Un(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Un(v,"TestPingServer: error",!1,g)})}function Un(c,g,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function Dd(){this.g=new Hs}function Zu(c,g,v){const S=v||"";try{Zi(c,function(B,W){let ue=B;m(B)&&(ue=Qi(B)),g.push(S+W+"="+encodeURIComponent(ue))})}catch(B){throw g.push(S+"type="+encodeURIComponent("_badmap")),B}}function Ei(c){this.l=c.Ub||null,this.j=c.eb||!1}j(Ei,Gr),Ei.prototype.g=function(){return new eo(this.l,this.j)},Ei.prototype.i=(function(c){return function(){return c}})({});function eo(c,g){Lt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(eo,Lt),n=eo.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Nr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,br(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ec(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ec(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?br(this):Nr(this),this.readyState==3&&ec(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,br(this))},n.Qa=function(c){this.g&&(this.response=c,br(this))},n.ga=function(){this.g&&br(this)};function br(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Nr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Nr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ii(c){let g="";return me(c,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function ss(c,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ii(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):yt(c,g,v))}function St(c){Lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(St,Lt);var bd=/^https?$/i,ml=["POST","PUT"];n=St.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?kr(this.o):kr(_e),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){to(this,W);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),B=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ml,g,void 0))||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of v)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yo(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){to(this,W)}};function to(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Jo(c),rr(c)}function Jo(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rr(this,!0)),St.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gl(this):this.bb())},n.bb=function(){gl(this)};function gl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)Cn(c.Ea,0,c);else if(Ct(c,"readystatechange"),jn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=ue===0){var B=String(c.D).match(Xs)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),S=!bd.test(B?B.toLowerCase():"")}v=S}if(v)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var W=2<jn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Jo(c)}}finally{rr(c)}}}}function rr(c,g){if(c.g){Yo(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ct(c,"ready");try{v.onreadystatechange=S}catch{}}}function Yo(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ji(g)}};function yl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xo(c){const g={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(H(c[S]))continue;var v=N(c[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[B]||[];g[B]=W,W.push(v)}I(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function _l(c){this.Aa=0,this.i=[],this.j=new K,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,c),this.cb=ei("retryDelaySeedMs",1e4,c),this.Wa=ei("forwardChannelMaxRetries",2,c),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ut(c&&c.concurrentRequestLimit),this.Da=new Dd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_l.prototype,n.la=8,n.G=1,n.connect=function(c,g,v,S){kt(0),this.W=c,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=ic(this,null,this.W),ti(this)};function dn(c){if(Zo(c),c.G==3){var g=c.U++,v=nr(c.I);if(yt(v,"SID",c.K),yt(v,"RID",g),yt(v,"TYPE","terminate"),Ti(c,v),g=new Fe(c,c.j,g),g.L=2,g.v=ns(nr(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=g.v,v=!0),v||(g.g=sc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Qe(g)}rc(c)}function Vr(c){c.g&&(vl(c),c.g.cancel(),c.g=null)}function Zo(c){Vr(c),c.u&&(h.clearTimeout(c.u),c.u=null),na(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function ti(c){if(!qt(c.h)&&!c.s){c.s=!0;var g=c.Ga;st||pe(),re||(st(),re=!0),ke.add(g,c),c.B=0}}function Nd(c,g){return Yr(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=O(T(c.Ga,c,g),nc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new Fe(this,this.j,c);let W=this.o;if(this.S&&(W?(W=R(W),x(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=os(this,B,g),v=nr(this.I),yt(v,"RID",c),yt(v,"CVER",22),this.D&&yt(v,"X-HTTP-Session-Id",this.D),Ti(this,v),W&&(this.O?g="headers="+encodeURIComponent(String(Ii(W)))+"&"+g:this.m&&ss(v,this.m,W)),pr(this.h,B),this.Ua&&yt(v,"TYPE","init"),this.P?(yt(v,"$req",g),yt(v,"SID","null"),B.T=!0,ht(B,v,null)):ht(B,v,g),this.G=2}}else this.G==3&&(c?ea(this,c):this.i.length==0||qt(this.h)||ea(this))};function ea(c,g){var v;g?v=g.l:v=c.U++;const S=nr(c.I);yt(S,"SID",c.K),yt(S,"RID",v),yt(S,"AID",c.T),Ti(c,S),c.m&&c.o&&ss(S,c.m,c.o),v=new Fe(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=os(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pr(c.h,v),ht(v,S,g)}function Ti(c,g){c.H&&me(c.H,function(v,S){yt(g,S,v)}),c.l&&Zi({},function(v,S){yt(g,S,v)})}function os(c,g,v){v=Math.min(c.i.length,v);var S=c.l?T(c.l.Na,c.l,c):null;e:{var B=c.i;let W=-1;for(;;){const ue=["count="+v];W==-1?0<v?(W=B[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let dt=!0;for(let Yt=0;Yt<v;Yt++){let rt=B[Yt].g;const sn=B[Yt].map;if(rt-=W,0>rt)W=Math.max(0,B[Yt].g-100),dt=!1;else try{Zu(sn,ue,"req"+rt+"_")}catch{S&&S(sn)}}if(dt){S=ue.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,S}function no(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;st||pe(),re||(st(),re=!0),ke.add(g,c),c.v=0}}function ta(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=O(T(c.Fa,c),nc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,tc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=O(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Vr(this),tc(this))};function vl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function tc(c){c.g=new Fe(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=nr(c.qa);yt(g,"RID","rpc"),yt(g,"SID",c.K),yt(g,"AID",c.T),yt(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&yt(g,"TO",c.ja),yt(g,"TYPE","xmlhttp"),Ti(c,g),c.m&&c.o&&ss(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ns(nr(g)),v.m=null,v.P=!0,fr(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Vr(this),ta(this),kt(19))};function na(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ra(c,g){var v=null;if(c.g==g){na(c),vl(c),c.g=null;var S=2}else if(Ze(c.h,g))v=g.D,Ys(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;S=Wr(),Ct(S,new D(S,v)),ti(c)}else no(c);else if(B=g.s,B==3||B==0&&0<g.X||!(S==1&&Nd(c,g)||S==2&&ta(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),B){case 1:Si(c,5);break;case 4:Si(c,10);break;case 3:Si(c,6);break;default:Si(c,2)}}}function nc(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function Si(c,g){if(c.j.info("Error code "+g),g==2){var v=T(c.fb,c),S=c.Xa;const B=!S;S=new wi(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Zs(S,"https"),ns(S),B?xd(S.toString(),v):Xu(S.toString(),v)}else kt(2);c.G=0,c.l&&c.l.sa(g),rc(c),Zo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function rc(c){if(c.G=0,c.ka=[],c.l){const g=Go(c.h);(g.length!=0||c.i.length!=0)&&(U(c.ka,g),U(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function ic(c,g,v){var S=v instanceof wi?nr(v):new wi(v);if(S.g!="")g&&(S.g=g+"."+S.g),es(S,S.s);else{var B=h.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var W=new wi(null);S&&Zs(W,S),g&&(W.g=g),B&&es(W,B),v&&(W.l=v),S=W}return v=c.D,g=c.ya,v&&g&&yt(S,v,g),yt(S,"VER",c.la),Ti(c,S),S}function sc(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new St(new Ei({eb:v})):new St(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wl(){}n=wl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ia(){}ia.prototype.g=function(c,g){return new kn(c,g)};function kn(c,g){Lt.call(this),this.g=new _l(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!H(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!H(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ni(this)}j(kn,Lt),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){dn(this.g)},kn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Qi(c),c=v);g.i.push(new Je(g.Ya++,c)),g.G==3&&ti(g)},kn.prototype.N=function(){this.g.l=null,delete this.j,dn(this.g),delete this.g,kn.aa.N.call(this)};function oc(c){Mn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}j(oc,Mn);function ac(){Yi.call(this),this.status=1}j(ac,Yi);function ni(c){this.g=c}j(ni,wl),ni.prototype.ua=function(){Ct(this.g,"a")},ni.prototype.ta=function(c){Ct(this.g,new oc(c))},ni.prototype.sa=function(c){Ct(this.g,new ac)},ni.prototype.ra=function(){Ct(this.g,"b")},ia.prototype.createWebChannel=ia.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,fI=function(){return new ia},dI=function(){return Wr()},hI=Zn,Vp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,ph=ve,ye.COMPLETE="complete",cI=ye,vi.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,eu=vi,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,uI=St}).apply(typeof rh<"u"?rh:typeof self<"u"?self:typeof window<"u"?window:{});const Lv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new pm("@firebase/firestore");function ba(){return Vo.logLevel}function te(n,...e){if(Vo.logLevel<=et.DEBUG){const t=e.map(km);Vo.debug(`Firestore (${ll}): ${n}`,...t)}}function Bt(n,...e){if(Vo.logLevel<=et.ERROR){const t=e.map(km);Vo.error(`Firestore (${ll}): ${n}`,...t)}}function vu(n,...e){if(Vo.logLevel<=et.WARN){const t=e.map(km);Vo.warn(`Firestore (${ll}): ${n}`,...t)}}function km(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: `+n;throw Bt(e),new Error(e)}function xe(n,e){n||Re()}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends gi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Tn.UNAUTHENTICATED)))}shutdown(){}}class ux{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new hi,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new ax(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new Tn(e)}}class cx{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hx{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cx(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){xe(this.o===void 0);const r=a=>{a.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xe(typeof t.token=="string"),this.R=t.token,new dx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=px(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function Ga(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function mI(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.timestamp=e}static fromTimestamp(e){return new De(e)}static min(){return new De(new Nt(0,0))}static max(){return new De(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(),r===void 0?r=e.length-t:r>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),u=t.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ct extends wu{construct(e,t,r){return new ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const mx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends wu{construct(e,t,r){return new bt(e,t,r)}static isValidIdentifier(e){return mx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(ct.fromString(e))}static fromName(e){return new fe(ct.fromString(e).popFirst(5))}static empty(){return new fe(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new ct(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Lp(n){return n.fields.find((e=>e.kind===2))}function vo(n){return n.fields.filter((e=>e.kind!==2))}Nh.UNKNOWN_ID=-1;class mh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Eu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Eu(0,hr.min())}}function gI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new Nt(t+1,0):new Nt(t,r));return new hr(s,fe.empty(),e)}function yI(n){return new hr(n.readTime,n.key,-1)}class hr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hr(De.min(),fe.empty(),-1)}static max(){return new hr(De.max(),fe.empty(),-1)}}function xm(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==_I)throw n;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,r)=>{t(e)}))}static reject(e){return new $(((t,r)=>{r(e)}))}static waitFor(e){return new $(((t,r)=>{let s=0,a=0,u=!1;e.forEach((h=>{++s,h.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next((s=>s?$.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new $(((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++h,h===a&&r(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new $(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new hi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ou(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Dm(r.target.error);this.V.reject(new ou(e,s))}}static open(e,t,r,s){try{return new id(t,e.transaction(s,r))}catch(a){throw new ou(t,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yx(t)}}class Vs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Vs.S(tn())===12.2&&Bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),Io(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!SE())return!1;if(Vs.v())return!0;const e=tn(),t=Vs.S(e),r=0<t&&t<10,s=wI(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const u=a.target.result;t(u)},s.onblocked=()=>{r(new ou(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const u=a.target.error;u.name==="VersionError"?r(new he(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new he(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new ou(e,u))},s.onupgradeneeded=a=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.p.O(u,s.transaction,a.oldVersion,this.version).next((()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.M(e);const h=id.open(this.db,e,a?"readonly":"readwrite",r),f=s(h).next((m=>(h.g(),m))).catch((m=>(h.abort(m),$.reject(m)))).toPromise();return f.catch((()=>{})),await h.m,f}catch(h){const f=h,m=f.name!=="FirebaseError"&&u<3;if(te("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function wI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class gx{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Io(this.B.delete())}}class ou extends he{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $s(n){return n.name==="IndexedDbTransactionError"}class yx{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(te("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Io(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),Io(this.store.add(e))}get(e){return Io(this.store.get(e)).next((t=>(t===void 0&&(t=null),te("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),Io(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),Io(this.store.count())}U(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new $(((u,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{u(f.target.result)}}))}{const a=this.cursor(r),u=[];return this.W(a,((h,f)=>{u.push(f)})).next((()=>u))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new $(((s,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{s(u.target.result)}}))}j(e,t){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.W(s,((a,u,h)=>h.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Y(e){const t=this.cursor({});return new $(((r,s)=>{t.onerror=a=>{const u=Dm(a.target.error);s(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():r()})):r()}}))}W(e,t){const r=[];return new $(((s,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const f=new gx(h),m=t(h.primaryKey,h.value,f);if(m instanceof $){const _=m.catch((w=>(f.done(),$.reject(w))));r.push(_)}f.isDone?s():f.K===null?h.continue():h.continue(f.K)}})).next((()=>$.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Io(n){return new $(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Dm(r.target.error);t(s)}}))}let Ov=!1;function Dm(n){const e=Vs.S(tn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ov||(Ov=!0,setTimeout((()=>{throw r}),0)),r}}return n}class _x{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){te("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{te("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){$s(t)?te("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await zs(t)}await this.X(6e4)}))}}class vx{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let s=t,a=!0;return $.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return te("IndexBackfiller",`Processing collection: ${u}`),this.ne(e,u,s).next((h=>{s-=h,r.add(u)}));a=!1})))).next((()=>t-s))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.re(s,a))).next((h=>(te("IndexBackfiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>u.size))}))))}re(e,t){let r=e;return t.changes.forEach(((s,a)=>{const u=yI(a);xm(u,r)>0&&(r=u)})),new hr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qn.oe=-1;function sd(n){return n==null}function Iu(n){return n===0&&1/n==-1/0}function EI(n){return typeof n=="number"&&Number.isInteger(n)&&!Iu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Mv(e)),e=wx(n.get(t),e);return Mv(e)}function wx(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Mv(n){return n+""}function ai(n){const e=n.length;if(xe(e>=2),e===2)return xe(n.charAt(0)===""&&n.charAt(1)===""),ct.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const u=n.indexOf("",a);switch((u<0||u>t)&&Re(),n.charAt(u+1)){case"":const h=n.substring(a,u);let f;s.length===0?f=h:(s+=h,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,u),s+="\0";break;case"":s+=n.substring(a,u+1);break;default:Re()}a=u+2}return new ct(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n,e){return[n,bn(e)]}function II(n,e,t){return[n,bn(e),t]}const Ex={},Ix=["prefixPath","collectionGroup","readTime","documentId"],Tx=["prefixPath","collectionGroup","documentId"],Sx=["collectionGroup","readTime","prefixPath","documentId"],Rx=["canonicalId","targetId"],Ax=["targetId","path"],Px=["path","targetId"],Cx=["collectionId","parent"],kx=["indexId","uid"],xx=["uid","sequenceNumber"],Dx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bx=["indexId","uid","orderedDocumentKey"],Nx=["userId","collectionPath","documentId"],Vx=["userId","collectionPath","largestBatchId"],Lx=["userId","collectionGroup","largestBatchId"],TI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ox=[...TI,"documentOverlays"],SI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RI=SI,bm=[...RI,"indexConfiguration","indexState","indexEntries"],Mx=bm,Fx=[...bm,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends vI{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function nn(n,e){const t=Pe(n);return Vs.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ih(this.root,e,this.comparator,!0)}}class ih{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??mn.RED,this.left=s??mn.EMPTY,this.right=a??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new mn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,r,s,a){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pa(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new gt(bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ga(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new PI("Invalid base64 string: "+a):a}})(e);return new zt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const Ux=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(n){if(xe(!!n),typeof n=="string"){let e=0;const t=Ux.exec(n);if(xe(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ms(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Vm(n){const e=n.mapValue.fields.__previous_value__;return Nm(e)?Vm(e):e}function Tu(n){const e=$i(n.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,r,s,a,u,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class Lo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yh={nullValue:"NULL_VALUE"};function Oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nm(n)?4:CI(n)?9007199254740991:od(n)?10:11:Re()}function fi(n,e){if(n===e)return!0;const t=Oo(n);if(t!==Oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tu(n).isEqual(Tu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=$i(s.timestampValue),h=$i(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Ms(s.bytesValue).isEqual(Ms(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Pt(s.geoPointValue.latitude)===Pt(a.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Pt(s.integerValue)===Pt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Pt(s.doubleValue),h=Pt(a.doubleValue);return u===h?Iu(u)===Iu(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Ga(n.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(Uv(u)!==Uv(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!fi(u[f],h[f])))return!1;return!0})(n,e);default:return Re()}}function Su(n,e){return(n.values||[]).find((t=>fi(t,e)))!==void 0}function Fs(n,e){if(n===e)return 0;const t=Oo(n),r=Oo(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const h=Pt(a.integerValue||a.doubleValue),f=Pt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return Bv(n.timestampValue,e.timestampValue);case 4:return Bv(Tu(n),Tu(e));case 5:return Be(n.stringValue,e.stringValue);case 6:return(function(a,u){const h=Ms(a),f=Ms(u);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const _=Be(h[m],f[m]);if(_!==0)return _}return Be(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const h=Be(Pt(a.latitude),Pt(u.latitude));return h!==0?h:Be(Pt(a.longitude),Pt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return zv(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var h,f,m,_;const w=a.fields||{},T=u.fields||{},P=(h=w.value)===null||h===void 0?void 0:h.arrayValue,j=(f=T.value)===null||f===void 0?void 0:f.arrayValue,M=Be(((m=P?.values)===null||m===void 0?void 0:m.length)||0,((_=j?.values)===null||_===void 0?void 0:_.length)||0);return M!==0?M:zv(P,j)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Ds.mapValue&&u===Ds.mapValue)return 0;if(a===Ds.mapValue)return 1;if(u===Ds.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const T=Be(f[w],_[w]);if(T!==0)return T;const P=Fs(h[f[w]],m[_[w]]);if(P!==0)return P}return Be(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Re()}}function Bv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=$i(n),r=$i(e),s=Be(t.seconds,r.seconds);return s!==0?s:Be(t.nanos,r.nanos)}function zv(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Fs(t[s],r[s]);if(a)return a}return Be(t.length,r.length)}function Wa(n){return Mp(n)}function Mp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=$i(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ms(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Mp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Mp(t.fields[u])}`;return s+"}"})(n.mapValue):Re()}function Ru(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fp(n){return!!n&&"integerValue"in n}function Au(n){return!!n&&"arrayValue"in n}function $v(n){return!!n&&"nullValue"in n}function qv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _h(n){return!!n&&"mapValue"in n}function od(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=au(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const kI={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Bx(n){return"nullValue"in n?yh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ru(Lo.empty(),fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?od(n)?kI:{mapValue:{}}:Re()}function zx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ru(Lo.empty(),fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?kI:"mapValue"in n?od(n)?{mapValue:{}}:Ds:Re()}function Kv(n,e){const t=Fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gv(n,e){const t=Fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_h(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=bt.emptyPath(),r={},s=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=au(u):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());_h(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];_h(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){zo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Sn(au(this.value))}}function xI(n){const e=[];return zo(n.fields,((t,r)=>{const s=new bt([t]);if(_h(r)){const a=xI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,r,s,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Ft(e,0,De.min(),De.min(),De.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,s){return new Ft(e,1,t,De.min(),r,s,0)}static newNoDocument(e,t){return new Ft(e,2,t,De.min(),De.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,De.min(),De.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.position=e,this.inclusive=t}}function Wv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=fe.comparator(fe.fromName(u.referenceValue),t.key):r=Fs(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t="asc"){this.field=e,this.dir=t}}function $x(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{}class tt extends DI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qx(e,t,r):t==="array-contains"?new Wx(e,r):t==="in"?new MI(e,r):t==="not-in"?new Hx(e,r):t==="array-contains-any"?new Qx(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Kx(e,r):new Gx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fs(t,this.value)):t!==null&&Oo(this.value)===Oo(t)&&this.matchesComparison(Fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends DI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new pt(e,t)}matches(e){return Qa(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qa(n){return n.op==="and"}function Up(n){return n.op==="or"}function Lm(n){return bI(n)&&Qa(n)}function bI(n){for(const e of n.filters)if(e instanceof pt)return!1;return!0}function jp(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(Lm(n))return n.filters.map((e=>jp(e))).join(",");{const e=n.filters.map((t=>jp(t))).join(",");return`${n.op}(${e})`}}function NI(n,e){return n instanceof tt?(function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&fi(r.value,s.value)})(n,e):n instanceof pt?(function(r,s){return s instanceof pt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,h)=>a&&NI(u,s.filters[h])),!0):!1})(n,e):void Re()}function VI(n,e){const t=n.filters.concat(e);return pt.create(t,n.op)}function LI(n){return n instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`})(n):n instanceof pt?(function(t){return t.op.toString()+" {"+t.getFilters().map(LI).join(" ,")+"}"})(n):"Filter"}class qx extends tt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kx extends tt{constructor(e,t){super(e,"in",t),this.keys=OI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Gx extends tt{constructor(e,t){super(e,"not-in",t),this.keys=OI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function OI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>fe.fromName(r.referenceValue)))}class Wx extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Au(t)&&Su(t.arrayValue,this.value)}}class MI extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Su(this.value.arrayValue,t)}}class Hx extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Su(this.value.arrayValue,t)}}class Qx extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Au(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Su(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function Bp(n,e=null,t=[],r=[],s=null,a=null,u=null){return new Jx(n,e,t,r,s,a,u)}function Mo(n){const e=Pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>jp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Wa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Wa(r))).join(",")),e.ue=t}return e.ue}function Mu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$x(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hv(n.startAt,e.startAt)&&Hv(n.endAt,e.endAt)}function Lh(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Oh(n,e){return n.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function Qv(n,e,t){let r=yh,s=!0;for(const a of Oh(n,e)){let u=yh,h=!0;switch(a.op){case"<":case"<=":u=Bx(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,h=!1;break;case"!=":case"not-in":u=yh}Kv({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Kv({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function Jv(n,e,t){let r=Ds,s=!0;for(const a of Oh(n,e)){let u=Ds,h=!0;switch(a.op){case">=":case">":u=zx(a.value),h=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,h=!1;break;case"!=":case"not-in":u=Ds}Gv({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Gv({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FI(n,e,t,r,s,a,u,h){return new Fu(n,e,t,r,s,a,u,h)}function ad(n){return new Fu(n)}function Yv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UI(n){return n.collectionGroup!==null}function lu(n){const e=Pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new gt(bt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Vh(a,r))})),t.has(bt.keyField().canonicalString())||e.ce.push(new Vh(bt.keyField(),r))}return e.ce}function cr(n){const e=Pe(n);return e.le||(e.le=Yx(e,lu(n))),e.le}function Yx(n,e){if(n.limitType==="F")return Bp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Vh(s.field,a)}));const t=n.endAt?new Ha(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ha(n.startAt.position,n.startAt.inclusive):null;return Bp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zp(n,e){const t=n.filters.concat([e]);return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $p(n,e,t){return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ld(n,e){return Mu(cr(n),cr(e))&&n.limitType===e.limitType}function jI(n){return`${Mo(cr(n))}|lt:${n.limitType}`}function Na(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>LI(s))).join(", ")}]`),sd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Wa(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Wa(s))).join(",")),`Target(${r})`})(cr(n))}; limitType=${n.limitType})`}function Uu(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):fe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of lu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,h,f){const m=Wv(u,h,f);return u.inclusive?m<=0:m<0})(r.startAt,lu(r),s)||r.endAt&&!(function(u,h,f){const m=Wv(u,h,f);return u.inclusive?m>=0:m>0})(r.endAt,lu(r),s))})(n,e)}function BI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zI(n){return(e,t)=>{let r=!1;for(const s of lu(n)){const a=Xx(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Xx(n,e,t){const r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?Fs(f,m):Re()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return AI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new wt(fe.comparator);function ur(){return Zx}const $I=new wt(fe.comparator);function tu(...n){let e=$I;for(const t of n)e=e.insert(t.key,t);return e}function qI(n){let e=$I;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function li(){return uu()}function KI(){return uu()}function uu(){return new qs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const e1=new wt(fe.comparator),t1=new gt(fe.comparator);function Ge(...n){let e=t1;for(const t of n)e=e.add(t);return e}const n1=new gt(Be);function Om(){return n1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(e)?"-0":e}}function GI(n){return{integerValue:""+n}}function WI(n,e){return EI(e)?GI(e):Mm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function r1(n,e,t){return n instanceof Pu?(function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Nm(a)&&(a=Vm(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Ja?QI(n,e):n instanceof Ya?JI(n,e):(function(s,a){const u=HI(s,a),h=Xv(u)+Xv(s.Pe);return Fp(u)&&Fp(s.Pe)?GI(h):Mm(s.serializer,h)})(n,e)}function i1(n,e,t){return n instanceof Ja?QI(n,e):n instanceof Ya?JI(n,e):t}function HI(n,e){return n instanceof Xa?(function(r){return Fp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Pu extends ud{}class Ja extends ud{constructor(e){super(),this.elements=e}}function QI(n,e){const t=YI(e);for(const r of n.elements)t.some((s=>fi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ya extends ud{constructor(e){super(),this.elements=e}}function JI(n,e){let t=YI(e);for(const r of n.elements)t=t.filter((s=>!fi(s,r)));return{arrayValue:{values:t}}}class Xa extends ud{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Xv(n){return Pt(n.integerValue||n.doubleValue)}function YI(n){return Au(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t){this.field=e,this.transform=t}}function s1(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ja&&s instanceof Ja||r instanceof Ya&&s instanceof Ya?Ga(r.elements,s.elements,fi):r instanceof Xa&&s instanceof Xa?fi(r.Pe,s.Pe):r instanceof Pu&&s instanceof Pu})(n.transform,e.transform)}class o1{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cd{}function ZI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hd(n.key,Rn.none()):new ul(n.key,n.data,Rn.none());{const t=n.data,r=Sn.empty();let s=new gt(bt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Ki(n.key,r,new Jn(s.toArray()),Rn.none())}}function a1(n,e,t){n instanceof ul?(function(s,a,u){const h=s.value.clone(),f=ew(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ki?(function(s,a,u){if(!vh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=ew(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(e0(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function cu(n,e,t,r){return n instanceof ul?(function(a,u,h,f){if(!vh(a.precondition,u))return h;const m=a.value.clone(),_=tw(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ki?(function(a,u,h,f){if(!vh(a.precondition,u))return h;const m=tw(a.fieldTransforms,f,u),_=u.data;return _.setAll(e0(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,u,h){return vh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function l1(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=HI(r.transform,s||null);a!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,a))}return t||null}function Zv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ga(r,s,((a,u)=>s1(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ul extends cd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ki extends cd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function e0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ew(n,e,t){const r=new Map;xe(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,i1(u,h,t[s]))}return r}function tw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,r1(a,u,e))}return r}class hd extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t0 extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&a1(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KI();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(s.key)?null:h;const f=ZI(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Ga(this.mutations,e.mutations,((t,r)=>Zv(t,r)))&&Ga(this.baseMutations,e.baseMutations,((t,r)=>Zv(t,r)))}}class Um{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){xe(e.mutations.length===r.length);let s=(function(){return e1})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Um(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,it;function c1(n){switch(n){default:return Re();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function n0(n){if(n===void 0)return Bt("GRPC error has no .code"),J.UNKNOWN;switch(n){case Wt.OK:return J.OK;case Wt.CANCELLED:return J.CANCELLED;case Wt.UNKNOWN:return J.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return J.INTERNAL;case Wt.UNAVAILABLE:return J.UNAVAILABLE;case Wt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Wt.NOT_FOUND:return J.NOT_FOUND;case Wt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Wt.ABORTED:return J.ABORTED;case Wt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Wt.DATA_LOSS:return J.DATA_LOSS;default:return Re()}}(it=Wt||(Wt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new ko([4294967295,4294967295],0);function nw(n){const e=h1().encode(n),t=new lI;return t.update(e),new Uint8Array(t.digest())}function rw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ko([t,r],0),new ko([s,a],0)]}class Bm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nu(`Invalid padding: ${t}`);if(r<0)throw new nu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ko.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(ko.fromNumber(r)));return s.compare(d1)===1&&(s=new ko([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=nw(e),[r,s]=rw(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Bm(a,s,t);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.Ie===0)return;const t=nw(e),[r,s]=rw(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ju(De.min(),s,new wt(Be),ur(),Ge())}}class Bu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bu(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class r0{constructor(e,t){this.targetId=e,this.me=t}}class i0{constructor(e,t,r=zt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class iw{constructor(){this.fe=0,this.ge=ow(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ge(),t=Ge(),r=Ge();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Re()}})),new Bu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=ow()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class f1{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=sw(),this.Qe=new wt(Be)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const a=s.target;if(Lh(a))if(r===0){const u=new fe(a.path);this.Ue(t,u,Ft.newNoDocument(u,De.min()))}else xe(r===1);else{const u=this.Ye(t);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,h;try{u=Ms(r).toUint8Array()}catch(f){if(f instanceof PI)return vu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Bm(u,s,a)}catch(f){return vu(f instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,a,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const h=this.Je(u);if(h){if(a.current&&Lh(h.target)){const f=new fe(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,Ft.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let r=Ge();this.qe.forEach(((a,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const s=new ju(e,t,this.Qe,this.ke,r);return this.ke=ur(),this.qe=sw(),this.Qe=new wt(Be),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new iw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new gt(Be),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iw),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function sw(){return new wt(fe.comparator)}function ow(){return new wt(fe.comparator)}const p1={asc:"ASCENDING",desc:"DESCENDING"},m1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g1={and:"AND",or:"OR"};class y1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qp(n,e){return n.useProto3Json||sd(e)?e:{value:e}}function Za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _1(n,e){return Za(n,e.toTimestamp())}function Nn(n){return xe(!!n),De.fromTimestamp((function(t){const r=$i(t);return new Nt(r.seconds,r.nanos)})(n))}function zm(n,e){return Kp(n,e).canonicalString()}function Kp(n,e){const t=(function(s){return new ct(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function o0(n){const e=ct.fromString(n);return xe(m0(e)),e}function Mh(n,e){return zm(n.databaseId,e.path)}function xo(n,e){const t=o0(e);if(t.get(1)!==n.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(u0(t))}function a0(n,e){return zm(n.databaseId,e)}function l0(n){const e=o0(n);return e.length===4?ct.emptyPath():u0(e)}function Gp(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function u0(n){return xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function aw(n,e,t){return{name:Mh(n,e),fields:t.value.mapValue.fields}}function v1(n,e,t){const r=xo(n,e.name),s=Nn(e.updateTime),a=e.createTime?Nn(e.createTime):De.min(),u=new Sn({mapValue:{fields:e.fields}}),h=Ft.newFoundDocument(r,s,a,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function w1(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(xe(_===void 0||typeof _=="string"),zt.fromBase64String(_||"")):(xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),zt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const _=m.code===void 0?J.UNKNOWN:n0(m.code);return new he(_,m.message||"")})(u);t=new i0(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xo(n,r.document.name),a=Nn(r.document.updateTime),u=r.document.createTime?Nn(r.document.createTime):De.min(),h=new Sn({mapValue:{fields:r.document.fields}}),f=Ft.newFoundDocument(s,a,u,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new wh(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xo(n,r.document),a=r.readTime?Nn(r.readTime):De.min(),u=Ft.newNoDocument(s,a),h=r.removedTargetIds||[];t=new wh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xo(n,r.document),a=r.removedTargetIds||[];t=new wh([],a,s,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new u1(s,a),h=r.targetId;t=new r0(h,u)}}return t}function Fh(n,e){let t;if(e instanceof ul)t={update:aw(n,e.key,e.value)};else if(e instanceof hd)t={delete:Mh(n,e.key)};else if(e instanceof Ki)t={update:aw(n,e.key,e.data),updateMask:A1(e.fieldMask)};else{if(!(e instanceof t0))return Re();t={verify:Mh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const h=u.transform;if(h instanceof Pu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ja)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ya)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Xa)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Re()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:_1(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re()})(n,e.precondition)),t}function Wp(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Rn.updateTime(Nn(a.updateTime)):a.exists!==void 0?Rn.exists(a.exists):Rn.none()})(e.currentDocument):Rn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(u,h){let f=null;if("setToServerValue"in h)xe(h.setToServerValue==="REQUEST_TIME"),f=new Pu;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];f=new Ja(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];f=new Ya(_)}else"increment"in h?f=new Xa(u,h.increment):Re();const m=bt.fromServerFormat(h.fieldPath);return new XI(m,f)})(n,s))):[];if(e.update){e.update.name;const s=xo(n,e.update.name),a=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const m=f.fieldPaths||[];return new Jn(m.map((_=>bt.fromServerFormat(_))))})(e.updateMask);return new Ki(s,a,u,t,r)}return new ul(s,a,t,r)}if(e.delete){const s=xo(n,e.delete);return new hd(s,t)}if(e.verify){const s=xo(n,e.verify);return new t0(s,t)}return Re()}function E1(n,e){return n&&n.length>0?(xe(e!==void 0),n.map((t=>(function(s,a){let u=s.updateTime?Nn(s.updateTime):Nn(a);return u.isEqual(De.min())&&(u=Nn(a)),new o1(u,s.transformResults||[])})(t,e)))):[]}function c0(n,e){return{documents:[a0(n,e.path)]}}function h0(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=a0(n,s);const a=(function(m){if(m.length!==0)return p0(pt.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(T){return{field:Va(T.field),direction:T1(T.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=qp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:t,parent:s}}function d0(n){let e=l0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){xe(r===1);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const T=f0(w);return T instanceof pt&&Lm(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((T=>(function(j){return new Vh(La(j.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let T;return T=typeof w=="object"?w.value:w,sd(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(w){const T=!!w.before,P=w.values||[];return new Ha(P,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const T=!w.before,P=w.values||[];return new Ha(P,T)})(t.endAt)),FI(e,s,u,a,h,"F",f,m)}function I1(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function f0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=La(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=La(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=La(t.unaryFilter.field);return tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=La(t.unaryFilter.field);return tt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(n):n.fieldFilter!==void 0?(function(t){return tt.create(La(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pt.create(t.compositeFilter.filters.map((r=>f0(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re()}})(t.compositeFilter.op))})(n):Re()}function T1(n){return p1[n]}function S1(n){return m1[n]}function R1(n){return g1[n]}function Va(n){return{fieldPath:n.canonicalString()}}function La(n){return bt.fromServerFormat(n.fieldPath)}function p0(n){return n instanceof tt?(function(t){if(t.op==="=="){if(qv(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if($v(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qv(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if($v(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:S1(t.op),value:t.value}}})(n):n instanceof pt?(function(t){const r=t.getFilters().map((s=>p0(s)));return r.length===1?r[0]:{compositeFilter:{op:R1(t.op),filters:r}}})(n):Re()}function A1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function m0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t,r,s,a=De.min(),u=De.min(),h=zt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this.ct=e}}function P1(n,e){let t;if(e.document)t=v1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),s=Uo(e.noDocument.readTime);t=Ft.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Re();{const r=fe.fromSegments(e.unknownDocument.path),s=Uo(e.unknownDocument.version);t=Ft.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new Nt(s[0],s[1]);return De.fromTimestamp(a)})(e.readTime)),t}function lw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,u){return{name:Mh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:Za(a,u.version.toTimestamp()),createTime:Za(a,u.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fo(e.version)};else{if(!e.isUnknownDocument())return Re();r.unknownDocument={path:t.path.toArray(),version:Fo(e.version)}}return r}function Uh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uo(n){const e=new Nt(n.seconds,n.nanoseconds);return De.fromTimestamp(e)}function To(n,e){const t=(e.baseMutations||[]).map((a=>Wp(n.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Wp(n.ct,a))),s=Nt.fromMillis(e.localWriteTimeMs);return new Fm(e.batchId,s,t,r)}function ru(n){const e=Uo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Uo(n.lastLimboFreeSnapshotVersion):De.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){return xe(a.documents.length===1),cr(ad(l0(a.documents[0])))})(n.query):(function(a){return cr(d0(a))})(n.query),new Fi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,zt.fromBase64String(n.resumeToken))}function y0(n,e){const t=Fo(e.snapshotVersion),r=Fo(e.lastLimboFreeSnapshotVersion);let s;s=Lh(e.target)?c0(n.ct,e.target):h0(n.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function _0(n){const e=d0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$p(e,e.limit,"L"):e}function mp(n,e){return new jm(e.largestBatchId,Wp(n.ct,e.overlayMutation))}function uw(n,e){const t=e.path.lastSegment();return[n,bn(e.path.popLast()),t]}function cw(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Fo(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{getBundleMetadata(e,t){return hw(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Uo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return hw(e).put((function(s){return{bundleId:s.id,createTime:Fo(Nn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return dw(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:_0(a.bundledQuery),readTime:Uo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return dw(e).put((function(s){return{name:s.name,readTime:Fo(Nn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function hw(n){return nn(n,"bundles")}function dw(n){return nn(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new dd(e,r)}getOverlay(e,t){return Hl(e).get(uw(this.userId,t)).next((r=>r?mp(this.serializer,r):null))}getOverlays(e,t){const r=li();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,u)=>{const h=new jm(t,u);s.push(this.ht(e,h))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((u=>s.add(bn(u.getCollectionPath()))));const a=[];return s.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(Hl(e).j("collectionPathOverlayIndex",h))})),$.waitFor(a)}getOverlaysForCollection(e,t,r){const s=li(),a=bn(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Hl(e).U("collectionPathOverlayIndex",u).next((h=>{for(const f of h){const m=mp(this.serializer,f);s.set(m.getKey(),m)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=li();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hl(e).J({index:"collectionGroupOverlayIndex",range:h},((f,m,_)=>{const w=mp(this.serializer,m);a.size()<s||w.largestBatchId===u?(a.set(w.getKey(),w),u=w.largestBatchId):_.done()})).next((()=>a))}ht(e,t){return Hl(e).put((function(s,a,u){const[h,f,m]=uw(a,u.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Fh(s.ct,u.mutation)}})(this.serializer,this.userId,t))}}function Hl(n){return nn(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{Pt(e){return nn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t?.value;return r?zt.fromUint8Array(r):zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pt(e.integerValue));else if("doubleValue"in e){const r=Pt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Iu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=$i(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ms(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?CI(e)?this.dt(t,Number.MAX_SAFE_INTEGER):od(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Re()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const s of Object.keys(r))this.Vt(s,t),this.Tt(r[s],t)}wt(e,t){var r,s;const a=e.fields||{};this.dt(t,53);const u="value",h=((s=(r=a[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(t,15),t.At(Pt(h)),this.Vt(u,t),this.Tt(a[u],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const s of r)this.Tt(s,t)}yt(e,t){this.dt(t,37),fe.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}So.vt=new So;function x1(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function fw(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const u=x1(255&r[a]);if(s+=u,u!==8)break}return s})(n);return Math.ceil(e/8)}class D1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=t.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const t=this.qt(e),r=fw(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Kt(e){const t=this.qt(e),r=fw(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class b1{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class N1{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ql{constructor(){this.jt=new D1,this.Ht=new b1(this.jt),this.Jt=new N1(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ro(this.indexId,this.documentKey,this.arrayValue,r)}}function Is(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=pw(n.arrayValue,e.arrayValue),t!==0?t:(t=pw(n.directionalValue,e.directionalValue),t!==0?t:fe.comparator(n.documentKey,e.documentKey)))}function pw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.Xt=new gt(((t,r)=>bt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(xe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Lp(e);if(t!==void 0&&!this.sn(t))return!1;const r=vo(e);let s=new Set,a=0,u=0;for(;a<r.length&&this.sn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Xt.size>0){const h=this.Xt.getIterator().getNext();if(!s.has(h.field.canonicalString())){const f=r[a];if(!this.on(h,f)||!this._n(this.en[u++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(u>=this.en.length||!this._n(this.en[u++],h))return!1}return!0}an(){if(this.nn)return null;let e=new gt(bt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new mh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new mh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new mh(r.field,r.dir==="asc"?0:1)));return new Nh(Nh.UNKNOWN_ID,this.collectionId,t,Eu.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n){var e,t;if(xe(n instanceof tt||n instanceof pt),n instanceof tt){if(n instanceof MI){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>tt.create(n.field,"==",a))))||[];return pt.create(s,"or")}return n}const r=n.filters.map((s=>v0(s)));return pt.create(r,n.op)}function V1(n){if(n.getFilters().length===0)return[];const e=Jp(v0(n));return xe(w0(e)),Hp(e)||Qp(e)?[e]:e.getFilters()}function Hp(n){return n instanceof tt}function Qp(n){return n instanceof pt&&Lm(n)}function w0(n){return Hp(n)||Qp(n)||(function(t){if(t instanceof pt&&Up(t)){for(const r of t.getFilters())if(!Hp(r)&&!Qp(r))return!1;return!0}return!1})(n)}function Jp(n){if(xe(n instanceof tt||n instanceof pt),n instanceof tt)return n;if(n.filters.length===1)return Jp(n.filters[0]);const e=n.filters.map((r=>Jp(r)));let t=pt.create(e,n.op);return t=jh(t),w0(t)?t:(xe(t instanceof pt),xe(Qa(t)),xe(t.filters.length>1),t.filters.reduce(((r,s)=>$m(r,s))))}function $m(n,e){let t;return xe(n instanceof tt||n instanceof pt),xe(e instanceof tt||e instanceof pt),t=n instanceof tt?e instanceof tt?(function(s,a){return pt.create([s,a],"and")})(n,e):gw(n,e):e instanceof tt?gw(e,n):(function(s,a){if(xe(s.filters.length>0&&a.filters.length>0),Qa(s)&&Qa(a))return VI(s,a.getFilters());const u=Up(s)?s:a,h=Up(s)?a:s,f=u.filters.map((m=>$m(m,h)));return pt.create(f,"or")})(n,e),jh(t)}function gw(n,e){if(Qa(e))return VI(e,n.getFilters());{const t=e.filters.map((r=>$m(n,r)));return pt.create(t,"or")}}function jh(n){if(xe(n instanceof tt||n instanceof pt),n instanceof tt)return n;const e=n.getFilters();if(e.length===1)return jh(e[0]);if(bI(n))return n;const t=e.map((s=>jh(s))),r=[];return t.forEach((s=>{s instanceof tt?r.push(s):s instanceof pt&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:pt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.un=new qm}addToCollectionParentIndex(e,t){return this.un.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(hr.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class qm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new gt(ct.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Uint8Array(0);class O1{constructor(e,t){this.databaseId=t,this.cn=new qm,this.ln=new qs((r=>Mo(r)),((r,s)=>Mu(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const a={collectionId:r,parent:bn(s)};return yw(e).put(a)}return $.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[mI(t),""],!1,!0);return yw(e).U(s).next((a=>{for(const u of a){if(u.collectionId!==t)break;r.push(ai(u.parent))}return r}))}addFieldIndex(e,t){const r=Jl(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const u=ka(e);return a.next((h=>{u.put(cw(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Jl(e),s=ka(e),a=Ca(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Jl(e),r=Ca(e),s=ka(e);return t.j().next((()=>r.j())).next((()=>s.j()))}createTargetIndexes(e,t){return $.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new mw(r).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=Ca(e);let s=!0;const a=new Map;return $.forEach(this.hn(t),(u=>this.Pn(e,u).next((h=>{s&&(s=!!h),a.set(u,h)})))).next((()=>{if(s){let u=Ge();const h=[];return $.forEach(a,((f,m)=>{te("IndexedDbIndexManager",`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(f)} to execute ${Mo(t)}`);const _=(function(ee,ae){const de=Lp(ae);if(de===void 0)return null;for(const me of Oh(ee,de.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null})(m,f),w=(function(ee,ae){const de=new Map;for(const me of vo(ae))for(const I of Oh(ee,me.fieldPath))switch(I.op){case"==":case"in":de.set(me.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return de.set(me.fieldPath.canonicalString(),I.value),Array.from(de.values())}return null})(m,f),T=(function(ee,ae){const de=[];let me=!0;for(const I of vo(ae)){const R=I.kind===0?Qv(ee,I.fieldPath,ee.startAt):Jv(ee,I.fieldPath,ee.startAt);de.push(R.value),me&&(me=R.inclusive)}return new Ha(de,me)})(m,f),P=(function(ee,ae){const de=[];let me=!0;for(const I of vo(ae)){const R=I.kind===0?Jv(ee,I.fieldPath,ee.endAt):Qv(ee,I.fieldPath,ee.endAt);de.push(R.value),me&&(me=R.inclusive)}return new Ha(de,me)})(m,f),j=this.In(f,m,T),M=this.In(f,m,P),U=this.Tn(f,m,w),oe=this.En(f.indexId,_,j,T.inclusive,M,P.inclusive,U);return $.forEach(oe,(H=>r.G(H,t.limit).next((ee=>{ee.forEach((ae=>{const de=fe.fromSegments(ae.documentKey);u.has(de)||(u=u.add(de),h.push(de))}))}))))})).next((()=>h))}return $.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=V1(pt.create(e.filters,"and")).map((r=>Bp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,s,a,u,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),m=f/(t!=null?t.length:1),_=[];for(let w=0;w<f;++w){const T=t?this.dn(t[w/m]):sh,P=this.An(e,T,r[w%m],s),j=this.Rn(e,T,a[w%m],u),M=h.map((U=>this.An(e,T,U,!0)));_.push(...this.createRange(P,j,M))}return _}An(e,t,r,s){const a=new Ro(e,fe.empty(),t,r);return s?a:a.Zt()}Rn(e,t,r,s){const a=new Ro(e,fe.empty(),t,r);return s?a.Zt():a}Pn(e,t){const r=new mw(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let u=null;for(const h of a)r.rn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,t){let r=2;const s=this.hn(t);return $.forEach(s,(a=>this.Pn(e,a).next((u=>{u?r!==0&&u.fields.length<(function(f){let m=new gt(bt.comparator),_=!1;for(const w of f.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?_=!0:m=m.add(T.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(_?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&s.length>1&&r===2?1:r))}Vn(e,t){const r=new Ql;for(const s of vo(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const u=r.Yt(s.kind);So.vt.It(a,u)}return r.zt()}dn(e){const t=new Ql;return So.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Ql;return So.vt.It(Ru(this.databaseId,t),r.Yt((function(a){const u=vo(a);return u.length===0?0:u[u.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let s=[];s.push(new Ql);let a=0;for(const u of vo(e)){const h=r[a++];for(const f of s)if(this.fn(t,u.fieldPath)&&Au(h))s=this.gn(s,u,h);else{const m=f.Yt(u.kind);So.vt.It(h,m)}}return this.pn(s)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const s=[...e],a=[];for(const u of r.arrayValue.values||[])for(const h of s){const f=new Ql;f.seed(h.zt()),So.vt.It(u,f.Yt(t.kind)),a.push(f)}return a}fn(e,t){return!!e.filters.find((r=>r instanceof tt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Jl(e),s=ka(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((a=>{const u=[];return $.forEach(a,(h=>s.get([h.indexId,this.uid]).next((f=>{u.push((function(_,w){const T=w?new Eu(w.sequenceNumber,new hr(Uo(w.readTime),new fe(ai(w.documentKey)),w.largestBatchId)):Eu.empty(),P=_.fields.map((([j,M])=>new mh(bt.fromServerFormat(j),M)));return new Nh(_.indexId,_.collectionGroup,P,T)})(h,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Be(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Jl(e),a=ka(e);return this.yn(e).next((u=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((h=>$.forEach(h,(f=>a.put(cw(f.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return $.forEach(t,((s,a)=>{const u=r.get(s.collectionGroup);return(u?$.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(r.set(s.collectionGroup,h),$.forEach(h,(f=>this.wn(e,s,f).next((m=>{const _=this.Sn(a,f);return m.isEqual(_)?$.resolve():this.bn(e,a,f,m,_)})))))))}))}Dn(e,t,r,s){return Ca(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,s){return Ca(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=Ca(e);let a=new gt(Is);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((u,h)=>{a=a.add(new Ro(r.indexId,t,h.arrayValue,h.directionalValue))})).next((()=>a))}Sn(e,t){let r=new gt(Is);const s=this.Vn(t,e);if(s==null)return r;const a=Lp(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Au(u))for(const h of u.arrayValue.values||[])r=r.add(new Ro(t.indexId,e.key,this.dn(h),s))}else r=r.add(new Ro(t.indexId,e.key,sh,s));return r}bn(e,t,r,s,a){te("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return(function(f,m,_,w,T){const P=f.getIterator(),j=m.getIterator();let M=Pa(P),U=Pa(j);for(;M||U;){let oe=!1,H=!1;if(M&&U){const ee=_(M,U);ee<0?H=!0:ee>0&&(oe=!0)}else M!=null?H=!0:oe=!0;oe?(w(U),U=Pa(j)):H?(T(M),M=Pa(P)):(M=Pa(P),U=Pa(j))}})(s,a,Is,(h=>{u.push(this.Dn(e,t,r,h))}),(h=>{u.push(this.vn(e,t,r,h))})),$.waitFor(u)}yn(e){let t=1;return ka(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,h)=>Is(u,h))).filter(((u,h,f)=>!h||Is(u,f[h-1])!==0));const s=[];s.push(e);for(const u of r){const h=Is(u,e),f=Is(u,t);if(h===0)s[0]=e.Zt();else if(h>0&&f<0)s.push(u),s.push(u.Zt());else if(f>0)break}s.push(t);const a=[];for(let u=0;u<s.length;u+=2){if(this.Cn(s[u],s[u+1]))return[];const h=[s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,sh,[]],f=[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,sh,[]];a.push(IDBKeyRange.bound(h,f))}return a}Cn(e,t){return Is(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_w)}getMinOffset(e,t){return $.mapArray(this.hn(t),(r=>this.Pn(e,r).next((s=>s||Re())))).next(_w)}}function yw(n){return nn(n,"collectionParents")}function Ca(n){return nn(n,"indexEntries")}function Jl(n){return nn(n,"indexConfiguration")}function ka(n){return nn(n,"indexState")}function _w(n){xe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;xm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new hr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const f=r.J({range:u},((_,w,T)=>(h++,T.delete())));a.push(f.next((()=>{xe(h===1)})));const m=[];for(const _ of t.mutations){const w=II(e,_.key.path,t.batchId);a.push(s.delete(w)),m.push(_.key)}return $.waitFor(a).next((()=>m))}function Bh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Re();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(41943040,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class fd{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,t,r,s){xe(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new fd(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ts(e).J({index:"userMutationsIndex",range:r},((s,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=Oa(e),u=Ts(e);return u.add({}).next((h=>{xe(typeof h=="number");const f=new Fm(h,t,r,s),m=(function(P,j,M){const U=M.baseMutations.map((H=>Fh(P.ct,H))),oe=M.mutations.map((H=>Fh(P.ct,H)));return{userId:j,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:U,mutations:oe}})(this.serializer,this.userId,f),_=[];let w=new gt(((T,P)=>Be(T.canonicalString(),P.canonicalString())));for(const T of s){const P=II(this.userId,T.key.path,h);w=w.add(T.key.path.popLast()),_.push(u.put(m)),_.push(a.put(P,Ex))}return w.forEach((T=>{_.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Fn[h]=f.keys()})),$.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return Ts(e).get(t).next((r=>r?(xe(r.userId===this.userId),To(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?$.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Fn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ts(e).J({index:"userMutationsIndex",range:s},((u,h,f)=>{h.userId===this.userId&&(xe(h.batchId>=r),a=To(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ts(e).J({index:"userMutationsIndex",range:t,reverse:!0},((s,a,u)=>{r=a.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ts(e).U("userMutationsIndex",t).next((r=>r.map((s=>To(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return Oa(e).J({range:s},((u,h,f)=>{const[m,_,w]=u,T=ai(_);if(m===this.userId&&t.path.isEqual(T))return Ts(e).get(w).next((P=>{if(!P)throw Re();xe(P.userId===this.userId),a.push(To(this.serializer,P))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(Be);const s=[];return t.forEach((a=>{const u=gh(this.userId,a.path),h=IDBKeyRange.lowerBound(u),f=Oa(e).J({range:h},((m,_,w)=>{const[T,P,j]=m,M=ai(P);T===this.userId&&a.path.isEqual(M)?r=r.add(j):w.done()}));s.push(f)})),$.waitFor(s).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=gh(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new gt(Be);return Oa(e).J({range:u},((f,m,_)=>{const[w,T,P]=f,j=ai(T);w===this.userId&&r.isPrefixOf(j)?j.length===s&&(h=h.add(P)):_.done()})).next((()=>this.xn(e,h)))}xn(e,t){const r=[],s=[];return t.forEach((a=>{s.push(Ts(e).get(a).next((u=>{if(u===null)throw Re();xe(u.userId===this.userId),r.push(To(this.serializer,u))})))})),$.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return E0(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),$.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),s=[];return Oa(e).J({range:r},((a,u,h)=>{if(a[0]===this.userId){const f=ai(a[1]);s.push(f)}else h.done()})).next((()=>{xe(s.length===0)}))}))}containsKey(e,t){return I0(e,this.userId,t)}Nn(e){return T0(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function I0(n,e,t){const r=gh(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Oa(n).J({range:a,H:!0},((h,f,m)=>{const[_,w,T]=h;_===e&&w===s&&(u=!0),m.done()})).next((()=>u))}function Ts(n){return nn(n,"mutations")}function Oa(n){return nn(n,"documentMutations")}function T0(n){return nn(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jo(0)}static kn(){return new jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new jo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>De.fromTimestamp(new Nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Qn(e,s))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>xa(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(xe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return xa(e).J(((u,h)=>{const f=ru(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>$.waitFor(a))).next((()=>s))}forEachTarget(e,t){return xa(e).J(((r,s)=>{const a=ru(s);t(a)}))}qn(e){return ww(e).get("targetGlobalKey").next((t=>(xe(t!==null),t)))}Qn(e,t){return ww(e).put("targetGlobalKey",t)}Kn(e,t){return xa(e).put(y0(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Mo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return xa(e).J({range:s,index:"queryTargetsIndex"},((u,h,f)=>{const m=ru(h);Mu(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=ks(e);return t.forEach((u=>{const h=bn(u.path);s.push(a.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))})),$.waitFor(s)}removeMatchingKeys(e,t,r){const s=ks(e);return $.forEach(t,(a=>{const u=bn(a.path);return $.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=ks(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ks(e);let a=Ge();return s.J({range:r,H:!0},((u,h,f)=>{const m=ai(u[1]),_=new fe(m);a=a.add(_)})).next((()=>a))}containsKey(e,t){const r=bn(t.path),s=IDBKeyRange.bound([r],[mI(r)],!1,!0);let a=0;return ks(e).J({index:"documentTargetsIndex",H:!0,range:s},(([u,h],f,m)=>{u!==0&&(a++,m.done())})).next((()=>a>0))}ot(e,t){return xa(e).get(t).next((r=>r?ru(r):null))}}function xa(n){return nn(n,"targets")}function ww(n){return nn(n,"targetGlobal")}function ks(n){return nn(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew([n,e],[t,r]){const s=Be(n,t);return s===0?Be(e,r):s}class F1{constructor(e){this.Un=e,this.buffer=new gt(Ew),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ew(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$s(t)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await zs(t)}await this.Hn(3e5)}))}}class j1{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Qn.oe);const r=new F1(t);return this.Jn.forEachTarget(e,(s=>r.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>r.zn(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(vw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vw):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,s,a,u,h,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),ba()<=et.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w}))))}}function B1(n,e){return new j1(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t){this.db=e,this.garbageCollector=B1(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,s)=>t(s)))}addReference(e,t,r){return oh(e,r)}removeReference(e,t,r){return oh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return oh(e,t)}nr(e,t){return(function(s,a){let u=!1;return T0(s).Y((h=>I0(s,h,a).next((f=>(f&&(u=!0),$.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.tr(e,((u,h)=>{if(h<=t){const f=this.nr(e,u).next((m=>{if(!m)return a++,r.getEntry(e,u).next((()=>(r.removeEntry(u,De.min()),ks(e).delete((function(w){return[0,bn(w.path)]})(u)))))}));s.push(f)}})).next((()=>$.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return oh(e,t)}tr(e,t){const r=ks(e);let s,a=Qn.oe;return r.J({index:"documentTargetsIndex"},(([u,h],{path:f,sequenceNumber:m})=>{u===0?(a!==Qn.oe&&t(new fe(ai(s)),a),a=m,s=f):a=Qn.oe})).next((()=>{a!==Qn.oe&&t(new fe(ai(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oh(n,e){return ks(n).put((function(r,s){return{targetId:0,path:bn(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.changes=new qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yo(e).put(r)}removeEntry(e,t,r){return yo(e).delete((function(a,u){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Uh(u),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=Ft.newInvalidDocument(t);return yo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yl(t))},((s,a)=>{r=this.ir(t,a)})).next((()=>r))}sr(e,t){let r={size:0,document:Ft.newInvalidDocument(t)};return yo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yl(t))},((s,a)=>{r={document:this.ir(t,a),size:Bh(a)}})).next((()=>r))}getEntries(e,t){let r=ur();return this._r(e,t,((s,a)=>{const u=this.ir(s,a);r=r.insert(s,u)})).next((()=>r))}ar(e,t){let r=ur(),s=new wt(fe.comparator);return this._r(e,t,((a,u)=>{const h=this.ir(a,u);r=r.insert(a,h),s=s.insert(a,Bh(u))})).next((()=>({documents:r,ur:s})))}_r(e,t,r){if(t.isEmpty())return $.resolve();let s=new gt(Sw);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(Yl(s.first()),Yl(s.last())),u=s.getIterator();let h=u.getNext();return yo(e).J({index:"documentKeyIndex",range:a},((f,m,_)=>{const w=fe.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;h&&Sw(h,w)<0;)r(h,null),h=u.getNext();h&&h.isEqual(w)&&(r(h,m),h=u.hasNext()?u.getNext():null),h?_.$(Yl(h)):_.done()})).next((()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),Uh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yo(e).U(IDBKeyRange.bound(h,f,!0)).next((m=>{a?.incrementDocumentReadCount(m.length);let _=ur();for(const w of m){const T=this.ir(fe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Uu(t,T)||s.has(T.key))&&(_=_.insert(T.key,T))}return _}))}getAllFromCollectionGroup(e,t,r,s){let a=ur();const u=Tw(t,r),h=Tw(t,hr.max());return yo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},((f,m,_)=>{const w=this.ir(fe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===s&&_.done()})).next((()=>a))}newChangeBuffer(e){return new q1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Iw(e).get("remoteDocumentGlobalKey").next((t=>(xe(!!t),t)))}rr(e,t){return Iw(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=P1(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(De.min())))return r}return Ft.newInvalidDocument(e)}}function R0(n){return new $1(n)}class q1 extends S0{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new qs((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new gt(((a,u)=>Be(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const h=this.lr.get(a);if(t.push(this.cr.removeEntry(e,a,h.readTime)),u.isValidDocument()){const f=lw(this.cr.serializer,u);s=s.add(a.path.popLast());const m=Bh(f);r+=m-h.size,t.push(this.cr.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=lw(this.cr.serializer,u.convertToNoDocument(De.min()));t.push(this.cr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.cr.updateMetadata(e,r)),$.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:s})=>(s.forEach(((a,u)=>{this.lr.set(a,{size:u,readTime:r.get(a).readTime})})),r)))}}function Iw(n){return nn(n,"remoteDocumentGlobal")}function yo(n){return nn(n,"remoteDocumentsV14")}function Yl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tw(n,e){const t=e.documentKey.path.toArray();return[n,Uh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sw(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=Be(t[a],r[a]),s)return s;return s=Be(t.length,r.length),s||(s=Be(t[t.length-2],r[r.length-2]),s||Be(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&cu(r.mutation,s,Jn.empty(),Nt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const s=li();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=tu();return a.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=li();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,r,s){let a=ur();const u=uu(),h=(function(){return uu()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof Ki)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),cu(_.mutation,m,_.mutation.getFieldMask(),Nt.now())):u.set(m.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var w;return h.set(m,new K1(_,(w=u.get(m))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,t){const r=uu();let s=new wt(((u,h)=>u-h)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||Jn.empty();_=h.applyToLocalView(m,_),r.set(f,_);const w=(s.get(h.batchId)||Ge()).add(f);s=s.insert(h.batchId,w)}))})).next((()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,_=f.value,w=KI();_.forEach((T=>{if(!a.has(T)){const P=ZI(t.get(T),r.get(T));P!==null&&w.set(T,P),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return $.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return fe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):$.resolve(li());let h=-1,f=a;return u.next((m=>$.forEach(m,((_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(_)?$.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{f=f.insert(_,T)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ge()))).next((_=>({batchId:h,changes:qI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((r=>{let s=tu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=tu();return this.indexManager.getCollectionParents(e,a).next((h=>$.forEach(h,(f=>{const m=(function(w,T){return new Fu(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((w,T)=>{u=u.insert(w,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,Ft.newInvalidDocument(_)))}));let h=tu();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&cu(_.mutation,m,Jn.empty(),Nt.now()),Uu(t,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return $.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:_0(s.bundledQuery),readTime:Nn(s.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.overlays=new wt(fe.comparator),this.Ir=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=li();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.ht(e,t,a)})),$.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const s=li(),a=t.length+1,u=new fe(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new wt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=li(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=li(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>h.set(m,_))),!(h.size()>=s)););return $.resolve(h)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new jm(t,r));let a=this.Ir.get(t);a===void 0&&(a=Ge(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.Tr=new gt(un.Er),this.dr=new gt(un.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new un(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new un(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new fe(new ct([])),r=new un(t,e),s=new un(t,e+1),a=[];return this.dr.forEachInRange([r,s],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new fe(new ct([])),r=new un(t,e),s=new un(t,e+1);let a=Ge();return this.dr.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new un(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class un{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return fe.comparator(e.key,t.key)||Be(e.wr,t.wr)}static Ar(e,t){return Be(e.wr,t.wr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new gt(un.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Fm(a,t,r,s);this.mutationQueue.push(u);for(const h of s)this.br=this.br.add(new un(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(u)}lookupMutationBatch(e,t){return $.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),a=s<0?0:s;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new un(t,0),s=new un(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(u=>{const h=this.Dr(u.wr);a.push(h)})),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(Be);return t.forEach((s=>{const a=new un(s,0),u=new un(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(h=>{r=r.add(h.wr)}))})),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;fe.isDocumentKey(a)||(a=a.child(""));const u=new un(new fe(a),0);let h=new gt(Be);return this.br.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.wr)),!0)}),u),$.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){xe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(t.mutations,(s=>{const a=new un(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new un(t,0),s=this.br.firstAfterOrEqual(r);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.Mr=e,this.docs=(function(){return new wt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let r=ur();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Ft.newInvalidDocument(s))})),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=ur();const u=t.path,h=new fe(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||xm(yI(_),r)<=0||(s.has(_.key)||Uu(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Re()}Or(e,t){return $.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Y1(this)}getSize(e){return $.resolve(this.size)}}class Y1 extends S0{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),$.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.persistence=e,this.Nr=new qs((t=>Mo(t)),Mu),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Km,this.targetCount=0,this.kr=jo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),$.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Kn(t),$.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Nr.forEach(((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),$.waitFor(a).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Qn(0),this.Kr=!1,this.Kr=!0,this.$r=new H1,this.referenceDelegate=e(this),this.Ur=new X1(this),this.indexManager=new L1,this.remoteDocumentCache=(function(s){return new J1(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new g0(t),this.Gr=new G1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new W1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Q1(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);const s=new Z1(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,t){return $.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class Z1 extends vI{constructor(e){super(),this.currentSequenceNumber=e}}class pd{constructor(e){this.persistence=e,this.Jr=new Km,this.Yr=null}static Zr(e){return new pd(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),$.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,(r=>{const s=fe.fromPath(r);return this.ei(e,s).next((a=>{a||t.removeEntry(s,De.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return $.or([()=>$.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.serializer=e}O(e,t,r,s){const a=new id("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore("owner")})(e),(function(f){f.createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fv,{unique:!0}),f.createObjectStore("documentMutations")})(e),Rw(e),(function(f){f.createObjectStore("remoteDocuments")})(e));let u=$.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")})(e),Rw(e)),u=u.next((()=>(function(f){const m=f.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",_)})(a)))),r<4&&s>=4&&(r!==0&&(u=u.next((()=>(function(f,m){return m.store("mutations").U().next((_=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fv,{unique:!0});const w=m.store("mutations"),T=_.map((P=>w.put(P)));return $.waitFor(T)}))})(e,a)))),u=u.next((()=>{(function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&s>=5&&(u=u.next((()=>this.ni(a)))),r<6&&s>=6&&(u=u.next((()=>((function(f){f.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),r<7&&s>=7&&(u=u.next((()=>this.ii(a)))),r<8&&s>=8&&(u=u.next((()=>this.si(e,a)))),r<9&&s>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(u=u.next((()=>this.oi(a)))),r<11&&s>=11&&(u=u.next((()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(f){f.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&s>=12&&(u=u.next((()=>{(function(f){const m=f.createObjectStore("documentOverlays",{keyPath:Nx});m.createIndex("collectionPathOverlayIndex",Vx,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Lx,{unique:!1})})(e)}))),r<13&&s>=13&&(u=u.next((()=>(function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:Ix});m.createIndex("documentKeyIndex",Tx),m.createIndex("collectionGroupIndex",Sx)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&s>=14&&(u=u.next((()=>this.ai(e,a)))),r<15&&s>=15&&(u=u.next((()=>(function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:kx}).createIndex("sequenceNumberIndex",xx,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Dx}).createIndex("documentKeyIndex",bx,{unique:!1})})(e)))),r<16&&s>=16&&(u=u.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&s>=17&&(u=u.next((()=>{(function(f){f.createObjectStore("globals",{keyPath:"name"})})(e)}))),u}ri(e){let t=0;return e.store("remoteDocuments").J(((r,s)=>{t+=Bh(s)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((s=>$.forEach(s,(a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",u).next((h=>$.forEach(h,(f=>{xe(f.userId===a.userId);const m=To(this.serializer,f);return E0(e,a.userId,m).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const a=[];return r.J(((u,h)=>{const f=new ct(u),m=(function(w){return[0,bn(w)]})(f);a.push(t.get(m).next((_=>_?$.resolve():(w=>t.put({targetId:0,path:bn(w),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>$.waitFor(a)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:Cx});const r=t.store("collectionParents"),s=new qm,a=u=>{if(s.add(u)){const h=u.lastSegment(),f=u.popLast();return r.put({collectionId:h,parent:bn(f)})}};return t.store("remoteDocuments").J({H:!0},((u,h)=>{const f=new ct(u);return a(f.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([u,h,f],m)=>{const _=ai(h);return a(_.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,s)=>{const a=ru(s),u=y0(this.serializer,a);return t.put(u)}))}_i(e,t){const r=t.store("remoteDocuments"),s=[];return r.J(((a,u)=>{const h=t.store("remoteDocumentsV14"),f=(function(w){return w.document?new fe(ct.fromString(w.document.name).popFirst(5)):w.noDocument?fe.fromSegments(w.noDocument.path):w.unknownDocument?fe.fromSegments(w.unknownDocument.path):Re()})(u).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(m))})).next((()=>$.waitFor(s)))}ai(e,t){const r=t.store("mutations"),s=R0(this.serializer),a=new P0(pd.Zr,this.serializer.ct);return r.U().next((u=>{const h=new Map;return u.forEach((f=>{var m;let _=(m=h.get(f.userId))!==null&&m!==void 0?m:Ge();To(this.serializer,f).keys().forEach((w=>_=_.add(w))),h.set(f.userId,_)})),$.forEach(h,((f,m)=>{const _=new Tn(m),w=dd.lt(this.serializer,_),T=a.getIndexManager(_),P=fd.lt(_,this.serializer,T,a.referenceDelegate);return new A0(s,P,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Op(t,Qn.oe),f).next()}))}))}}function Rw(n){n.createObjectStore("targetDocuments",{keyPath:Ax}).createIndex("documentTargetsIndex",Px,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rx,{unique:!0}),n.createObjectStore("targetGlobal")}const gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gm{constructor(e,t,r,s,a,u,h,f,m,_,w=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=a,this.window=u,this.document=h,this.ci=m,this.li=_,this.hi=w,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=T=>Promise.resolve(),!Gm.D())throw new he(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new z1(this,s),this.Ai=t+"main",this.serializer=new g0(f),this.Ri=new Vs(this.Ai,this.hi,new eD(this.serializer)),this.$r=new k1,this.Ur=new M1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=R0(this.serializer),this.Gr=new C1,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,_===!1&&Bt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(J.FAILED_PRECONDITION,gp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Qn(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if($s(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Xl(e).get("owner").next((t=>$.resolve(this.vi(t))))}Ci(e){return ah(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=nn(t,"clientMetadata");return r.U().next((s=>{const a=this.xi(s,18e5),u=s.filter((h=>a.indexOf(h)===-1));return $.forEach(u,(h=>r.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):Xl(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new he(J.FAILED_PRECONDITION,gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||ah(e).U().next((r=>this.xi(r,5e3).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(a||u&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&te("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Op(e,Qn.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>ah(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return fd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new O1(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return dd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){te("IndexedDbPersistence","Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===17?Fx:f===16?Mx:f===15?bm:f===14?RI:f===13?SI:f===12?Ox:f===11?TI:void Re()})(this.hi);let u;return this.Ri.runTransaction(e,s,a,(h=>(u=new Op(h,this.Qr?this.Qr.next():Qn.oe),t==="readwrite-primary"?this.wi(u).next((f=>!!f||this.Si(u))).next((f=>{if(!f)throw Bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new he(J.FAILED_PRECONDITION,_I);return r(u)})).next((f=>this.Di(u).next((()=>f)))):this.Ki(u).next((()=>r(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Ki(e){return Xl(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(J.FAILED_PRECONDITION,gp)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xl(e).put("owner",t)}static D(){return Vs.D()}bi(e){const t=Xl(e);return t.get("owner").next((r=>this.vi(r)?(te("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;TE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Bt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xl(n){return nn(n,"owner")}function ah(n){return nn(n,"clientMetadata")}function C0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Ge(),s=Ge();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Wm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return TE()?8:wI(tn())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new tD;return this.Xi(e,t,u).next((h=>{if(a.result=h,this.zi)return this.es(e,t,u,h.size)}))})).next((()=>a.result))}es(e,t,r,s){return r.documentReadCount<this.ji?(ba()<=et.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Na(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(ba()<=et.DEBUG&&te("QueryEngine","Query:",Na(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ba()<=et.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Na(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):$.resolve())}Yi(e,t){if(Yv(t))return $.resolve(null);let r=cr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=$p(t,null,"F"),r=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ge(...a);return this.Ji.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.ts(t,h);return this.ns(t,m,u,f.readTime)?this.Yi(e,$p(t,null,"F")):this.rs(e,m,t,f)}))))})))))}Zi(e,t,r,s){return Yv(t)||s.isEqual(De.min())?$.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const u=this.ts(t,a);return this.ns(t,u,r,s)?$.resolve(null):(ba()<=et.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Na(t)),this.rs(e,u,t,gI(s,-1)).next((h=>h)))}))}ts(e,t){let r=new gt(zI(e));return t.forEach(((s,a)=>{Uu(e,a)&&(r=r.add(a))})),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,t,r){return ba()<=et.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Na(t)),this.Ji.getDocumentsMatchingQuery(e,t,hr.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new wt(Be),this._s=new qs((a=>Mo(a)),Mu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function x0(n,e,t,r){return new nD(n,e,t,r)}async function D0(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],h=[];let f=Ge();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){h.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({hs:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function rD(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,_){const w=m.batch,T=w.keys();let P=$.resolve();return T.forEach((j=>{P=P.next((()=>_.getEntry(f,j))).next((M=>{const U=m.docVersions.get(j);xe(U!==null),M.version.compareTo(U)<0&&(w.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),_.addEntry(M)))}))})),P.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Ge();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function b0(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function iD(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const h=[];e.targetChanges.forEach(((_,w)=>{const T=s.get(w);if(!T)return;h.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,w))));let P=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(zt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,r)),s=s.insert(w,P),(function(M,U,oe){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(T,P,_)&&h.push(t.Ur.updateTargetData(a,P))}));let f=ur(),m=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(sD(a,u,e.documentUpdates).next((_=>{f=_.Ps,m=_.Is}))),!r.isEqual(De.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((w=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return $.waitFor(h).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.os=s,a)))}function sD(n,e,t){let r=Ge(),s=Ge();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=ur();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(De.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):te("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{Ps:u,Is:s}}))}function oD(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zh(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Ur.getTargetData(r,e).next((a=>a?(s=a,$.resolve(s)):t.Ur.allocateTargetId(r).next((u=>(s=new Fi(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function el(n,e,t){const r=Pe(n),s=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!$s(u))throw u;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Yp(n,e,t){const r=Pe(n);let s=De.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const w=Pe(f),T=w._s.get(_);return T!==void 0?$.resolve(w.os.get(T)):w.Ur.getTargetData(m,_)})(r,u,cr(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,t?s:De.min(),t?a:Ge()))).next((h=>(L0(r,BI(e),h),{documents:h,Ts:a})))))}function N0(n,e){const t=Pe(n),r=Pe(t.Ur),s=t.os.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>r.ot(a,e).next((u=>u?u.target:null))))}function V0(n,e){const t=Pe(n),r=t.us.get(e)||De.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.cs.getAllFromCollectionGroup(s,e,gI(r,-1),Number.MAX_SAFE_INTEGER))).then((s=>(L0(t,e,s),s)))}function L0(n,e,t){let r=n.us.get(e)||De.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.us.set(e,r)}function Aw(n,e){return`firestore_clients_${n}_${e}`}function Pw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yp(n,e){return`firestore_targets_${n}_${e}`}class $h{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Rs(e,t,r){const s=JSON.parse(r);let a,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(a=new he(s.error.code,s.error.message))),u?new $h(e,t,s.state,a):(Bt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let s,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new he(r.error.code,r.error.message))),a?new hu(e,r.state,s):(Bt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,a=Om();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=EI(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return s?new qh(e,a):(Bt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Hm{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Hm(t.clientId,t.onlineState):(Bt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xp{constructor(){this.activeTargetIds=Om()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _p{constructor(e,t,r,s,a){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new wt(Be),this.started=!1,this.bs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=Aw(this.persistenceKey,this.ps),this.vs=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Xp),this.Cs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.xs=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.Os=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(Aw(this.persistenceKey,r));if(s){const a=qh.Rs(r,s);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(yp(this.persistenceKey,e));if(s){const a=hu.Rs(e,s);a&&(r=a.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yp(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Qs(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return te("SharedClientState","READ",e,t),t}setItem(e,t){te("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(te("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(a){let u=Qn.oe;if(a!=null)try{const h=JSON.parse(a);xe(typeof h=="number"),u=h}catch(h){Bt("SharedClientState","Failed to read sequence number from WebStorage",h)}return u})(t.newValue);r!==Qn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const s=new $h(this.currentUser,e,t,r),a=Pw(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Vs())}Qs(e){const t=Pw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const s=yp(this.persistenceKey,e),a=new hu(e,t,r);this.setItem(s,a.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return qh.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),s=Number(r[1]),a=r[2]!==void 0?r[2]:null;return $h.Rs(new Tn(a),s,t)}Ys(e,t){const r=this.Ms.exec(e),s=Number(r[1]);return hu.Rs(s,t)}Ls(e){return Hm.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),s=this.ks(this.Ss),a=this.ks(r),u=[],h=[];return a.forEach((f=>{s.has(f)||u.push(f)})),s.forEach((f=>{a.has(f)||h.push(f)})),this.syncEngine.io(u,h).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Om();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class O0{constructor(){this.so=new Xp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function vp(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class cD extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(t,r,s,a,u){const h=vp(),f=this.xo(t,r.toUriEncodedString());te("RestConnection",`Sending RPC '${t}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(t,f,m,s).then((_=>(te("RestConnection",`Received RPC '${t}' ${h}: `,_),_)),(_=>{throw vu("RestConnection",`RPC '${t}' ${h} failed with error: `,_,"url: ",f,"request:",s),_}))}Lo(t,r,s,a,u,h){return this.Mo(t,r,s,a,u)}Oo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,u)=>t[u]=a)),s&&s.headers.forEach(((a,u)=>t[u]=a))}xo(t,r){const s=lD[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const a=vp();return new Promise(((u,h)=>{const f=new uI;f.setWithCredentials(!0),f.listenOnce(cI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case ph.NO_ERROR:const _=f.getResponseJson();te(In,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case ph.TIMEOUT:te(In,`RPC '${e}' ${a} timed out`),h(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const w=f.getStatus();if(te(In,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const P=T?.error;if(P&&P.status&&P.message){const j=(function(U){const oe=U.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(oe)>=0?oe:J.UNKNOWN})(P.status);h(new he(j,P.message))}else h(new he(J.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(J.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{te(In,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);te(In,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)}))}Bo(e,t,r){const s=vp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fI(),h=dI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");te(In,`Creating RPC '${e}' stream ${s}: ${_}`,f);const w=u.createWebChannel(_,f);let T=!1,P=!1;const j=new uD({Io:U=>{P?te(In,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(T||(te(In,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),te(In,`RPC '${e}' stream ${s} sending:`,U),w.send(U))},To:()=>w.close()}),M=(U,oe,H)=>{U.listen(oe,(ee=>{try{H(ee)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return M(w,eu.EventType.OPEN,(()=>{P||(te(In,`RPC '${e}' stream ${s} transport opened.`),j.yo())})),M(w,eu.EventType.CLOSE,(()=>{P||(P=!0,te(In,`RPC '${e}' stream ${s} transport closed`),j.So())})),M(w,eu.EventType.ERROR,(U=>{P||(P=!0,vu(In,`RPC '${e}' stream ${s} transport errored:`,U),j.So(new he(J.UNAVAILABLE,"The operation could not be completed")))})),M(w,eu.EventType.MESSAGE,(U=>{var oe;if(!P){const H=U.data[0];xe(!!H);const ee=H,ae=ee.error||((oe=ee[0])===null||oe===void 0?void 0:oe.error);if(ae){te(In,`RPC '${e}' stream ${s} received error:`,ae);const de=ae.status;let me=(function(A){const x=Wt[A];if(x!==void 0)return n0(x)})(de),I=ae.message;me===void 0&&(me=J.INTERNAL,I="Unknown error status: "+de+" with message "+ae.message),P=!0,j.So(new he(me,I)),w.close()}else te(In,`RPC '${e}' stream ${s} received:`,H),j.bo(H)}})),M(h,hI.STAT_EVENT,(U=>{U.stat===Vp.PROXY?te(In,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Vp.NOPROXY&&te(In,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{j.wo()}),0),j}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(){return typeof window<"u"?window:null}function Eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){return new y1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,t,r,s,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new F0(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Bt(t.toString()),Bt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===t&&this.P_(r,s)}),(r=>{e((()=>{const s=new he(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hD extends U0{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=w1(this.serializer,e),r=(function(a){if(!("targetChange"in a))return De.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?Nn(u.readTime):De.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Gp(this.serializer),t.addTarget=(function(a,u){let h;const f=u.target;if(h=Lh(f)?{documents:c0(a,f)}:{query:h0(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=s0(a,u.resumeToken);const m=qp(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(De.min())>0){h.readTime=Za(a,u.snapshotVersion.toTimestamp());const m=qp(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=I1(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Gp(this.serializer),t.removeTarget=e,this.a_(t)}}class dD extends U0{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=E1(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Gp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Fh(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,Kp(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(J.UNKNOWN,a.toString())}))}Lo(e,t,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Lo(e,Kp(t,r),s,u,h,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(J.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class pD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Bt(t),this.D_=!1):te("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{r.enqueueAndForget((async()=>{$o(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const m=Pe(f);m.L_.add(4),await zu(m),m.q_.set("Unknown"),m.L_.delete(4),await gd(m)})(this))}))})),this.q_=new pD(r,s)}}async function gd(n){if($o(n))for(const e of n.B_)await e(!0)}async function zu(n){for(const e of n.B_)await e(!1)}function yd(n,e){const t=Pe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Ym(t)?Jm(t):hl(t).r_()&&Qm(t,e))}function tl(n,e){const t=Pe(n),r=hl(t);t.N_.delete(e),r.r_()&&j0(t,e),t.N_.size===0&&(r.r_()?r.o_():$o(t)&&t.q_.set("Unknown"))}function Qm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).A_(e)}function j0(n,e){n.Q_.xe(e),hl(n).R_(e)}function Jm(n){n.Q_=new f1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.q_.v_()}function Ym(n){return $o(n)&&!hl(n).n_()&&n.N_.size>0}function $o(n){return Pe(n).L_.size===0}function B0(n){n.Q_=void 0}async function gD(n){n.q_.set("Online")}async function yD(n){n.N_.forEach(((e,t)=>{Qm(n,e)}))}async function _D(n,e){B0(n),Ym(n)?(n.q_.M_(e),Jm(n)):n.q_.set("Unknown")}async function vD(n,e,t){if(n.q_.set("Online"),e instanceof i0&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const h of a.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.N_.delete(h),s.Q_.removeTarget(h))})(n,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kh(n,r)}else if(e instanceof wh?n.Q_.Ke(e):e instanceof r0?n.Q_.He(e):n.Q_.We(e),!t.isEqual(De.min()))try{const r=await b0(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(m);_&&a.N_.set(m,_.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(zt.EMPTY_BYTE_STRING,_.snapshotVersion)),j0(a,f);const w=new Fi(_.target,f,m,_.sequenceNumber);Qm(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await Kh(n,r)}}async function Kh(n,e,t){if(!$s(e))throw e;n.L_.add(1),await zu(n),n.q_.set("Offline"),t||(t=()=>b0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{te("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await gd(n)}))}function z0(n,e){return e().catch((t=>Kh(n,t,e)))}async function cl(n){const e=Pe(n),t=Us(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wD(e);)try{const s=await oD(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,ED(e,s)}catch(s){await Kh(e,s)}$0(e)&&q0(e)}function wD(n){return $o(n)&&n.O_.length<10}function ED(n,e){n.O_.push(e);const t=Us(n);t.r_()&&t.V_&&t.m_(e.mutations)}function $0(n){return $o(n)&&!Us(n).n_()&&n.O_.length>0}function q0(n){Us(n).start()}async function ID(n){Us(n).p_()}async function TD(n){const e=Us(n);for(const t of n.O_)e.m_(t.mutations)}async function SD(n,e,t){const r=n.O_.shift(),s=Um.from(r,e,t);await z0(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await cl(n)}async function RD(n,e){e&&Us(n).V_&&await(async function(r,s){if((function(u){return c1(u)&&u!==J.ABORTED})(s.code)){const a=r.O_.shift();Us(r).s_(),await z0(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await cl(r)}})(n,e),$0(n)&&q0(n)}async function kw(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=$o(t);t.L_.add(3),await zu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await gd(t)}async function Zp(n,e){const t=Pe(n);e?(t.L_.delete(2),await gd(t)):e||(t.L_.add(2),await zu(t),t.q_.set("Unknown"))}function hl(n){return n.K_||(n.K_=(function(t,r,s){const a=Pe(t);return a.w_(),new hD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:gD.bind(null,n),Ro:yD.bind(null,n),mo:_D.bind(null,n),d_:vD.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Ym(n)?Jm(n):n.q_.set("Unknown")):(await n.K_.stop(),B0(n))}))),n.K_}function Us(n){return n.U_||(n.U_=(function(t,r,s){const a=Pe(t);return a.w_(),new dD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ID.bind(null,n),mo:RD.bind(null,n),f_:TD.bind(null,n),g_:SD.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await cl(n)):(await n.U_.stop(),n.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,h=new Xm(e,t,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(n,e){if(Bt("AsyncQueue",`${e}: ${n}`),$s(n))return new he(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=tu(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new ja(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ja)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.W_=new wt(fe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class nl{constructor(e,t,r,s,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new nl(e,t,ja.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class PD{constructor(){this.queries=Dw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=Dw(),a.forEach(((u,h)=>{for(const f of h.j_)f.onError(r)}))})(this,new he(J.ABORTED,"Firestore shutting down"))}}function Dw(){return new qs((n=>jI(n)),ld)}async function K0(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new AD,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(s,!0);break;case 1:a.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=Zm(u,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&eg(t)}async function G0(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CD(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const h of u.j_)h.X_(s)&&(r=!0);u.z_=s}}r&&eg(t)}function kD(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(t);r.queries.delete(e)}function eg(n){n.Y_.forEach((e=>{e.next()}))}var em,bw;(bw=em||(em={})).ea="default",bw.Cache="cache";class W0{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.key=e}}class Q0{constructor(e){this.key=e}}class xD{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ge(),this.mutatedKeys=Ge(),this.Aa=zI(e),this.Ra=new ja(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new xw,s=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,w)=>{const T=s.get(_),P=Uu(this.query,w)?w:null,j=!!T&&this.mutatedKeys.has(T.key),M=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let U=!1;T&&P?T.data.isEqual(P.data)?j!==M&&(r.track({type:3,doc:P}),U=!0):this.ga(T,P)||(r.track({type:2,doc:P}),U=!0,(f&&this.Aa(P,f)>0||m&&this.Aa(P,m)<0)&&(h=!0)):!T&&P?(r.track({type:0,doc:P}),U=!0):T&&!P&&(r.track({type:1,doc:T}),U=!0,(f||m)&&(h=!0)),U&&(P?(u=u.add(P),a=M?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,w)=>(function(P,j){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return M(P)-M(j)})(_.type,w.type)||this.Aa(_.doc,w.doc))),this.pa(r),s=s!=null&&s;const h=t&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,m=f!==this.Ea;return this.Ea=f,u.length!==0||m?{snapshot:new nl(this.query,e.Ra,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ge(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new Q0(r))})),this.da.forEach((r=>{e.has(r)||t.push(new H0(r))})),t}ba(e){this.Ta=e.Ts,this.da=Ge();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bD{constructor(e){this.key=e,this.va=!1}}class ND{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new qs((h=>jI(h)),ld),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(fe.comparator),this.Na=new Map,this.La=new Km,this.Ba={},this.ka=new Map,this.qa=jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function VD(n,e,t=!0){const r=_d(n);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await J0(r,e,t,!0),s}async function LD(n,e){const t=_d(n);await J0(t,e,!0,!1)}async function J0(n,e,t,r){const s=await zh(n.localStore,cr(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await tg(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&yd(n.remoteStore,s),h}async function tg(n,e,t,r,s){n.Ka=(w,T,P)=>(async function(M,U,oe,H){let ee=U.view.ma(oe);ee.ns&&(ee=await Yp(M.localStore,U.query,!1).then((({documents:I})=>U.view.ma(I,ee))));const ae=H&&H.targetChanges.get(U.targetId),de=H&&H.targetMismatches.get(U.targetId)!=null,me=U.view.applyChanges(ee,M.isPrimaryClient,ae,de);return tm(M,U.targetId,me.wa),me.snapshot})(n,w,T,P);const a=await Yp(n.localStore,e,!0),u=new xD(e,a.Ts),h=u.ma(a.documents),f=Bu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,f);tm(n,t,m.wa);const _=new DD(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function OD(n,e,t){const r=Pe(n),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((u=>!ld(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await el(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&tl(r.remoteStore,s.targetId),rl(r,s.targetId)})).catch(zs)):(rl(r,s.targetId),await el(r.localStore,s.targetId,!0))}async function MD(n,e){const t=Pe(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tl(t.remoteStore,r.targetId))}async function FD(n,e,t){const r=sg(n);try{const s=await(function(u,h){const f=Pe(u),m=Nt.now(),_=h.reduce(((P,j)=>P.add(j.key)),Ge());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let j=ur(),M=Ge();return f.cs.getEntries(P,_).next((U=>{j=U,j.forEach(((oe,H)=>{H.isValidDocument()||(M=M.add(oe))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,j))).next((U=>{w=U;const oe=[];for(const H of h){const ee=l1(H,w.get(H.key).overlayedDocument);ee!=null&&oe.push(new Ki(H.key,ee,xI(ee.value.mapValue),Rn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,oe,h)})).next((U=>{T=U;const oe=U.applyToLocalDocumentSet(w,M);return f.documentOverlayCache.saveOverlays(P,U.batchId,oe)}))})).then((()=>({batchId:T.batchId,changes:qI(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,h,f){let m=u.Ba[u.currentUser.toKey()];m||(m=new wt(Be)),m=m.insert(h,f),u.Ba[u.currentUser.toKey()]=m})(r,s.batchId,t),await Ks(r,s.changes),await cl(r.remoteStore)}catch(s){const a=Zm(s,"Failed to persist write");t.reject(a)}}async function Y0(n,e){const t=Pe(n);try{const r=await iD(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Na.get(a);u&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?xe(u.va):s.removedDocuments.size>0&&(xe(u.va),u.va=!1))})),await Ks(t,r,e)}catch(r){await zs(r)}}function Nw(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach(((a,u)=>{const h=u.view.Z_(e);h.snapshot&&s.push(h.snapshot)})),(function(u,h){const f=Pe(u);f.onlineState=h;let m=!1;f.queries.forEach(((_,w)=>{for(const T of w.j_)T.Z_(h)&&(m=!0)})),m&&eg(f)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UD(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),a=s&&s.key;if(a){let u=new wt(fe.comparator);u=u.insert(a,Ft.newNoDocument(a,De.min()));const h=Ge().add(a),f=new ju(De.min(),new Map,new wt(Be),u,h);await Y0(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),ig(r)}else await el(r.localStore,e,!1).then((()=>rl(r,e,t))).catch(zs)}async function jD(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await rD(t.localStore,e);rg(t,r,null),ng(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ks(t,s)}catch(s){await zs(s)}}async function BD(n,e,t){const r=Pe(n);try{const s=await(function(u,h){const f=Pe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,h).next((w=>(xe(w!==null),_=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);rg(r,e,t),ng(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ks(r,s)}catch(s){await zs(s)}}function ng(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function rg(n,e,t){const r=Pe(n);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function rl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||X0(n,r)}))}function X0(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(tl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),ig(n))}function tm(n,e,t){for(const r of t)r instanceof H0?(n.La.addReference(r.key,e),zD(n,r)):r instanceof Q0?(te("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||X0(n,r.key)):Re()}function zD(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(te("SyncEngine","New document in limbo: "+t),n.xa.add(r),ig(n))}function ig(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new fe(ct.fromString(e)),r=n.qa.next();n.Na.set(r,new bD(t)),n.Oa=n.Oa.insert(t,r),yd(n.remoteStore,new Fi(cr(ad(t.path)),r,"TargetPurposeLimboResolution",Qn.oe))}}async function Ks(n,e,t){const r=Pe(n),s=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((h,f)=>{u.push(r.Ka(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=Wm.Wi(f.targetId,m);a.push(w)}})))})),await Promise.all(u),r.Ca.d_(s),await(async function(f,m){const _=Pe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>$.forEach(m,(T=>$.forEach(T.$i,(P=>_.persistence.referenceDelegate.addReference(w,T.targetId,P))).next((()=>$.forEach(T.Ui,(P=>_.persistence.referenceDelegate.removeReference(w,T.targetId,P)))))))))}catch(w){if(!$s(w))throw w;te("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const P=_.os.get(T),j=P.snapshotVersion,M=P.withLastLimboFreeSnapshotVersion(j);_.os=_.os.insert(T,M)}}})(r.localStore,a))}async function $D(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await D0(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((h=>{h.forEach((f=>{f.reject(new he(J.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ks(t,r.hs)}}function qD(n,e){const t=Pe(n),r=t.Na.get(e);if(r&&r.va)return Ge().add(r.key);{let s=Ge();const a=t.Ma.get(e);if(!a)return s;for(const u of a){const h=t.Fa.get(u);s=s.unionWith(h.view.Va)}return s}}async function KD(n,e){const t=Pe(n),r=await Yp(t.localStore,e.query,!0),s=e.view.ba(r);return t.isPrimaryClient&&tm(t,e.targetId,s.wa),s}async function GD(n,e){const t=Pe(n);return V0(t.localStore,e).then((r=>Ks(t,r)))}async function WD(n,e,t,r){const s=Pe(n),a=await(function(h,f){const m=Pe(h),_=Pe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(w=>_.Mn(w,f).next((T=>T?m.localDocuments.getDocuments(w,T):$.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await cl(s.remoteStore):t==="acknowledged"||t==="rejected"?(rg(s,e,r||null),ng(s,e),(function(h,f){Pe(Pe(h).mutationQueue).On(f)})(s.localStore,e)):Re(),await Ks(s,a)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}async function HD(n,e){const t=Pe(n);if(_d(t),sg(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await Vw(t,r.toArray());t.Qa=!0,await Zp(t.remoteStore,!0);for(const a of s)yd(t.remoteStore,a)}else if(e===!1&&t.Qa!==!1){const r=[];let s=Promise.resolve();t.Ma.forEach(((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then((()=>(rl(t,u),el(t.localStore,u,!0)))),tl(t.remoteStore,u)})),await s,await Vw(t,r),(function(u){const h=Pe(u);h.Na.forEach(((f,m)=>{tl(h.remoteStore,m)})),h.La.pr(),h.Na=new Map,h.Oa=new wt(fe.comparator)})(t),t.Qa=!1,await Zp(t.remoteStore,!1)}}async function Vw(n,e,t){const r=Pe(n),s=[],a=[];for(const u of e){let h;const f=r.Ma.get(u);if(f&&f.length!==0){h=await zh(r.localStore,cr(f[0]));for(const m of f){const _=r.Fa.get(m),w=await KD(r,_);w.snapshot&&a.push(w.snapshot)}}else{const m=await N0(r.localStore,u);h=await zh(r.localStore,m),await tg(r,Z0(m),u,!1,h.resumeToken)}s.push(h)}return r.Ca.d_(a),s}function Z0(n){return FI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QD(n){return(function(t){return Pe(Pe(t).persistence).Qi()})(Pe(n).localStore)}async function JD(n,e,t,r){const s=Pe(n);if(s.Qa)return void te("SyncEngine","Ignoring unexpected query state notification.");const a=s.Ma.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await V0(s.localStore,BI(a[0])),h=ju.createSynthesizedRemoteEventForCurrentChange(e,t==="current",zt.EMPTY_BYTE_STRING);await Ks(s,u,h);break}case"rejected":await el(s.localStore,e,!0),rl(s,e,r);break;default:Re()}}async function YD(n,e,t){const r=_d(n);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){te("SyncEngine","Adding an already active target "+s);continue}const a=await N0(r.localStore,s),u=await zh(r.localStore,a);await tg(r,Z0(a),u.targetId,!1,u.resumeToken),yd(r.remoteStore,u)}for(const s of t)r.Ma.has(s)&&await el(r.localStore,s,!1).then((()=>{tl(r.remoteStore,s),rl(r,s)})).catch(zs)}}function _d(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UD.bind(null,e),e.Ca.d_=CD.bind(null,e.eventManager),e.Ca.$a=kD.bind(null,e.eventManager),e}function sg(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BD.bind(null,e),e}class Cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return x0(this.persistence,new k0,e.initialUser,this.serializer)}Ga(e){return new P0(pd.Zr,this.serializer)}Wa(e){return new O0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cu.provider={build:()=>new Cu};class eT extends Cu{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await sg(this.Ja.syncEngine),await cl(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return x0(this.persistence,new k0,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new U1(r,e.asyncQueue,t)}Ha(e,t){const r=new vx(t,this.persistence);return new _x(e.asyncQueue,r)}Ga(e){const t=C0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Gm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,M0(),Eh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new O0}}class XD extends eT{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof _p&&(this.sharedClientState.syncEngine={no:WD.bind(null,t),ro:JD.bind(null,t),io:YD.bind(null,t),Qi:QD.bind(null,t),eo:GD.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await HD(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=M0();if(!_p.D(t))throw new he(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=C0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _p(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ku{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$D.bind(null,this.syncEngine),await Zp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PD})()}createDatastore(e){const t=md(e.databaseInfo.databaseId),r=(function(a){return new cD(a)})(e.databaseInfo);return(function(a,u,h,f){return new fD(a,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,h){return new mD(r,s,a,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Nw(this.syncEngine,t,0)),(function(){return Cw.D()?new Cw:new aD})())}createSyncEngine(e,t){return(function(s,a,u,h,f,m,_){const w=new ND(s,a,u,h,f,m);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Pe(s);te("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await zu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ku.provider={build:()=>new ku};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Bt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Tn.UNAUTHENTICATED,this.clientId=pI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{te("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(te("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Zm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function wp(n,e){n.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await D0(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Lw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await eb(n);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>kw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>kw(e.remoteStore,s))),n._onlineComponents=e}async function eb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await wp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;vu("Error using user provided cache. Falling back to memory cache: "+t),await wp(n,new Cu)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await wp(n,new Cu);return n._offlineComponents}async function nT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Lw(n,n._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Lw(n,new ku))),n._onlineComponents}function tb(n){return nT(n).then((e=>e.syncEngine))}async function rT(n){const e=await nT(n),t=e.eventManager;return t.onListen=VD.bind(null,e.syncEngine),t.onUnlisten=OD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MD.bind(null,e.syncEngine),t}function nb(n,e,t={}){const r=new hi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const _=new tT({next:T=>{_.Za(),u.enqueueAndForget((()=>G0(a,w)));const P=T.docs.has(h);!P&&T.fromCache?m.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&f&&f.source==="server"?m.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new W0(ad(h.path),_,{includeMetadataChanges:!0,_a:!0});return K0(a,w)})(await rT(n),n.asyncQueue,e,t,r))),r.promise}function rb(n,e,t={}){const r=new hi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const _=new tT({next:T=>{_.Za(),u.enqueueAndForget((()=>G0(a,w))),T.fromCache&&f.source==="server"?m.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new W0(h,_,{includeMetadataChanges:!0,_a:!0});return K0(a,w)})(await rT(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(n,e,t){if(!t)throw new he(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ib(n,e,t,r){if(e===!0&&r===!0)throw new he(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Mw(n){if(!fe.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fw(n){if(fe.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vd(n);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ib("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class og{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uw(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lx;switch(r.type){case"firstParty":return new hx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ow.get(t);r&&(te("ComponentProvider","Removing Datastore"),Ow.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class Vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class Ls extends dl{constructor(e,t,r){super(e,t,ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new fe(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function Tt(n,e,...t){if(n=Jt(n),sT("collection","path",e),n instanceof og){const r=ct.fromString(e,...t);return Fw(r),new Ls(n,null,r)}{if(!(n instanceof Vn||n instanceof Ls))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return Fw(r),new Ls(n.firestore,null,r)}}function en(n,e,...t){if(n=Jt(n),arguments.length===1&&(e=pI.newId()),sT("doc","path",e),n instanceof og){const r=ct.fromString(e,...t);return Mw(r),new Vn(n,null,new fe(r))}{if(!(n instanceof Vn||n instanceof Ls))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return Mw(r),new Vn(n.firestore,n instanceof Ls?n.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new F0(this,"async_queue_retry"),this.Vu=()=>{const r=Eh();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Eh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Eh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new hi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$s(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h})(r);throw Bt("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=Xm.createAndSchedule(this,e,t,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=-1;class qo extends og{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new jw,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jw(e),this._firestoreClient=void 0,await e}}}function ob(n,e,t){t||(t="(default)");const r=ed(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(mu(a,e))return s;throw new he(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function ag(n){if(n._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ab(n),n._firestoreClient}function ab(n){var e,t,r;const s=n._freezeSettings(),a=(function(h,f,m,_){return new jx(h,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,iT(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new ZD(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(zt.fromBase64String(e))}catch(t){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=/^__.*__$/;class ub{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new ul(e,this.data,t,this.fieldTransforms)}}class oT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class cg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(aT(this.Cu)&&lb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||md(e)}Qu(e,t,r,s=!1){return new cg({Cu:e,methodName:t,qu:r,path:bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Id(n){const e=n._freezeSettings(),t=md(n._databaseId);return new cb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lT(n,e,t,r,s,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,s);dg("Data must be an object, but it was:",u,r);const h=uT(r,u);let f,m;if(a.merge)f=new Jn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const T=nm(e,w,t);if(!u.contains(T))throw new he(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);hT(_,T)||_.push(T)}f=new Jn(_),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new ub(new Sn(h),f,m)}class Td extends Ed{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Td}}class hg extends Ed{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Xa(e.serializer,WI(e.serializer,this.$u));return new XI(e.path,t)}isEqual(e){return e instanceof hg&&this.$u===e.$u}}function hb(n,e,t,r){const s=n.Qu(1,e,t);dg("Data must be an object, but it was:",s,r);const a=[],u=Sn.empty();zo(r,((f,m)=>{const _=fg(e,f,t);m=Jt(m);const w=s.Nu(_);if(m instanceof Td)a.push(_);else{const T=$u(m,w);T!=null&&(a.push(_),u.set(_,T))}}));const h=new Jn(a);return new oT(u,h,s.fieldTransforms)}function db(n,e,t,r,s,a){const u=n.Qu(1,e,t),h=[nm(e,r,t)],f=[s];if(a.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(nm(e,a[T])),f.push(a[T+1]);const m=[],_=Sn.empty();for(let T=h.length-1;T>=0;--T)if(!hT(m,h[T])){const P=h[T];let j=f[T];j=Jt(j);const M=u.Nu(P);if(j instanceof Td)m.push(P);else{const U=$u(j,M);U!=null&&(m.push(P),_.set(P,U))}}const w=new Jn(m);return new oT(_,w,u.fieldTransforms)}function fb(n,e,t,r=!1){return $u(t,n.Qu(r?4:3,e))}function $u(n,e){if(cT(n=Jt(n)))return dg("Unsupported field value:",e,n),uT(n,e);if(n instanceof Ed)return(function(r,s){if(!aT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const h of r){let f=$u(h,s.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Nt.fromDate(r);return{timestampValue:Za(s.serializer,a)}}if(r instanceof Nt){const a=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Za(s.serializer,a)}}if(r instanceof lg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof il)return{bytesValue:s0(s.serializer,r._byteString)};if(r instanceof Vn){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:zm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ug)return(function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return Mm(h.serializer,f)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${vd(r)}`)})(n,e)}function uT(n,e){const t={};return AI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(n,((r,s)=>{const a=$u(s,e.Mu(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function cT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof lg||n instanceof il||n instanceof Vn||n instanceof Ed||n instanceof ug)}function dg(n,e,t){if(!cT(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const r=vd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function nm(n,e,t){if((e=Jt(e))instanceof wd)return e._internalPath;if(typeof e=="string")return fg(n,e);throw Gh("Field path arguments must be of type string or ",n,!1,void 0,t)}const pb=new RegExp("[~\\*/\\[\\]]");function fg(n,e,t){if(e.search(pb)>=0)throw Gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wd(...e.split("."))._internalPath}catch{throw Gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new he(J.INVALID_ARGUMENT,h+n+f)}function hT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mb extends dT{data(){return super.data()}}function pg(n,e){return typeof e=="string"?fg(n,e):e instanceof wd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mg{}class yb extends mg{}function gg(n,e,...t){let r=[];e instanceof mg&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof yg)).length,h=a.filter((f=>f instanceof Sd)).length;if(u>1||u>0&&h>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Sd extends yb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sd(e,t,r)}_apply(e){const t=this._parse(e);return fT(e._query,t),new dl(e.firestore,e.converter,zp(e._query,t))}_parse(e){const t=Id(e.firestore);return(function(a,u,h,f,m,_,w){let T;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zw(w,_);const P=[];for(const j of w)P.push(Bw(f,a,j));T={arrayValue:{values:P}}}else T=Bw(f,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zw(w,_),T=fb(h,u,w,_==="in"||_==="not-in");return tt.create(m,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Wh(n,e,t){const r=e,s=pg("where",n);return Sd._create(s,r,t)}class yg extends mg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:pt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const h=a.getFlattenedFilters();for(const f of h)fT(u,f),u=zp(u,f)})(e._query,t),new dl(e.firestore,e.converter,zp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Bw(n,e,t){if(typeof(t=Jt(t))=="string"){if(t==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UI(e)&&t.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ct.fromString(t));if(!fe.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ru(n,new fe(r))}if(t instanceof Vn)return Ru(n,t._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vd(t)}.`)}function zw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fT(n,e){const t=(function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _b{convertValue(e,t="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Pt(u.doubleValue)));return new ug(a)}convertGeoPoint(e){return new lg(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const t=$i(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ct.fromString(e);xe(m0(r));const s=new Lo(r.get(1),r.get(3)),a=new fe(r.popFirst(5));return s.isEqual(t)||Bt(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mT extends dT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ih extends mT{data(e={}){return super.data(e)}}class vb{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new iu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ih(this._firestore,this._userDataWriter,r.key,r,new iu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((h=>{const f=new Ih(s._firestore,s._userDataWriter,h.doc.key,h.doc,new iu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Ih(s._firestore,s._userDataWriter,h.doc.key,h.doc,new iu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:wb(h.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(n){n=pi(n,Vn);const e=pi(n.firestore,qo);return nb(ag(e),n._key).then((t=>Ib(e,n,t)))}class gT extends _b{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function Qt(n){n=pi(n,dl);const e=pi(n.firestore,qo),t=ag(e),r=new gT(e);return gb(n._query),rb(t,n._query).then((s=>new vb(e,r,n,s)))}function qu(n,e,t){n=pi(n,Vn);const r=pi(n.firestore,qo),s=pT(n.converter,e,t);return Rd(r,[lT(Id(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Rn.none())])}function Tr(n,e,t,...r){n=pi(n,Vn);const s=pi(n.firestore,qo),a=Id(s);let u;return u=typeof(e=Jt(e))=="string"||e instanceof wd?db(a,"updateDoc",n._key,e,t,r):hb(a,"updateDoc",n._key,e),Rd(s,[u.toMutation(n._key,Rn.exists(!0))])}function Ba(n){return Rd(pi(n.firestore,qo),[new hd(n._key,Rn.none())])}function Ku(n,e){const t=pi(n.firestore,qo),r=en(n),s=pT(n.converter,e);return Rd(t,[lT(Id(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then((()=>r))}function Rd(n,e){return(function(r,s){const a=new hi;return r.asyncQueue.enqueueAndForget((async()=>FD(await tb(r),s,a))),a.promise})(ag(n),e)}function Ib(n,e,t){const r=t.docs.get(e._key),s=new gT(n);return new mT(n,s,e._key,r,new iu(t.hasPendingWrites,t.fromCache),e.converter)}class Tb{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=Pb(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Sb(n){return new Tb(n)}class Rb{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ku.provider,this._offlineComponentProvider={build:t=>new eT(t,e?.cacheSizeBytes,this.forceOwnership)}}}class Ab{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ku.provider,this._offlineComponentProvider={build:t=>new XD(t,e?.cacheSizeBytes)}}}function Pb(n){return new Rb(void 0)}function Cb(){return new Ab}function kb(n){return new hg("increment",n)}(function(e,t=!0){(function(s){ll=s})(ol),bo(new Os("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new qo(new ux(r.getProvider("auth-internal")),new fx(r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),ui(Lv,"4.7.3",e),ui(Lv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="type.googleapis.com/google.protobuf.Int64Value",Db="type.googleapis.com/google.protobuf.UInt64Value";function yT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function rm(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>rm(e));if(typeof n=="function"||typeof n=="object")return yT(n,e=>rm(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Hh(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case xb:case Db:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Hh(e)):typeof n=="function"||typeof n=="object"?yT(n,e=>Hh(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class za extends gi{constructor(e,t,r){super(`${_g}/${e}`,t||""),this.details=r}}function bb(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Nb(n,e){let t=bb(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!$w[u])return new za("internal","internal");t=$w[u],r=u}const h=a.message;typeof h=="string"&&(r=h),s=a.details,s!==void 0&&(s=Hh(s))}}catch{}return t==="ok"?null:new za(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="us-central1";function Lb(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new za("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Ob{constructor(e,t,r,s,a=im,u){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new Vb(t,r,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=im}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Mb(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function Fb(n,e,t){return(r=>jb(n,e,r,{}))}async function Ub(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}function jb(n,e,t,r){const s=n._url(e);return Bb(n,s,t,r)}async function Bb(n,e,t,r){t=rm(t);const s={data:t},a={},u=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);u.authToken&&(a.Authorization="Bearer "+u.authToken),u.messagingToken&&(a["Firebase-Instance-ID-Token"]=u.messagingToken),u.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=u.appCheckToken);const h=r.timeout||7e4,f=Lb(h),m=await Promise.race([Ub(e,s,a,n.fetchImpl),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new za("cancelled","Firebase Functions instance was deleted.");const _=Nb(m.status,m.json);if(_)throw _;if(!m.json)throw new za("internal","Response is not valid JSON object.");let w=m.json.data;if(typeof w>"u"&&(w=m.json.result),typeof w>"u")throw new za("internal","Response is missing data field.");return{data:Hh(w)}}const qw="@firebase/functions",Kw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="auth-internal",$b="app-check-internal",qb="messaging-internal";function Kb(n,e){const t=(r,{instanceIdentifier:s})=>{const a=r.getProvider("app").getImmediate(),u=r.getProvider(zb),h=r.getProvider(qb),f=r.getProvider($b);return new Ob(a,u,h,f,s,n)};bo(new Os(_g,t,"PUBLIC").setMultipleInstances(!0)),ui(qw,Kw,e),ui(qw,Kw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n=gm(),e=im){const r=ed(Jt(n),_g).getImmediate({identifier:e}),s=MA("functions");return s&&Gb(r,...s),r}function Gb(n,e,t){Mb(Jt(n),e,t)}function _T(n,e,t){return Fb(Jt(n),e)}Kb(fetch.bind(self));const vT={apiKey:"AIzaSyBzC3ewoJvmW-DIHG3kN09kdw6YAf5_6IM",authDomain:"uconn-fsae-ev.firebaseapp.com",projectId:"uconn-fsae-ev",storageBucket:"uconn-fsae-ev.firebasestorage.app",messagingSenderId:"250394437331",appId:"1:250394437331:web:5170ea4d906a220eac5626"};function Wb(){const n=Object.entries(vT).filter(([e,t])=>!t).map(([e])=>e);if(n.length){const e=`Missing Firebase env vars: ${n.join(", ")}.
Create .env.local and set VITE_FIREBASE_* variables. See .env.example.`;throw new Error(e)}}Wb();const Gu=YP().length?gm():PE(vT),ze=globalThis.__FSAE_FIRESTORE__||(globalThis.__FSAE_FIRESTORE__=ob(Gu,{localCache:Sb({tabManager:Cb(),cacheSizeBytes:sb})})),ZN=vg(Gu),Hb=Cm(Gu),Qb=vg(Gu,"us-central1"),Jb=_T(Qb,"getAdminRoles");async function Yb(){try{return(await Jb())?.data||null}catch(n){return console.warn("[functions] getAdminRoles failed",n),null}}const sm=[],om=[];function wg(n){return!!n&&sm.includes(n)}function Xb(n){return!!n&&(om.includes(n)||wg(n))}function eV(n,e){return wg(n)?!0:Xb(n)?e==="people"||e==="projects":!1}function am(n,e){sm.length=0,sm.push(...n||[]),om.length=0,om.push(...e||[]),Zb.forEach(t=>{try{t()}catch{}})}const Zb=new Set;async function eN(){try{const n=await Yb();if(!n)return;if(Array.isArray(n.adminUids)||Array.isArray(n.leadUids)){am(n.adminUids||[],n.leadUids||[]);return}const t=Cm().currentUser?.uid;if(t){const r=n.isAdmin?[t]:[],s=n.isLead?[t]:[];am(r,s)}}catch(n){console.warn("[roles] loadRuntimeAdminsViaFunctions failed",n)}}const Ad=Cm(Gu),wT=new Ni;wT.setCustomParameters({prompt:"select_account"});function ET(n){return JE(Ad,n)}async function tN(){const{user:n}=await fk(Ad,wT);return n}async function nN(){await WC(Ad)}function Pd(){const n=Ad.currentUser;return wg(n?.uid||null)}function rN(){const[n,e]=Y.useState(null);return Y.useEffect(()=>ET(t=>{console.log("[auth] state change",t?t.uid:"null"),e(t)}),[]),n}async function iN(){const n=vg(void 0,"us-central1"),r=(await _T(n,"getAdminRoles")()).data||{},s={uid:String(r.uid||""),isAdmin:!!r.isAdmin,isLead:!!r.isLead,adminUids:Array.isArray(r.adminUids)?r.adminUids:[],leadUids:Array.isArray(r.leadUids)?r.leadUids:[]};return console.log("[roles] result",s),s}let du=null;function IT(n){return JE(Hb,async e=>{if(!e){du=null,n(null);return}du=await iN(),n(du)})}function sN({children:n}){const[e,t]=Yn.useState(du);return Yn.useEffect(()=>IT(t),[]),e&&(e.isAdmin||e.isLead)?le.jsx(le.Fragment,{children:n}):null}function tV({children:n}){const[e,t]=Yn.useState(du);return Yn.useEffect(()=>IT(t),[]),e&&e.isAdmin?le.jsx(le.Fragment,{children:n}):null}function oN({className:n}){return le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 190 512 140",className:n,role:"img","aria-label":"UConn FSAE Team Logo",preserveAspectRatio:"xMidYMid meet",children:le.jsx("g",{fill:"#FFFFFF",fillRule:"evenodd",children:le.jsx("path",{d:"M 46 302 L 49 305 L 139 244 L 198 211 L 205 211 L 212 218 L 206 265 L 209 276 L 216 281 L 240 278 L 301 255 L 341 253 L 425 273 L 480 295 L 464 308 L 479 304 L 485 293 L 477 286 L 421 266 L 334 247 L 303 249 L 218 276 L 211 268 L 217 215 L 209 206 L 200 205 L 133 241 Z M 33 210 L 33 225 L 37 238 L 46 249 L 69 267 L 72 266 L 72 262 L 52 247 L 45 239 L 40 230 L 38 223 L 38 213 L 40 207 L 44 203 L 63 201 L 120 203 L 126 207 L 128 212 L 128 230 L 132 232 L 134 227 L 134 215 L 132 206 L 127 200 L 122 198 L 89 196 L 48 197 L 38 200 Z M 225 223 L 225 224 L 222 229 L 222 239 L 223 240 L 223 242 L 224 243 L 225 246 L 228 249 L 230 249 L 231 250 L 235 250 L 236 251 L 239 251 L 240 252 L 242 252 L 243 253 L 247 253 L 248 254 L 250 254 L 251 255 L 255 255 L 256 256 L 261 256 L 262 255 L 262 254 L 263 253 L 263 248 L 261 246 L 256 246 L 255 245 L 251 245 L 250 244 L 247 244 L 246 243 L 244 243 L 243 242 L 242 242 L 237 237 L 237 233 L 240 230 L 247 230 L 248 231 L 254 231 L 255 232 L 258 232 L 259 231 L 259 228 L 258 227 L 258 226 L 252 220 L 251 220 L 248 218 L 245 218 L 244 217 L 238 217 L 237 218 L 232 219 Z"})})})}const Wu="fsae:",Eg=300*1e3;function Qh(n){return`${Wu}${n}`}function fl(n){if(Pd())return null;try{const e=localStorage.getItem(Qh(n));if(!e)return null;const{exp:t,data:r}=JSON.parse(e);return t&&Date.now()<t?r:(localStorage.removeItem(Qh(n)),null)}catch{return null}}function zr(n,e,t=Eg){if(!Pd())try{const r=JSON.stringify({exp:Date.now()+t,data:e});localStorage.setItem(Qh(n),r)}catch{}}function An(n){for(const e of n)try{localStorage.removeItem(Qh(e))}catch{}}function Cd(n){try{const e=Wu+n;for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t)||"";r.startsWith(e)&&localStorage.removeItem(r)}}catch{}}async function Th(){if(!Pd())try{const[n,e,t,r,s]=await Promise.all([Qt(Tt(ze,"people")),Qt(Tt(ze,"projects")),Qt(Tt(ze,"tasks")),Qt(Tt(ze,"settings")),Qt(Tt(ze,"ranked"))]);zr("people",n.docs.map(h=>h.data())),zr("projects",e.docs.map(h=>h.data())),zr("tasks",t.docs.map(h=>h.data()));const a=r.docs.find(h=>h.id==="global");a&&zr("settings",a.data());const u=s.docs.find(h=>h.id==="settings");u&&zr("ranked:settings",u.data())}catch{}}function aN(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e)||"";t.startsWith(Wu)&&n.push(t)}for(const e of n)localStorage.removeItem(e)}catch{}}function qr(n){const e={};for(const[t,r]of Object.entries(n))r!==void 0&&(e[t]=r);return e}async function lN(){const n=fl("people");if(n)return n;const t=(await Qt(Tt(ze,"people"))).docs.map(r=>r.data());return zr("people",t),t}async function uN(){const n=fl("projects");if(n)return n;const t=(await Qt(Tt(ze,"projects"))).docs.map(r=>r.data());return zr("projects",t),t}async function cN(){const n=fl("tasks");if(n)return n;const t=(await Qt(Tt(ze,"tasks"))).docs.map(r=>r.data());return zr("tasks",t),t}async function hN(n){const e=`tasks:project:${n}`,t=fl(e);if(t)return t;const r=gg(Tt(ze,"tasks"),Wh("project_id","==",n)),a=(await Qt(r)).docs.map(u=>u.data());return zr(e,a),a}async function dN(n){const e=Date.now(),t={...n,created_at:n.created_at??e},r=await Ku(Tt(ze,"tasks"),qr(t));return await Tr(r,{id:r.id}),An(["tasks"]),Cd("tasks:project:"),r.id}async function fN(n,e){const t=en(ze,"tasks",n);let r=null;try{const a=await Eb(t);r=a.exists()?a.data():null}catch{}const s={...e};e.status==="Complete"&&e.completed_at===void 0&&(s.completed_at=Date.now()),await Tr(t,qr(s)),An(["tasks"]),Cd("tasks:project:");try{const a=r?.status==="Complete",u=e.status==="Complete";if(!a&&u){const h=await Ig(),f=(e.assignee_id??r?.assignee_id)||void 0,m=Sg({...r||{},status:"Complete"},h);await xu({ts:Date.now(),type:"task_points",person_id:f,points:m,note:`Task complete: ${r?.description||n}`})}}catch{}}async function pN(n){const e=en(ze,"tasks",n);await Ba(e),An(["tasks"]),Cd("tasks:project:")}async function mN(n){const e=Date.now();if(n.person_id&&n.date){const s=gg(Tt(ze,"attendance"),Wh("person_id","==",n.person_id),Wh("date","==",n.date));if(!(await Qt(s)).empty){const u=new Error("DUPLICATE_ATTENDANCE");throw u.code="DUPLICATE_ATTENDANCE",u}}const t={...n,created_at:n.created_at??e},r=await Ku(Tt(ze,"attendance"),qr(t));await Tr(r,{id:r.id});try{await xu({ts:e,type:"attendance",person_id:n.person_id,points:n.points,note:`Attendance ${n.points} pts on ${n.date}`})}catch{}return r.id}async function gN(){return(await Qt(Tt(ze,"attendance"))).docs.map(e=>e.data())}async function xu(n){const e=await Ku(Tt(ze,"logs"),qr(n));return await Tr(e,{id:e.id}),e.id}async function yN(n=50){return(await Qt(Tt(ze,"logs"))).docs.map(r=>r.data()).sort((r,s)=>(s.ts||0)-(r.ts||0)).slice(0,Math.max(1,n))}async function _N(n){return(await Qt(Tt(ze,"logs"))).docs.map(t=>t.data()).filter(t=>t.person_id===n).sort((t,r)=>(r.ts||0)-(t.ts||0))}function vN(n){const e=["#34d399","#60a5fa","#fbbf24","#f472b6","#a78bfa","#f87171","#22d3ee","#84cc16","#fb7185","#f59e0b"];return e[n%e.length]}async function wN(n,e){const t=en(ze,"projects",n);await Tr(t,{owner_ids:e}),An(["projects","people"])}async function EN(n){if(n.id){const e=en(ze,"people",n.id);return await qu(e,qr({...n,id:n.id}),{merge:!0}),An(["people"]),n.id}else{const e=await Ku(Tt(ze,"people"),qr(n));return await Tr(e,{id:e.id}),An(["people"]),e.id}}async function IN(n){if(n.id){const e=en(ze,"projects",n.id);return await qu(e,qr({...n,id:n.id}),{merge:!0}),An(["projects"]),n.id}else{const e=await Ku(Tt(ze,"projects"),qr(n));return await Tr(e,{id:e.id}),An(["projects"]),e.id}}async function TN(n,e){const t=en(ze,"people",n);await Tr(t,qr(e)),An(["people"])}async function SN(n,e){const t=en(ze,"projects",n);await Tr(t,qr(e)),An(["projects"])}async function RN(n){const e=en(ze,"projects",n);await Tr(e,{archived:!0}),An(["projects"])}async function AN(n){try{const e=gg(Tt(ze,"tasks"),Wh("project_id","==",n)),t=await Qt(e);await Promise.all(t.docs.map(r=>Ba(en(ze,"tasks",r.id))))}catch{}await Ba(en(ze,"projects",n)),An(["projects","tasks"])}async function PN(){const n=fl("settings");if(n)return n;const t=(await Qt(Tt(ze,"settings"))).docs.find(s=>s.id==="global"),r=t?t.data():null;return r&&zr("settings",r,Eg),r}async function CN(n){const e=en(ze,"settings","global");await qu(e,{...n||{}},{merge:!0}),An(["settings"])}async function Ig(){const n=fl("ranked:settings");if(n)return n;const t=(await Qt(Tt(ze,"ranked"))).docs.find(a=>a.id==="settings"),r={enabled:!0,autoApply:!0,applyEvery:"hourly",promotion_pct:{bronze:40,silver:30,gold:20,platinum:10,diamond:0},demotion_pct:{bronze:0,silver:10,gold:15,platinum:20,diamond:0},default_task_points:10},s=t?{...r,...t.data()}:r;return zr("ranked:settings",s,Eg),s}async function Tg(n){const e=en(ze,"ranked","settings");await qu(e,qr(n),{merge:!0}),An(["ranked:settings"])}async function TT(n=Date.now()){await Tg({last_reset_at:n})}function kN(n){return"Bronze Silver Gold Platinum Diamond".split(" ").indexOf(n)}function ST(n){const e=["Bronze","Silver","Gold","Platinum","Diamond"];return e[Math.min(e.indexOf(n)+1,e.length-1)]}function RT(n){const e=["Bronze","Silver","Gold","Platinum","Diamond"];return e[Math.max(e.indexOf(n)-1,0)]}function Sg(n,e){if(n.ranked_points)return n.ranked_points;const t=e?.default_task_points??10;return n.status==="Complete"?35:(n.status==="In Progress",t)}function AT(n,e,t,r){const s=new Map,a=h=>!!h.ranked_opt_in,u=t.last_reset_at||0;for(const h of n)a(h)&&s.set(h.id,0);for(const h of e){if(!h.assignee_id||!s.has(h.assignee_id)||(h.completed_at||h.created_at||0)<u)continue;const m=Sg(h,t);s.set(h.assignee_id,(s.get(h.assignee_id)||0)+m)}if(r&&r.length)for(const h of r){if(!h.person_id||!s.has(h.person_id)||(h.created_at||0)<u)continue;const m=Math.max(0,Number(h.points||0));m&&s.set(h.person_id,(s.get(h.person_id)||0)+m)}return s}async function xN(n,e,t,r){const s=n.filter(P=>!!P.ranked_opt_in),a={Bronze:[],Silver:[],Gold:[],Platinum:[],Diamond:[]};for(const P of s)a[P.rank||"Bronze"].push(P);const u=AT(s,e,t,r),h=[],f=P=>Math.max(0,Math.min(100,P??0)),m=["Bronze","Silver","Gold","Platinum","Diamond"];for(const P of m){const j=a[P];if(j.length===0)continue;const M=[...j].sort((de,me)=>(u.get(me.id)||0)-(u.get(de.id)||0)),U=P.toLowerCase(),oe=f(t.promotion_pct?.[U]),H=f(t.demotion_pct?.[U]),ee=Math.floor(oe/100*M.length),ae=Math.floor(H/100*M.length);if(P!=="Diamond")for(let de=0;de<ee;de++){const me=M[de],I=ST(P);h.push({id:me.id,rank:I})}if(P!=="Bronze")for(let de=0;de<ae;de++){const me=M[M.length-1-de],I=RT(P);h.push({id:me.id,rank:I})}}const _=[],w=Date.now();for(const P of h){const j=n.find(oe=>oe.id===P.id),M=j?.rank||"Bronze",U=P.rank;if(M===U)_.push(Tr(en(ze,"people",P.id),{rank:U}));else{const H=[...Array.isArray(j?.rank_history)?j.rank_history:[],{ts:w,from:M,to:U}];_.push(Tr(en(ze,"people",P.id),{rank:U,rank_history:H})),_.push(xu({ts:w,type:"rank_change",person_id:P.id,from_rank:M,to_rank:U}))}}await Promise.all(_);const T=Date.now();try{await xu({ts:T,type:"rank_apply",note:`Applied promotions/demotions to ${h.length} person(s)`})}catch{}try{await TT(T)}catch{}return An(["people"]),h.length}async function DN(){const[n,e,t]=await Promise.all([Qt(Tt(ze,"people")),Qt(Tt(ze,"projects")),Qt(Tt(ze,"tasks"))]),r=[];for(const s of t.docs)r.push(Ba(en(ze,"tasks",s.id)));for(const s of e.docs)r.push(Ba(en(ze,"projects",s.id)));for(const s of n.docs)r.push(Ba(en(ze,"people",s.id)));await Promise.all(r),An(["people","projects","tasks"]),Cd("tasks:project:")}const Gw=`${Wu}visitor:id`,Ww=`${Wu}visitor:last_date`;function bN(){try{let n=localStorage.getItem(Gw);return n||(n=Math.random().toString(36).slice(2)+Date.now().toString(36),localStorage.setItem(Gw,n)),n}catch{return"anon"}}async function PT(){if(typeof window>"u")return;const n=new Date().toISOString().slice(0,10);try{if(localStorage.getItem(Ww)===n)return;bN();const t=en(ze,"analytics_daily",n);await qu(t,{date:n,visits:kb(1)},{merge:!0}),localStorage.setItem(Ww,n)}catch{}}async function NN(n){const t=(await Qt(Tt(ze,"analytics_daily"))).docs.map(u=>u.data()),r=new Date,s=new Date;s.setDate(r.getDate()-(n-1));const a=s.toISOString().slice(0,10);return t.filter(u=>u.date>=a).sort((u,h)=>u.date.localeCompare(h.date))}const nV=Object.freeze(Object.defineProperty({__proto__:null,addAttendance:mN,addLogEvent:xu,addPerson:EN,addProject:IN,addTask:dN,applyRankedPromotionsDemotions:xN,archiveProject:RN,clearAllLocalCaches:aN,computeRankedScores:AT,deleteProject:AN,deleteTaskById:pN,fetchAttendance:gN,fetchDailyAnalyticsRange:NN,fetchLogsForPerson:_N,fetchPeople:lN,fetchProjects:uN,fetchRankedSettings:Ig,fetchRecentLogs:yN,fetchSettings:PN,fetchTasks:cN,fetchTasksForProject:hN,fullSystemReset:DN,markRankedResetBoundary:TT,nextRank:ST,palette:vN,prevRank:RT,rankOrder:kN,recordAnonymousVisit:PT,refreshAllCaches:Th,setRankedSettings:Tg,setSettings:CN,taskPoints:Sg,updatePerson:TN,updateProject:SN,updateProjectOwners:wN,updateTask:fN},Symbol.toStringTag,{value:"Module"})),Ep="ranked:enabled";function VN(){const[n,e]=Y.useState(!0);return Y.useEffect(()=>{let r=!0;return(async()=>{try{const s=localStorage.getItem(Ep);if(s!==null)r&&e(s==="1");else{const a=await Ig();r&&e(!!a.enabled)}}catch{}})(),()=>{r=!1}},[]),Y.useEffect(()=>{const r=a=>{a.key===Ep&&a.newValue!=null&&e(a.newValue==="1")};window.addEventListener("storage",r);const s=a=>{try{const u=a.detail;e(!!u)}catch{}};return window.addEventListener("ranked:enabledChanged",s),()=>{window.removeEventListener("storage",r),window.removeEventListener("ranked:enabledChanged",s)}},[]),[n,async r=>{e(r);try{localStorage.setItem(Ep,r?"1":"0")}catch{}try{Pd()&&await Tg({enabled:r})}catch{}try{window.dispatchEvent(new CustomEvent("ranked:enabledChanged",{detail:r}))}catch{}}]}function LN(){const[n,e]=Y.useState(!1),[t,r]=VN(),s=Bo();return Y.useEffect(()=>{e(!1)},[s.pathname]),Y.useEffect(()=>{const a=u=>{u.key==="Escape"&&e(!1)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),le.jsxs("div",{className:"min-h-[100dvh] bg-bg bg-app-gradient text-text",children:[le.jsx("div",{style:{height:"env(safe-area-inset-top)"},className:"bg-black"}),le.jsx("header",{className:"sticky top-0 z-40 bg-bg/90 backdrop-blur border-b border-border",children:le.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-14 flex items-center justify-between",children:[le.jsx(mE,{to:"/",className:"flex items-center h-10",children:le.jsx(oN,{className:"h-8 w-auto"})}),le.jsxs("button",{"aria-label":n?"Close menu":"Open menu","aria-expanded":n,onClick:()=>e(a=>!a),className:"relative inline-flex h-10 w-10 items-center justify-center rounded-md border border-border/60 bg-overlay-6 hover:bg-overlay-10 transition focus:outline-none focus:ring-2 focus:ring-accent/60",children:[le.jsx("span",{className:"sr-only",children:"Menu"}),le.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-transform duration-300 ease-out ${n?"translate-y-0 rotate-45":"-translate-y-2 rotate-0"}`,style:{color:"#E5E7EB"}}),le.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-opacity duration-300 ${n?"opacity-0":"opacity-100"}`,style:{color:"#E5E7EB"}}),le.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-transform duration-300 ease-out ${n?"translate-y-0 -rotate-45":"translate-y-2 rotate-0"}`,style:{color:"#E5E7EB"}})]})]})}),le.jsxs("div",{className:`fixed inset-0 z-50 ${n?"pointer-events-auto":"pointer-events-none"}`,children:[le.jsx("div",{className:`absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,onClick:()=>e(!1)}),le.jsxs("aside",{className:`absolute right-0 top-0 h-full w-[18rem] max-w-[85vw] bg-bg/95 border-l border-border shadow-xl transition-transform duration-300 ease-out ${n?"translate-x-0":"translate-x-full"}`,children:[le.jsxs("div",{className:"h-14 px-4 flex items-center justify-between border-b border-border/60",children:[le.jsx("span",{className:"text-sm font-medium text-muted uppercase tracking-caps",children:"Menu"}),le.jsxs("button",{"aria-label":"Close menu",onClick:()=>e(!1),className:"h-9 w-9 inline-flex items-center justify-center rounded-md hover:bg-black/20",children:[le.jsx("span",{className:"sr-only",children:"Close"}),le.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[le.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),le.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})]})]}),le.jsxs("nav",{className:"px-2 py-3 text-base",children:[le.jsx(Da,{to:"/",label:"Overview"}),le.jsx(Da,{to:"/members",label:"Members"}),le.jsx(Da,{to:"/stats",label:"Stats"}),le.jsx(Da,{to:"/timeline",label:"Timeline"}),t&&le.jsx(Da,{to:"/ranked",label:"Ranked"}),le.jsx(sN,{children:le.jsx(Da,{to:"/admin",label:"Admin"})}),le.jsx("div",{className:"my-3 border-t border-border/60"}),le.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm select-none cursor-pointer",children:[le.jsx("span",{className:"text-muted uppercase tracking-caps",children:"Ranked mode"}),le.jsxs("span",{className:"relative inline-block w-10 h-6 align-middle select-none ml-auto",children:[le.jsx("input",{type:"checkbox",checked:t,onChange:a=>r(a.target.checked),className:"peer absolute w-10 h-6 opacity-0 cursor-pointer z-10"}),le.jsx("span",{className:"block w-10 h-6 rounded-full transition-colors bg-surface border border-border peer-checked:bg-accent/70"}),le.jsx("span",{className:"absolute left-1 top-1 w-4 h-4 rounded-full bg-muted transition-transform duration-200 peer-checked:translate-x-4 peer-checked:bg-accent shadow"})]})]}),rN()?le.jsx("button",{onClick:nN,className:"w-full text-left px-3 py-2 rounded-md hover:bg-black/20 transition text-sm font-normal",children:"Sign out"}):le.jsx("button",{onClick:tN,className:"w-full text-left px-3 py-2 rounded-md bg-accent/30 hover:bg-accent/50 transition text-sm font-normal text-text",children:"Sign in"})]}),le.jsx("div",{className:"mt-auto p-3 text-tick text-muted/80 border-t border-border/60",children:"© UConn FSAE"})]})]}),le.jsx("main",{className:"max-w-6xl mx-auto px-4 py-6",children:le.jsx(rA,{})}),le.jsx("footer",{className:"py-6 text-center text-xs text-muted uppercase tracking-caps",children:"© UConn FSAE"})]})}function Da({to:n,label:e}){return le.jsx(SA,{to:n,className:({isActive:t})=>`group flex items-center gap-2 px-3 py-2 rounded-md transition border ${t?"bg-accent/30 border-accent/60 text-white shadow-sm hover:bg-accent/40":"border-transparent hover:bg-black/15"} focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60`,children:le.jsxs("span",{className:"relative",children:[le.jsx("span",{className:"transition-transform duration-300 group-hover:translate-x-0.5",children:e}),le.jsx("span",{className:"ml-2 inline-block opacity-0 -translate-x-1 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-0",children:"→"})]})})}function Ss(){return le.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[120px] w-full",children:[le.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-accent mb-2"}),le.jsx("div",{className:"text-xs text-muted uppercase tracking-caps",children:"Loading…"})]})}const ON=Yn.lazy(()=>Bs(()=>import("./Overview-B7_6e4Td.js"),__vite__mapDeps([0,1,2,3]))),MN=Yn.lazy(()=>Bs(()=>import("./Members-BUsZMXzo.js"),[])),FN=Yn.lazy(()=>Bs(()=>import("./PersonDetail-8DDI5D-I.js"),[])),UN=Yn.lazy(()=>Bs(()=>import("./ProjectDetail-BzgmUHQg.js"),__vite__mapDeps([4,1,2,5]))),jN=Yn.lazy(()=>Bs(()=>import("./Admin-9Z3eKkRE.js"),__vite__mapDeps([6,2,5]))),BN=Yn.lazy(()=>Bs(()=>import("./Stats-CjbVgtjC.js"),__vite__mapDeps([7,3]))),zN=Yn.lazy(()=>Bs(()=>import("./Timeline-Cp3qVpa2.js"),[])),$N=Yn.lazy(()=>Bs(()=>import("./Ranked-DckYQ_oP.js"),[])),qN="/fsae-dashboard/",KN=hA([{element:le.jsx(LN,{}),children:[{index:!0,element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx(ON,{})})},{path:"people",element:le.jsx(nA,{to:"/members",replace:!0})},{path:"members",element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx(MN,{})})},{path:"stats",element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx(BN,{})})},{path:"timeline",element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx(zN,{})})},{path:"ranked",element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx($N,{})})},{path:"person/:id",element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx(FN,{})})},{path:"project/:id",element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx(UN,{})})},{path:"admin",element:le.jsx(Y.Suspense,{fallback:le.jsx(Ss,{}),children:le.jsx(jN,{})})}]}],{basename:qN});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/fsae-dashboard/sw.js").catch(()=>{})});window.addEventListener("beforeinstallprompt",n=>{n.preventDefault()});const CT=document.getElementById("root");if(!CT)throw new Error("Root element #root not found");const GN=jS.createRoot(CT);GN.render(le.jsx(Yn.StrictMode,{children:le.jsx(vA,{router:KN})}));(async()=>{try{await Th()}catch{}try{await PT()}catch{}ET(async n=>{if(!n){am([],[]);return}await eN()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Th().catch(()=>{})}),setInterval(()=>{Th().catch(()=>{})},600*1e3)})();export{dN as A,Tg as B,_T as C,ZN as D,CN as E,DN as F,Yn as G,NN as H,WN as I,Qw as J,Th as K,mE as L,AT as M,Eb as N,en as O,ze as P,nV as Q,sN as R,Bs as _,uN as a,cN as b,gN as c,rN as d,IN as e,lN as f,HN as g,PN as h,Yw as i,le as j,RN as k,fN as l,AN as m,hN as n,wN as o,pN as p,Ig as q,Y as r,yN as s,eV as t,VN as u,tV as v,mN as w,TN as x,SN as y,EN as z};
