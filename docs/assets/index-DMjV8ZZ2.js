const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Overview-DxEbRWNP.js","assets/modal-Bee9i2Th.js","assets/clsx-B-dksMZM.js","assets/card-BB1rXeM0.js","assets/AreaChart-C_Ton-KU.js","assets/ProjectCreateModal-Cj94r3cO.js","assets/PersonDetail-BwMwuMPh.js","assets/ProjectDetail-DM3-qHq3.js","assets/TaskCreateModal-CzwmHs4T.js","assets/Edit03-CtQOnhRU.js","assets/Admin-DYdgEfU9.js","assets/Stats-CmQ8KoSw.js","assets/discordMapping-DeWlSqv_.js","assets/Timeline-onBJNWDE.js","assets/Timeline-AK1v_8f8.css"])))=>i.map(i=>d[i]);
function aE(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var _2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cp={exports:{}},Xl={},hp={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function YS(){if(U_)return He;U_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function I(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,V={};function O(j,Y,Se){this.props=j,this.context=Y,this.refs=V,this.updater=Se||R}O.prototype.isReactComponent={},O.prototype.setState=function(j,Y){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Y,"setState")},O.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function ie(){}ie.prototype=O.prototype;function H(j,Y,Se){this.props=j,this.context=Y,this.refs=V,this.updater=Se||R}var ee=H.prototype=new ie;ee.constructor=H,F(ee,O.prototype),ee.isPureReactComponent=!0;var ae=Array.isArray,de=Object.prototype.hasOwnProperty,fe={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function A(j,Y,Se){var Be,Oe={},$e=null,qe=null;if(Y!=null)for(Be in Y.ref!==void 0&&(qe=Y.ref),Y.key!==void 0&&($e=""+Y.key),Y)de.call(Y,Be)&&!T.hasOwnProperty(Be)&&(Oe[Be]=Y[Be]);var Xe=arguments.length-2;if(Xe===1)Oe.children=Se;else if(1<Xe){for(var gt=Array(Xe),Gt=0;Gt<Xe;Gt++)gt[Gt]=arguments[Gt+2];Oe.children=gt}if(j&&j.defaultProps)for(Be in Xe=j.defaultProps,Xe)Oe[Be]===void 0&&(Oe[Be]=Xe[Be]);return{$$typeof:n,type:j,key:$e,ref:qe,props:Oe,_owner:fe.current}}function P(j,Y){return{$$typeof:n,type:j.type,key:Y,ref:j.ref,props:j.props,_owner:j._owner}}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function N(j){var Y={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Se){return Y[Se]})}var M=/\/+/g;function C(j,Y){return typeof j=="object"&&j!==null&&j.key!=null?N(""+j.key):Y.toString(36)}function Ye(j,Y,Se,Be,Oe){var $e=typeof j;($e==="undefined"||$e==="boolean")&&(j=null);var qe=!1;if(j===null)qe=!0;else switch($e){case"string":case"number":qe=!0;break;case"object":switch(j.$$typeof){case n:case e:qe=!0}}if(qe)return qe=j,Oe=Oe(qe),j=Be===""?"."+C(qe,0):Be,ae(Oe)?(Se="",j!=null&&(Se=j.replace(M,"$&/")+"/"),Ye(Oe,Y,Se,"",function(Gt){return Gt})):Oe!=null&&(x(Oe)&&(Oe=P(Oe,Se+(!Oe.key||qe&&qe.key===Oe.key?"":(""+Oe.key).replace(M,"$&/")+"/")+j)),Y.push(Oe)),1;if(qe=0,Be=Be===""?".":Be+":",ae(j))for(var Xe=0;Xe<j.length;Xe++){$e=j[Xe];var gt=Be+C($e,Xe);qe+=Ye($e,Y,Se,gt,Oe)}else if(gt=I(j),typeof gt=="function")for(j=gt.call(j),Xe=0;!($e=j.next()).done;)$e=$e.value,gt=Be+C($e,Xe++),qe+=Ye($e,Y,Se,gt,Oe);else if($e==="object")throw Y=String(j),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return qe}function Et(j,Y,Se){if(j==null)return j;var Be=[],Oe=0;return Ye(j,Be,"","",function($e){return Y.call(Se,$e,Oe++)}),Be}function Bt(j){if(j._status===-1){var Y=j._result;Y=Y(),Y.then(function(Se){(j._status===0||j._status===-1)&&(j._status=1,j._result=Se)},function(Se){(j._status===0||j._status===-1)&&(j._status=2,j._result=Se)}),j._status===-1&&(j._status=0,j._result=Y)}if(j._status===1)return j._result.default;throw j._result}var ot={current:null},se={transition:null},xe={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:se,ReactCurrentOwner:fe};function me(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:Et,forEach:function(j,Y,Se){Et(j,function(){Y.apply(this,arguments)},Se)},count:function(j){var Y=0;return Et(j,function(){Y++}),Y},toArray:function(j){return Et(j,function(Y){return Y})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},He.Component=O,He.Fragment=t,He.Profiler=s,He.PureComponent=H,He.StrictMode=r,He.Suspense=f,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,He.act=me,He.cloneElement=function(j,Y,Se){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Be=F({},j.props),Oe=j.key,$e=j.ref,qe=j._owner;if(Y!=null){if(Y.ref!==void 0&&($e=Y.ref,qe=fe.current),Y.key!==void 0&&(Oe=""+Y.key),j.type&&j.type.defaultProps)var Xe=j.type.defaultProps;for(gt in Y)de.call(Y,gt)&&!T.hasOwnProperty(gt)&&(Be[gt]=Y[gt]===void 0&&Xe!==void 0?Xe[gt]:Y[gt])}var gt=arguments.length-2;if(gt===1)Be.children=Se;else if(1<gt){Xe=Array(gt);for(var Gt=0;Gt<gt;Gt++)Xe[Gt]=arguments[Gt+2];Be.children=Xe}return{$$typeof:n,type:j.type,key:Oe,ref:$e,props:Be,_owner:qe}},He.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},He.createElement=A,He.createFactory=function(j){var Y=A.bind(null,j);return Y.type=j,Y},He.createRef=function(){return{current:null}},He.forwardRef=function(j){return{$$typeof:h,render:j}},He.isValidElement=x,He.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Bt}},He.memo=function(j,Y){return{$$typeof:m,type:j,compare:Y===void 0?null:Y}},He.startTransition=function(j){var Y=se.transition;se.transition={};try{j()}finally{se.transition=Y}},He.unstable_act=me,He.useCallback=function(j,Y){return ot.current.useCallback(j,Y)},He.useContext=function(j){return ot.current.useContext(j)},He.useDebugValue=function(){},He.useDeferredValue=function(j){return ot.current.useDeferredValue(j)},He.useEffect=function(j,Y){return ot.current.useEffect(j,Y)},He.useId=function(){return ot.current.useId()},He.useImperativeHandle=function(j,Y,Se){return ot.current.useImperativeHandle(j,Y,Se)},He.useInsertionEffect=function(j,Y){return ot.current.useInsertionEffect(j,Y)},He.useLayoutEffect=function(j,Y){return ot.current.useLayoutEffect(j,Y)},He.useMemo=function(j,Y){return ot.current.useMemo(j,Y)},He.useReducer=function(j,Y,Se){return ot.current.useReducer(j,Y,Se)},He.useRef=function(j){return ot.current.useRef(j)},He.useState=function(j){return ot.current.useState(j)},He.useSyncExternalStore=function(j,Y,Se){return ot.current.useSyncExternalStore(j,Y,Se)},He.useTransition=function(){return ot.current.useTransition()},He.version="18.3.1",He}var j_;function mm(){return j_||(j_=1,hp.exports=YS()),hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function XS(){if(B_)return Xl;B_=1;var n=mm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,m){var _,w={},I=null,R=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(R=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:h,key:I,ref:R,props:w,_owner:s.current}}return Xl.Fragment=t,Xl.jsx=l,Xl.jsxs=l,Xl}var z_;function ZS(){return z_||(z_=1,cp.exports=XS()),cp.exports}var Q=ZS(),X=mm();const Xt=lE(X),eA=aE({__proto__:null,default:Xt},[X]);var oh={},dp={exports:{}},Wn={},fp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function tA(){return $_||($_=1,(function(n){function e(se,xe){var me=se.length;se.push(xe);e:for(;0<me;){var j=me-1>>>1,Y=se[j];if(0<s(Y,xe))se[j]=xe,se[me]=Y,me=j;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var xe=se[0],me=se.pop();if(me!==xe){se[0]=me;e:for(var j=0,Y=se.length,Se=Y>>>1;j<Se;){var Be=2*(j+1)-1,Oe=se[Be],$e=Be+1,qe=se[$e];if(0>s(Oe,me))$e<Y&&0>s(qe,Oe)?(se[j]=qe,se[$e]=me,j=$e):(se[j]=Oe,se[Be]=me,j=Be);else if($e<Y&&0>s(qe,me))se[j]=qe,se[$e]=me,j=$e;else break e}}return xe}function s(se,xe){var me=se.sortIndex-xe.sortIndex;return me!==0?me:se.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],m=[],_=1,w=null,I=3,R=!1,F=!1,V=!1,O=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(se){for(var xe=t(m);xe!==null;){if(xe.callback===null)r(m);else if(xe.startTime<=se)r(m),xe.sortIndex=xe.expirationTime,e(f,xe);else break;xe=t(m)}}function ae(se){if(V=!1,ee(se),!F)if(t(f)!==null)F=!0,Bt(de);else{var xe=t(m);xe!==null&&ot(ae,xe.startTime-se)}}function de(se,xe){F=!1,V&&(V=!1,ie(A),A=-1),R=!0;var me=I;try{for(ee(xe),w=t(f);w!==null&&(!(w.expirationTime>xe)||se&&!N());){var j=w.callback;if(typeof j=="function"){w.callback=null,I=w.priorityLevel;var Y=j(w.expirationTime<=xe);xe=n.unstable_now(),typeof Y=="function"?w.callback=Y:w===t(f)&&r(f),ee(xe)}else r(f);w=t(f)}if(w!==null)var Se=!0;else{var Be=t(m);Be!==null&&ot(ae,Be.startTime-xe),Se=!1}return Se}finally{w=null,I=me,R=!1}}var fe=!1,T=null,A=-1,P=5,x=-1;function N(){return!(n.unstable_now()-x<P)}function M(){if(T!==null){var se=n.unstable_now();x=se;var xe=!0;try{xe=T(!0,se)}finally{xe?C():(fe=!1,T=null)}}else fe=!1}var C;if(typeof H=="function")C=function(){H(M)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Et=Ye.port2;Ye.port1.onmessage=M,C=function(){Et.postMessage(null)}}else C=function(){O(M,0)};function Bt(se){T=se,fe||(fe=!0,C())}function ot(se,xe){A=O(function(){se(n.unstable_now())},xe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){F||R||(F=!0,Bt(de))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(se){switch(I){case 1:case 2:case 3:var xe=3;break;default:xe=I}var me=I;I=xe;try{return se()}finally{I=me}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,xe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var me=I;I=se;try{return xe()}finally{I=me}},n.unstable_scheduleCallback=function(se,xe,me){var j=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?j+me:j):me=j,se){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=me+Y,se={id:_++,callback:xe,priorityLevel:se,startTime:me,expirationTime:Y,sortIndex:-1},me>j?(se.sortIndex=me,e(m,se),t(f)===null&&se===t(m)&&(V?(ie(A),A=-1):V=!0,ot(ae,me-j))):(se.sortIndex=Y,e(f,se),F||R||(F=!0,Bt(de))),se},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(se){var xe=I;return function(){var me=I;I=xe;try{return se.apply(this,arguments)}finally{I=me}}}})(pp)),pp}var q_;function nA(){return q_||(q_=1,fp.exports=tA()),fp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function rA(){if(K_)return Wn;K_=1;var n=mm(),e=nA();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function I(i){return f.call(w,i)?!0:f.call(_,i)?!1:m.test(i)?w[i]=!0:(_[i]=!0,!1)}function R(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function F(i,o,u,d){if(o===null||typeof o>"u"||R(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function V(i,o,u,d,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new V(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];O[o]=new V(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new V(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new V(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new V(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new V(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new V(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new V(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new V(i,5,!1,i.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(ie,H);O[o]=new V(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(ie,H);O[o]=new V(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(ie,H);O[o]=new V(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new V(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new V(i,1,!1,i.toLowerCase(),null,!0,!0)});function ee(i,o,u,d){var p=O.hasOwnProperty(o)?O[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(F(o,u,p,d)&&(u=null),d||p===null?I(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):p.mustUseProperty?i[p.propertyName]=u===null?p.type===3?!1:"":u:(o=p.attributeName,d=p.attributeNamespace,u===null?i.removeAttribute(o):(p=p.type,u=p===3||p===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),fe=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),ot=Symbol.for("react.offscreen"),se=Symbol.iterator;function xe(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var me=Object.assign,j;function Y(i){if(j===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);j=o&&o[1]||""}return`
`+j+i}var Se=!1;function Be(i,o){if(!i||Se)return"";Se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var d=G}Reflect.construct(i,[],o)}else{try{o.call()}catch(G){d=G}i.call(o.prototype)}else{try{throw Error()}catch(G){d=G}i()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var p=G.stack.split(`
`),y=d.stack.split(`
`),E=p.length-1,k=y.length-1;1<=E&&0<=k&&p[E]!==y[k];)k--;for(;1<=E&&0<=k;E--,k--)if(p[E]!==y[k]){if(E!==1||k!==1)do if(E--,k--,0>k||p[E]!==y[k]){var b=`
`+p[E].replace(" at new "," at ");return i.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",i.displayName)),b}while(1<=E&&0<=k);break}}}finally{Se=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Y(i):""}function Oe(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=Be(i.type,!1),i;case 11:return i=Be(i.type.render,!1),i;case 1:return i=Be(i.type,!0),i;default:return""}}function $e(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case fe:return"Portal";case P:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Ye:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case N:return(i.displayName||"Context")+".Consumer";case x:return(i._context.displayName||"Context")+".Provider";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Et:return o=i.displayName||null,o!==null?o:$e(i.type)||"Memo";case Bt:o=i._payload,i=i._init;try{return $e(i(o))}catch{}}return null}function qe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function gt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gt(i){var o=gt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Pr(i){i._valueTracker||(i._valueTracker=Gt(i))}function Ot(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=gt(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function Cn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Hr(i,o){var u=o.checked;return me({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Ji(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=Xe(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Xn(i,o){o=o.checked,o!=null&&ee(i,"checked",o,!1)}function Xs(i,o){Xn(i,o);var u=Xe(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?wi(i,o.type,u):o.hasOwnProperty("defaultValue")&&wi(i,o.type,Xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Xo(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function wi(i,o,u){(o!=="number"||Cn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var kr=Array.isArray;function Cr(i,o,u,d){if(i=i.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<i.length;u++)p=o.hasOwnProperty("$"+i[u].value),i[u].selected!==p&&(i[u].selected=p),p&&d&&(i[u].defaultSelected=!0)}else{for(u=""+Xe(u),o=null,p=0;p<i.length;p++){if(i[p].value===u){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Zs(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return me({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Yi(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(kr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Xe(u)}}function On(i,o){var u=Xe(o.value),d=Xe(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function xr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Mt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Mt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var on,xn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(on=on||document.createElement("div"),on.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=on.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Dr(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ei=["Webkit","ms","Moz","O"];Object.keys(pr).forEach(function(i){Ei.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),pr[o]=pr[i]})});function Mn(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||pr.hasOwnProperty(i)&&pr[i]?(""+o).trim():o+"px"}function Xi(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,p=Mn(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,p):i[u]=p}}var Zi=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function es(i,o){if(o){if(Zi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function eo(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function br(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ii=null,_n=null,Fn=null;function ts(i){if(i=Ml(i)){if(typeof Ii!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Ec(o),Ii(i.stateNode,i.type,o))}}function Zn(i){_n?Fn?Fn.push(i):Fn=[i]:_n=i}function to(){if(_n){var i=_n,o=Fn;if(Fn=_n=null,ts(i),o)for(i=0;i<o.length;i++)ts(o[i])}}function Jr(i,o){return i(o)}function Yr(){}var Un=!1;function no(i,o,u){if(Un)return i(o,u);Un=!0;try{return Jr(i,o,u)}finally{Un=!1,(_n!==null||Fn!==null)&&(Yr(),to())}}function Dt(i,o){var u=i.stateNode;if(u===null)return null;var d=Ec(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var D=!1;if(h)try{var U={};Object.defineProperty(U,"passive",{get:function(){D=!0}}),window.addEventListener("test",U,U),window.removeEventListener("test",U,U)}catch{D=!1}function K(i,o,u,d,p,y,E,k,b){var G=Array.prototype.slice.call(arguments,3);try{o.apply(u,G)}catch(re){this.onError(re)}}var Z=!1,ce=null,we=!1,Ne=null,Ee={onError:function(i){Z=!0,ce=i}};function ve(i,o,u,d,p,y,E,k,b){Z=!1,ce=null,K.apply(Ee,arguments)}function ye(i,o,u,d,p,y,E,k,b){if(ve.apply(this,arguments),Z){if(Z){var G=ce;Z=!1,ce=null}else throw Error(t(198));we||(we=!0,Ne=G)}}function _e(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Me(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Ue(i){if(_e(i)!==i)throw Error(t(188))}function Ft(i){var o=i.alternate;if(!o){if(o=_e(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){u=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return Ue(p),i;if(y===d)return Ue(p),o;y=y.sibling}throw Error(t(188))}if(u.return!==d.return)u=p,d=y;else{for(var E=!1,k=p.child;k;){if(k===u){E=!0,u=p,d=y;break}if(k===d){E=!0,d=p,u=y;break}k=k.sibling}if(!E){for(k=y.child;k;){if(k===u){E=!0,u=y,d=p;break}if(k===d){E=!0,d=y,u=p;break}k=k.sibling}if(!E)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function lt(i){return i=Ft(i),i!==null?We(i):null}function We(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=We(i);if(o!==null)return o;i=i.sibling}return null}var dt=e.unstable_scheduleCallback,mr=e.unstable_cancelCallback,Xr=e.unstable_shouldYield,er=e.unstable_requestPaint,Qe=e.unstable_now,ns=e.unstable_getCurrentPriorityLevel,tr=e.unstable_ImmediatePriority,vn=e.unstable_UserBlockingPriority,dn=e.unstable_NormalPriority,Zr=e.unstable_LowPriority,Je=e.unstable_IdlePriority,ct=null,Wt=null;function ei(i){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Zo,gr=Math.log,ro=Math.LN2;function Zo(i){return i>>>=0,i===0?32:31-(gr(i)/ro|0)|0}var ea=64,ta=4194304;function rs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function io(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,p=i.suspendedLanes,y=i.pingedLanes,E=u&268435455;if(E!==0){var k=E&~p;k!==0?d=rs(k):(y&=E,y!==0&&(d=rs(y)))}else E=u&~p,E!==0?d=rs(E):y!==0&&(d=rs(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-Ze(o),p=1<<u,d|=i[u],o&=~p;return d}function Ud(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-Ze(y),k=1<<E,b=p[E];b===-1?((k&u)===0||(k&d)!==0)&&(p[E]=Ud(k,o)):b<=o&&(i.expiredLanes|=k),y&=~k}}function nr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function so(){var i=ea;return ea<<=1,(ea&4194240)===0&&(ea=64),i}function is(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function ss(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Ze(o),i[o]=u}function vt(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var p=31-Ze(u),y=1<<p;o[p]=0,d[p]=-1,i[p]=-1,u&=~y}}function os(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-Ze(u),p=1<<d;p&o|i[d]&o&&(i[d]|=o),u&=~p}}var nt=0;function as(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ec,na,tc,nc,rc,Il=!1,ti=[],fn=null,Nr=null,Vr=null,ls=new Map,yr=new Map,ni=[],jd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ic(i,o){switch(i){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":ls.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(o.pointerId)}}function jn(i,o,u,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Ml(o),o!==null&&na(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Bd(i,o,u,d,p){switch(o){case"focusin":return fn=jn(fn,i,o,u,d,p),!0;case"dragenter":return Nr=jn(Nr,i,o,u,d,p),!0;case"mouseover":return Vr=jn(Vr,i,o,u,d,p),!0;case"pointerover":var y=p.pointerId;return ls.set(y,jn(ls.get(y)||null,i,o,u,d,p)),!0;case"gotpointercapture":return y=p.pointerId,yr.set(y,jn(yr.get(y)||null,i,o,u,d,p)),!0}return!1}function sc(i){var o=co(i.target);if(o!==null){var u=_e(o);if(u!==null){if(o=u.tag,o===13){if(o=Me(u),o!==null){i.blockedOn=o,rc(i.priority,function(){tc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Si(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ra(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);Qr=d,u.target.dispatchEvent(d),Qr=null}else return o=Ml(u),o!==null&&na(o),i.blockedOn=u,!1;o.shift()}return!0}function oo(i,o,u){Si(i)&&u.delete(o)}function oc(){Il=!1,fn!==null&&Si(fn)&&(fn=null),Nr!==null&&Si(Nr)&&(Nr=null),Vr!==null&&Si(Vr)&&(Vr=null),ls.forEach(oo),yr.forEach(oo)}function Lr(i,o){i.blockedOn===o&&(i.blockedOn=null,Il||(Il=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oc)))}function Or(i){function o(p){return Lr(p,i)}if(0<ti.length){Lr(ti[0],i);for(var u=1;u<ti.length;u++){var d=ti[u];d.blockedOn===i&&(d.blockedOn=null)}}for(fn!==null&&Lr(fn,i),Nr!==null&&Lr(Nr,i),Vr!==null&&Lr(Vr,i),ls.forEach(o),yr.forEach(o),u=0;u<ni.length;u++)d=ni[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<ni.length&&(u=ni[0],u.blockedOn===null);)sc(u),u.blockedOn===null&&ni.shift()}var Ai=ae.ReactCurrentBatchConfig,us=!0;function Rt(i,o,u,d){var p=nt,y=Ai.transition;Ai.transition=null;try{nt=1,Tl(i,o,u,d)}finally{nt=p,Ai.transition=y}}function zd(i,o,u,d){var p=nt,y=Ai.transition;Ai.transition=null;try{nt=4,Tl(i,o,u,d)}finally{nt=p,Ai.transition=y}}function Tl(i,o,u,d){if(us){var p=ra(i,o,u,d);if(p===null)Zd(i,o,d,ao,u),ic(i,d);else if(Bd(p,i,o,u,d))d.stopPropagation();else if(ic(i,d),o&4&&-1<jd.indexOf(i)){for(;p!==null;){var y=Ml(p);if(y!==null&&ec(y),y=ra(i,o,u,d),y===null&&Zd(i,o,d,ao,u),y===p)break;p=y}p!==null&&d.stopPropagation()}else Zd(i,o,d,null,u)}}var ao=null;function ra(i,o,u,d){if(ao=null,i=br(d),i=co(i),i!==null)if(o=_e(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Me(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ao=i,null}function Sl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ns()){case tr:return 1;case vn:return 4;case dn:case Zr:return 16;case Je:return 536870912;default:return 16}default:return 16}}var rr=null,ia=null,Bn=null;function Al(){if(Bn)return Bn;var i,o=ia,u=o.length,d,p="value"in rr?rr.value:rr.textContent,y=p.length;for(i=0;i<u&&o[i]===p[i];i++);var E=u-i;for(d=1;d<=E&&o[u-d]===p[y-d];d++);return Bn=p.slice(i,1<d?1-d:void 0)}function sa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ri(){return!0}function Rl(){return!1}function pn(i){function o(u,d,p,y,E){this._reactName=u,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(u=i[k],this[k]=u?u(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ri:Rl,this.isPropagationStopped=Rl,this}return me(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),o}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=pn(Mr),ii=me({},Mr,{view:0,detail:0}),$d=pn(ii),aa,Ri,cs,lo=me({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:si,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cs&&(cs&&i.type==="mousemove"?(aa=i.screenX-cs.screenX,Ri=i.screenY-cs.screenY):Ri=aa=0,cs=i),aa)},movementY:function(i){return"movementY"in i?i.movementY:Ri}}),la=pn(lo),Pl=me({},lo,{dataTransfer:0}),ac=pn(Pl),ua=me({},ii,{relatedTarget:0}),ca=pn(ua),lc=me({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pi=pn(lc),uc=me({},Mr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),cc=pn(uc),hc=me({},Mr,{data:0}),kl=pn(hc),ha={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=dc[i])?!!o[i]:!1}function si(){return fc}var c=me({},ii,{key:function(i){if(i.key){var o=ha[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=sa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Dn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:si,charCode:function(i){return i.type==="keypress"?sa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?sa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=pn(c),v=me({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=pn(v),B=me({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:si}),W=pn(B),ue=me({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ft=pn(ue),Zt=me({},lo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rt=pn(Zt),an=[9,13,27,32],Ht=h&&"CompositionEvent"in window,_r=null;h&&"documentMode"in document&&(_r=document.documentMode);var ir=h&&"TextEvent"in window&&!_r,uo=h&&(!Ht||_r&&8<_r&&11>=_r),da=" ",Ng=!1;function Vg(i,o){switch(i){case"keyup":return an.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fa=!1;function HT(i,o){switch(i){case"compositionend":return Lg(o);case"keypress":return o.which!==32?null:(Ng=!0,da);case"textInput":return i=o.data,i===da&&Ng?null:i;default:return null}}function QT(i,o){if(fa)return i==="compositionend"||!Ht&&Vg(i,o)?(i=Al(),Bn=ia=rr=null,fa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return uo&&o.locale!=="ko"?null:o.data;default:return null}}var JT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Og(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!JT[i.type]:o==="textarea"}function Mg(i,o,u,d){Zn(d),o=_c(o,"onChange"),0<o.length&&(u=new oa("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var Cl=null,xl=null;function YT(i){ty(i,0)}function pc(i){var o=_a(i);if(Ot(o))return i}function XT(i,o){if(i==="change")return o}var Fg=!1;if(h){var qd;if(h){var Kd="oninput"in document;if(!Kd){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Kd=typeof Ug.oninput=="function"}qd=Kd}else qd=!1;Fg=qd&&(!document.documentMode||9<document.documentMode)}function jg(){Cl&&(Cl.detachEvent("onpropertychange",Bg),xl=Cl=null)}function Bg(i){if(i.propertyName==="value"&&pc(xl)){var o=[];Mg(o,xl,i,br(i)),no(YT,o)}}function ZT(i,o,u){i==="focusin"?(jg(),Cl=o,xl=u,Cl.attachEvent("onpropertychange",Bg)):i==="focusout"&&jg()}function eS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pc(xl)}function tS(i,o){if(i==="click")return pc(o)}function nS(i,o){if(i==="input"||i==="change")return pc(o)}function rS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Fr=typeof Object.is=="function"?Object.is:rS;function Dl(i,o){if(Fr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var p=u[d];if(!f.call(o,p)||!Fr(i[p],o[p]))return!1}return!0}function zg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $g(i,o){var u=zg(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=zg(u)}}function qg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?qg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Kg(){for(var i=window,o=Cn();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Cn(i.document)}return o}function Gd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function iS(i){var o=Kg(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&qg(u.ownerDocument.documentElement,u)){if(d!==null&&Gd(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=u.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!i.extend&&y>d&&(p=d,d=y,y=p),p=$g(u,y);var E=$g(u,d);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var sS=h&&"documentMode"in document&&11>=document.documentMode,pa=null,Wd=null,bl=null,Hd=!1;function Gg(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Hd||pa==null||pa!==Cn(d)||(d=pa,"selectionStart"in d&&Gd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),bl&&Dl(bl,d)||(bl=d,d=_c(Wd,"onSelect"),0<d.length&&(o=new oa("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=pa)))}function mc(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var ma={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},Qd={},Wg={};h&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function gc(i){if(Qd[i])return Qd[i];if(!ma[i])return i;var o=ma[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Wg)return Qd[i]=o[u];return i}var Hg=gc("animationend"),Qg=gc("animationiteration"),Jg=gc("animationstart"),Yg=gc("transitionend"),Xg=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(i,o){Xg.set(i,o),a(o,[i])}for(var Jd=0;Jd<Zg.length;Jd++){var Yd=Zg[Jd],oS=Yd.toLowerCase(),aS=Yd[0].toUpperCase()+Yd.slice(1);hs(oS,"on"+aS)}hs(Hg,"onAnimationEnd"),hs(Qg,"onAnimationIteration"),hs(Jg,"onAnimationStart"),hs("dblclick","onDoubleClick"),hs("focusin","onFocus"),hs("focusout","onBlur"),hs(Yg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function ey(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,ye(d,o,void 0,i),i.currentTarget=null}function ty(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var E=d.length-1;0<=E;E--){var k=d[E],b=k.instance,G=k.currentTarget;if(k=k.listener,b!==y&&p.isPropagationStopped())break e;ey(p,k,G),y=b}else for(E=0;E<d.length;E++){if(k=d[E],b=k.instance,G=k.currentTarget,k=k.listener,b!==y&&p.isPropagationStopped())break e;ey(p,k,G),y=b}}}if(we)throw i=Ne,we=!1,Ne=null,i}function St(i,o){var u=o[of];u===void 0&&(u=o[of]=new Set);var d=i+"__bubble";u.has(d)||(ny(o,i,2,!1),u.add(d))}function Xd(i,o,u){var d=0;o&&(d|=4),ny(u,i,d,o)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Vl(i){if(!i[yc]){i[yc]=!0,r.forEach(function(u){u!=="selectionchange"&&(lS.has(u)||Xd(u,!1,i),Xd(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[yc]||(o[yc]=!0,Xd("selectionchange",!1,o))}}function ny(i,o,u,d){switch(Sl(o)){case 1:var p=Rt;break;case 4:p=zd;break;default:p=Tl}u=p.bind(null,o,u,i),p=void 0,!D||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,u,{capture:!0,passive:p}):i.addEventListener(o,u,!0):p!==void 0?i.addEventListener(o,u,{passive:p}):i.addEventListener(o,u,!1)}function Zd(i,o,u,d,p){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var k=d.stateNode.containerInfo;if(k===p||k.nodeType===8&&k.parentNode===p)break;if(E===4)for(E=d.return;E!==null;){var b=E.tag;if((b===3||b===4)&&(b=E.stateNode.containerInfo,b===p||b.nodeType===8&&b.parentNode===p))return;E=E.return}for(;k!==null;){if(E=co(k),E===null)return;if(b=E.tag,b===5||b===6){d=y=E;continue e}k=k.parentNode}}d=d.return}no(function(){var G=y,re=br(u),oe=[];e:{var te=Xg.get(i);if(te!==void 0){var ge=oa,Te=i;switch(i){case"keypress":if(sa(u)===0)break e;case"keydown":case"keyup":ge=g;break;case"focusin":Te="focus",ge=ca;break;case"focusout":Te="blur",ge=ca;break;case"beforeblur":case"afterblur":ge=ca;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=W;break;case Hg:case Qg:case Jg:ge=Pi;break;case Yg:ge=ft;break;case"scroll":ge=$d;break;case"wheel":ge=rt;break;case"copy":case"cut":case"paste":ge=cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=S}var Re=(o&4)!==0,zt=!Re&&i==="scroll",z=Re?te!==null?te+"Capture":null:te;Re=[];for(var L=G,q;L!==null;){q=L;var le=q.stateNode;if(q.tag===5&&le!==null&&(q=le,z!==null&&(le=Dt(L,z),le!=null&&Re.push(Ll(L,le,q)))),zt)break;L=L.return}0<Re.length&&(te=new ge(te,Te,null,u,re),oe.push({event:te,listeners:Re}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",te&&u!==Qr&&(Te=u.relatedTarget||u.fromElement)&&(co(Te)||Te[ki]))break e;if((ge||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,ge?(Te=u.relatedTarget||u.toElement,ge=G,Te=Te?co(Te):null,Te!==null&&(zt=_e(Te),Te!==zt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ge=null,Te=G),ge!==Te)){if(Re=la,le="onMouseLeave",z="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Re=S,le="onPointerLeave",z="onPointerEnter",L="pointer"),zt=ge==null?te:_a(ge),q=Te==null?te:_a(Te),te=new Re(le,L+"leave",ge,u,re),te.target=zt,te.relatedTarget=q,le=null,co(re)===G&&(Re=new Re(z,L+"enter",Te,u,re),Re.target=q,Re.relatedTarget=zt,le=Re),zt=le,ge&&Te)t:{for(Re=ge,z=Te,L=0,q=Re;q;q=ga(q))L++;for(q=0,le=z;le;le=ga(le))q++;for(;0<L-q;)Re=ga(Re),L--;for(;0<q-L;)z=ga(z),q--;for(;L--;){if(Re===z||z!==null&&Re===z.alternate)break t;Re=ga(Re),z=ga(z)}Re=null}else Re=null;ge!==null&&ry(oe,te,ge,Re,!1),Te!==null&&zt!==null&&ry(oe,zt,Te,Re,!0)}}e:{if(te=G?_a(G):window,ge=te.nodeName&&te.nodeName.toLowerCase(),ge==="select"||ge==="input"&&te.type==="file")var ke=XT;else if(Og(te))if(Fg)ke=nS;else{ke=eS;var Ve=ZT}else(ge=te.nodeName)&&ge.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ke=tS);if(ke&&(ke=ke(i,G))){Mg(oe,ke,u,re);break e}Ve&&Ve(i,te,G),i==="focusout"&&(Ve=te._wrapperState)&&Ve.controlled&&te.type==="number"&&wi(te,"number",te.value)}switch(Ve=G?_a(G):window,i){case"focusin":(Og(Ve)||Ve.contentEditable==="true")&&(pa=Ve,Wd=G,bl=null);break;case"focusout":bl=Wd=pa=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,Gg(oe,u,re);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":Gg(oe,u,re)}var Le;if(Ht)e:{switch(i){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else fa?Vg(i,u)&&(Fe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Fe="onCompositionStart");Fe&&(uo&&u.locale!=="ko"&&(fa||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&fa&&(Le=Al()):(rr=re,ia="value"in rr?rr.value:rr.textContent,fa=!0)),Ve=_c(G,Fe),0<Ve.length&&(Fe=new kl(Fe,i,null,u,re),oe.push({event:Fe,listeners:Ve}),Le?Fe.data=Le:(Le=Lg(u),Le!==null&&(Fe.data=Le)))),(Le=ir?HT(i,u):QT(i,u))&&(G=_c(G,"onBeforeInput"),0<G.length&&(re=new kl("onBeforeInput","beforeinput",null,u,re),oe.push({event:re,listeners:G}),re.data=Le))}ty(oe,o)})}function Ll(i,o,u){return{instance:i,listener:o,currentTarget:u}}function _c(i,o){for(var u=o+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Dt(i,u),y!=null&&d.unshift(Ll(i,y,p)),y=Dt(i,o),y!=null&&d.push(Ll(i,y,p))),i=i.return}return d}function ga(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ry(i,o,u,d,p){for(var y=o._reactName,E=[];u!==null&&u!==d;){var k=u,b=k.alternate,G=k.stateNode;if(b!==null&&b===d)break;k.tag===5&&G!==null&&(k=G,p?(b=Dt(u,y),b!=null&&E.unshift(Ll(u,b,k))):p||(b=Dt(u,y),b!=null&&E.push(Ll(u,b,k)))),u=u.return}E.length!==0&&i.push({event:o,listeners:E})}var uS=/\r\n?/g,cS=/\u0000|\uFFFD/g;function iy(i){return(typeof i=="string"?i:""+i).replace(uS,`
`).replace(cS,"")}function vc(i,o,u){if(o=iy(o),iy(i)!==o&&u)throw Error(t(425))}function wc(){}var ef=null,tf=null;function nf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var rf=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,dS=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(i){return sy.resolve(null).then(i).catch(fS)}:rf;function fS(i){setTimeout(function(){throw i})}function sf(i,o){var u=o,d=0;do{var p=u.nextSibling;if(i.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(d===0){i.removeChild(p),Or(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=p}while(u);Or(o)}function ds(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function oy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var ya=Math.random().toString(36).slice(2),oi="__reactFiber$"+ya,Ol="__reactProps$"+ya,ki="__reactContainer$"+ya,of="__reactEvents$"+ya,pS="__reactListeners$"+ya,mS="__reactHandles$"+ya;function co(i){var o=i[oi];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ki]||u[oi]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=oy(i);i!==null;){if(u=i[oi])return u;i=oy(i)}return o}i=u,u=i.parentNode}return null}function Ml(i){return i=i[oi]||i[ki],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Ec(i){return i[Ol]||null}var af=[],va=-1;function fs(i){return{current:i}}function At(i){0>va||(i.current=af[va],af[va]=null,va--)}function It(i,o){va++,af[va]=i.current,i.current=o}var ps={},wn=fs(ps),zn=fs(!1),ho=ps;function wa(i,o){var u=i.type.contextTypes;if(!u)return ps;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in u)p[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function $n(i){return i=i.childContextTypes,i!=null}function Ic(){At(zn),At(wn)}function ay(i,o,u){if(wn.current!==ps)throw Error(t(168));It(wn,o),It(zn,u)}function ly(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,qe(i)||"Unknown",p));return me({},u,d)}function Tc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ps,ho=wn.current,It(wn,i),It(zn,zn.current),!0}function uy(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=ly(i,o,ho),d.__reactInternalMemoizedMergedChildContext=i,At(zn),At(wn),It(wn,i)):At(zn),It(zn,u)}var Ci=null,Sc=!1,lf=!1;function cy(i){Ci===null?Ci=[i]:Ci.push(i)}function gS(i){Sc=!0,cy(i)}function ms(){if(!lf&&Ci!==null){lf=!0;var i=0,o=nt;try{var u=Ci;for(nt=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}Ci=null,Sc=!1}catch(p){throw Ci!==null&&(Ci=Ci.slice(i+1)),dt(tr,ms),p}finally{nt=o,lf=!1}}return null}var Ea=[],Ia=0,Ac=null,Rc=0,vr=[],wr=0,fo=null,xi=1,Di="";function po(i,o){Ea[Ia++]=Rc,Ea[Ia++]=Ac,Ac=i,Rc=o}function hy(i,o,u){vr[wr++]=xi,vr[wr++]=Di,vr[wr++]=fo,fo=i;var d=xi;i=Di;var p=32-Ze(d)-1;d&=~(1<<p),u+=1;var y=32-Ze(o)+p;if(30<y){var E=p-p%5;y=(d&(1<<E)-1).toString(32),d>>=E,p-=E,xi=1<<32-Ze(o)+p|u<<p|d,Di=y+i}else xi=1<<y|u<<p|d,Di=i}function uf(i){i.return!==null&&(po(i,1),hy(i,1,0))}function cf(i){for(;i===Ac;)Ac=Ea[--Ia],Ea[Ia]=null,Rc=Ea[--Ia],Ea[Ia]=null;for(;i===fo;)fo=vr[--wr],vr[wr]=null,Di=vr[--wr],vr[wr]=null,xi=vr[--wr],vr[wr]=null}var sr=null,or=null,Pt=!1,Ur=null;function dy(i,o){var u=Sr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function fy(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,sr=i,or=ds(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,sr=i,or=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=fo!==null?{id:xi,overflow:Di}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Sr(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,sr=i,or=null,!0):!1;default:return!1}}function hf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function df(i){if(Pt){var o=or;if(o){var u=o;if(!fy(i,o)){if(hf(i))throw Error(t(418));o=ds(u.nextSibling);var d=sr;o&&fy(i,o)?dy(d,u):(i.flags=i.flags&-4097|2,Pt=!1,sr=i)}}else{if(hf(i))throw Error(t(418));i.flags=i.flags&-4097|2,Pt=!1,sr=i}}}function py(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;sr=i}function Pc(i){if(i!==sr)return!1;if(!Pt)return py(i),Pt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!nf(i.type,i.memoizedProps)),o&&(o=or)){if(hf(i))throw my(),Error(t(418));for(;o;)dy(i,o),o=ds(o.nextSibling)}if(py(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){or=ds(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}or=null}}else or=sr?ds(i.stateNode.nextSibling):null;return!0}function my(){for(var i=or;i;)i=ds(i.nextSibling)}function Ta(){or=sr=null,Pt=!1}function ff(i){Ur===null?Ur=[i]:Ur.push(i)}var yS=ae.ReactCurrentBatchConfig;function Fl(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var p=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var k=p.refs;E===null?delete k[y]:k[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function kc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function gy(i){var o=i._init;return o(i._payload)}function yy(i){function o(z,L){if(i){var q=z.deletions;q===null?(z.deletions=[L],z.flags|=16):q.push(L)}}function u(z,L){if(!i)return null;for(;L!==null;)o(z,L),L=L.sibling;return null}function d(z,L){for(z=new Map;L!==null;)L.key!==null?z.set(L.key,L):z.set(L.index,L),L=L.sibling;return z}function p(z,L){return z=Ts(z,L),z.index=0,z.sibling=null,z}function y(z,L,q){return z.index=q,i?(q=z.alternate,q!==null?(q=q.index,q<L?(z.flags|=2,L):q):(z.flags|=2,L)):(z.flags|=1048576,L)}function E(z){return i&&z.alternate===null&&(z.flags|=2),z}function k(z,L,q,le){return L===null||L.tag!==6?(L=ip(q,z.mode,le),L.return=z,L):(L=p(L,q),L.return=z,L)}function b(z,L,q,le){var ke=q.type;return ke===T?re(z,L,q.props.children,le,q.key):L!==null&&(L.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Bt&&gy(ke)===L.type)?(le=p(L,q.props),le.ref=Fl(z,L,q),le.return=z,le):(le=Xc(q.type,q.key,q.props,null,z.mode,le),le.ref=Fl(z,L,q),le.return=z,le)}function G(z,L,q,le){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=sp(q,z.mode,le),L.return=z,L):(L=p(L,q.children||[]),L.return=z,L)}function re(z,L,q,le,ke){return L===null||L.tag!==7?(L=Io(q,z.mode,le,ke),L.return=z,L):(L=p(L,q),L.return=z,L)}function oe(z,L,q){if(typeof L=="string"&&L!==""||typeof L=="number")return L=ip(""+L,z.mode,q),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case de:return q=Xc(L.type,L.key,L.props,null,z.mode,q),q.ref=Fl(z,null,L),q.return=z,q;case fe:return L=sp(L,z.mode,q),L.return=z,L;case Bt:var le=L._init;return oe(z,le(L._payload),q)}if(kr(L)||xe(L))return L=Io(L,z.mode,q,null),L.return=z,L;kc(z,L)}return null}function te(z,L,q,le){var ke=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ke!==null?null:k(z,L,""+q,le);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case de:return q.key===ke?b(z,L,q,le):null;case fe:return q.key===ke?G(z,L,q,le):null;case Bt:return ke=q._init,te(z,L,ke(q._payload),le)}if(kr(q)||xe(q))return ke!==null?null:re(z,L,q,le,null);kc(z,q)}return null}function ge(z,L,q,le,ke){if(typeof le=="string"&&le!==""||typeof le=="number")return z=z.get(q)||null,k(L,z,""+le,ke);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case de:return z=z.get(le.key===null?q:le.key)||null,b(L,z,le,ke);case fe:return z=z.get(le.key===null?q:le.key)||null,G(L,z,le,ke);case Bt:var Ve=le._init;return ge(z,L,q,Ve(le._payload),ke)}if(kr(le)||xe(le))return z=z.get(q)||null,re(L,z,le,ke,null);kc(L,le)}return null}function Te(z,L,q,le){for(var ke=null,Ve=null,Le=L,Fe=L=0,cn=null;Le!==null&&Fe<q.length;Fe++){Le.index>Fe?(cn=Le,Le=null):cn=Le.sibling;var ut=te(z,Le,q[Fe],le);if(ut===null){Le===null&&(Le=cn);break}i&&Le&&ut.alternate===null&&o(z,Le),L=y(ut,L,Fe),Ve===null?ke=ut:Ve.sibling=ut,Ve=ut,Le=cn}if(Fe===q.length)return u(z,Le),Pt&&po(z,Fe),ke;if(Le===null){for(;Fe<q.length;Fe++)Le=oe(z,q[Fe],le),Le!==null&&(L=y(Le,L,Fe),Ve===null?ke=Le:Ve.sibling=Le,Ve=Le);return Pt&&po(z,Fe),ke}for(Le=d(z,Le);Fe<q.length;Fe++)cn=ge(Le,z,Fe,q[Fe],le),cn!==null&&(i&&cn.alternate!==null&&Le.delete(cn.key===null?Fe:cn.key),L=y(cn,L,Fe),Ve===null?ke=cn:Ve.sibling=cn,Ve=cn);return i&&Le.forEach(function(Ss){return o(z,Ss)}),Pt&&po(z,Fe),ke}function Re(z,L,q,le){var ke=xe(q);if(typeof ke!="function")throw Error(t(150));if(q=ke.call(q),q==null)throw Error(t(151));for(var Ve=ke=null,Le=L,Fe=L=0,cn=null,ut=q.next();Le!==null&&!ut.done;Fe++,ut=q.next()){Le.index>Fe?(cn=Le,Le=null):cn=Le.sibling;var Ss=te(z,Le,ut.value,le);if(Ss===null){Le===null&&(Le=cn);break}i&&Le&&Ss.alternate===null&&o(z,Le),L=y(Ss,L,Fe),Ve===null?ke=Ss:Ve.sibling=Ss,Ve=Ss,Le=cn}if(ut.done)return u(z,Le),Pt&&po(z,Fe),ke;if(Le===null){for(;!ut.done;Fe++,ut=q.next())ut=oe(z,ut.value,le),ut!==null&&(L=y(ut,L,Fe),Ve===null?ke=ut:Ve.sibling=ut,Ve=ut);return Pt&&po(z,Fe),ke}for(Le=d(z,Le);!ut.done;Fe++,ut=q.next())ut=ge(Le,z,Fe,ut.value,le),ut!==null&&(i&&ut.alternate!==null&&Le.delete(ut.key===null?Fe:ut.key),L=y(ut,L,Fe),Ve===null?ke=ut:Ve.sibling=ut,Ve=ut);return i&&Le.forEach(function(JS){return o(z,JS)}),Pt&&po(z,Fe),ke}function zt(z,L,q,le){if(typeof q=="object"&&q!==null&&q.type===T&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case de:e:{for(var ke=q.key,Ve=L;Ve!==null;){if(Ve.key===ke){if(ke=q.type,ke===T){if(Ve.tag===7){u(z,Ve.sibling),L=p(Ve,q.props.children),L.return=z,z=L;break e}}else if(Ve.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Bt&&gy(ke)===Ve.type){u(z,Ve.sibling),L=p(Ve,q.props),L.ref=Fl(z,Ve,q),L.return=z,z=L;break e}u(z,Ve);break}else o(z,Ve);Ve=Ve.sibling}q.type===T?(L=Io(q.props.children,z.mode,le,q.key),L.return=z,z=L):(le=Xc(q.type,q.key,q.props,null,z.mode,le),le.ref=Fl(z,L,q),le.return=z,z=le)}return E(z);case fe:e:{for(Ve=q.key;L!==null;){if(L.key===Ve)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){u(z,L.sibling),L=p(L,q.children||[]),L.return=z,z=L;break e}else{u(z,L);break}else o(z,L);L=L.sibling}L=sp(q,z.mode,le),L.return=z,z=L}return E(z);case Bt:return Ve=q._init,zt(z,L,Ve(q._payload),le)}if(kr(q))return Te(z,L,q,le);if(xe(q))return Re(z,L,q,le);kc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,L!==null&&L.tag===6?(u(z,L.sibling),L=p(L,q),L.return=z,z=L):(u(z,L),L=ip(q,z.mode,le),L.return=z,z=L),E(z)):u(z,L)}return zt}var Sa=yy(!0),_y=yy(!1),Cc=fs(null),xc=null,Aa=null,pf=null;function mf(){pf=Aa=xc=null}function gf(i){var o=Cc.current;At(Cc),i._currentValue=o}function yf(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function Ra(i,o){xc=i,pf=Aa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(qn=!0),i.firstContext=null)}function Er(i){var o=i._currentValue;if(pf!==i)if(i={context:i,memoizedValue:o,next:null},Aa===null){if(xc===null)throw Error(t(308));Aa=i,xc.dependencies={lanes:0,firstContext:i}}else Aa=Aa.next=i;return o}var mo=null;function _f(i){mo===null?mo=[i]:mo.push(i)}function vy(i,o,u,d){var p=o.interleaved;return p===null?(u.next=u,_f(o)):(u.next=p.next,p.next=u),o.interleaved=u,bi(i,d)}function bi(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var gs=!1;function vf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ni(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ys(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(at&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,bi(i,u)}return p=d.interleaved,p===null?(o.next=o,_f(d)):(o.next=p.next,p.next=o),d.interleaved=o,bi(i,u)}function Dc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,os(i,u)}}function Ey(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?p=y=E:y=y.next=E,u=u.next}while(u!==null);y===null?p=y=o:y=y.next=o}else p=y=o;u={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function bc(i,o,u,d){var p=i.updateQueue;gs=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var b=k,G=b.next;b.next=null,E===null?y=G:E.next=G,E=b;var re=i.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==E&&(k===null?re.firstBaseUpdate=G:k.next=G,re.lastBaseUpdate=b))}if(y!==null){var oe=p.baseState;E=0,re=G=b=null,k=y;do{var te=k.lane,ge=k.eventTime;if((d&te)===te){re!==null&&(re=re.next={eventTime:ge,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Te=i,Re=k;switch(te=o,ge=u,Re.tag){case 1:if(Te=Re.payload,typeof Te=="function"){oe=Te.call(ge,oe,te);break e}oe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Re.payload,te=typeof Te=="function"?Te.call(ge,oe,te):Te,te==null)break e;oe=me({},oe,te);break e;case 2:gs=!0}}k.callback!==null&&k.lane!==0&&(i.flags|=64,te=p.effects,te===null?p.effects=[k]:te.push(k))}else ge={eventTime:ge,lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(G=re=ge,b=oe):re=re.next=ge,E|=te;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;te=k,k=te.next,te.next=null,p.lastBaseUpdate=te,p.shared.pending=null}}while(!0);if(re===null&&(b=oe),p.baseState=b,p.firstBaseUpdate=G,p.lastBaseUpdate=re,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);_o|=E,i.lanes=E,i.memoizedState=oe}}function Iy(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=u,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Ul={},ai=fs(Ul),jl=fs(Ul),Bl=fs(Ul);function go(i){if(i===Ul)throw Error(t(174));return i}function wf(i,o){switch(It(Bl,o),It(jl,i),It(ai,Ul),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:xt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=xt(o,i)}At(ai),It(ai,o)}function Pa(){At(ai),At(jl),At(Bl)}function Ty(i){go(Bl.current);var o=go(ai.current),u=xt(o,i.type);o!==u&&(It(jl,i),It(ai,u))}function Ef(i){jl.current===i&&(At(ai),At(jl))}var bt=fs(0);function Nc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var If=[];function Tf(){for(var i=0;i<If.length;i++)If[i]._workInProgressVersionPrimary=null;If.length=0}var Vc=ae.ReactCurrentDispatcher,Sf=ae.ReactCurrentBatchConfig,yo=0,Nt=null,en=null,ln=null,Lc=!1,zl=!1,$l=0,_S=0;function En(){throw Error(t(321))}function Af(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Fr(i[u],o[u]))return!1;return!0}function Rf(i,o,u,d,p,y){if(yo=y,Nt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Vc.current=i===null||i.memoizedState===null?IS:TS,i=u(d,p),zl){y=0;do{if(zl=!1,$l=0,25<=y)throw Error(t(301));y+=1,ln=en=null,o.updateQueue=null,Vc.current=SS,i=u(d,p)}while(zl)}if(Vc.current=Fc,o=en!==null&&en.next!==null,yo=0,ln=en=Nt=null,Lc=!1,o)throw Error(t(300));return i}function Pf(){var i=$l!==0;return $l=0,i}function li(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Nt.memoizedState=ln=i:ln=ln.next=i,ln}function Ir(){if(en===null){var i=Nt.alternate;i=i!==null?i.memoizedState:null}else i=en.next;var o=ln===null?Nt.memoizedState:ln.next;if(o!==null)ln=o,en=i;else{if(i===null)throw Error(t(310));en=i,i={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},ln===null?Nt.memoizedState=ln=i:ln=ln.next=i}return ln}function ql(i,o){return typeof o=="function"?o(i):o}function kf(i){var o=Ir(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=en,p=d.baseQueue,y=u.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}d.baseQueue=p=y,u.pending=null}if(p!==null){y=p.next,d=d.baseState;var k=E=null,b=null,G=y;do{var re=G.lane;if((yo&re)===re)b!==null&&(b=b.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:i(d,G.action);else{var oe={lane:re,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};b===null?(k=b=oe,E=d):b=b.next=oe,Nt.lanes|=re,_o|=re}G=G.next}while(G!==null&&G!==y);b===null?E=d:b.next=k,Fr(d,o.memoizedState)||(qn=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=b,u.lastRenderedState=d}if(i=u.interleaved,i!==null){p=i;do y=p.lane,Nt.lanes|=y,_o|=y,p=p.next;while(p!==i)}else p===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Cf(i){var o=Ir(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,p=u.pending,y=o.memoizedState;if(p!==null){u.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Fr(y,o.memoizedState)||(qn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,d]}function Sy(){}function Ay(i,o){var u=Nt,d=Ir(),p=o(),y=!Fr(d.memoizedState,p);if(y&&(d.memoizedState=p,qn=!0),d=d.queue,xf(ky.bind(null,u,d,i),[i]),d.getSnapshot!==o||y||ln!==null&&ln.memoizedState.tag&1){if(u.flags|=2048,Kl(9,Py.bind(null,u,d,p,o),void 0,null),un===null)throw Error(t(349));(yo&30)!==0||Ry(u,o,p)}return p}function Ry(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Nt.updateQueue,o===null?(o={lastEffect:null,stores:null},Nt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Py(i,o,u,d){o.value=u,o.getSnapshot=d,Cy(o)&&xy(i)}function ky(i,o,u){return u(function(){Cy(o)&&xy(i)})}function Cy(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Fr(i,u)}catch{return!0}}function xy(i){var o=bi(i,1);o!==null&&$r(o,i,1,-1)}function Dy(i){var o=li();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:i},o.queue=i,i=i.dispatch=ES.bind(null,Nt,i),[o.memoizedState,i]}function Kl(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=Nt.updateQueue,o===null?(o={lastEffect:null,stores:null},Nt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function by(){return Ir().memoizedState}function Oc(i,o,u,d){var p=li();Nt.flags|=i,p.memoizedState=Kl(1|o,u,void 0,d===void 0?null:d)}function Mc(i,o,u,d){var p=Ir();d=d===void 0?null:d;var y=void 0;if(en!==null){var E=en.memoizedState;if(y=E.destroy,d!==null&&Af(d,E.deps)){p.memoizedState=Kl(o,u,y,d);return}}Nt.flags|=i,p.memoizedState=Kl(1|o,u,y,d)}function Ny(i,o){return Oc(8390656,8,i,o)}function xf(i,o){return Mc(2048,8,i,o)}function Vy(i,o){return Mc(4,2,i,o)}function Ly(i,o){return Mc(4,4,i,o)}function Oy(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function My(i,o,u){return u=u!=null?u.concat([i]):null,Mc(4,4,Oy.bind(null,o,i),u)}function Df(){}function Fy(i,o){var u=Ir();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Af(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function Uy(i,o){var u=Ir();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Af(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function jy(i,o,u){return(yo&21)===0?(i.baseState&&(i.baseState=!1,qn=!0),i.memoizedState=u):(Fr(u,o)||(u=so(),Nt.lanes|=u,_o|=u,i.baseState=!0),o)}function vS(i,o){var u=nt;nt=u!==0&&4>u?u:4,i(!0);var d=Sf.transition;Sf.transition={};try{i(!1),o()}finally{nt=u,Sf.transition=d}}function By(){return Ir().memoizedState}function wS(i,o,u){var d=Es(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},zy(i))$y(o,u);else if(u=vy(i,o,u,d),u!==null){var p=Nn();$r(u,i,d,p),qy(u,o,d)}}function ES(i,o,u){var d=Es(i),p={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(zy(i))$y(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,k=y(E,u);if(p.hasEagerState=!0,p.eagerState=k,Fr(k,E)){var b=o.interleaved;b===null?(p.next=p,_f(o)):(p.next=b.next,b.next=p),o.interleaved=p;return}}catch{}finally{}u=vy(i,o,p,d),u!==null&&(p=Nn(),$r(u,i,d,p),qy(u,o,d))}}function zy(i){var o=i.alternate;return i===Nt||o!==null&&o===Nt}function $y(i,o){zl=Lc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function qy(i,o,u){if((u&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,os(i,u)}}var Fc={readContext:Er,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},IS={readContext:Er,useCallback:function(i,o){return li().memoizedState=[i,o===void 0?null:o],i},useContext:Er,useEffect:Ny,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Oc(4194308,4,Oy.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Oc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Oc(4,2,i,o)},useMemo:function(i,o){var u=li();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=li();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=wS.bind(null,Nt,i),[d.memoizedState,i]},useRef:function(i){var o=li();return i={current:i},o.memoizedState=i},useState:Dy,useDebugValue:Df,useDeferredValue:function(i){return li().memoizedState=i},useTransition:function(){var i=Dy(!1),o=i[0];return i=vS.bind(null,i[1]),li().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=Nt,p=li();if(Pt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),un===null)throw Error(t(349));(yo&30)!==0||Ry(d,o,u)}p.memoizedState=u;var y={value:u,getSnapshot:o};return p.queue=y,Ny(ky.bind(null,d,y,i),[i]),d.flags|=2048,Kl(9,Py.bind(null,d,y,u,o),void 0,null),u},useId:function(){var i=li(),o=un.identifierPrefix;if(Pt){var u=Di,d=xi;u=(d&~(1<<32-Ze(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=$l++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=_S++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},TS={readContext:Er,useCallback:Fy,useContext:Er,useEffect:xf,useImperativeHandle:My,useInsertionEffect:Vy,useLayoutEffect:Ly,useMemo:Uy,useReducer:kf,useRef:by,useState:function(){return kf(ql)},useDebugValue:Df,useDeferredValue:function(i){var o=Ir();return jy(o,en.memoizedState,i)},useTransition:function(){var i=kf(ql)[0],o=Ir().memoizedState;return[i,o]},useMutableSource:Sy,useSyncExternalStore:Ay,useId:By,unstable_isNewReconciler:!1},SS={readContext:Er,useCallback:Fy,useContext:Er,useEffect:xf,useImperativeHandle:My,useInsertionEffect:Vy,useLayoutEffect:Ly,useMemo:Uy,useReducer:Cf,useRef:by,useState:function(){return Cf(ql)},useDebugValue:Df,useDeferredValue:function(i){var o=Ir();return en===null?o.memoizedState=i:jy(o,en.memoizedState,i)},useTransition:function(){var i=Cf(ql)[0],o=Ir().memoizedState;return[i,o]},useMutableSource:Sy,useSyncExternalStore:Ay,useId:By,unstable_isNewReconciler:!1};function jr(i,o){if(i&&i.defaultProps){o=me({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function bf(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:me({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Uc={isMounted:function(i){return(i=i._reactInternals)?_e(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=Nn(),p=Es(i),y=Ni(d,p);y.payload=o,u!=null&&(y.callback=u),o=ys(i,y,p),o!==null&&($r(o,i,p,d),Dc(o,i,p))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=Nn(),p=Es(i),y=Ni(d,p);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=ys(i,y,p),o!==null&&($r(o,i,p,d),Dc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Nn(),d=Es(i),p=Ni(u,d);p.tag=2,o!=null&&(p.callback=o),o=ys(i,p,d),o!==null&&($r(o,i,d,u),Dc(o,i,d))}};function Ky(i,o,u,d,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,E):o.prototype&&o.prototype.isPureReactComponent?!Dl(u,d)||!Dl(p,y):!0}function Gy(i,o,u){var d=!1,p=ps,y=o.contextType;return typeof y=="object"&&y!==null?y=Er(y):(p=$n(o)?ho:wn.current,d=o.contextTypes,y=(d=d!=null)?wa(i,p):ps),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Uc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function Wy(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&Uc.enqueueReplaceState(o,o.state,null)}function Nf(i,o,u,d){var p=i.stateNode;p.props=u,p.state=i.memoizedState,p.refs={},vf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=Er(y):(y=$n(o)?ho:wn.current,p.context=wa(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(bf(i,o,y,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Uc.enqueueReplaceState(p,p.state,null),bc(i,u,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ka(i,o){try{var u="",d=o;do u+=Oe(d),d=d.return;while(d);var p=u}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Vf(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Lf(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var AS=typeof WeakMap=="function"?WeakMap:Map;function Hy(i,o,u){u=Ni(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){Gc||(Gc=!0,Jf=d),Lf(i,o)},u}function Qy(i,o,u){u=Ni(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;u.payload=function(){return d(p)},u.callback=function(){Lf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Lf(i,o),typeof d!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function Jy(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new AS;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(u)||(p.add(u),i=US.bind(null,i,o,u),o.then(i,i))}function Yy(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Xy(i,o,u,d,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ni(-1,1),o.tag=2,ys(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var RS=ae.ReactCurrentOwner,qn=!1;function bn(i,o,u,d){o.child=i===null?_y(o,null,u,d):Sa(o,i.child,u,d)}function Zy(i,o,u,d,p){u=u.render;var y=o.ref;return Ra(o,p),d=Rf(i,o,u,d,y,p),u=Pf(),i!==null&&!qn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Vi(i,o,p)):(Pt&&u&&uf(o),o.flags|=1,bn(i,o,d,p),o.child)}function e_(i,o,u,d,p){if(i===null){var y=u.type;return typeof y=="function"&&!rp(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,t_(i,o,y,d,p)):(i=Xc(u.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var E=y.memoizedProps;if(u=u.compare,u=u!==null?u:Dl,u(E,d)&&i.ref===o.ref)return Vi(i,o,p)}return o.flags|=1,i=Ts(y,d),i.ref=o.ref,i.return=o,o.child=i}function t_(i,o,u,d,p){if(i!==null){var y=i.memoizedProps;if(Dl(y,d)&&i.ref===o.ref)if(qn=!1,o.pendingProps=d=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(qn=!0);else return o.lanes=i.lanes,Vi(i,o,p)}return Of(i,o,u,d,p)}function n_(i,o,u){var d=o.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(xa,ar),ar|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,It(xa,ar),ar|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:u,It(xa,ar),ar|=d}else y!==null?(d=y.baseLanes|u,o.memoizedState=null):d=u,It(xa,ar),ar|=d;return bn(i,o,p,u),o.child}function r_(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Of(i,o,u,d,p){var y=$n(u)?ho:wn.current;return y=wa(o,y),Ra(o,p),u=Rf(i,o,u,d,y,p),d=Pf(),i!==null&&!qn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Vi(i,o,p)):(Pt&&d&&uf(o),o.flags|=1,bn(i,o,u,p),o.child)}function i_(i,o,u,d,p){if($n(u)){var y=!0;Tc(o)}else y=!1;if(Ra(o,p),o.stateNode===null)Bc(i,o),Gy(o,u,d),Nf(o,u,d,p),d=!0;else if(i===null){var E=o.stateNode,k=o.memoizedProps;E.props=k;var b=E.context,G=u.contextType;typeof G=="object"&&G!==null?G=Er(G):(G=$n(u)?ho:wn.current,G=wa(o,G));var re=u.getDerivedStateFromProps,oe=typeof re=="function"||typeof E.getSnapshotBeforeUpdate=="function";oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==d||b!==G)&&Wy(o,E,d,G),gs=!1;var te=o.memoizedState;E.state=te,bc(o,d,E,p),b=o.memoizedState,k!==d||te!==b||zn.current||gs?(typeof re=="function"&&(bf(o,u,re,d),b=o.memoizedState),(k=gs||Ky(o,u,k,d,te,b,G))?(oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=b),E.props=d,E.state=b,E.context=G,d=k):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,wy(i,o),k=o.memoizedProps,G=o.type===o.elementType?k:jr(o.type,k),E.props=G,oe=o.pendingProps,te=E.context,b=u.contextType,typeof b=="object"&&b!==null?b=Er(b):(b=$n(u)?ho:wn.current,b=wa(o,b));var ge=u.getDerivedStateFromProps;(re=typeof ge=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==oe||te!==b)&&Wy(o,E,d,b),gs=!1,te=o.memoizedState,E.state=te,bc(o,d,E,p);var Te=o.memoizedState;k!==oe||te!==Te||zn.current||gs?(typeof ge=="function"&&(bf(o,u,ge,d),Te=o.memoizedState),(G=gs||Ky(o,u,G,d,te,Te,b)||!1)?(re||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,Te,b),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,Te,b)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Te),E.props=d,E.state=Te,E.context=b,d=G):(typeof E.componentDidUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),d=!1)}return Mf(i,o,u,d,y,p)}function Mf(i,o,u,d,p,y){r_(i,o);var E=(o.flags&128)!==0;if(!d&&!E)return p&&uy(o,u,!1),Vi(i,o,y);d=o.stateNode,RS.current=o;var k=E&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&E?(o.child=Sa(o,i.child,null,y),o.child=Sa(o,null,k,y)):bn(i,o,k,y),o.memoizedState=d.state,p&&uy(o,u,!0),o.child}function s_(i){var o=i.stateNode;o.pendingContext?ay(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ay(i,o.context,!1),wf(i,o.containerInfo)}function o_(i,o,u,d,p){return Ta(),ff(p),o.flags|=256,bn(i,o,u,d),o.child}var Ff={dehydrated:null,treeContext:null,retryLane:0};function Uf(i){return{baseLanes:i,cachePool:null,transitions:null}}function a_(i,o,u){var d=o.pendingProps,p=bt.current,y=!1,E=(o.flags&128)!==0,k;if((k=E)||(k=i!==null&&i.memoizedState===null?!1:(p&2)!==0),k?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),It(bt,p&1),i===null)return df(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,i=d.fallback,y?(d=o.mode,y=o.child,E={mode:"hidden",children:E},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Zc(E,d,0,null),i=Io(i,d,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Uf(u),o.memoizedState=Ff,i):jf(o,E));if(p=i.memoizedState,p!==null&&(k=p.dehydrated,k!==null))return PS(i,o,E,d,k,p,u);if(y){y=d.fallback,E=o.mode,p=i.child,k=p.sibling;var b={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=b,o.deletions=null):(d=Ts(p,b),d.subtreeFlags=p.subtreeFlags&14680064),k!==null?y=Ts(k,y):(y=Io(y,E,u,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,E=i.child.memoizedState,E=E===null?Uf(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~u,o.memoizedState=Ff,d}return y=i.child,i=y.sibling,d=Ts(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function jf(i,o){return o=Zc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function jc(i,o,u,d){return d!==null&&ff(d),Sa(o,i.child,null,u),i=jf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function PS(i,o,u,d,p,y,E){if(u)return o.flags&256?(o.flags&=-257,d=Vf(Error(t(422))),jc(i,o,E,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=Zc({mode:"visible",children:d.children},p,0,null),y=Io(y,p,E,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&Sa(o,i.child,null,E),o.child.memoizedState=Uf(E),o.memoizedState=Ff,y);if((o.mode&1)===0)return jc(i,o,E,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var k=d.dgst;return d=k,y=Error(t(419)),d=Vf(y,d,void 0),jc(i,o,E,d)}if(k=(E&i.childLanes)!==0,qn||k){if(d=un,d!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|E))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,bi(i,p),$r(d,i,p,-1))}return np(),d=Vf(Error(t(421))),jc(i,o,E,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=jS.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,or=ds(p.nextSibling),sr=o,Pt=!0,Ur=null,i!==null&&(vr[wr++]=xi,vr[wr++]=Di,vr[wr++]=fo,xi=i.id,Di=i.overflow,fo=o),o=jf(o,d.children),o.flags|=4096,o)}function l_(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),yf(i.return,o,u)}function Bf(i,o,u,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=u,y.tailMode=p)}function u_(i,o,u){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(bn(i,o,d.children,u),d=bt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&l_(i,u,o);else if(i.tag===19)l_(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(It(bt,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(u=o.child,p=null;u!==null;)i=u.alternate,i!==null&&Nc(i)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),Bf(o,!1,p,u,y);break;case"backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Nc(i)===null){o.child=p;break}i=p.sibling,p.sibling=u,u=p,p=i}Bf(o,!0,u,null,y);break;case"together":Bf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Bc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Vi(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),_o|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Ts(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ts(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function kS(i,o,u){switch(o.tag){case 3:s_(o),Ta();break;case 5:Ty(o);break;case 1:$n(o.type)&&Tc(o);break;case 4:wf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;It(Cc,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(It(bt,bt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?a_(i,o,u):(It(bt,bt.current&1),i=Vi(i,o,u),i!==null?i.sibling:null);It(bt,bt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(i.flags&128)!==0){if(d)return u_(i,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),It(bt,bt.current),d)break;return null;case 22:case 23:return o.lanes=0,n_(i,o,u)}return Vi(i,o,u)}var c_,zf,h_,d_;c_=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},zf=function(){},h_=function(i,o,u,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,go(ai.current);var y=null;switch(u){case"input":p=Hr(i,p),d=Hr(i,d),y=[];break;case"select":p=me({},p,{value:void 0}),d=me({},d,{value:void 0}),y=[];break;case"textarea":p=Zs(i,p),d=Zs(i,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=wc)}es(u,d);var E;u=null;for(G in p)if(!d.hasOwnProperty(G)&&p.hasOwnProperty(G)&&p[G]!=null)if(G==="style"){var k=p[G];for(E in k)k.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in d){var b=d[G];if(k=p?.[G],d.hasOwnProperty(G)&&b!==k&&(b!=null||k!=null))if(G==="style")if(k){for(E in k)!k.hasOwnProperty(E)||b&&b.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in b)b.hasOwnProperty(E)&&k[E]!==b[E]&&(u||(u={}),u[E]=b[E])}else u||(y||(y=[]),y.push(G,u)),u=b;else G==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,k=k?k.__html:void 0,b!=null&&k!==b&&(y=y||[]).push(G,b)):G==="children"?typeof b!="string"&&typeof b!="number"||(y=y||[]).push(G,""+b):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(b!=null&&G==="onScroll"&&St("scroll",i),y||k===b||(y=[])):(y=y||[]).push(G,b))}u&&(y=y||[]).push("style",u);var G=y;(o.updateQueue=G)&&(o.flags|=4)}},d_=function(i,o,u,d){u!==d&&(o.flags|=4)};function Gl(i,o){if(!Pt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function In(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var p=i.child;p!==null;)u|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)u|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function CS(i,o,u){var d=o.pendingProps;switch(cf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(o),null;case 1:return $n(o.type)&&Ic(),In(o),null;case 3:return d=o.stateNode,Pa(),At(zn),At(wn),Tf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Pc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ur!==null&&(Zf(Ur),Ur=null))),zf(i,o),In(o),null;case 5:Ef(o);var p=go(Bl.current);if(u=o.type,i!==null&&o.stateNode!=null)h_(i,o,u,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return In(o),null}if(i=go(ai.current),Pc(o)){d=o.stateNode,u=o.type;var y=o.memoizedProps;switch(d[oi]=o,d[Ol]=y,i=(o.mode&1)!==0,u){case"dialog":St("cancel",d),St("close",d);break;case"iframe":case"object":case"embed":St("load",d);break;case"video":case"audio":for(p=0;p<Nl.length;p++)St(Nl[p],d);break;case"source":St("error",d);break;case"img":case"image":case"link":St("error",d),St("load",d);break;case"details":St("toggle",d);break;case"input":Ji(d,y),St("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},St("invalid",d);break;case"textarea":Yi(d,y),St("invalid",d)}es(u,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var k=y[E];E==="children"?typeof k=="string"?d.textContent!==k&&(y.suppressHydrationWarning!==!0&&vc(d.textContent,k,i),p=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&vc(d.textContent,k,i),p=["children",""+k]):s.hasOwnProperty(E)&&k!=null&&E==="onScroll"&&St("scroll",d)}switch(u){case"input":Pr(d),Xo(d,y,!0);break;case"textarea":Pr(d),xr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=wc)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Mt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=E.createElement(u,{is:d.is}):(i=E.createElement(u),u==="select"&&(E=i,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):i=E.createElementNS(i,u),i[oi]=o,i[Ol]=d,c_(i,o,!1,!1),o.stateNode=i;e:{switch(E=eo(u,d),u){case"dialog":St("cancel",i),St("close",i),p=d;break;case"iframe":case"object":case"embed":St("load",i),p=d;break;case"video":case"audio":for(p=0;p<Nl.length;p++)St(Nl[p],i);p=d;break;case"source":St("error",i),p=d;break;case"img":case"image":case"link":St("error",i),St("load",i),p=d;break;case"details":St("toggle",i),p=d;break;case"input":Ji(i,d),p=Hr(i,d),St("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=me({},d,{value:void 0}),St("invalid",i);break;case"textarea":Yi(i,d),p=Zs(i,d),St("invalid",i);break;default:p=d}es(u,p),k=p;for(y in k)if(k.hasOwnProperty(y)){var b=k[y];y==="style"?Xi(i,b):y==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&xn(i,b)):y==="children"?typeof b=="string"?(u!=="textarea"||b!=="")&&Dr(i,b):typeof b=="number"&&Dr(i,""+b):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?b!=null&&y==="onScroll"&&St("scroll",i):b!=null&&ee(i,y,b,E))}switch(u){case"input":Pr(i),Xo(i,d,!1);break;case"textarea":Pr(i),xr(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Xe(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?Cr(i,!!d.multiple,y,!1):d.defaultValue!=null&&Cr(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=wc)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return In(o),null;case 6:if(i&&o.stateNode!=null)d_(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=go(Bl.current),go(ai.current),Pc(o)){if(d=o.stateNode,u=o.memoizedProps,d[oi]=o,(y=d.nodeValue!==u)&&(i=sr,i!==null))switch(i.tag){case 3:vc(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&vc(d.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[oi]=o,o.stateNode=d}return In(o),null;case 13:if(At(bt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Pt&&or!==null&&(o.mode&1)!==0&&(o.flags&128)===0)my(),Ta(),o.flags|=98560,y=!1;else if(y=Pc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[oi]=o}else Ta(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;In(o),y=!1}else Ur!==null&&(Zf(Ur),Ur=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(bt.current&1)!==0?tn===0&&(tn=3):np())),o.updateQueue!==null&&(o.flags|=4),In(o),null);case 4:return Pa(),zf(i,o),i===null&&Vl(o.stateNode.containerInfo),In(o),null;case 10:return gf(o.type._context),In(o),null;case 17:return $n(o.type)&&Ic(),In(o),null;case 19:if(At(bt),y=o.memoizedState,y===null)return In(o),null;if(d=(o.flags&128)!==0,E=y.rendering,E===null)if(d)Gl(y,!1);else{if(tn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(E=Nc(i),E!==null){for(o.flags|=128,Gl(y,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)y=u,i=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return It(bt,bt.current&1|2),o.child}i=i.sibling}y.tail!==null&&Qe()>Da&&(o.flags|=128,d=!0,Gl(y,!1),o.lanes=4194304)}else{if(!d)if(i=Nc(E),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Gl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Pt)return In(o),null}else 2*Qe()-y.renderingStartTime>Da&&u!==1073741824&&(o.flags|=128,d=!0,Gl(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(u=y.last,u!==null?u.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Qe(),o.sibling=null,u=bt.current,It(bt,d?u&1|2:u&1),o):(In(o),null);case 22:case 23:return tp(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(ar&1073741824)!==0&&(In(o),o.subtreeFlags&6&&(o.flags|=8192)):In(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function xS(i,o){switch(cf(o),o.tag){case 1:return $n(o.type)&&Ic(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Pa(),At(zn),At(wn),Tf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Ef(o),null;case 13:if(At(bt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ta()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return At(bt),null;case 4:return Pa(),null;case 10:return gf(o.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var zc=!1,Tn=!1,DS=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Ca(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){Ut(i,o,d)}else u.current=null}function $f(i,o,u){try{u()}catch(d){Ut(i,o,d)}}var f_=!1;function bS(i,o){if(ef=us,i=Kg(),Gd(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var E=0,k=-1,b=-1,G=0,re=0,oe=i,te=null;t:for(;;){for(var ge;oe!==u||p!==0&&oe.nodeType!==3||(k=E+p),oe!==y||d!==0&&oe.nodeType!==3||(b=E+d),oe.nodeType===3&&(E+=oe.nodeValue.length),(ge=oe.firstChild)!==null;)te=oe,oe=ge;for(;;){if(oe===i)break t;if(te===u&&++G===p&&(k=E),te===y&&++re===d&&(b=E),(ge=oe.nextSibling)!==null)break;oe=te,te=oe.parentNode}oe=ge}u=k===-1||b===-1?null:{start:k,end:b}}else u=null}u=u||{start:0,end:0}}else u=null;for(tf={focusedElem:i,selectionRange:u},us=!1,Ie=o;Ie!==null;)if(o=Ie,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ie=i;else for(;Ie!==null;){o=Ie;try{var Te=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Re=Te.memoizedProps,zt=Te.memoizedState,z=o.stateNode,L=z.getSnapshotBeforeUpdate(o.elementType===o.type?Re:jr(o.type,Re),zt);z.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var q=o.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){Ut(o,o.return,le)}if(i=o.sibling,i!==null){i.return=o.return,Ie=i;break}Ie=o.return}return Te=f_,f_=!1,Te}function Wl(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&$f(o,u,y)}p=p.next}while(p!==d)}}function $c(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function qf(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function p_(i){var o=i.alternate;o!==null&&(i.alternate=null,p_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[oi],delete o[Ol],delete o[of],delete o[pS],delete o[mS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function m_(i){return i.tag===5||i.tag===3||i.tag===4}function g_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||m_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Kf(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=wc));else if(d!==4&&(i=i.child,i!==null))for(Kf(i,o,u),i=i.sibling;i!==null;)Kf(i,o,u),i=i.sibling}function Gf(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Gf(i,o,u),i=i.sibling;i!==null;)Gf(i,o,u),i=i.sibling}var mn=null,Br=!1;function _s(i,o,u){for(u=u.child;u!==null;)y_(i,o,u),u=u.sibling}function y_(i,o,u){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ct,u)}catch{}switch(u.tag){case 5:Tn||Ca(u,o);case 6:var d=mn,p=Br;mn=null,_s(i,o,u),mn=d,Br=p,mn!==null&&(Br?(i=mn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):mn.removeChild(u.stateNode));break;case 18:mn!==null&&(Br?(i=mn,u=u.stateNode,i.nodeType===8?sf(i.parentNode,u):i.nodeType===1&&sf(i,u),Or(i)):sf(mn,u.stateNode));break;case 4:d=mn,p=Br,mn=u.stateNode.containerInfo,Br=!0,_s(i,o,u),mn=d,Br=p;break;case 0:case 11:case 14:case 15:if(!Tn&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&$f(u,o,E),p=p.next}while(p!==d)}_s(i,o,u);break;case 1:if(!Tn&&(Ca(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(k){Ut(u,o,k)}_s(i,o,u);break;case 21:_s(i,o,u);break;case 22:u.mode&1?(Tn=(d=Tn)||u.memoizedState!==null,_s(i,o,u),Tn=d):_s(i,o,u);break;default:_s(i,o,u)}}function __(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new DS),o.forEach(function(d){var p=BS.bind(null,i,d);u.has(d)||(u.add(d),d.then(p,p))})}}function zr(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var p=u[d];try{var y=i,E=o,k=E;e:for(;k!==null;){switch(k.tag){case 5:mn=k.stateNode,Br=!1;break e;case 3:mn=k.stateNode.containerInfo,Br=!0;break e;case 4:mn=k.stateNode.containerInfo,Br=!0;break e}k=k.return}if(mn===null)throw Error(t(160));y_(y,E,p),mn=null,Br=!1;var b=p.alternate;b!==null&&(b.return=null),p.return=null}catch(G){Ut(p,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)v_(o,i),o=o.sibling}function v_(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(zr(o,i),ui(i),d&4){try{Wl(3,i,i.return),$c(3,i)}catch(Re){Ut(i,i.return,Re)}try{Wl(5,i,i.return)}catch(Re){Ut(i,i.return,Re)}}break;case 1:zr(o,i),ui(i),d&512&&u!==null&&Ca(u,u.return);break;case 5:if(zr(o,i),ui(i),d&512&&u!==null&&Ca(u,u.return),i.flags&32){var p=i.stateNode;try{Dr(p,"")}catch(Re){Ut(i,i.return,Re)}}if(d&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=u!==null?u.memoizedProps:y,k=i.type,b=i.updateQueue;if(i.updateQueue=null,b!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&Xn(p,y),eo(k,E);var G=eo(k,y);for(E=0;E<b.length;E+=2){var re=b[E],oe=b[E+1];re==="style"?Xi(p,oe):re==="dangerouslySetInnerHTML"?xn(p,oe):re==="children"?Dr(p,oe):ee(p,re,oe,G)}switch(k){case"input":Xs(p,y);break;case"textarea":On(p,y);break;case"select":var te=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Cr(p,!!y.multiple,ge,!1):te!==!!y.multiple&&(y.defaultValue!=null?Cr(p,!!y.multiple,y.defaultValue,!0):Cr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Ol]=y}catch(Re){Ut(i,i.return,Re)}}break;case 6:if(zr(o,i),ui(i),d&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Re){Ut(i,i.return,Re)}}break;case 3:if(zr(o,i),ui(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Or(o.containerInfo)}catch(Re){Ut(i,i.return,Re)}break;case 4:zr(o,i),ui(i);break;case 13:zr(o,i),ui(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Qf=Qe())),d&4&&__(i);break;case 22:if(re=u!==null&&u.memoizedState!==null,i.mode&1?(Tn=(G=Tn)||re,zr(o,i),Tn=G):zr(o,i),ui(i),d&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!re&&(i.mode&1)!==0)for(Ie=i,re=i.child;re!==null;){for(oe=Ie=re;Ie!==null;){switch(te=Ie,ge=te.child,te.tag){case 0:case 11:case 14:case 15:Wl(4,te,te.return);break;case 1:Ca(te,te.return);var Te=te.stateNode;if(typeof Te.componentWillUnmount=="function"){d=te,u=te.return;try{o=d,Te.props=o.memoizedProps,Te.state=o.memoizedState,Te.componentWillUnmount()}catch(Re){Ut(d,u,Re)}}break;case 5:Ca(te,te.return);break;case 22:if(te.memoizedState!==null){I_(oe);continue}}ge!==null?(ge.return=te,Ie=ge):I_(oe)}re=re.sibling}e:for(re=null,oe=i;;){if(oe.tag===5){if(re===null){re=oe;try{p=oe.stateNode,G?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=oe.stateNode,b=oe.memoizedProps.style,E=b!=null&&b.hasOwnProperty("display")?b.display:null,k.style.display=Mn("display",E))}catch(Re){Ut(i,i.return,Re)}}}else if(oe.tag===6){if(re===null)try{oe.stateNode.nodeValue=G?"":oe.memoizedProps}catch(Re){Ut(i,i.return,Re)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===i)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===i)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===i)break e;re===oe&&(re=null),oe=oe.return}re===oe&&(re=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:zr(o,i),ui(i),d&4&&__(i);break;case 21:break;default:zr(o,i),ui(i)}}function ui(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(m_(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Dr(p,""),d.flags&=-33);var y=g_(i);Gf(i,y,p);break;case 3:case 4:var E=d.stateNode.containerInfo,k=g_(i);Kf(i,k,E);break;default:throw Error(t(161))}}catch(b){Ut(i,i.return,b)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function NS(i,o,u){Ie=i,w_(i)}function w_(i,o,u){for(var d=(i.mode&1)!==0;Ie!==null;){var p=Ie,y=p.child;if(p.tag===22&&d){var E=p.memoizedState!==null||zc;if(!E){var k=p.alternate,b=k!==null&&k.memoizedState!==null||Tn;k=zc;var G=Tn;if(zc=E,(Tn=b)&&!G)for(Ie=p;Ie!==null;)E=Ie,b=E.child,E.tag===22&&E.memoizedState!==null?T_(p):b!==null?(b.return=E,Ie=b):T_(p);for(;y!==null;)Ie=y,w_(y),y=y.sibling;Ie=p,zc=k,Tn=G}E_(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Ie=y):E_(i)}}function E_(i){for(;Ie!==null;){var o=Ie;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Tn||$c(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Tn)if(u===null)d.componentDidMount();else{var p=o.elementType===o.type?u.memoizedProps:jr(o.type,u.memoizedProps);d.componentDidUpdate(p,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Iy(o,y,d);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Iy(o,E,u)}break;case 5:var k=o.stateNode;if(u===null&&o.flags&4){u=k;var b=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&u.focus();break;case"img":b.src&&(u.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var re=G.memoizedState;if(re!==null){var oe=re.dehydrated;oe!==null&&Or(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tn||o.flags&512&&qf(o)}catch(te){Ut(o,o.return,te)}}if(o===i){Ie=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function I_(i){for(;Ie!==null;){var o=Ie;if(o===i){Ie=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function T_(i){for(;Ie!==null;){var o=Ie;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{$c(4,o)}catch(b){Ut(o,u,b)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(b){Ut(o,p,b)}}var y=o.return;try{qf(o)}catch(b){Ut(o,y,b)}break;case 5:var E=o.return;try{qf(o)}catch(b){Ut(o,E,b)}}}catch(b){Ut(o,o.return,b)}if(o===i){Ie=null;break}var k=o.sibling;if(k!==null){k.return=o.return,Ie=k;break}Ie=o.return}}var VS=Math.ceil,qc=ae.ReactCurrentDispatcher,Wf=ae.ReactCurrentOwner,Tr=ae.ReactCurrentBatchConfig,at=0,un=null,Qt=null,gn=0,ar=0,xa=fs(0),tn=0,Hl=null,_o=0,Kc=0,Hf=0,Ql=null,Kn=null,Qf=0,Da=1/0,Li=null,Gc=!1,Jf=null,vs=null,Wc=!1,ws=null,Hc=0,Jl=0,Yf=null,Qc=-1,Jc=0;function Nn(){return(at&6)!==0?Qe():Qc!==-1?Qc:Qc=Qe()}function Es(i){return(i.mode&1)===0?1:(at&2)!==0&&gn!==0?gn&-gn:yS.transition!==null?(Jc===0&&(Jc=so()),Jc):(i=nt,i!==0||(i=window.event,i=i===void 0?16:Sl(i.type)),i)}function $r(i,o,u,d){if(50<Jl)throw Jl=0,Yf=null,Error(t(185));ss(i,u,d),((at&2)===0||i!==un)&&(i===un&&((at&2)===0&&(Kc|=u),tn===4&&Is(i,gn)),Gn(i,d),u===1&&at===0&&(o.mode&1)===0&&(Da=Qe()+500,Sc&&ms()))}function Gn(i,o){var u=i.callbackNode;Ti(i,o);var d=io(i,i===un?gn:0);if(d===0)u!==null&&mr(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&mr(u),o===1)i.tag===0?gS(A_.bind(null,i)):cy(A_.bind(null,i)),dS(function(){(at&6)===0&&ms()}),u=null;else{switch(as(d)){case 1:u=tr;break;case 4:u=vn;break;case 16:u=dn;break;case 536870912:u=Je;break;default:u=dn}u=N_(u,S_.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function S_(i,o){if(Qc=-1,Jc=0,(at&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ba()&&i.callbackNode!==u)return null;var d=io(i,i===un?gn:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=Yc(i,d);else{o=d;var p=at;at|=2;var y=P_();(un!==i||gn!==o)&&(Li=null,Da=Qe()+500,wo(i,o));do try{MS();break}catch(k){R_(i,k)}while(!0);mf(),qc.current=y,at=p,Qt!==null?o=0:(un=null,gn=0,o=tn)}if(o!==0){if(o===2&&(p=nr(i),p!==0&&(d=p,o=Xf(i,p))),o===1)throw u=Hl,wo(i,0),Is(i,d),Gn(i,Qe()),u;if(o===6)Is(i,d);else{if(p=i.current.alternate,(d&30)===0&&!LS(p)&&(o=Yc(i,d),o===2&&(y=nr(i),y!==0&&(d=y,o=Xf(i,y))),o===1))throw u=Hl,wo(i,0),Is(i,d),Gn(i,Qe()),u;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Eo(i,Kn,Li);break;case 3:if(Is(i,d),(d&130023424)===d&&(o=Qf+500-Qe(),10<o)){if(io(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){Nn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=rf(Eo.bind(null,i,Kn,Li),o);break}Eo(i,Kn,Li);break;case 4:if(Is(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var E=31-Ze(d);y=1<<E,E=o[E],E>p&&(p=E),d&=~y}if(d=p,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*VS(d/1960))-d,10<d){i.timeoutHandle=rf(Eo.bind(null,i,Kn,Li),d);break}Eo(i,Kn,Li);break;case 5:Eo(i,Kn,Li);break;default:throw Error(t(329))}}}return Gn(i,Qe()),i.callbackNode===u?S_.bind(null,i):null}function Xf(i,o){var u=Ql;return i.current.memoizedState.isDehydrated&&(wo(i,o).flags|=256),i=Yc(i,o),i!==2&&(o=Kn,Kn=u,o!==null&&Zf(o)),i}function Zf(i){Kn===null?Kn=i:Kn.push.apply(Kn,i)}function LS(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var p=u[d],y=p.getSnapshot;p=p.value;try{if(!Fr(y(),p))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Is(i,o){for(o&=~Hf,o&=~Kc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Ze(o),d=1<<u;i[u]=-1,o&=~d}}function A_(i){if((at&6)!==0)throw Error(t(327));ba();var o=io(i,0);if((o&1)===0)return Gn(i,Qe()),null;var u=Yc(i,o);if(i.tag!==0&&u===2){var d=nr(i);d!==0&&(o=d,u=Xf(i,d))}if(u===1)throw u=Hl,wo(i,0),Is(i,o),Gn(i,Qe()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Eo(i,Kn,Li),Gn(i,Qe()),null}function ep(i,o){var u=at;at|=1;try{return i(o)}finally{at=u,at===0&&(Da=Qe()+500,Sc&&ms())}}function vo(i){ws!==null&&ws.tag===0&&(at&6)===0&&ba();var o=at;at|=1;var u=Tr.transition,d=nt;try{if(Tr.transition=null,nt=1,i)return i()}finally{nt=d,Tr.transition=u,at=o,(at&6)===0&&ms()}}function tp(){ar=xa.current,At(xa)}function wo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,hS(u)),Qt!==null)for(u=Qt.return;u!==null;){var d=u;switch(cf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Ic();break;case 3:Pa(),At(zn),At(wn),Tf();break;case 5:Ef(d);break;case 4:Pa();break;case 13:At(bt);break;case 19:At(bt);break;case 10:gf(d.type._context);break;case 22:case 23:tp()}u=u.return}if(un=i,Qt=i=Ts(i.current,null),gn=ar=o,tn=0,Hl=null,Hf=Kc=_o=0,Kn=Ql=null,mo!==null){for(o=0;o<mo.length;o++)if(u=mo[o],d=u.interleaved,d!==null){u.interleaved=null;var p=d.next,y=u.pending;if(y!==null){var E=y.next;y.next=p,d.next=E}u.pending=d}mo=null}return i}function R_(i,o){do{var u=Qt;try{if(mf(),Vc.current=Fc,Lc){for(var d=Nt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Lc=!1}if(yo=0,ln=en=Nt=null,zl=!1,$l=0,Wf.current=null,u===null||u.return===null){tn=1,Hl=o,Qt=null;break}e:{var y=i,E=u.return,k=u,b=o;if(o=gn,k.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=b,re=k,oe=re.tag;if((re.mode&1)===0&&(oe===0||oe===11||oe===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var ge=Yy(E);if(ge!==null){ge.flags&=-257,Xy(ge,E,k,y,o),ge.mode&1&&Jy(y,G,o),o=ge,b=G;var Te=o.updateQueue;if(Te===null){var Re=new Set;Re.add(b),o.updateQueue=Re}else Te.add(b);break e}else{if((o&1)===0){Jy(y,G,o),np();break e}b=Error(t(426))}}else if(Pt&&k.mode&1){var zt=Yy(E);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),Xy(zt,E,k,y,o),ff(ka(b,k));break e}}y=b=ka(b,k),tn!==4&&(tn=2),Ql===null?Ql=[y]:Ql.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=Hy(y,b,o);Ey(y,z);break e;case 1:k=b;var L=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(vs===null||!vs.has(q)))){y.flags|=65536,o&=-o,y.lanes|=o;var le=Qy(y,k,o);Ey(y,le);break e}}y=y.return}while(y!==null)}C_(u)}catch(ke){o=ke,Qt===u&&u!==null&&(Qt=u=u.return);continue}break}while(!0)}function P_(){var i=qc.current;return qc.current=Fc,i===null?Fc:i}function np(){(tn===0||tn===3||tn===2)&&(tn=4),un===null||(_o&268435455)===0&&(Kc&268435455)===0||Is(un,gn)}function Yc(i,o){var u=at;at|=2;var d=P_();(un!==i||gn!==o)&&(Li=null,wo(i,o));do try{OS();break}catch(p){R_(i,p)}while(!0);if(mf(),at=u,qc.current=d,Qt!==null)throw Error(t(261));return un=null,gn=0,tn}function OS(){for(;Qt!==null;)k_(Qt)}function MS(){for(;Qt!==null&&!Xr();)k_(Qt)}function k_(i){var o=b_(i.alternate,i,ar);i.memoizedProps=i.pendingProps,o===null?C_(i):Qt=o,Wf.current=null}function C_(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=CS(u,o,ar),u!==null){Qt=u;return}}else{if(u=xS(u,o),u!==null){u.flags&=32767,Qt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{tn=6,Qt=null;return}}if(o=o.sibling,o!==null){Qt=o;return}Qt=o=i}while(o!==null);tn===0&&(tn=5)}function Eo(i,o,u){var d=nt,p=Tr.transition;try{Tr.transition=null,nt=1,FS(i,o,u,d)}finally{Tr.transition=p,nt=d}return null}function FS(i,o,u,d){do ba();while(ws!==null);if((at&6)!==0)throw Error(t(327));u=i.finishedWork;var p=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(vt(i,y),i===un&&(Qt=un=null,gn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Wc||(Wc=!0,N_(dn,function(){return ba(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=Tr.transition,Tr.transition=null;var E=nt;nt=1;var k=at;at|=4,Wf.current=null,bS(i,u),v_(u,i),iS(tf),us=!!ef,tf=ef=null,i.current=u,NS(u),er(),at=k,nt=E,Tr.transition=y}else i.current=u;if(Wc&&(Wc=!1,ws=i,Hc=p),y=i.pendingLanes,y===0&&(vs=null),ei(u.stateNode),Gn(i,Qe()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)p=o[u],d(p.value,{componentStack:p.stack,digest:p.digest});if(Gc)throw Gc=!1,i=Jf,Jf=null,i;return(Hc&1)!==0&&i.tag!==0&&ba(),y=i.pendingLanes,(y&1)!==0?i===Yf?Jl++:(Jl=0,Yf=i):Jl=0,ms(),null}function ba(){if(ws!==null){var i=as(Hc),o=Tr.transition,u=nt;try{if(Tr.transition=null,nt=16>i?16:i,ws===null)var d=!1;else{if(i=ws,ws=null,Hc=0,(at&6)!==0)throw Error(t(331));var p=at;for(at|=4,Ie=i.current;Ie!==null;){var y=Ie,E=y.child;if((Ie.flags&16)!==0){var k=y.deletions;if(k!==null){for(var b=0;b<k.length;b++){var G=k[b];for(Ie=G;Ie!==null;){var re=Ie;switch(re.tag){case 0:case 11:case 15:Wl(8,re,y)}var oe=re.child;if(oe!==null)oe.return=re,Ie=oe;else for(;Ie!==null;){re=Ie;var te=re.sibling,ge=re.return;if(p_(re),re===G){Ie=null;break}if(te!==null){te.return=ge,Ie=te;break}Ie=ge}}}var Te=y.alternate;if(Te!==null){var Re=Te.child;if(Re!==null){Te.child=null;do{var zt=Re.sibling;Re.sibling=null,Re=zt}while(Re!==null)}}Ie=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,Ie=E;else e:for(;Ie!==null;){if(y=Ie,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Wl(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,Ie=z;break e}Ie=y.return}}var L=i.current;for(Ie=L;Ie!==null;){E=Ie;var q=E.child;if((E.subtreeFlags&2064)!==0&&q!==null)q.return=E,Ie=q;else e:for(E=L;Ie!==null;){if(k=Ie,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:$c(9,k)}}catch(ke){Ut(k,k.return,ke)}if(k===E){Ie=null;break e}var le=k.sibling;if(le!==null){le.return=k.return,Ie=le;break e}Ie=k.return}}if(at=p,ms(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ct,i)}catch{}d=!0}return d}finally{nt=u,Tr.transition=o}}return!1}function x_(i,o,u){o=ka(u,o),o=Hy(i,o,1),i=ys(i,o,1),o=Nn(),i!==null&&(ss(i,1,o),Gn(i,o))}function Ut(i,o,u){if(i.tag===3)x_(i,i,u);else for(;o!==null;){if(o.tag===3){x_(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(vs===null||!vs.has(d))){i=ka(u,i),i=Qy(o,i,1),o=ys(o,i,1),i=Nn(),o!==null&&(ss(o,1,i),Gn(o,i));break}}o=o.return}}function US(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=Nn(),i.pingedLanes|=i.suspendedLanes&u,un===i&&(gn&u)===u&&(tn===4||tn===3&&(gn&130023424)===gn&&500>Qe()-Qf?wo(i,0):Hf|=u),Gn(i,o)}function D_(i,o){o===0&&((i.mode&1)===0?o=1:(o=ta,ta<<=1,(ta&130023424)===0&&(ta=4194304)));var u=Nn();i=bi(i,o),i!==null&&(ss(i,o,u),Gn(i,u))}function jS(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),D_(i,u)}function BS(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(u=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),D_(i,u)}var b_;b_=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||zn.current)qn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return qn=!1,kS(i,o,u);qn=(i.flags&131072)!==0}else qn=!1,Pt&&(o.flags&1048576)!==0&&hy(o,Rc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Bc(i,o),i=o.pendingProps;var p=wa(o,wn.current);Ra(o,u),p=Rf(null,o,d,i,p,u);var y=Pf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,$n(d)?(y=!0,Tc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,vf(o),p.updater=Uc,o.stateNode=p,p._reactInternals=o,Nf(o,d,i,u),o=Mf(null,o,d,!0,y,u)):(o.tag=0,Pt&&y&&uf(o),bn(null,o,p,u),o=o.child),o;case 16:d=o.elementType;e:{switch(Bc(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=$S(d),i=jr(d,i),p){case 0:o=Of(null,o,d,i,u);break e;case 1:o=i_(null,o,d,i,u);break e;case 11:o=Zy(null,o,d,i,u);break e;case 14:o=e_(null,o,d,jr(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:jr(d,p),Of(i,o,d,p,u);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:jr(d,p),i_(i,o,d,p,u);case 3:e:{if(s_(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,p=y.element,wy(i,o),bc(o,d,null,u);var E=o.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=ka(Error(t(423)),o),o=o_(i,o,d,u,p);break e}else if(d!==p){p=ka(Error(t(424)),o),o=o_(i,o,d,u,p);break e}else for(or=ds(o.stateNode.containerInfo.firstChild),sr=o,Pt=!0,Ur=null,u=_y(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ta(),d===p){o=Vi(i,o,u);break e}bn(i,o,d,u)}o=o.child}return o;case 5:return Ty(o),i===null&&df(o),d=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,nf(d,p)?E=null:y!==null&&nf(d,y)&&(o.flags|=32),r_(i,o),bn(i,o,E,u),o.child;case 6:return i===null&&df(o),null;case 13:return a_(i,o,u);case 4:return wf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=Sa(o,null,d,u):bn(i,o,d,u),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:jr(d,p),Zy(i,o,d,p,u);case 7:return bn(i,o,o.pendingProps,u),o.child;case 8:return bn(i,o,o.pendingProps.children,u),o.child;case 12:return bn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,It(Cc,d._currentValue),d._currentValue=E,y!==null)if(Fr(y.value,E)){if(y.children===p.children&&!zn.current){o=Vi(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var k=y.dependencies;if(k!==null){E=y.child;for(var b=k.firstContext;b!==null;){if(b.context===d){if(y.tag===1){b=Ni(-1,u&-u),b.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var re=G.pending;re===null?b.next=b:(b.next=re.next,re.next=b),G.pending=b}}y.lanes|=u,b=y.alternate,b!==null&&(b.lanes|=u),yf(y.return,u,o),k.lanes|=u;break}b=b.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=u,k=E.alternate,k!==null&&(k.lanes|=u),yf(E,u,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}bn(i,o,p.children,u),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,Ra(o,u),p=Er(p),d=d(p),o.flags|=1,bn(i,o,d,u),o.child;case 14:return d=o.type,p=jr(d,o.pendingProps),p=jr(d.type,p),e_(i,o,d,p,u);case 15:return t_(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:jr(d,p),Bc(i,o),o.tag=1,$n(d)?(i=!0,Tc(o)):i=!1,Ra(o,u),Gy(o,d,p),Nf(o,d,p,u),Mf(null,o,d,!0,i,u);case 19:return u_(i,o,u);case 22:return n_(i,o,u)}throw Error(t(156,o.tag))};function N_(i,o){return dt(i,o)}function zS(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(i,o,u,d){return new zS(i,o,u,d)}function rp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $S(i){if(typeof i=="function")return rp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===Et)return 14}return 2}function Ts(i,o){var u=i.alternate;return u===null?(u=Sr(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Xc(i,o,u,d,p,y){var E=2;if(d=i,typeof i=="function")rp(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case T:return Io(u.children,p,y,o);case A:E=8,p|=8;break;case P:return i=Sr(12,u,o,p|2),i.elementType=P,i.lanes=y,i;case C:return i=Sr(13,u,o,p),i.elementType=C,i.lanes=y,i;case Ye:return i=Sr(19,u,o,p),i.elementType=Ye,i.lanes=y,i;case ot:return Zc(u,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case x:E=10;break e;case N:E=9;break e;case M:E=11;break e;case Et:E=14;break e;case Bt:E=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Sr(E,u,o,p),o.elementType=i,o.type=d,o.lanes=y,o}function Io(i,o,u,d){return i=Sr(7,i,d,o),i.lanes=u,i}function Zc(i,o,u,d){return i=Sr(22,i,d,o),i.elementType=ot,i.lanes=u,i.stateNode={isHidden:!1},i}function ip(i,o,u){return i=Sr(6,i,null,o),i.lanes=u,i}function sp(i,o,u){return o=Sr(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function qS(i,o,u,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=is(0),this.expirationTimes=is(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=is(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function op(i,o,u,d,p,y,E,k,b){return i=new qS(i,o,u,k,b),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Sr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},vf(y),i}function KS(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function V_(i){if(!i)return ps;i=i._reactInternals;e:{if(_e(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if($n(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if($n(u))return ly(i,u,o)}return o}function L_(i,o,u,d,p,y,E,k,b){return i=op(u,d,!0,i,p,y,E,k,b),i.context=V_(null),u=i.current,d=Nn(),p=Es(u),y=Ni(d,p),y.callback=o??null,ys(u,y,p),i.current.lanes=p,ss(i,p,d),Gn(i,d),i}function eh(i,o,u,d){var p=o.current,y=Nn(),E=Es(p);return u=V_(u),o.context===null?o.context=u:o.pendingContext=u,o=Ni(y,E),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=ys(p,o,E),i!==null&&($r(i,p,E,y),Dc(i,p,E)),E}function th(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function O_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function ap(i,o){O_(i,o),(i=i.alternate)&&O_(i,o)}function GS(){return null}var M_=typeof reportError=="function"?reportError:function(i){console.error(i)};function lp(i){this._internalRoot=i}nh.prototype.render=lp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));eh(i,o,null,null)},nh.prototype.unmount=lp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;vo(function(){eh(null,i,null,null)}),o[ki]=null}};function nh(i){this._internalRoot=i}nh.prototype.unstable_scheduleHydration=function(i){if(i){var o=nc();i={blockedOn:null,target:i,priority:o};for(var u=0;u<ni.length&&o!==0&&o<ni[u].priority;u++);ni.splice(u,0,i),u===0&&sc(i)}};function up(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function rh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function F_(){}function WS(i,o,u,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var G=th(E);y.call(G)}}var E=L_(o,d,i,0,null,!1,!1,"",F_);return i._reactRootContainer=E,i[ki]=E.current,Vl(i.nodeType===8?i.parentNode:i),vo(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var k=d;d=function(){var G=th(b);k.call(G)}}var b=op(i,0,!1,null,null,!1,!1,"",F_);return i._reactRootContainer=b,i[ki]=b.current,Vl(i.nodeType===8?i.parentNode:i),vo(function(){eh(o,b,u,d)}),b}function ih(i,o,u,d,p){var y=u._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var k=p;p=function(){var b=th(E);k.call(b)}}eh(o,E,i,p)}else E=WS(u,o,i,p,d);return th(E)}ec=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=rs(o.pendingLanes);u!==0&&(os(o,u|1),Gn(o,Qe()),(at&6)===0&&(Da=Qe()+500,ms()))}break;case 13:vo(function(){var d=bi(i,1);if(d!==null){var p=Nn();$r(d,i,1,p)}}),ap(i,1)}},na=function(i){if(i.tag===13){var o=bi(i,134217728);if(o!==null){var u=Nn();$r(o,i,134217728,u)}ap(i,134217728)}},tc=function(i){if(i.tag===13){var o=Es(i),u=bi(i,o);if(u!==null){var d=Nn();$r(u,i,o,d)}ap(i,o)}},nc=function(){return nt},rc=function(i,o){var u=nt;try{return nt=i,o()}finally{nt=u}},Ii=function(i,o,u){switch(o){case"input":if(Xs(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var p=Ec(d);if(!p)throw Error(t(90));Ot(d),Xs(d,p)}}}break;case"textarea":On(i,u);break;case"select":o=u.value,o!=null&&Cr(i,!!u.multiple,o,!1)}},Jr=ep,Yr=vo;var HS={usingClientEntryPoint:!1,Events:[Ml,_a,Ec,Zn,to,ep]},Yl={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QS={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=lt(i),i===null?null:i.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||GS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{ct=sh.inject(QS),Wt=sh}catch{}}return Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS,Wn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(o))throw Error(t(200));return KS(i,o,null,u)},Wn.createRoot=function(i,o){if(!up(i))throw Error(t(299));var u=!1,d="",p=M_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=op(i,1,!1,null,null,u,!1,d,p),i[ki]=o.current,Vl(i.nodeType===8?i.parentNode:i),new lp(o)},Wn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=lt(o),i=i===null?null:i.stateNode,i},Wn.flushSync=function(i){return vo(i)},Wn.hydrate=function(i,o,u){if(!rh(o))throw Error(t(200));return ih(null,i,o,!0,u)},Wn.hydrateRoot=function(i,o,u){if(!up(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,p=!1,y="",E=M_;if(u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=L_(o,null,i,1,u??null,p,!1,y,E),i[ki]=o.current,Vl(i),d)for(i=0;i<d.length;i++)u=d[i],p=u._getVersion,p=p(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,p]:o.mutableSourceEagerHydrationData.push(u,p);return new nh(o)},Wn.render=function(i,o,u){if(!rh(o))throw Error(t(200));return ih(null,i,o,!1,u)},Wn.unmountComponentAtNode=function(i){if(!rh(i))throw Error(t(40));return i._reactRootContainer?(vo(function(){ih(null,null,i,!1,function(){i._reactRootContainer=null,i[ki]=null})}),!0):!1},Wn.unstable_batchedUpdates=ep,Wn.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!rh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ih(i,o,u,!1,d)},Wn.version="18.3.1-next-f1338f8080-20240426",Wn}var G_;function uE(){if(G_)return dp.exports;G_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dp.exports=rA(),dp.exports}var W_;function iA(){if(W_)return oh;W_=1;var n=uE();return oh.createRoot=n.createRoot,oh.hydrateRoot=n.hydrateRoot,oh}var sA=iA(),cE=uE();const oA=lE(cE),aA=aE({__proto__:null,default:oA},[cE]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kt(){return kt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kt.apply(this,arguments)}var Yt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Yt||(Yt={}));const H_="popstate";function lA(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:l,hash:h}=r.location;return wu("",{pathname:a,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Mo(s)}return cA(e,t,null,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Qa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uA(){return Math.random().toString(36).substr(2,8)}function Q_(n,e){return{usr:n.state,key:n.key,idx:e}}function wu(n,e,t,r){return t===void 0&&(t=null),kt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Gs(e):e,{state:t,key:e&&e.key||r||uA()})}function Mo(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function cA(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,h=Yt.Pop,f=null,m=_();m==null&&(m=0,l.replaceState(kt({},l.state,{idx:m}),""));function _(){return(l.state||{idx:null}).idx}function w(){h=Yt.Pop;let O=_(),ie=O==null?null:O-m;m=O,f&&f({action:h,location:V.location,delta:ie})}function I(O,ie){h=Yt.Push;let H=wu(V.location,O,ie);m=_()+1;let ee=Q_(H,m),ae=V.createHref(H);try{l.pushState(ee,"",ae)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(ae)}a&&f&&f({action:h,location:V.location,delta:1})}function R(O,ie){h=Yt.Replace;let H=wu(V.location,O,ie);m=_();let ee=Q_(H,m),ae=V.createHref(H);l.replaceState(ee,"",ae),a&&f&&f({action:h,location:V.location,delta:0})}function F(O){let ie=s.location.origin!=="null"?s.location.origin:s.location.href,H=typeof O=="string"?O:Mo(O);return H=H.replace(/ $/,"%20"),Ke(ie,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,ie)}let V={get action(){return h},get location(){return n(s,l)},listen(O){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(H_,w),f=O,()=>{s.removeEventListener(H_,w),f=null}},createHref(O){return e(s,O)},createURL:F,encodeLocation(O){let ie=F(O);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:I,replace:R,go(O){return l.go(O)}};return V}var pt;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(pt||(pt={}));const hA=new Set(["lazy","caseSensitive","path","id","index","children"]);function dA(n){return n.index===!0}function Dh(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((s,a)=>{let l=[...t,String(a)],h=typeof s.id=="string"?s.id:l.join("-");if(Ke(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ke(!r[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),dA(s)){let f=kt({},s,e(s),{id:h});return r[h]=f,f}else{let f=kt({},s,e(s),{id:h,children:void 0});return r[h]=f,s.children&&(f.children=Dh(s.children,e,l,r)),f}})}function Po(n,e,t){return t===void 0&&(t="/"),yh(n,e,t,!1)}function yh(n,e,t,r){let s=typeof e=="string"?Gs(e):e,a=zi(s.pathname||"/",t);if(a==null)return null;let l=dE(n);fA(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let m=SA(a);h=IA(l[f],m,r)}return h}function hE(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function dE(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,l,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(Ke(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Bi([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Ke(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),dE(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:wA(m,a.index),routesMeta:_})};return n.forEach((a,l)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,l);else for(let f of fE(a.path))s(a,l,f)}),e}function fE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=fE(r.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...l),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function fA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const pA=/^:[\w-]+$/,mA=3,gA=2,yA=1,_A=10,vA=-2,J_=n=>n==="*";function wA(n,e){let t=n.split("/"),r=t.length;return t.some(J_)&&(r+=vA),e&&(r+=gA),t.filter(s=>!J_(s)).reduce((s,a)=>s+(pA.test(a)?mA:a===""?yA:_A),r)}function EA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function IA(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,s={},a="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=bh({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),I=f.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=bh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:Bi([a,w.pathname]),pathnameBase:PA(Bi([a,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(a=Bi([a,w.pathnameBase]))}return l}function bh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=TA(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,_,w)=>{let{paramName:I,isOptional:R}=_;if(I==="*"){let V=h[w]||"";l=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const F=h[w];return R&&!F?m[I]=void 0:m[I]=(F||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:n}}function TA(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Qa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function SA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qa(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function zi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function AA(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Gs(n):n;return{pathname:t?t.startsWith("/")?t:RA(t,e):e,search:kA(r),hash:CA(s)}}function RA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function mp(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function id(n,e){let t=pE(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function sd(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Gs(n):(s=kt({},n),Ke(!s.pathname||!s.pathname.includes("?"),mp("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),mp("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),mp("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,h;if(l==null)h=t;else{let w=e.length-1;if(!r&&l.startsWith("..")){let I=l.split("/");for(;I[0]==="..";)I.shift(),w-=1;s.pathname=I.join("/")}h=w>=0?e[w]:"/"}let f=AA(s,h),m=l&&l!=="/"&&l.endsWith("/"),_=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Bi=n=>n.join("/").replace(/\/\/+/g,"/"),PA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,CA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Nh{constructor(e,t,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=t||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Eu(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const mE=["post","put","patch","delete"],xA=new Set(mE),DA=["get",...mE],bA=new Set(DA),NA=new Set([301,302,303,307,308]),VA=new Set([307,308]),gp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},LA={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Zl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},gm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OA=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),gE="remix-router-transitions";function MA(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;Ke(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(n.mapRouteProperties)s=n.mapRouteProperties;else if(n.detectErrorBoundary){let D=n.detectErrorBoundary;s=U=>({hasErrorBoundary:D(U)})}else s=OA;let a={},l=Dh(n.routes,s,void 0,a),h,f=n.basename||"/",m=n.dataStrategy||BA,_=n.patchRoutesOnNavigation,w=kt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),I=null,R=new Set,F=null,V=null,O=null,ie=n.hydrationData!=null,H=Po(l,n.history.location,f),ee=!1,ae=null;if(H==null&&!_){let D=Hn(404,{pathname:n.history.location.pathname}),{matches:U,route:K}=av(l);H=U,ae={[K.id]:D}}H&&!n.hydrationData&&Yr(H,l,n.history.location.pathname).active&&(H=null);let de;if(H)if(H.some(D=>D.route.lazy))de=!1;else if(!H.some(D=>D.route.loader))de=!0;else if(w.v7_partialHydration){let D=n.hydrationData?n.hydrationData.loaderData:null,U=n.hydrationData?n.hydrationData.errors:null;if(U){let K=H.findIndex(Z=>U[Z.route.id]!==void 0);de=H.slice(0,K+1).every(Z=>!Np(Z.route,D,U))}else de=H.every(K=>!Np(K.route,D,U))}else de=n.hydrationData!=null;else if(de=!1,H=[],w.v7_partialHydration){let D=Yr(null,l,n.history.location.pathname);D.active&&D.matches&&(ee=!0,H=D.matches)}let fe,T={historyAction:n.history.action,location:n.history.location,matches:H,initialized:de,navigation:gp,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ae,fetchers:new Map,blockers:new Map},A=Yt.Pop,P=!1,x,N=!1,M=new Map,C=null,Ye=!1,Et=!1,Bt=[],ot=new Set,se=new Map,xe=0,me=-1,j=new Map,Y=new Set,Se=new Map,Be=new Map,Oe=new Set,$e=new Map,qe=new Map,Xe;function gt(){if(I=n.history.listen(D=>{let{action:U,location:K,delta:Z}=D;if(Xe){Xe(),Xe=void 0;return}Qa(qe.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=Ii({currentLocation:T.location,nextLocation:K,historyAction:U});if(ce&&Z!=null){let we=new Promise(Ne=>{Xe=Ne});n.history.go(Z*-1),br(ce,{state:"blocked",location:K,proceed(){br(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),we.then(()=>n.history.go(Z))},reset(){let Ne=new Map(T.blockers);Ne.set(ce,Zl),Ot({blockers:Ne})}});return}return Xn(U,K)}),t){tR(e,M);let D=()=>nR(e,M);e.addEventListener("pagehide",D),C=()=>e.removeEventListener("pagehide",D)}return T.initialized||Xn(Yt.Pop,T.location,{initialHydration:!0}),fe}function Gt(){I&&I(),C&&C(),R.clear(),x&&x.abort(),T.fetchers.forEach((D,U)=>pr(U)),T.blockers.forEach((D,U)=>Qr(U))}function Pr(D){return R.add(D),()=>R.delete(D)}function Ot(D,U){U===void 0&&(U={}),T=kt({},T,D);let K=[],Z=[];w.v7_fetcherPersist&&T.fetchers.forEach((ce,we)=>{ce.state==="idle"&&(Oe.has(we)?Z.push(we):K.push(we))}),Oe.forEach(ce=>{!T.fetchers.has(ce)&&!se.has(ce)&&Z.push(ce)}),[...R].forEach(ce=>ce(T,{deletedFetchers:Z,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),w.v7_fetcherPersist?(K.forEach(ce=>T.fetchers.delete(ce)),Z.forEach(ce=>pr(ce))):Z.forEach(ce=>Oe.delete(ce))}function Cn(D,U,K){var Z,ce;let{flushSync:we}=K===void 0?{}:K,Ne=T.actionData!=null&&T.navigation.formMethod!=null&&qr(T.navigation.formMethod)&&T.navigation.state==="loading"&&((Z=D.state)==null?void 0:Z._isRedirect)!==!0,Ee;U.actionData?Object.keys(U.actionData).length>0?Ee=U.actionData:Ee=null:Ne?Ee=T.actionData:Ee=null;let ve=U.loaderData?sv(T.loaderData,U.loaderData,U.matches||[],U.errors):T.loaderData,ye=T.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((Ue,Ft)=>ye.set(Ft,Zl)));let _e=P===!0||T.navigation.formMethod!=null&&qr(T.navigation.formMethod)&&((ce=D.state)==null?void 0:ce._isRedirect)!==!0;h&&(l=h,h=void 0),Ye||A===Yt.Pop||(A===Yt.Push?n.history.push(D,D.state):A===Yt.Replace&&n.history.replace(D,D.state));let Me;if(A===Yt.Pop){let Ue=M.get(T.location.pathname);Ue&&Ue.has(D.pathname)?Me={currentLocation:T.location,nextLocation:D}:M.has(D.pathname)&&(Me={currentLocation:D,nextLocation:T.location})}else if(N){let Ue=M.get(T.location.pathname);Ue?Ue.add(D.pathname):(Ue=new Set([D.pathname]),M.set(T.location.pathname,Ue)),Me={currentLocation:T.location,nextLocation:D}}Ot(kt({},U,{actionData:Ee,loaderData:ve,historyAction:A,location:D,initialized:!0,navigation:gp,revalidation:"idle",restoreScrollPosition:Jr(D,U.matches||T.matches),preventScrollReset:_e,blockers:ye}),{viewTransitionOpts:Me,flushSync:we===!0}),A=Yt.Pop,P=!1,N=!1,Ye=!1,Et=!1,Bt=[]}async function Hr(D,U){if(typeof D=="number"){n.history.go(D);return}let K=bp(T.location,T.matches,f,w.v7_prependBasename,D,w.v7_relativeSplatPath,U?.fromRouteId,U?.relative),{path:Z,submission:ce,error:we}=Y_(w.v7_normalizeFormMethod,!1,K,U),Ne=T.location,Ee=wu(T.location,Z,U&&U.state);Ee=kt({},Ee,n.history.encodeLocation(Ee));let ve=U&&U.replace!=null?U.replace:void 0,ye=Yt.Push;ve===!0?ye=Yt.Replace:ve===!1||ce!=null&&qr(ce.formMethod)&&ce.formAction===T.location.pathname+T.location.search&&(ye=Yt.Replace);let _e=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,Me=(U&&U.flushSync)===!0,Ue=Ii({currentLocation:Ne,nextLocation:Ee,historyAction:ye});if(Ue){br(Ue,{state:"blocked",location:Ee,proceed(){br(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),Hr(D,U)},reset(){let Ft=new Map(T.blockers);Ft.set(Ue,Zl),Ot({blockers:Ft})}});return}return await Xn(ye,Ee,{submission:ce,pendingError:we,preventScrollReset:_e,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:Me})}function Ji(){if(xt(),Ot({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){Xn(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}Xn(A||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:N===!0})}}async function Xn(D,U,K){x&&x.abort(),x=null,A=D,Ye=(K&&K.startUninterruptedRevalidation)===!0,to(T.location,T.matches),P=(K&&K.preventScrollReset)===!0,N=(K&&K.enableViewTransition)===!0;let Z=h||l,ce=K&&K.overrideNavigation,we=K!=null&&K.initialHydration&&T.matches&&T.matches.length>0&&!ee?T.matches:Po(Z,U,f),Ne=(K&&K.flushSync)===!0;if(we&&T.initialized&&!Et&&WA(T.location,U)&&!(K&&K.submission&&qr(K.submission.formMethod))){Cn(U,{matches:we},{flushSync:Ne});return}let Ee=Yr(we,Z,U.pathname);if(Ee.active&&Ee.matches&&(we=Ee.matches),!we){let{error:lt,notFoundMatches:We,route:dt}=_n(U.pathname);Cn(U,{matches:We,loaderData:{},errors:{[dt.id]:lt}},{flushSync:Ne});return}x=new AbortController;let ve=Na(n.history,U,x.signal,K&&K.submission),ye;if(K&&K.pendingError)ye=[ko(we).route.id,{type:pt.error,error:K.pendingError}];else if(K&&K.submission&&qr(K.submission.formMethod)){let lt=await Xs(ve,U,K.submission,we,Ee.active,{replace:K.replace,flushSync:Ne});if(lt.shortCircuited)return;if(lt.pendingActionResult){let[We,dt]=lt.pendingActionResult;if(lr(dt)&&Eu(dt.error)&&dt.error.status===404){x=null,Cn(U,{matches:lt.matches,loaderData:{},errors:{[We]:dt.error}});return}}we=lt.matches||we,ye=lt.pendingActionResult,ce=yp(U,K.submission),Ne=!1,Ee.active=!1,ve=Na(n.history,ve.url,ve.signal)}let{shortCircuited:_e,matches:Me,loaderData:Ue,errors:Ft}=await Xo(ve,U,we,Ee.active,ce,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Ne,ye);_e||(x=null,Cn(U,kt({matches:Me||we},ov(ye),{loaderData:Ue,errors:Ft})))}async function Xs(D,U,K,Z,ce,we){we===void 0&&(we={}),xt();let Ne=ZA(U,K);if(Ot({navigation:Ne},{flushSync:we.flushSync===!0}),ce){let ye=await Un(Z,U.pathname,D.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let _e=ko(ye.partialMatches).route.id;return{matches:ye.partialMatches,pendingActionResult:[_e,{type:pt.error,error:ye.error}]}}else if(ye.matches)Z=ye.matches;else{let{notFoundMatches:_e,error:Me,route:Ue}=_n(U.pathname);return{matches:_e,pendingActionResult:[Ue.id,{type:pt.error,error:Me}]}}}let Ee,ve=au(Z,U);if(!ve.route.action&&!ve.route.lazy)Ee={type:pt.error,error:Hn(405,{method:D.method,pathname:U.pathname,routeId:ve.route.id})};else if(Ee=(await xr("action",T,D,[ve],Z,null))[ve.route.id],D.signal.aborted)return{shortCircuited:!0};if(No(Ee)){let ye;return we&&we.replace!=null?ye=we.replace:ye=nv(Ee.response.headers.get("Location"),new URL(D.url),f)===T.location.pathname+T.location.search,await On(D,Ee,!0,{submission:K,replace:ye}),{shortCircuited:!0}}if(Vs(Ee))throw Hn(400,{type:"defer-action"});if(lr(Ee)){let ye=ko(Z,ve.route.id);return(we&&we.replace)!==!0&&(A=Yt.Push),{matches:Z,pendingActionResult:[ye.route.id,Ee]}}return{matches:Z,pendingActionResult:[ve.route.id,Ee]}}async function Xo(D,U,K,Z,ce,we,Ne,Ee,ve,ye,_e){let Me=ce||yp(U,we),Ue=we||Ne||uv(Me),Ft=!Ye&&(!w.v7_partialHydration||!ve);if(Z){if(Ft){let ct=wi(_e);Ot(kt({navigation:Me},ct!==void 0?{actionData:ct}:{}),{flushSync:ye})}let Je=await Un(K,U.pathname,D.signal);if(Je.type==="aborted")return{shortCircuited:!0};if(Je.type==="error"){let ct=ko(Je.partialMatches).route.id;return{matches:Je.partialMatches,loaderData:{},errors:{[ct]:Je.error}}}else if(Je.matches)K=Je.matches;else{let{error:ct,notFoundMatches:Wt,route:ei}=_n(U.pathname);return{matches:Wt,loaderData:{},errors:{[ei.id]:ct}}}}let lt=h||l,[We,dt]=Z_(n.history,T,K,Ue,U,w.v7_partialHydration&&ve===!0,w.v7_skipActionErrorRevalidation,Et,Bt,ot,Oe,Se,Y,lt,f,_e);if(Fn(Je=>!(K&&K.some(ct=>ct.route.id===Je))||We&&We.some(ct=>ct.route.id===Je)),me=++xe,We.length===0&&dt.length===0){let Je=Zi();return Cn(U,kt({matches:K,loaderData:{},errors:_e&&lr(_e[1])?{[_e[0]]:_e[1].error}:null},ov(_e),Je?{fetchers:new Map(T.fetchers)}:{}),{flushSync:ye}),{shortCircuited:!0}}if(Ft){let Je={};if(!Z){Je.navigation=Me;let ct=wi(_e);ct!==void 0&&(Je.actionData=ct)}dt.length>0&&(Je.fetchers=kr(dt)),Ot(Je,{flushSync:ye})}dt.forEach(Je=>{Mn(Je.key),Je.controller&&se.set(Je.key,Je.controller)});let mr=()=>dt.forEach(Je=>Mn(Je.key));x&&x.signal.addEventListener("abort",mr);let{loaderResults:Xr,fetcherResults:er}=await Mt(T,K,We,dt,D);if(D.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",mr),dt.forEach(Je=>se.delete(Je.key));let Qe=ah(Xr);if(Qe)return await On(D,Qe.result,!0,{replace:Ee}),{shortCircuited:!0};if(Qe=ah(er),Qe)return Y.add(Qe.key),await On(D,Qe.result,!0,{replace:Ee}),{shortCircuited:!0};let{loaderData:ns,errors:tr}=iv(T,K,Xr,_e,dt,er,$e);$e.forEach((Je,ct)=>{Je.subscribe(Wt=>{(Wt||Je.done)&&$e.delete(ct)})}),w.v7_partialHydration&&ve&&T.errors&&(tr=kt({},T.errors,tr));let vn=Zi(),dn=es(me),Zr=vn||dn||dt.length>0;return kt({matches:K,loaderData:ns,errors:tr},Zr?{fetchers:new Map(T.fetchers)}:{})}function wi(D){if(D&&!lr(D[1]))return{[D[0]]:D[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function kr(D){return D.forEach(U=>{let K=T.fetchers.get(U.key),Z=eu(void 0,K?K.data:void 0);T.fetchers.set(U.key,Z)}),new Map(T.fetchers)}function Cr(D,U,K,Z){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Mn(D);let ce=(Z&&Z.flushSync)===!0,we=h||l,Ne=bp(T.location,T.matches,f,w.v7_prependBasename,K,w.v7_relativeSplatPath,U,Z?.relative),Ee=Po(we,Ne,f),ve=Yr(Ee,we,Ne);if(ve.active&&ve.matches&&(Ee=ve.matches),!Ee){xn(D,U,Hn(404,{pathname:Ne}),{flushSync:ce});return}let{path:ye,submission:_e,error:Me}=Y_(w.v7_normalizeFormMethod,!0,Ne,Z);if(Me){xn(D,U,Me,{flushSync:ce});return}let Ue=au(Ee,ye),Ft=(Z&&Z.preventScrollReset)===!0;if(_e&&qr(_e.formMethod)){Zs(D,U,ye,Ue,Ee,ve.active,ce,Ft,_e);return}Se.set(D,{routeId:U,path:ye}),Yi(D,U,ye,Ue,Ee,ve.active,ce,Ft,_e)}async function Zs(D,U,K,Z,ce,we,Ne,Ee,ve){xt(),Se.delete(D);function ye(Ze){if(!Ze.route.action&&!Ze.route.lazy){let gr=Hn(405,{method:ve.formMethod,pathname:K,routeId:U});return xn(D,U,gr,{flushSync:Ne}),!0}return!1}if(!we&&ye(Z))return;let _e=T.fetchers.get(D);on(D,eR(ve,_e),{flushSync:Ne});let Me=new AbortController,Ue=Na(n.history,K,Me.signal,ve);if(we){let Ze=await Un(ce,new URL(Ue.url).pathname,Ue.signal,D);if(Ze.type==="aborted")return;if(Ze.type==="error"){xn(D,U,Ze.error,{flushSync:Ne});return}else if(Ze.matches){if(ce=Ze.matches,Z=au(ce,K),ye(Z))return}else{xn(D,U,Hn(404,{pathname:K}),{flushSync:Ne});return}}se.set(D,Me);let Ft=xe,We=(await xr("action",T,Ue,[Z],ce,D))[Z.route.id];if(Ue.signal.aborted){se.get(D)===Me&&se.delete(D);return}if(w.v7_fetcherPersist&&Oe.has(D)){if(No(We)||lr(We)){on(D,Cs(void 0));return}}else{if(No(We))if(se.delete(D),me>Ft){on(D,Cs(void 0));return}else return Y.add(D),on(D,eu(ve)),On(Ue,We,!1,{fetcherSubmission:ve,preventScrollReset:Ee});if(lr(We)){xn(D,U,We.error);return}}if(Vs(We))throw Hn(400,{type:"defer-action"});let dt=T.navigation.location||T.location,mr=Na(n.history,dt,Me.signal),Xr=h||l,er=T.navigation.state!=="idle"?Po(Xr,T.navigation.location,f):T.matches;Ke(er,"Didn't find any matches after fetcher action");let Qe=++xe;j.set(D,Qe);let ns=eu(ve,We.data);T.fetchers.set(D,ns);let[tr,vn]=Z_(n.history,T,er,ve,dt,!1,w.v7_skipActionErrorRevalidation,Et,Bt,ot,Oe,Se,Y,Xr,f,[Z.route.id,We]);vn.filter(Ze=>Ze.key!==D).forEach(Ze=>{let gr=Ze.key,ro=T.fetchers.get(gr),Zo=eu(void 0,ro?ro.data:void 0);T.fetchers.set(gr,Zo),Mn(gr),Ze.controller&&se.set(gr,Ze.controller)}),Ot({fetchers:new Map(T.fetchers)});let dn=()=>vn.forEach(Ze=>Mn(Ze.key));Me.signal.addEventListener("abort",dn);let{loaderResults:Zr,fetcherResults:Je}=await Mt(T,er,tr,vn,mr);if(Me.signal.aborted)return;Me.signal.removeEventListener("abort",dn),j.delete(D),se.delete(D),vn.forEach(Ze=>se.delete(Ze.key));let ct=ah(Zr);if(ct)return On(mr,ct.result,!1,{preventScrollReset:Ee});if(ct=ah(Je),ct)return Y.add(ct.key),On(mr,ct.result,!1,{preventScrollReset:Ee});let{loaderData:Wt,errors:ei}=iv(T,er,Zr,void 0,vn,Je,$e);if(T.fetchers.has(D)){let Ze=Cs(We.data);T.fetchers.set(D,Ze)}es(Qe),T.navigation.state==="loading"&&Qe>me?(Ke(A,"Expected pending action"),x&&x.abort(),Cn(T.navigation.location,{matches:er,loaderData:Wt,errors:ei,fetchers:new Map(T.fetchers)})):(Ot({errors:ei,loaderData:sv(T.loaderData,Wt,er,ei),fetchers:new Map(T.fetchers)}),Et=!1)}async function Yi(D,U,K,Z,ce,we,Ne,Ee,ve){let ye=T.fetchers.get(D);on(D,eu(ve,ye?ye.data:void 0),{flushSync:Ne});let _e=new AbortController,Me=Na(n.history,K,_e.signal);if(we){let We=await Un(ce,new URL(Me.url).pathname,Me.signal,D);if(We.type==="aborted")return;if(We.type==="error"){xn(D,U,We.error,{flushSync:Ne});return}else if(We.matches)ce=We.matches,Z=au(ce,K);else{xn(D,U,Hn(404,{pathname:K}),{flushSync:Ne});return}}se.set(D,_e);let Ue=xe,lt=(await xr("loader",T,Me,[Z],ce,D))[Z.route.id];if(Vs(lt)&&(lt=await ym(lt,Me.signal,!0)||lt),se.get(D)===_e&&se.delete(D),!Me.signal.aborted){if(Oe.has(D)){on(D,Cs(void 0));return}if(No(lt))if(me>Ue){on(D,Cs(void 0));return}else{Y.add(D),await On(Me,lt,!1,{preventScrollReset:Ee});return}if(lr(lt)){xn(D,U,lt.error);return}Ke(!Vs(lt),"Unhandled fetcher deferred data"),on(D,Cs(lt.data))}}async function On(D,U,K,Z){let{submission:ce,fetcherSubmission:we,preventScrollReset:Ne,replace:Ee}=Z===void 0?{}:Z;U.response.headers.has("X-Remix-Revalidate")&&(Et=!0);let ve=U.response.headers.get("Location");Ke(ve,"Expected a Location header on the redirect Response"),ve=nv(ve,new URL(D.url),f);let ye=wu(T.location,ve,{_isRedirect:!0});if(t){let We=!1;if(U.response.headers.has("X-Remix-Reload-Document"))We=!0;else if(gm.test(ve)){const dt=n.history.createURL(ve);We=dt.origin!==e.location.origin||zi(dt.pathname,f)==null}if(We){Ee?e.location.replace(ve):e.location.assign(ve);return}}x=null;let _e=Ee===!0||U.response.headers.has("X-Remix-Replace")?Yt.Replace:Yt.Push,{formMethod:Me,formAction:Ue,formEncType:Ft}=T.navigation;!ce&&!we&&Me&&Ue&&Ft&&(ce=uv(T.navigation));let lt=ce||we;if(VA.has(U.response.status)&&lt&&qr(lt.formMethod))await Xn(_e,ye,{submission:kt({},lt,{formAction:ve}),preventScrollReset:Ne||P,enableViewTransition:K?N:void 0});else{let We=yp(ye,ce);await Xn(_e,ye,{overrideNavigation:We,fetcherSubmission:we,preventScrollReset:Ne||P,enableViewTransition:K?N:void 0})}}async function xr(D,U,K,Z,ce,we){let Ne,Ee={};try{Ne=await zA(m,D,U,K,Z,ce,we,a,s)}catch(ve){return Z.forEach(ye=>{Ee[ye.route.id]={type:pt.error,error:ve}}),Ee}for(let[ve,ye]of Object.entries(Ne))if(HA(ye)){let _e=ye.result;Ee[ve]={type:pt.redirect,response:KA(_e,K,ve,ce,f,w.v7_relativeSplatPath)}}else Ee[ve]=await qA(ye);return Ee}async function Mt(D,U,K,Z,ce){let we=D.matches,Ne=xr("loader",D,ce,K,U,null),Ee=Promise.all(Z.map(async _e=>{if(_e.matches&&_e.match&&_e.controller){let Ue=(await xr("loader",D,Na(n.history,_e.path,_e.controller.signal),[_e.match],_e.matches,_e.key))[_e.match.route.id];return{[_e.key]:Ue}}else return Promise.resolve({[_e.key]:{type:pt.error,error:Hn(404,{pathname:_e.path})}})})),ve=await Ne,ye=(await Ee).reduce((_e,Me)=>Object.assign(_e,Me),{});return await Promise.all([YA(U,ve,ce.signal,we,D.loaderData),XA(U,ye,Z)]),{loaderResults:ve,fetcherResults:ye}}function xt(){Et=!0,Bt.push(...Fn()),Se.forEach((D,U)=>{se.has(U)&&ot.add(U),Mn(U)})}function on(D,U,K){K===void 0&&(K={}),T.fetchers.set(D,U),Ot({fetchers:new Map(T.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function xn(D,U,K,Z){Z===void 0&&(Z={});let ce=ko(T.matches,U);pr(D),Ot({errors:{[ce.route.id]:K},fetchers:new Map(T.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function Dr(D){return Be.set(D,(Be.get(D)||0)+1),Oe.has(D)&&Oe.delete(D),T.fetchers.get(D)||LA}function pr(D){let U=T.fetchers.get(D);se.has(D)&&!(U&&U.state==="loading"&&j.has(D))&&Mn(D),Se.delete(D),j.delete(D),Y.delete(D),w.v7_fetcherPersist&&Oe.delete(D),ot.delete(D),T.fetchers.delete(D)}function Ei(D){let U=(Be.get(D)||0)-1;U<=0?(Be.delete(D),Oe.add(D),w.v7_fetcherPersist||pr(D)):Be.set(D,U),Ot({fetchers:new Map(T.fetchers)})}function Mn(D){let U=se.get(D);U&&(U.abort(),se.delete(D))}function Xi(D){for(let U of D){let K=Dr(U),Z=Cs(K.data);T.fetchers.set(U,Z)}}function Zi(){let D=[],U=!1;for(let K of Y){let Z=T.fetchers.get(K);Ke(Z,"Expected fetcher: "+K),Z.state==="loading"&&(Y.delete(K),D.push(K),U=!0)}return Xi(D),U}function es(D){let U=[];for(let[K,Z]of j)if(Z<D){let ce=T.fetchers.get(K);Ke(ce,"Expected fetcher: "+K),ce.state==="loading"&&(Mn(K),j.delete(K),U.push(K))}return Xi(U),U.length>0}function eo(D,U){let K=T.blockers.get(D)||Zl;return qe.get(D)!==U&&qe.set(D,U),K}function Qr(D){T.blockers.delete(D),qe.delete(D)}function br(D,U){let K=T.blockers.get(D)||Zl;Ke(K.state==="unblocked"&&U.state==="blocked"||K.state==="blocked"&&U.state==="blocked"||K.state==="blocked"&&U.state==="proceeding"||K.state==="blocked"&&U.state==="unblocked"||K.state==="proceeding"&&U.state==="unblocked","Invalid blocker state transition: "+K.state+" -> "+U.state);let Z=new Map(T.blockers);Z.set(D,U),Ot({blockers:Z})}function Ii(D){let{currentLocation:U,nextLocation:K,historyAction:Z}=D;if(qe.size===0)return;qe.size>1&&Qa(!1,"A router only supports one blocker at a time");let ce=Array.from(qe.entries()),[we,Ne]=ce[ce.length-1],Ee=T.blockers.get(we);if(!(Ee&&Ee.state==="proceeding")&&Ne({currentLocation:U,nextLocation:K,historyAction:Z}))return we}function _n(D){let U=Hn(404,{pathname:D}),K=h||l,{matches:Z,route:ce}=av(K);return Fn(),{notFoundMatches:Z,route:ce,error:U}}function Fn(D){let U=[];return $e.forEach((K,Z)=>{(!D||D(Z))&&(K.cancel(),U.push(Z),$e.delete(Z))}),U}function ts(D,U,K){if(F=D,O=U,V=K||null,!ie&&T.navigation===gp){ie=!0;let Z=Jr(T.location,T.matches);Z!=null&&Ot({restoreScrollPosition:Z})}return()=>{F=null,O=null,V=null}}function Zn(D,U){return V&&V(D,U.map(Z=>hE(Z,T.loaderData)))||D.key}function to(D,U){if(F&&O){let K=Zn(D,U);F[K]=O()}}function Jr(D,U){if(F){let K=Zn(D,U),Z=F[K];if(typeof Z=="number")return Z}return null}function Yr(D,U,K){if(_)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:yh(U,K,f,!0)}}else return{active:!0,matches:yh(U,K,f,!0)||[]};return{active:!1,matches:null}}async function Un(D,U,K,Z){if(!_)return{type:"success",matches:D};let ce=D;for(;;){let we=h==null,Ne=h||l,Ee=a;try{await _({signal:K,path:U,matches:ce,fetcherKey:Z,patch:(_e,Me)=>{K.aborted||tv(_e,Me,Ne,Ee,s)}})}catch(_e){return{type:"error",error:_e,partialMatches:ce}}finally{we&&!K.aborted&&(l=[...l])}if(K.aborted)return{type:"aborted"};let ve=Po(Ne,U,f);if(ve)return{type:"success",matches:ve};let ye=yh(Ne,U,f,!0);if(!ye||ce.length===ye.length&&ce.every((_e,Me)=>_e.route.id===ye[Me].route.id))return{type:"success",matches:null};ce=ye}}function no(D){a={},h=Dh(D,s,void 0,a)}function Dt(D,U){let K=h==null;tv(D,U,h||l,a,s),K&&(l=[...l],Ot({}))}return fe={get basename(){return f},get future(){return w},get state(){return T},get routes(){return l},get window(){return e},initialize:gt,subscribe:Pr,enableScrollRestoration:ts,navigate:Hr,fetch:Cr,revalidate:Ji,createHref:D=>n.history.createHref(D),encodeLocation:D=>n.history.encodeLocation(D),getFetcher:Dr,deleteFetcher:Ei,dispose:Gt,getBlocker:eo,deleteBlocker:Qr,patchRoutes:Dt,_internalFetchControllers:se,_internalActiveDeferreds:$e,_internalSetRoutes:no},fe}function FA(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function bp(n,e,t,r,s,a,l,h){let f,m;if(l){f=[];for(let w of e)if(f.push(w),w.route.id===l){m=w;break}}else f=e,m=e[e.length-1];let _=sd(s||".",id(f,a),zi(n.pathname,t)||n.pathname,h==="path");if(s==null&&(_.search=n.search,_.hash=n.hash),(s==null||s===""||s===".")&&m){let w=_m(_.search);if(m.route.index&&!w)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&w){let I=new URLSearchParams(_.search),R=I.getAll("index");I.delete("index"),R.filter(V=>V).forEach(V=>I.append("index",V));let F=I.toString();_.search=F?"?"+F:""}}return r&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Bi([t,_.pathname])),Mo(_)}function Y_(n,e,t,r){if(!r||!FA(r))return{path:t};if(r.formMethod&&!JA(r.formMethod))return{path:t,error:Hn(405,{method:r.formMethod})};let s=()=>({path:t,error:Hn(400,{type:"invalid-body"})}),a=r.formMethod||"get",l=n?a.toUpperCase():a.toLowerCase(),h=vE(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!qr(l))return s();let I=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((R,F)=>{let[V,O]=F;return""+R+V+"="+O+`
`},""):String(r.body);return{path:t,submission:{formMethod:l,formAction:h,formEncType:r.formEncType,formData:void 0,json:void 0,text:I}}}else if(r.formEncType==="application/json"){if(!qr(l))return s();try{let I=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:l,formAction:h,formEncType:r.formEncType,formData:void 0,json:I,text:void 0}}}catch{return s()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let f,m;if(r.formData)f=Vp(r.formData),m=r.formData;else if(r.body instanceof FormData)f=Vp(r.body),m=r.body;else if(r.body instanceof URLSearchParams)f=r.body,m=rv(f);else if(r.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(r.body),m=rv(f)}catch{return s()}let _={formMethod:l,formAction:h,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(qr(_.formMethod))return{path:t,submission:_};let w=Gs(t);return e&&w.search&&_m(w.search)&&f.append("index",""),w.search="?"+f,{path:Mo(w),submission:_}}function X_(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function Z_(n,e,t,r,s,a,l,h,f,m,_,w,I,R,F,V){let O=V?lr(V[1])?V[1].error:V[1].data:void 0,ie=n.createURL(e.location),H=n.createURL(s),ee=t;a&&e.errors?ee=X_(t,Object.keys(e.errors)[0],!0):V&&lr(V[1])&&(ee=X_(t,V[0]));let ae=V?V[1].statusCode:void 0,de=l&&ae&&ae>=400,fe=ee.filter((A,P)=>{let{route:x}=A;if(x.lazy)return!0;if(x.loader==null)return!1;if(a)return Np(x,e.loaderData,e.errors);if(UA(e.loaderData,e.matches[P],A)||f.some(C=>C===A.route.id))return!0;let N=e.matches[P],M=A;return ev(A,kt({currentUrl:ie,currentParams:N.params,nextUrl:H,nextParams:M.params},r,{actionResult:O,actionStatus:ae,defaultShouldRevalidate:de?!1:h||ie.pathname+ie.search===H.pathname+H.search||ie.search!==H.search||yE(N,M)}))}),T=[];return w.forEach((A,P)=>{if(a||!t.some(Ye=>Ye.route.id===A.routeId)||_.has(P))return;let x=Po(R,A.path,F);if(!x){T.push({key:P,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(P),M=au(x,A.path),C=!1;I.has(P)?C=!1:m.has(P)?(m.delete(P),C=!0):N&&N.state!=="idle"&&N.data===void 0?C=h:C=ev(M,kt({currentUrl:ie,currentParams:e.matches[e.matches.length-1].params,nextUrl:H,nextParams:t[t.length-1].params},r,{actionResult:O,actionStatus:ae,defaultShouldRevalidate:de?!1:h})),C&&T.push({key:P,routeId:A.routeId,path:A.path,matches:x,match:M,controller:new AbortController})}),[fe,T]}function Np(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function UA(n,e,t){let r=!e||t.route.id!==e.route.id,s=n[t.route.id]===void 0;return r||s}function yE(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function ev(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function tv(n,e,t,r,s){var a;let l;if(n){let m=r[n];Ke(m,"No route found to patch children into: routeId = "+n),m.children||(m.children=[]),l=m.children}else l=t;let h=e.filter(m=>!l.some(_=>_E(m,_))),f=Dh(h,s,[n||"_","patch",String(((a=l)==null?void 0:a.length)||"0")],r);l.push(...f)}function _E(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>_E(t,a))}):!1}async function jA(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];Ke(s,"No route found in manifest");let a={};for(let l in r){let f=s[l]!==void 0&&l!=="hasErrorBoundary";Qa(!f,'Route "'+s.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!f&&!hA.has(l)&&(a[l]=r[l])}Object.assign(s,a),Object.assign(s,kt({},e(s),{lazy:void 0}))}async function BA(n){let{matches:e}=n,t=e.filter(s=>s.shouldLoad);return(await Promise.all(t.map(s=>s.resolve()))).reduce((s,a,l)=>Object.assign(s,{[t[l].route.id]:a}),{})}async function zA(n,e,t,r,s,a,l,h,f,m){let _=a.map(R=>R.route.lazy?jA(R.route,f,h):void 0),w=a.map((R,F)=>{let V=_[F],O=s.some(H=>H.route.id===R.route.id);return kt({},R,{shouldLoad:O,resolve:async H=>(H&&r.method==="GET"&&(R.route.lazy||R.route.loader)&&(O=!0),O?$A(e,r,R,V,H,m):Promise.resolve({type:pt.data,result:void 0}))})}),I=await n({matches:w,request:r,params:a[0].params,fetcherKey:l,context:m});try{await Promise.all(_)}catch{}return I}async function $A(n,e,t,r,s,a){let l,h,f=m=>{let _,w=new Promise((F,V)=>_=V);h=()=>_(),e.signal.addEventListener("abort",h);let I=F=>typeof m!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):m({request:e,params:t.params,context:a},...F!==void 0?[F]:[]),R=(async()=>{try{return{type:"data",result:await(s?s(V=>I(V)):I())}}catch(F){return{type:"error",result:F}}})();return Promise.race([R,w])};try{let m=t.route[n];if(r)if(m){let _,[w]=await Promise.all([f(m).catch(I=>{_=I}),r]);if(_!==void 0)throw _;l=w}else if(await r,m=t.route[n],m)l=await f(m);else if(n==="action"){let _=new URL(e.url),w=_.pathname+_.search;throw Hn(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:pt.data,result:void 0};else if(m)l=await f(m);else{let _=new URL(e.url),w=_.pathname+_.search;throw Hn(404,{pathname:w})}Ke(l.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(m){return{type:pt.error,result:m}}finally{h&&e.signal.removeEventListener("abort",h)}return l}async function qA(n){let{result:e,type:t}=n;if(wE(e)){let w;try{let I=e.headers.get("Content-Type");I&&/\bapplication\/json\b/.test(I)?e.body==null?w=null:w=await e.json():w=await e.text()}catch(I){return{type:pt.error,error:I}}return t===pt.error?{type:pt.error,error:new Nh(e.status,e.statusText,w),statusCode:e.status,headers:e.headers}:{type:pt.data,data:w,statusCode:e.status,headers:e.headers}}if(t===pt.error){if(lv(e)){var r,s;if(e.data instanceof Error){var a,l;return{type:pt.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:pt.error,error:new Nh(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Eu(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:pt.error,error:e,statusCode:Eu(e)?e.status:void 0}}if(QA(e)){var h,f;return{type:pt.deferred,deferredData:e,statusCode:(h=e.init)==null?void 0:h.status,headers:((f=e.init)==null?void 0:f.headers)&&new Headers(e.init.headers)}}if(lv(e)){var m,_;return{type:pt.data,data:e.data,statusCode:(m=e.init)==null?void 0:m.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:pt.data,data:e}}function KA(n,e,t,r,s,a){let l=n.headers.get("Location");if(Ke(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!gm.test(l)){let h=r.slice(0,r.findIndex(f=>f.route.id===t)+1);l=bp(new URL(e.url),h,s,!0,l,a),n.headers.set("Location",l)}return n}function nv(n,e,t){if(gm.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=zi(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return n}function Na(n,e,t,r){let s=n.createURL(vE(e)).toString(),a={signal:t};if(r&&qr(r.formMethod)){let{formMethod:l,formEncType:h}=r;a.method=l.toUpperCase(),h==="application/json"?(a.headers=new Headers({"Content-Type":h}),a.body=JSON.stringify(r.json)):h==="text/plain"?a.body=r.text:h==="application/x-www-form-urlencoded"&&r.formData?a.body=Vp(r.formData):a.body=r.formData}return new Request(s,a)}function Vp(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function rv(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function GA(n,e,t,r,s){let a={},l=null,h,f=!1,m={},_=t&&lr(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let I=w.route.id,R=e[I];if(Ke(!No(R),"Cannot handle redirect results in processLoaderData"),lr(R)){let F=R.error;_!==void 0&&(F=_,_=void 0),l=l||{};{let V=ko(n,I);l[V.route.id]==null&&(l[V.route.id]=F)}a[I]=void 0,f||(f=!0,h=Eu(R.error)?R.error.status:500),R.headers&&(m[I]=R.headers)}else Vs(R)?(r.set(I,R.deferredData),a[I]=R.deferredData.data,R.statusCode!=null&&R.statusCode!==200&&!f&&(h=R.statusCode),R.headers&&(m[I]=R.headers)):(a[I]=R.data,R.statusCode&&R.statusCode!==200&&!f&&(h=R.statusCode),R.headers&&(m[I]=R.headers))}),_!==void 0&&t&&(l={[t[0]]:_},a[t[0]]=void 0),{loaderData:a,errors:l,statusCode:h||200,loaderHeaders:m}}function iv(n,e,t,r,s,a,l){let{loaderData:h,errors:f}=GA(e,t,r,l);return s.forEach(m=>{let{key:_,match:w,controller:I}=m,R=a[_];if(Ke(R,"Did not find corresponding fetcher result"),!(I&&I.signal.aborted))if(lr(R)){let F=ko(n.matches,w?.route.id);f&&f[F.route.id]||(f=kt({},f,{[F.route.id]:R.error})),n.fetchers.delete(_)}else if(No(R))Ke(!1,"Unhandled fetcher revalidation redirect");else if(Vs(R))Ke(!1,"Unhandled fetcher deferred data");else{let F=Cs(R.data);n.fetchers.set(_,F)}}),{loaderData:h,errors:f}}function sv(n,e,t,r){let s=kt({},e);for(let a of t){let l=a.route.id;if(e.hasOwnProperty(l)?e[l]!==void 0&&(s[l]=e[l]):n[l]!==void 0&&a.route.loader&&(s[l]=n[l]),r&&r.hasOwnProperty(l))break}return s}function ov(n){return n?lr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function ko(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function av(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Hn(n,e){let{pathname:t,routeId:r,method:s,type:a,message:l}=e===void 0?{}:e,h="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(h="Bad Request",s&&t&&r?f="You made a "+s+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?f="defer() is not supported in actions":a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(h="Forbidden",f='Route "'+r+'" does not match URL "'+t+'"'):n===404?(h="Not Found",f='No route matches URL "'+t+'"'):n===405&&(h="Method Not Allowed",s&&t&&r?f="You made a "+s.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(f='Invalid request method "'+s.toUpperCase()+'"')),new Nh(n||500,h,new Error(f),!0)}function ah(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(No(s))return{key:r,result:s}}}function vE(n){let e=typeof n=="string"?Gs(n):n;return Mo(kt({},e,{hash:""}))}function WA(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function HA(n){return wE(n.result)&&NA.has(n.result.status)}function Vs(n){return n.type===pt.deferred}function lr(n){return n.type===pt.error}function No(n){return(n&&n.type)===pt.redirect}function lv(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function QA(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function wE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function JA(n){return bA.has(n.toLowerCase())}function qr(n){return xA.has(n.toLowerCase())}async function YA(n,e,t,r,s){let a=Object.entries(e);for(let l=0;l<a.length;l++){let[h,f]=a[l],m=n.find(I=>I?.route.id===h);if(!m)continue;let _=r.find(I=>I.route.id===m.route.id),w=_!=null&&!yE(_,m)&&(s&&s[m.route.id])!==void 0;Vs(f)&&w&&await ym(f,t,!1).then(I=>{I&&(e[h]=I)})}}async function XA(n,e,t){for(let r=0;r<t.length;r++){let{key:s,routeId:a,controller:l}=t[r],h=e[s];n.find(m=>m?.route.id===a)&&Vs(h)&&(Ke(l,"Expected an AbortController for revalidating fetcher deferred result"),await ym(h,l.signal,!0).then(m=>{m&&(e[s]=m)}))}}async function ym(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:pt.data,data:n.deferredData.unwrappedData}}catch(s){return{type:pt.error,error:s}}return{type:pt.data,data:n.deferredData.data}}}function _m(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function au(n,e){let t=typeof e=="string"?Gs(e).search:e.search;if(n[n.length-1].route.index&&_m(t||""))return n[n.length-1];let r=pE(n);return r[r.length-1]}function uv(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:l}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function yp(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ZA(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function eu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function eR(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Cs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function tR(n,e){try{let t=n.sessionStorage.getItem(gE);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function nR(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(gE,JSON.stringify(t))}catch(r){Qa(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vh.apply(this,arguments)}const Uu=X.createContext(null),vm=X.createContext(null),Wi=X.createContext(null),wm=X.createContext(null),_i=X.createContext({outlet:null,matches:[],isDataRoute:!1}),EE=X.createContext(null);function rR(n,e){let{relative:t}=e===void 0?{}:e;hl()||Ke(!1);let{basename:r,navigator:s}=X.useContext(Wi),{hash:a,pathname:l,search:h}=od(n,{relative:t}),f=l;return r!=="/"&&(f=l==="/"?r:Bi([r,l])),s.createHref({pathname:f,search:h,hash:a})}function hl(){return X.useContext(wm)!=null}function Qo(){return hl()||Ke(!1),X.useContext(wm).location}function IE(n){X.useContext(Wi).static||X.useLayoutEffect(n)}function TE(){let{isDataRoute:n}=X.useContext(_i);return n?yR():iR()}function iR(){hl()||Ke(!1);let n=X.useContext(Uu),{basename:e,future:t,navigator:r}=X.useContext(Wi),{matches:s}=X.useContext(_i),{pathname:a}=Qo(),l=JSON.stringify(id(s,t.v7_relativeSplatPath)),h=X.useRef(!1);return IE(()=>{h.current=!0}),X.useCallback(function(m,_){if(_===void 0&&(_={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let w=sd(m,JSON.parse(l),a,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Bi([e,w.pathname])),(_.replace?r.replace:r.push)(w,_.state,_)},[e,r,l,a,n])}const sR=X.createContext(null);function oR(n){let e=X.useContext(_i).outlet;return e&&X.createElement(sR.Provider,{value:n},e)}function v2(){let{matches:n}=X.useContext(_i),e=n[n.length-1];return e?e.params:{}}function od(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=X.useContext(Wi),{matches:s}=X.useContext(_i),{pathname:a}=Qo(),l=JSON.stringify(id(s,r.v7_relativeSplatPath));return X.useMemo(()=>sd(n,JSON.parse(l),a,t==="path"),[n,l,a,t])}function aR(n,e,t,r){hl()||Ke(!1);let{navigator:s}=X.useContext(Wi),{matches:a}=X.useContext(_i),l=a[a.length-1],h=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let m=Qo(),_;_=m;let w=_.pathname||"/",I=w;if(f!=="/"){let V=f.replace(/^\//,"").split("/");I="/"+w.replace(/^\//,"").split("/").slice(V.length).join("/")}let R=Po(n,{pathname:I});return dR(R&&R.map(V=>Object.assign({},V,{params:Object.assign({},h,V.params),pathname:Bi([f,s.encodeLocation?s.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?f:Bi([f,s.encodeLocation?s.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),a,t,r)}function lR(){let n=gR(),e=Eu(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:s},t):null,null)}const uR=X.createElement(lR,null);class cR extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(_i.Provider,{value:this.props.routeContext},X.createElement(EE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hR(n){let{routeContext:e,match:t,children:r}=n,s=X.useContext(Uu);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(_i.Provider,{value:e},r)}function dR(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,h=(s=t)==null?void 0:s.errors;if(h!=null){let _=l.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);_>=0||Ke(!1),l=l.slice(0,Math.min(l.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<l.length;_++){let w=l[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=_),w.route.id){let{loaderData:I,errors:R}=t,F=w.route.loader&&I[w.route.id]===void 0&&(!R||R[w.route.id]===void 0);if(w.route.lazy||F){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((_,w,I)=>{let R,F=!1,V=null,O=null;t&&(R=h&&w.route.id?h[w.route.id]:void 0,V=w.route.errorElement||uR,f&&(m<0&&I===0?(_R("route-fallback"),F=!0,O=null):m===I&&(F=!0,O=w.route.hydrateFallbackElement||null)));let ie=e.concat(l.slice(0,I+1)),H=()=>{let ee;return R?ee=V:F?ee=O:w.route.Component?ee=X.createElement(w.route.Component,null):w.route.element?ee=w.route.element:ee=_,X.createElement(hR,{match:w,routeContext:{outlet:_,matches:ie,isDataRoute:t!=null},children:ee})};return t&&(w.route.ErrorBoundary||w.route.errorElement||I===0)?X.createElement(cR,{location:t.location,revalidation:t.revalidation,component:V,error:R,children:H(),routeContext:{outlet:null,matches:ie,isDataRoute:!0}}):H()},null)}var SE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(SE||{}),AE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(AE||{});function fR(n){let e=X.useContext(Uu);return e||Ke(!1),e}function RE(n){let e=X.useContext(vm);return e||Ke(!1),e}function pR(n){let e=X.useContext(_i);return e||Ke(!1),e}function PE(n){let e=pR(),t=e.matches[e.matches.length-1];return t.route.id||Ke(!1),t.route.id}function mR(){let{matches:n,loaderData:e}=RE();return X.useMemo(()=>n.map(t=>hE(t,e)),[n,e])}function gR(){var n;let e=X.useContext(EE),t=RE(),r=PE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function yR(){let{router:n}=fR(SE.UseNavigateStable),e=PE(AE.UseNavigateStable),t=X.useRef(!1);return IE(()=>{t.current=!0}),X.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Vh({fromRouteId:e},a)))},[n,e])}const cv={};function _R(n,e,t){cv[n]||(cv[n]=!0)}function vR(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function wR(n){let{to:e,replace:t,state:r,relative:s}=n;hl()||Ke(!1);let{future:a,static:l}=X.useContext(Wi),{matches:h}=X.useContext(_i),{pathname:f}=Qo(),m=TE(),_=sd(e,id(h,a.v7_relativeSplatPath),f,s==="path"),w=JSON.stringify(_);return X.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:s}),[m,w,s,t,r]),null}function hv(n){return oR(n.context)}function ER(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Yt.Pop,navigator:a,static:l=!1,future:h}=n;hl()&&Ke(!1);let f=e.replace(/^\/*/,"/"),m=X.useMemo(()=>({basename:f,navigator:a,static:l,future:Vh({v7_relativeSplatPath:!1},h)}),[f,h,a,l]);typeof r=="string"&&(r=Gs(r));let{pathname:_="/",search:w="",hash:I="",state:R=null,key:F="default"}=r,V=X.useMemo(()=>{let O=zi(_,f);return O==null?null:{location:{pathname:O,search:w,hash:I,state:R,key:F},navigationType:s}},[f,_,w,I,R,F,s]);return V==null?null:X.createElement(Wi.Provider,{value:m},X.createElement(wm.Provider,{children:t,value:V}))}new Promise(()=>{});function IR(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:X.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:X.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:X.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ja(){return Ja=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ja.apply(this,arguments)}function kE(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function TR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function SR(n,e){return n.button===0&&(!e||e==="_self")&&!TR(n)}const AR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],PR="6";try{window.__reactRouterVersion=PR}catch{}function kR(n,e){return MA({basename:e?.basename,future:Ja({},e?.future,{v7_prependBasename:!0}),history:lA({window:e?.window}),hydrationData:e?.hydrationData||CR(),routes:n,mapRouteProperties:IR,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function CR(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Ja({},e,{errors:xR(e.errors)})),e}function xR(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new Nh(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let l=new a(s.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}const CE=X.createContext({isTransitioning:!1}),DR=X.createContext(new Map),bR="startTransition",dv=eA[bR],NR="flushSync",fv=aA[NR];function VR(n){dv?dv(n):n()}function tu(n){fv?fv(n):n()}let LR=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function OR(n){let{fallbackElement:e,router:t,future:r}=n,[s,a]=X.useState(t.state),[l,h]=X.useState(),[f,m]=X.useState({isTransitioning:!1}),[_,w]=X.useState(),[I,R]=X.useState(),[F,V]=X.useState(),O=X.useRef(new Map),{v7_startTransition:ie}=r||{},H=X.useCallback(A=>{ie?VR(A):A()},[ie]),ee=X.useCallback((A,P)=>{let{deletedFetchers:x,flushSync:N,viewTransitionOpts:M}=P;A.fetchers.forEach((Ye,Et)=>{Ye.data!==void 0&&O.current.set(Et,Ye.data)}),x.forEach(Ye=>O.current.delete(Ye));let C=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!M||C){N?tu(()=>a(A)):H(()=>a(A));return}if(N){tu(()=>{I&&(_&&_.resolve(),I.skipTransition()),m({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let Ye=t.window.document.startViewTransition(()=>{tu(()=>a(A))});Ye.finished.finally(()=>{tu(()=>{w(void 0),R(void 0),h(void 0),m({isTransitioning:!1})})}),tu(()=>R(Ye));return}I?(_&&_.resolve(),I.skipTransition(),V({state:A,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(h(A),m({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[t.window,I,_,O,H]);X.useLayoutEffect(()=>t.subscribe(ee),[t,ee]),X.useEffect(()=>{f.isTransitioning&&!f.flushSync&&w(new LR)},[f]),X.useEffect(()=>{if(_&&l&&t.window){let A=l,P=_.promise,x=t.window.document.startViewTransition(async()=>{H(()=>a(A)),await P});x.finished.finally(()=>{w(void 0),R(void 0),h(void 0),m({isTransitioning:!1})}),R(x)}},[H,l,_,t.window]),X.useEffect(()=>{_&&l&&s.location.key===l.location.key&&_.resolve()},[_,I,s.location,l]),X.useEffect(()=>{!f.isTransitioning&&F&&(h(F.state),m({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),V(void 0))},[f.isTransitioning,F]),X.useEffect(()=>{},[]);let ae=X.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:A=>t.navigate(A),push:(A,P,x)=>t.navigate(A,{state:P,preventScrollReset:x?.preventScrollReset}),replace:(A,P,x)=>t.navigate(A,{replace:!0,state:P,preventScrollReset:x?.preventScrollReset})}),[t]),de=t.basename||"/",fe=X.useMemo(()=>({router:t,navigator:ae,static:!1,basename:de}),[t,ae,de]),T=X.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return X.useEffect(()=>vR(r,t.future),[r,t.future]),X.createElement(X.Fragment,null,X.createElement(Uu.Provider,{value:fe},X.createElement(vm.Provider,{value:s},X.createElement(DR.Provider,{value:O.current},X.createElement(CE.Provider,{value:f},X.createElement(ER,{basename:de,location:s.location,navigationType:s.historyAction,navigator:ae,future:T},s.initialized||t.future.v7_partialHydration?X.createElement(MR,{routes:t.routes,future:t.future,state:s}):e))))),null)}const MR=X.memo(FR);function FR(n){let{routes:e,future:t,state:r}=n;return aR(e,void 0,r,t)}const UR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xE=X.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:l,state:h,target:f,to:m,preventScrollReset:_,viewTransition:w}=e,I=kE(e,AR),{basename:R}=X.useContext(Wi),F,V=!1;if(typeof m=="string"&&jR.test(m)&&(F=m,UR))try{let ee=new URL(window.location.href),ae=m.startsWith("//")?new URL(ee.protocol+m):new URL(m),de=zi(ae.pathname,R);ae.origin===ee.origin&&de!=null?m=de+ae.search+ae.hash:V=!0}catch{}let O=rR(m,{relative:s}),ie=$R(m,{replace:l,state:h,target:f,preventScrollReset:_,relative:s,viewTransition:w});function H(ee){r&&r(ee),ee.defaultPrevented||ie(ee)}return X.createElement("a",Ja({},I,{href:F||O,onClick:V||a?r:H,ref:t,target:f}))}),BR=X.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:l=!1,style:h,to:f,viewTransition:m,children:_}=e,w=kE(e,RR),I=od(f,{relative:w.relative}),R=Qo(),F=X.useContext(vm),{navigator:V,basename:O}=X.useContext(Wi),ie=F!=null&&qR(I)&&m===!0,H=V.encodeLocation?V.encodeLocation(I).pathname:I.pathname,ee=R.pathname,ae=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;s||(ee=ee.toLowerCase(),ae=ae?ae.toLowerCase():null,H=H.toLowerCase()),ae&&O&&(ae=zi(ae,O)||ae);const de=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let fe=ee===H||!l&&ee.startsWith(H)&&ee.charAt(de)==="/",T=ae!=null&&(ae===H||!l&&ae.startsWith(H)&&ae.charAt(H.length)==="/"),A={isActive:fe,isPending:T,isTransitioning:ie},P=fe?r:void 0,x;typeof a=="function"?x=a(A):x=[a,fe?"active":null,T?"pending":null,ie?"transitioning":null].filter(Boolean).join(" ");let N=typeof h=="function"?h(A):h;return X.createElement(xE,Ja({},w,{"aria-current":P,className:x,ref:t,style:N,to:f,viewTransition:m}),typeof _=="function"?_(A):_)});var Lp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Lp||(Lp={}));var pv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(pv||(pv={}));function zR(n){let e=X.useContext(Uu);return e||Ke(!1),e}function $R(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:l,viewTransition:h}=e===void 0?{}:e,f=TE(),m=Qo(),_=od(n,{relative:l});return X.useCallback(w=>{if(SR(w,t)){w.preventDefault();let I=r!==void 0?r:Mo(m)===Mo(_);f(n,{replace:I,state:s,preventScrollReset:a,relative:l,viewTransition:h})}},[m,f,_,r,s,t,n,a,l,h])}function qR(n,e){e===void 0&&(e={});let t=X.useContext(CE);t==null&&Ke(!1);let{basename:r}=zR(Lp.useViewTransitionState),s=od(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=zi(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=zi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return bh(s.pathname,l)!=null||bh(s.pathname,a)!=null}const KR="modulepreload",GR=function(n){return"/fsae-dashboard/"+n},mv={},Ws=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(_=>Promise.resolve(_).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=l?.nonce||l?.getAttribute("nonce");s=f(t.map(m=>{if(m=GR(m),m in mv)return;mv[m]=!0;const _=m.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const I=document.createElement("link");if(I.rel=_?"stylesheet":KR,_||(I.as="script"),I.crossOrigin="",I.href=m,h&&I.setAttribute("nonce",h),document.head.appendChild(I),_)return new Promise((R,F)=>{I.addEventListener("load",R),I.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return s.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})};var gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},WR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},bE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,h=l?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,w=(a&3)<<4|h>>4;let I=(h&15)<<2|m>>6,R=m&63;f||(R=64,l||(I=64)),r.push(t[_],t[w],t[I],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||m==null||w==null)throw new HR;const I=a<<2|h>>4;if(r.push(I),m!==64){const R=h<<4&240|m>>2;if(r.push(R),w!==64){const F=m<<6&192|w;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QR=function(n){const e=DE(n);return bE.encodeByteArray(e,!0)},NE=function(n){return QR(n).replace(/\./g,"")},VE=function(n){try{return bE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=()=>JR().__FIREBASE_DEFAULTS__,XR=()=>{if(typeof process>"u"||typeof gv>"u")return;const n=gv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VE(n[1]);return e&&JSON.parse(e)},ad=()=>{try{return YR()||XR()||ZR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},LE=n=>{var e,t;return(t=(e=ad())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},eP=n=>{const e=LE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},OE=()=>{var n;return(n=ad())===null||n===void 0?void 0:n.config},ME=n=>{var e;return(e=ad())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function rP(){var n;const e=(n=ad())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aP(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FE(){return!rP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UE(){try{return typeof indexedDB=="object"}catch{return!1}}function lP(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="FirebaseError";class vi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=uP,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?cP(a,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new vi(s,h,r)}}function cP(n,e){return n.replace(hP,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hP=/\{\$([^}]+)}/g;function dP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Iu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(yv(a)&&yv(l)){if(!Iu(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function yv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fP(n,e){const t=new pP(n,e);return t.subscribe.bind(t)}class pP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mP(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=_p),s.error===void 0&&(s.error=_p),s.complete===void 0&&(s.complete=_p);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n){return n&&n._delegate?n._delegate:n}class Bs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_P(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yP(n){return n===Ao?void 0:n}function _P(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(et||(et={}));const wP={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},EP=et.INFO,IP={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},TP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=IP[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Em{constructor(e){this.name=e,this._logLevel=EP,this._logHandler=TP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const SP=(n,e)=>e.some(t=>n instanceof t);let _v,vv;function AP(){return _v||(_v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RP(){return vv||(vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,Op=new WeakMap,BE=new WeakMap,vp=new WeakMap,Im=new WeakMap;function PP(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Os(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&jE.set(t,n)}).catch(()=>{}),Im.set(e,n),e}function kP(n){if(Op.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Op.set(n,e)}let Mp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CP(n){Mp=n(Mp)}function xP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(wp(this),e,...t);return BE.set(r,e.sort?e.sort():[e]),Os(r)}:RP().includes(n)?function(...e){return n.apply(wp(this),e),Os(jE.get(this))}:function(...e){return Os(n.apply(wp(this),e))}}function DP(n){return typeof n=="function"?xP(n):(n instanceof IDBTransaction&&kP(n),SP(n,AP())?new Proxy(n,Mp):n)}function Os(n){if(n instanceof IDBRequest)return PP(n);if(vp.has(n))return vp.get(n);const e=DP(n);return e!==n&&(vp.set(n,e),Im.set(e,n)),e}const wp=n=>Im.get(n);function bP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),h=Os(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Os(l.result),f.oldVersion,f.newVersion,Os(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const NP=["get","getKey","getAll","getAllKeys","count"],VP=["put","add","delete","clear"],Ep=new Map;function wv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=VP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NP.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&f.done]))[0]};return Ep.set(e,a),a}CP(n=>({...n,get:(e,t,r)=>wv(e,t)||n.get(e,t,r),has:(e,t)=>!!wv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function OP(n){const e=n.getComponent();return e?.type==="VERSION"}const Fp="@firebase/app",Ev="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Em("@firebase/app"),MP="@firebase/app-compat",FP="@firebase/analytics-compat",UP="@firebase/analytics",jP="@firebase/app-check-compat",BP="@firebase/app-check",zP="@firebase/auth",$P="@firebase/auth-compat",qP="@firebase/database",KP="@firebase/data-connect",GP="@firebase/database-compat",WP="@firebase/functions",HP="@firebase/functions-compat",QP="@firebase/installations",JP="@firebase/installations-compat",YP="@firebase/messaging",XP="@firebase/messaging-compat",ZP="@firebase/performance",ek="@firebase/performance-compat",tk="@firebase/remote-config",nk="@firebase/remote-config-compat",rk="@firebase/storage",ik="@firebase/storage-compat",sk="@firebase/firestore",ok="@firebase/vertexai-preview",ak="@firebase/firestore-compat",lk="firebase",uk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="[DEFAULT]",ck={[Fp]:"fire-core",[MP]:"fire-core-compat",[UP]:"fire-analytics",[FP]:"fire-analytics-compat",[BP]:"fire-app-check",[jP]:"fire-app-check-compat",[zP]:"fire-auth",[$P]:"fire-auth-compat",[qP]:"fire-rtdb",[KP]:"fire-data-connect",[GP]:"fire-rtdb-compat",[WP]:"fire-fn",[HP]:"fire-fn-compat",[QP]:"fire-iid",[JP]:"fire-iid-compat",[YP]:"fire-fcm",[XP]:"fire-fcm-compat",[ZP]:"fire-perf",[ek]:"fire-perf-compat",[tk]:"fire-rc",[nk]:"fire-rc-compat",[rk]:"fire-gcs",[ik]:"fire-gcs-compat",[sk]:"fire-fst",[ak]:"fire-fst-compat",[ok]:"fire-vertex","fire-js":"fire-js",[lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Map,hk=new Map,jp=new Map;function Iv(n,e){try{n.container.addComponent(e)}catch(t){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fo(n){const e=n.name;if(jp.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,n);for(const t of Tu.values())Iv(t,n);for(const t of hk.values())Iv(t,n);return!0}function ld(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ci(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new ju("app","Firebase",dk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=uk;function zE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Up,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ms.create("bad-app-name",{appName:String(s)});if(t||(t=OE()),!t)throw Ms.create("no-options");const a=Tu.get(s);if(a){if(Iu(t,a.options)&&Iu(r,a.config))return a;throw Ms.create("duplicate-app",{appName:s})}const l=new vP(s);for(const f of jp.values())l.addComponent(f);const h=new fk(t,r,l);return Tu.set(s,h),h}function Tm(n=Up){const e=Tu.get(n);if(!e&&n===Up&&OE())return zE();if(!e)throw Ms.create("no-app",{appName:n});return e}function pk(){return Array.from(Tu.values())}function fi(n,e,t){var r;let s=(r=ck[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(h.join(" "));return}Fo(new Bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="firebase-heartbeat-database",gk=1,Su="firebase-heartbeat-store";let Ip=null;function $E(){return Ip||(Ip=bP(mk,gk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Su)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ms.create("idb-open",{originalErrorMessage:n.message})})),Ip}async function yk(n){try{const t=(await $E()).transaction(Su),r=await t.objectStore(Su).get(qE(n));return await t.done,r}catch(e){if(e instanceof vi)$i.warn(e.message);else{const t=Ms.create("idb-get",{originalErrorMessage:e?.message});$i.warn(t.message)}}}async function Tv(n,e){try{const r=(await $E()).transaction(Su,"readwrite");await r.objectStore(Su).put(e,qE(n)),await r.done}catch(t){if(t instanceof vi)$i.warn(t.message);else{const r=Ms.create("idb-set",{originalErrorMessage:t?.message});$i.warn(r.message)}}}function qE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=1024,vk=720*60*60*1e3;class wk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ik(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Sv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=vk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Sv(),{heartbeatsToSend:r,unsentEntries:s}=Ek(this._heartbeatsCache.heartbeats),a=NE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return $i.warn(t),""}}}function Sv(){return new Date().toISOString().substring(0,10)}function Ek(n,e=_k){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),Av(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Av(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Ik{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UE()?lP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Av(n){return NE(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(n){Fo(new Bs("platform-logger",e=>new LP(e),"PRIVATE")),Fo(new Bs("heartbeat",e=>new wk(e),"PRIVATE")),fi(Fp,Ev,n),fi(Fp,Ev,"esm2017"),fi("fire-js","")}Tk("");var Rv=function(){return Rv=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Rv.apply(this,arguments)};function Sm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function E2(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function KE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sk=KE,GE=new ju("auth","Firebase",KE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Em("@firebase/auth");function Ak(n,...e){Lh.logLevel<=et.WARN&&Lh.warn(`Auth (${dl}): ${n}`,...e)}function _h(n,...e){Lh.logLevel<=et.ERROR&&Lh.error(`Auth (${dl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(n,...e){throw Rm(n,...e)}function Wr(n,...e){return Rm(n,...e)}function Am(n,e,t){const r=Object.assign(Object.assign({},Sk()),{[e]:t});return new ju("auth","Firebase",r).create(e,{appName:n.name})}function Fs(n){return Am(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rk(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&gi(n,"argument-error"),Am(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return GE.create(n,...e)}function je(n,e,...t){if(!n)throw Rm(e,...t)}function Mi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _h(e),new Error(e)}function qi(n,e){n||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Pk(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pk()||sP()||"connection"in navigator)?navigator.onLine:!0}function Ck(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t){this.shortDelay=e,this.longDelay=t,qi(t>e,"Short delay should be less than long delay!"),this.isMobile=nP()||oP()}get(){return kk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n,e){qi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new zu(3e4,6e4);function ud(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function fl(n,e,t,r,s={}){return HE(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Bu(Object.assign({key:n.config.apiKey},l)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return iP()||(m.referrerPolicy="no-referrer"),WE.fetch()(JE(n,n.config.apiHost,t,h),m)})}async function HE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},xk),e);try{const s=new bk(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw lh(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw lh(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw lh(n,"user-disabled",l);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Am(n,_,m);gi(n,_)}}catch(s){if(s instanceof vi)throw s;gi(n,"network-request-failed",{message:String(s)})}}async function QE(n,e,t,r,s={}){const a=await fl(n,e,t,r,s);return"mfaPendingCredential"in a&&gi(n,"multi-factor-auth-required",{_serverResponse:a}),a}function JE(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Pm(n.config,s):`${n.config.apiScheme}://${s}`}class bk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Wr(this.auth,"network-request-failed")),Dk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Wr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(n,e){return fl(n,"POST","/v1/accounts:delete",e)}async function YE(n,e){return fl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vk(n,e=!1){const t=qt(n),r=await t.getIdToken(e),s=km(r);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:r,authTime:fu(Tp(s.auth_time)),issuedAtTime:fu(Tp(s.iat)),expirationTime:fu(Tp(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Tp(n){return Number(n)*1e3}function km(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const s=VE(t);return s?JSON.parse(s):(_h("Failed to decode base64 JWT payload"),null)}catch(s){return _h("Caught error parsing JWT payload as JSON",s?.toString()),null}}function kv(n){const e=km(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof vi&&Lk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Lk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Au(n,YE(t,{idToken:r}));je(s?.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?XE(a.providerUserInfo):[],h=Fk(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!h?.length,_=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new zp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function Mk(n){const e=qt(n);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fk(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function XE(n){return n.map(e=>{var{providerId:t}=e,r=Sm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(n,e){const t=await HE(n,{},async()=>{const r=Bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=JE(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",WE.fetch()(l,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jk(n,e){return fl(n,"POST","/v2/accounts:revokeToken",ud(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=kv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await Uk(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new $a;return r&&(je(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(je(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fi{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Sm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ok(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Au(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Vk(this,e)}reload(){return Mk(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(Fs(this.auth));const e=await this.getIdToken();return await Au(this,Nk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,l,h,f,m,_;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(s=t.email)!==null&&s!==void 0?s:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,F=(l=t.photoURL)!==null&&l!==void 0?l:void 0,V=(h=t.tenantId)!==null&&h!==void 0?h:void 0,O=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,ie=(m=t.createdAt)!==null&&m!==void 0?m:void 0,H=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ee,emailVerified:ae,isAnonymous:de,providerData:fe,stsTokenManager:T}=t;je(ee&&T,e,"internal-error");const A=$a.fromJSON(this.name,T);je(typeof ee=="string",e,"internal-error"),As(w,e.name),As(I,e.name),je(typeof ae=="boolean",e,"internal-error"),je(typeof de=="boolean",e,"internal-error"),As(R,e.name),As(F,e.name),As(V,e.name),As(O,e.name),As(ie,e.name),As(H,e.name);const P=new Fi({uid:ee,auth:e,email:I,emailVerified:ae,displayName:w,isAnonymous:de,photoURL:F,phoneNumber:R,tenantId:V,stsTokenManager:A,createdAt:ie,lastLoginAt:H});return fe&&Array.isArray(fe)&&(P.providerData=fe.map(x=>Object.assign({},x))),O&&(P._redirectEventId=O),P}static async _fromIdTokenResponse(e,t,r=!1){const s=new $a;s.updateFromServerResponse(t);const a=new Fi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Oh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];je(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?XE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,h=new $a;h.updateFromIdToken(r);const f=new Fi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;function Ui(n){qi(n instanceof Function,"Expected a class definition");let e=Cv.get(n);return e?(qi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Cv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ZE.type="NONE";const xv=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(n,e,t){return`firebase:${n}:${e}:${t}`}class qa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=vh(this.userKey,s.apiKey,a),this.fullPersistenceKey=vh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new qa(Ui(xv),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Ui(xv);const l=vh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(l);if(_){const w=Fi._fromJSON(e,_);m!==a&&(h=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new qa(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new qa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(s0(e))return"Blackberry";if(o0(e))return"Webos";if(t0(e))return"Safari";if((e.includes("chrome/")||n0(e))&&!e.includes("edge/"))return"Chrome";if(i0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function e0(n=nn()){return/firefox\//i.test(n)}function t0(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n0(n=nn()){return/crios\//i.test(n)}function r0(n=nn()){return/iemobile/i.test(n)}function i0(n=nn()){return/android/i.test(n)}function s0(n=nn()){return/blackberry/i.test(n)}function o0(n=nn()){return/webos/i.test(n)}function Cm(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Bk(n=nn()){var e;return Cm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zk(){return aP()&&document.documentMode===10}function a0(n=nn()){return Cm(n)||i0(n)||o0(n)||s0(n)||/windows phone/i.test(n)||r0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(n,e=[]){let t;switch(n){case"Browser":t=Dv(nn());break;case"Worker":t=`${Dv(nn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(n,e={}){return fl(n,"GET","/v2/passwordPolicy",ud(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=6;class Gk{constructor(e){var t,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:Kk,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,l,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bv(this),this.idTokenSubscription=new bv(this),this.beforeStateQueue=new $k(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await YE(this,{idToken:e}),r=await Fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ci(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ck()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(Fs(this));const t=e?qt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(Fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(Fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qk(this),t=new Gk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await jk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ui(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[Ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Ak(`Error while retrieving App Check token: ${t.error}`),t?.token}}function $u(n){return qt(n)}class bv{constructor(e){this.auth=e,this.observer=null,this.addObserver=fP(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hk(n){xm=n}function Qk(n){return xm.loadJS(n)}function Jk(){return xm.gapiScript}function Yk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(n,e){const t=ld(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Iu(a,e??{}))return s;gi(s,"already-initialized")}return t.initialize({options:e})}function Zk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ui);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function eC(n,e,t){const r=$u(n);je(r._canInitEmulator,r,"emulator-config-failed"),je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=u0(e),{host:l,port:h}=tC(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${l}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),nC()}function u0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tC(n){const e=u0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Nv(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Nv(l)}}}function Nv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,t){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n,e){return QE(n,"POST","/v1/accounts:signInWithIdp",ud(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="http://localhost";class Uo extends c0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Sm(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Uo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ka(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ka(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ka(e,t)}buildRequest(){const e={requestUri:rC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends Dm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends qu{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Uo._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Oi.credential(t,r)}catch{return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com";Oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends qu{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends qu{constructor(){super("twitter.com")}static credential(e,t){return Uo._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bs.credential(t,r)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Fi._fromIdTokenResponse(e,r,s),l=Vv(r);return new jo({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Vv(r);return new jo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Vv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends vi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Mh(e,t,r,s)}}function h0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(n,a,e,r):a})}async function iC(n,e,t=!1){const r=await Au(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return jo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(n,e,t=!1){const{auth:r}=n;if(ci(r.app))return Promise.reject(Fs(r));const s="reauthenticate";try{const a=await Au(n,h0(r,s,e,n),t);je(a.idToken,r,"internal-error");const l=km(a.idToken);je(l,r,"internal-error");const{sub:h}=l;return je(n.uid===h,r,"user-mismatch"),jo._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&gi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(n,e,t=!1){if(ci(n.app))return Promise.reject(Fs(n));const r="signIn",s=await h0(n,r,e),a=await jo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(n,e){return QE(n,"POST","/v1/accounts:signInWithCustomToken",ud(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(n,e){if(ci(n.app))return Promise.reject(Fs(n));const t=$u(n),r=await aC(t,{token:e,returnSecureToken:!0}),s=await jo._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(s.user),s}function uC(n,e,t,r){return qt(n).onIdTokenChanged(e,t,r)}function cC(n,e,t){return qt(n).beforeAuthStateChanged(e,t)}function d0(n,e,t,r){return qt(n).onAuthStateChanged(e,t,r)}function hC(n){return qt(n).signOut()}const Fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fh,"1"),this.storage.removeItem(Fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=1e3,fC=10;class p0 extends f0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);zk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fC):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}p0.type="LOCAL";const pC=p0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends f0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}m0.type="SESSION";const g0=m0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async m=>m(t.origin,a)),f=await mC(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const m=bm("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const I=w;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(I.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function yC(n){pi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function _C(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function wC(){return y0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="firebaseLocalStorageDb",EC=1,Uh="firebaseLocalStorage",v0="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hd(n,e){return n.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function IC(){const n=indexedDB.deleteDatabase(_0);return new Ku(n).toPromise()}function $p(){const n=indexedDB.open(_0,EC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Uh,{keyPath:v0})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Uh)?e(r):(r.close(),await IC(),e(await $p()))})})}async function Lv(n,e,t){const r=hd(n,!0).put({[v0]:e,value:t});return new Ku(r).toPromise()}async function TC(n,e){const t=hd(n,!1).get(e),r=await new Ku(t).toPromise();return r===void 0?null:r.value}function Ov(n,e){const t=hd(n,!0).delete(e);return new Ku(t).toPromise()}const SC=800,AC=3;class w0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $p(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(wC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _C(),!this.activeServiceWorker)return;this.sender=new gC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $p();return await Lv(e,Fh,"1"),await Ov(e,Fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Lv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>TC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ov(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=hd(s,!1).getAll();return new Ku(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w0.type="LOCAL";const RC=w0;new zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n,e){return e?Ui(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends c0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PC(n){return oC(n.auth,new Nm(n),n.bypassAuthState)}function kC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),sC(t,new Nm(n),n.bypassAuthState)}async function CC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),iC(t,new Nm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PC;case"linkViaPopup":case"linkViaRedirect":return CC;case"reauthViaPopup":case"reauthViaRedirect":return kC;default:gi(this.auth,"internal-error")}}resolve(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new zu(2e3,1e4);async function DC(n,e,t){if(ci(n.app))return Promise.reject(Wr(n,"operation-not-supported-in-this-environment"));const r=$u(n);Rk(n,e,Dm);const s=E0(r,t);return new Vo(r,"signInViaPopup",e,s).executeNotNull()}class Vo extends I0{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){qi(this.filter.length===1,"Popup operations only handle one event");const e=bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xC.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="pendingRedirect",wh=new Map;class NC extends I0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=wh.get(this.auth._key());if(!e){try{const r=await VC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}wh.set(this.auth._key(),e)}return this.bypassAuthState||wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VC(n,e){const t=MC(e),r=OC(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function LC(n,e){wh.set(n._key(),e)}function OC(n){return Ui(n._redirectPersistence)}function MC(n){return vh(bC,n.config.apiKey,n.name)}async function FC(n,e,t=!1){if(ci(n.app))return Promise.reject(Fs(n));const r=$u(n),s=E0(r,e),l=await new NC(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=600*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!T0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Wr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function T0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function BC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(n,e={}){return fl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qC=/^https?/;async function KC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zC(n);for(const t of e)try{if(GC(t))return}catch{}gi(n,"unauthorized-domain")}function GC(n){const e=Bp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!qC.test(t))return!1;if($C.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new zu(3e4,6e4);function Fv(){const n=pi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function HC(n){return new Promise((e,t)=>{var r,s,a;function l(){Fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fv(),t(Wr(n,"network-request-failed"))},timeout:WC.get()})}if(!((s=(r=pi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=pi().gapi)===null||a===void 0)&&a.load)l();else{const h=Yk("iframefcb");return pi()[h]=()=>{gapi.load?l():t(Wr(n,"network-request-failed"))},Qk(`${Jk()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function QC(n){return Eh=Eh||HC(n),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new zu(5e3,15e3),YC="__/auth/iframe",XC="emulator/auth/iframe",ZC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t1(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Pm(e,XC):`https://${n.config.authDomain}/${YC}`,r={apiKey:e.apiKey,appName:n.name,v:dl},s=e1.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Bu(r).slice(1)}`}async function n1(n){const e=await QC(n),t=pi().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:t1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZC,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=Wr(n,"network-request-failed"),h=pi().setTimeout(()=>{a(l)},JC.get());function f(){pi().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i1=500,s1=600,o1="_blank",a1="http://localhost";class Uv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l1(n,e,t,r=i1,s=s1){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},r1),{width:r.toString(),height:s.toString(),top:a,left:l}),m=nn().toLowerCase();t&&(h=n0(m)?o1:t),e0(m)&&(e=e||a1,f.scrollbars="yes");const _=Object.entries(f).reduce((I,[R,F])=>`${I}${R}=${F},`,"");if(Bk(m)&&h!=="_self")return u1(e||"",h),new Uv(null);const w=window.open(e||"",h,_);je(w,n,"popup-blocked");try{w.focus()}catch{}return new Uv(w)}function u1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="__/auth/handler",h1="emulator/auth/handler",d1=encodeURIComponent("fac");async function jv(n,e,t,r,s,a){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:dl,eventId:s};if(e instanceof Dm){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",dP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))l[_]=w}if(e instanceof qu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(l.scopes=_.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),m=f?`#${d1}=${encodeURIComponent(f)}`:"";return`${f1(n)}?${Bu(h).slice(1)}${m}`}function f1({config:n}){return n.emulator?Pm(n,h1):`https://${n.authDomain}/${c1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="webStorageSupport";class p1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g0,this._completeRedirectFn=FC,this._overrideRedirectResult=LC}async _openPopup(e,t,r,s){var a;qi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await jv(e,t,r,Bp(),s);return l1(e,l,bm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await jv(e,t,r,Bp(),s);return yC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(qi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await n1(e),r=new jC(e);return t.register("authEvent",s=>(je(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sp,{type:Sp},s=>{var a;const l=(a=s?.[0])===null||a===void 0?void 0:a[Sp];l!==void 0&&t(!!l),gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return a0()||t0()||Cm()}}const m1=p1;var Bv="@firebase/auth",zv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _1(n){Fo(new Bs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;je(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l0(n)},m=new Wk(r,s,a,f);return Zk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fo(new Bs("auth-internal",e=>{const t=$u(e.getProvider("auth").getImmediate());return(r=>new g1(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(Bv,zv,y1(n)),fi(Bv,zv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=300,w1=ME("authIdTokenMaxAge")||v1;let $v=null;const E1=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>w1)return;const s=t?.token;$v!==s&&($v=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function S0(n=Tm()){const e=ld(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Xk(n,{popupRedirectResolver:m1,persistence:[RC,pC,g0]}),r=ME("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=E1(a.toString());cC(t,l,()=>l(t.currentUser)),uC(t,h=>l(h))}}const s=LE("auth");return s&&eC(t,`http://${s}`),t}function I1(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Hk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Wr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",I1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_1("Browser");var T1="firebase",S1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(T1,S1,"app");var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lo,A0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,A){function P(){}P.prototype=A.prototype,T.D=A.prototype,T.prototype=new P,T.prototype.constructor=T,T.C=function(x,N,M){for(var C=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)C[Ye-2]=arguments[Ye];return A.prototype[N].apply(x,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,A,P){P||(P=0);var x=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)x[N]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(N=0;16>N;++N)x[N]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=T.g[0],P=T.g[1],N=T.g[2];var M=T.g[3],C=A+(M^P&(N^M))+x[0]+3614090360&4294967295;A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+x[1]+3905402710&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+x[2]+606105819&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+x[3]+3250441966&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(M^P&(N^M))+x[4]+4118548399&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+x[5]+1200080426&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+x[6]+2821735955&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+x[7]+4249261313&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(M^P&(N^M))+x[8]+1770035416&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+x[9]+2336552879&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+x[10]+4294925233&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+x[11]+2304563134&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(M^P&(N^M))+x[12]+1804603682&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+x[13]+4254626195&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+x[14]+2792965006&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+x[15]+1236535329&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(N^M&(P^N))+x[1]+4129170786&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+x[6]+3225465664&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+x[11]+643717713&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+x[0]+3921069994&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(N^M&(P^N))+x[5]+3593408605&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+x[10]+38016083&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+x[15]+3634488961&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+x[4]+3889429448&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(N^M&(P^N))+x[9]+568446438&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+x[14]+3275163606&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+x[3]+4107603335&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+x[8]+1163531501&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(N^M&(P^N))+x[13]+2850285829&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+x[2]+4243563512&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+x[7]+1735328473&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+x[12]+2368359562&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(P^N^M)+x[5]+4294588738&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+x[8]+2272392833&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+x[11]+1839030562&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+x[14]+4259657740&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(P^N^M)+x[1]+2763975236&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+x[4]+1272893353&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+x[7]+4139469664&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+x[10]+3200236656&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(P^N^M)+x[13]+681279174&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+x[0]+3936430074&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+x[3]+3572445317&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+x[6]+76029189&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(P^N^M)+x[9]+3654602809&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+x[12]+3873151461&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+x[15]+530742520&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+x[2]+3299628645&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(N^(P|~M))+x[0]+4096336452&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+x[7]+1126891415&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+x[14]+2878612391&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+x[5]+4237533241&4294967295,P=N+(C<<21&4294967295|C>>>11),C=A+(N^(P|~M))+x[12]+1700485571&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+x[3]+2399980690&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+x[10]+4293915773&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+x[1]+2240044497&4294967295,P=N+(C<<21&4294967295|C>>>11),C=A+(N^(P|~M))+x[8]+1873313359&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+x[15]+4264355552&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+x[6]+2734768916&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+x[13]+1309151649&4294967295,P=N+(C<<21&4294967295|C>>>11),C=A+(N^(P|~M))+x[4]+4149444226&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+x[11]+3174756917&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+x[2]+718787259&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var P=A-this.blockSize,x=this.B,N=this.h,M=0;M<A;){if(N==0)for(;M<=P;)s(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<A;)if(x[N++]=T.charCodeAt(M++),N==this.blockSize){s(this,x),N=0;break}}else for(;M<A;)if(x[N++]=T[M++],N==this.blockSize){s(this,x),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var P=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=P&255,P/=256;for(this.u(T),T=Array(16),A=P=0;4>A;++A)for(var x=0;32>x;x+=8)T[P++]=this.g[A]>>>x&255;return T};function a(T,A){var P=h;return Object.prototype.hasOwnProperty.call(P,T)?P[T]:P[T]=A(T)}function l(T,A){this.h=A;for(var P=[],x=!0,N=T.length-1;0<=N;N--){var M=T[N]|0;x&&M==A||(P[N]=M,x=!1)}this.g=P}var h={};function f(T){return-128<=T&&128>T?a(T,function(A){return new l([A|0],0>A?-1:0)}):new l([T|0],0>T?-1:0)}function m(T){if(isNaN(T)||!isFinite(T))return w;if(0>T)return O(m(-T));for(var A=[],P=1,x=0;T>=P;x++)A[x]=T/P|0,P*=4294967296;return new l(A,0)}function _(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return O(_(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(A,8)),x=w,N=0;N<T.length;N+=8){var M=Math.min(8,T.length-N),C=parseInt(T.substring(N,N+M),A);8>M?(M=m(Math.pow(A,M)),x=x.j(M).add(m(C))):(x=x.j(P),x=x.add(m(C)))}return x}var w=f(0),I=f(1),R=f(16777216);n=l.prototype,n.m=function(){if(V(this))return-O(this).m();for(var T=0,A=1,P=0;P<this.g.length;P++){var x=this.i(P);T+=(0<=x?x:4294967296+x)*A,A*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(F(this))return"0";if(V(this))return"-"+O(this).toString(T);for(var A=m(Math.pow(T,6)),P=this,x="";;){var N=ae(P,A).g;P=ie(P,N.j(A));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(T);if(P=N,F(P))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function F(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function V(T){return T.h==-1}n.l=function(T){return T=ie(this,T),V(T)?-1:F(T)?0:1};function O(T){for(var A=T.g.length,P=[],x=0;x<A;x++)P[x]=~T.g[x];return new l(P,~T.h).add(I)}n.abs=function(){return V(this)?O(this):this},n.add=function(T){for(var A=Math.max(this.g.length,T.g.length),P=[],x=0,N=0;N<=A;N++){var M=x+(this.i(N)&65535)+(T.i(N)&65535),C=(M>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);x=C>>>16,M&=65535,C&=65535,P[N]=C<<16|M}return new l(P,P[P.length-1]&-2147483648?-1:0)};function ie(T,A){return T.add(O(A))}n.j=function(T){if(F(this)||F(T))return w;if(V(this))return V(T)?O(this).j(O(T)):O(O(this).j(T));if(V(T))return O(this.j(O(T)));if(0>this.l(R)&&0>T.l(R))return m(this.m()*T.m());for(var A=this.g.length+T.g.length,P=[],x=0;x<2*A;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<T.g.length;N++){var M=this.i(x)>>>16,C=this.i(x)&65535,Ye=T.i(N)>>>16,Et=T.i(N)&65535;P[2*x+2*N]+=C*Et,H(P,2*x+2*N),P[2*x+2*N+1]+=M*Et,H(P,2*x+2*N+1),P[2*x+2*N+1]+=C*Ye,H(P,2*x+2*N+1),P[2*x+2*N+2]+=M*Ye,H(P,2*x+2*N+2)}for(x=0;x<A;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=A;x<2*A;x++)P[x]=0;return new l(P,0)};function H(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function ee(T,A){this.g=T,this.h=A}function ae(T,A){if(F(A))throw Error("division by zero");if(F(T))return new ee(w,w);if(V(T))return A=ae(O(T),A),new ee(O(A.g),O(A.h));if(V(A))return A=ae(T,O(A)),new ee(O(A.g),A.h);if(30<T.g.length){if(V(T)||V(A))throw Error("slowDivide_ only works with positive integers.");for(var P=I,x=A;0>=x.l(T);)P=de(P),x=de(x);var N=fe(P,1),M=fe(x,1);for(x=fe(x,2),P=fe(P,2);!F(x);){var C=M.add(x);0>=C.l(T)&&(N=N.add(P),M=C),x=fe(x,1),P=fe(P,1)}return A=ie(T,N.j(A)),new ee(N,A)}for(N=w;0<=T.l(A);){for(P=Math.max(1,Math.floor(T.m()/A.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=m(P),C=M.j(A);V(C)||0<C.l(T);)P-=x,M=m(P),C=M.j(A);F(M)&&(M=I),N=N.add(M),T=ie(T,C)}return new ee(N,T)}n.A=function(T){return ae(this,T).h},n.and=function(T){for(var A=Math.max(this.g.length,T.g.length),P=[],x=0;x<A;x++)P[x]=this.i(x)&T.i(x);return new l(P,this.h&T.h)},n.or=function(T){for(var A=Math.max(this.g.length,T.g.length),P=[],x=0;x<A;x++)P[x]=this.i(x)|T.i(x);return new l(P,this.h|T.h)},n.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),P=[],x=0;x<A;x++)P[x]=this.i(x)^T.i(x);return new l(P,this.h^T.h)};function de(T){for(var A=T.g.length+1,P=[],x=0;x<A;x++)P[x]=T.i(x)<<1|T.i(x-1)>>>31;return new l(P,T.h)}function fe(T,A){var P=A>>5;A%=32;for(var x=T.g.length-P,N=[],M=0;M<x;M++)N[M]=0<A?T.i(M+P)>>>A|T.i(M+P+1)<<32-A:T.i(M+P);return new l(N,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,A0=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=_,Lo=l}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R0,lu,P0,Ih,qp,k0,C0,x0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var B=c[S];if(!(B in v))break e;v=v[B]}c=c[c.length-1],S=v[c],g=g(S),g!=S&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var v=0,S=!1,B={next:function(){if(!S&&v<c.length){var W=v++;return{value:g(W,c[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,v){return c.call.apply(c.bind,arguments)}function w(c,g,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function I(c,g,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,I.apply(null,arguments)}function R(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function F(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,B,W){for(var ue=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)ue[ft-2]=arguments[ft];return g.prototype[B].apply(S,ue)}}function V(c){const g=c.length;if(0<g){const v=Array(g);for(let S=0;S<g;S++)v[S]=c[S];return v}return[]}function O(c,g){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(f(S)){const B=c.length||0,W=S.length||0;c.length=B+W;for(let ue=0;ue<W;ue++)c[B+ue]=S[ue]}else c.push(S)}}class ie{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function H(c){return/^[\s\xa0]*$/.test(c)}function ee(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function ae(c){return ae[" "](c),c}ae[" "]=function(){};var de=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function fe(c,g,v){for(const S in c)g.call(v,c[S],S,c)}function T(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function A(c){const g={};for(const v in c)g[v]=c[v];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)c[v]=S[v];for(let W=0;W<P.length;W++)v=P[W],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function N(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function M(c){h.setTimeout(()=>{throw c},0)}function C(){var c=xe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ye{constructor(){this.h=this.g=null}add(g,v){const S=Et.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Et=new ie(()=>new Bt,c=>c.reset());class Bt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,se=!1,xe=new Ye,me=()=>{const c=h.Promise.resolve(void 0);ot=()=>{c.then(j)}};var j=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){M(v)}var g=Et;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}se=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Be=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,g),h.removeEventListener("test",v,g)}catch{}return c})();function Oe(c,g){if(Se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(de){e:{try{ae(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:$e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Oe.aa.h.call(this)}}F(Oe,Se);var $e={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function gt(c,g,v,S,B){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=B,this.key=++Xe,this.da=this.fa=!1}function Gt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pr(c){this.src=c,this.g={},this.h=0}Pr.prototype.add=function(c,g,v,S,B){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ue=Cn(c,g,S,B);return-1<ue?(g=c[ue],v||(g.fa=!1)):(g=new gt(g,this.src,W,!!S,B),g.fa=v,c.push(g)),g};function Ot(c,g){var v=g.type;if(v in c.g){var S=c.g[v],B=Array.prototype.indexOf.call(S,g,void 0),W;(W=0<=B)&&Array.prototype.splice.call(S,B,1),W&&(Gt(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Cn(c,g,v,S){for(var B=0;B<c.length;++B){var W=c[B];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==S)return B}return-1}var Hr="closure_lm_"+(1e6*Math.random()|0),Ji={};function Xn(c,g,v,S,B){if(Array.isArray(g)){for(var W=0;W<g.length;W++)Xn(c,g[W],v,S,B);return null}return v=xr(v),c&&c[qe]?c.K(g,v,m(S)?!!S.capture:!1,B):Xs(c,g,v,!1,S,B)}function Xs(c,g,v,S,B,W){if(!g)throw Error("Invalid event type");var ue=m(B)?!!B.capture:!!B,ft=Yi(c);if(ft||(c[Hr]=ft=new Pr(c)),v=ft.add(g,v,S,ue,W),v.proxy)return v;if(S=Xo(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)Be||(B=ue),B===void 0&&(B=!1),c.addEventListener(g.toString(),S,B);else if(c.attachEvent)c.attachEvent(Cr(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Xo(){function c(v){return g.call(c.src,c.listener,v)}const g=Zs;return c}function wi(c,g,v,S,B){if(Array.isArray(g))for(var W=0;W<g.length;W++)wi(c,g[W],v,S,B);else S=m(S)?!!S.capture:!!S,v=xr(v),c&&c[qe]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],v=Cn(W,v,S,B),-1<v&&(Gt(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=Yi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Cn(g,v,S,B)),(v=-1<c?g[c]:null)&&kr(v))}function kr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[qe])Ot(g.i,c);else{var v=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(v,S,c.capture):g.detachEvent?g.detachEvent(Cr(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=Yi(g))?(Ot(v,c),v.h==0&&(v.src=null,g[Hr]=null)):Gt(c)}}}function Cr(c){return c in Ji?Ji[c]:Ji[c]="on"+c}function Zs(c,g){if(c.da)c=!0;else{g=new Oe(g,this);var v=c.listener,S=c.ha||c.src;c.fa&&kr(c),c=v.call(S,g)}return c}function Yi(c){return c=c[Hr],c instanceof Pr?c:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function xr(c){return typeof c=="function"?c:(c[On]||(c[On]=function(g){return c.handleEvent(g)}),c[On])}function Mt(){Y.call(this),this.i=new Pr(this),this.M=this,this.F=null}F(Mt,Y),Mt.prototype[qe]=!0,Mt.prototype.removeEventListener=function(c,g,v,S){wi(this,c,g,v,S)};function xt(c,g){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new Se(g,c);else if(g instanceof Se)g.target=g.target||c;else{var B=g;g=new Se(S,c),x(g,B)}if(B=!0,v)for(var W=v.length-1;0<=W;W--){var ue=g.g=v[W];B=on(ue,S,!0,g)&&B}if(ue=g.g=c,B=on(ue,S,!0,g)&&B,B=on(ue,S,!1,g)&&B,v)for(W=0;W<v.length;W++)ue=g.g=v[W],B=on(ue,S,!1,g)&&B}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],S=0;S<v.length;S++)Gt(v[S]);delete c.g[g],c.h--}}this.F=null},Mt.prototype.K=function(c,g,v,S){return this.i.add(String(c),g,!1,v,S)},Mt.prototype.L=function(c,g,v,S){return this.i.add(String(c),g,!0,v,S)};function on(c,g,v,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,W=0;W<g.length;++W){var ue=g[W];if(ue&&!ue.da&&ue.capture==v){var ft=ue.listener,Zt=ue.ha||ue.src;ue.fa&&Ot(c.i,ue),B=ft.call(Zt,S)!==!1&&B}}return B&&!S.defaultPrevented}function xn(c,g,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Dr(c){c.g=xn(()=>{c.g=null,c.i&&(c.i=!1,Dr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class pr extends Y{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ei(c){Y.call(this),this.h=c,this.g={}}F(Ei,Y);var Mn=[];function Xi(c){fe(c.g,function(g,v){this.g.hasOwnProperty(v)&&kr(g)},c),c.g={}}Ei.prototype.N=function(){Ei.aa.N.call(this),Xi(this)},Ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zi=h.JSON.stringify,es=h.JSON.parse,eo=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Qr(){}Qr.prototype.h=null;function br(c){return c.h||(c.h=c.i())}function Ii(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fn(){Se.call(this,"d")}F(Fn,Se);function ts(){Se.call(this,"c")}F(ts,Se);var Zn={},to=null;function Jr(){return to=to||new Mt}Zn.La="serverreachability";function Yr(c){Se.call(this,Zn.La,c)}F(Yr,Se);function Un(c){const g=Jr();xt(g,new Yr(g))}Zn.STAT_EVENT="statevent";function no(c,g){Se.call(this,Zn.STAT_EVENT,c),this.stat=g}F(no,Se);function Dt(c){const g=Jr();xt(g,new no(g,c))}Zn.Ma="timingevent";function D(c,g){Se.call(this,Zn.Ma,c),this.size=g}F(D,Se);function U(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function K(){this.g=!0}K.prototype.xa=function(){this.g=!1};function Z(c,g,v,S,B,W){c.info(function(){if(c.g)if(W)for(var ue="",ft=W.split("&"),Zt=0;Zt<ft.length;Zt++){var rt=ft[Zt].split("=");if(1<rt.length){var an=rt[0];rt=rt[1];var Ht=an.split("_");ue=2<=Ht.length&&Ht[1]=="type"?ue+(an+"="+rt+"&"):ue+(an+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+v+`
`+ue})}function ce(c,g,v,S,B,W,ue){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+v+`
`+W+" "+ue})}function we(c,g,v,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ee(c,v)+(S?" "+S:"")})}function Ne(c,g){c.info(function(){return"TIMEOUT: "+g})}K.prototype.info=function(){};function Ee(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<B.length;ue++)B[ue]=""}}}}return Zi(v)}catch{return g}}var ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ye={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_e;function Me(){}F(Me,Qr),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},_e=new Me;function Ue(c,g,v,S){this.j=c,this.i=g,this.l=v,this.R=S||1,this.U=new Ei(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var lt={},We={};function dt(c,g,v){c.L=1,c.v=os(nr(g)),c.m=v,c.P=!0,mr(c,null)}function mr(c,g){c.F=Date.now(),Qe(c),c.A=nr(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),ls(v.i,"t",S),c.C=0,v=c.j.J,c.h=new Ft,c.g=hc(c.j,v?g:null,!c.m),0<c.O&&(c.M=new pr(I(c.Y,c,c.g),c.O)),g=c.U,v=c.g,S=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Mn[0]=B.toString()),B=Mn);for(var W=0;W<B.length;W++){var ue=Xn(v,B[W],S||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Un(),Z(c.i,c.u,c.A,c.l,c.R,c.m)}Ue.prototype.ca=function(c){c=c.target;const g=this.M;g&&Bn(c)==3?g.j():this.Y(c)},Ue.prototype.Y=function(c){try{if(c==this.g)e:{const Ht=Bn(this.g);var g=this.g.Ba();const _r=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Al(this.g)))){this.J||Ht!=4||g==7||(g==8||0>=_r?Un(3):Un(2)),tr(this);var v=this.g.Z();this.X=v;t:if(Xr(this)){var S=Al(this.g);c="";var B=S.length,W=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),vn(this);var ue="";break t}this.h.i=new h.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(W&&g==B-1)});S.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,ce(this.i,this.u,this.A,this.l,this.R,Ht,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ft,Zt=this.g;if((ft=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ft)){var rt=ft;break t}}rt=null}if(v=rt)we(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zr(this,v);else{this.o=!1,this.s=3,Dt(12),dn(this),vn(this);break e}}if(this.P){v=!0;let ir;for(;!this.J&&this.C<ue.length;)if(ir=er(this,ue),ir==We){Ht==4&&(this.s=4,Dt(14),v=!1),we(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==lt){this.s=4,Dt(15),we(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else we(this.i,this.l,ir,null),Zr(this,ir);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ue.length!=0||this.h.h||(this.s=1,Dt(16),v=!1),this.o=this.o&&v,!v)we(this.i,this.l,ue,"[Invalid Chunked Response]"),dn(this),vn(this);else if(0<ue.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Pl(an),an.M=!0,Dt(11))}}else we(this.i,this.l,ue,null),Zr(this,ue);Ht==4&&dn(this),this.o&&!this.J&&(Ht==4?ca(this.j,this):(this.o=!1,Qe(this)))}else sa(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),dn(this),vn(this)}}}catch{}finally{}};function Xr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function er(c,g){var v=c.C,S=g.indexOf(`
`,v);return S==-1?We:(v=Number(g.substring(v,S)),isNaN(v)?lt:(S+=1,S+v>g.length?We:(g=g.slice(S,S+v),c.C=S+v,g)))}Ue.prototype.cancel=function(){this.J=!0,dn(this)};function Qe(c){c.S=Date.now()+c.I,ns(c,c.I)}function ns(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=U(I(c.ba,c),g)}function tr(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Ue.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ne(this.i,this.A),this.L!=2&&(Un(),Dt(17)),dn(this),this.s=2,vn(this)):ns(this,this.S-c)};function vn(c){c.j.G==0||c.J||ca(c.j,c)}function dn(c){tr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Xi(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Zr(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||Ze(v.h,c))){if(!c.K&&Ze(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ua(v),Mr(v);else break e;la(v),Dt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=U(I(v.Za,v),6e3));if(1>=ei(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Pi(v,11)}else if((c.K||v.g==c)&&ua(v),!H(g))for(B=v.Da.g.parse(g),g=0;g<B.length;g++){let rt=B[g];if(v.T=rt[0],rt=rt[1],v.G==2)if(rt[0]=="c"){v.K=rt[1],v.ia=rt[2];const an=rt[3];an!=null&&(v.la=an,v.j.info("VER="+v.la));const Ht=rt[4];Ht!=null&&(v.Aa=Ht,v.j.info("SVER="+v.Aa));const _r=rt[5];_r!=null&&typeof _r=="number"&&0<_r&&(S=1.5*_r,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ir=c.g;if(ir){const uo=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uo){var W=S.h;W.g||uo.indexOf("spdy")==-1&&uo.indexOf("quic")==-1&&uo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(gr(W,W.h),W.h=null))}if(S.D){const da=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;da&&(S.ya=da,vt(S.I,S.D,da))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ue=c;if(S.qa=cc(S,S.J?S.ia:null,S.W),ue.K){ro(S.h,ue);var ft=ue,Zt=S.L;Zt&&(ft.I=Zt),ft.B&&(tr(ft),Qe(ft)),S.g=ue}else lo(S);0<v.i.length&&ii(v)}else rt[0]!="stop"&&rt[0]!="close"||Pi(v,7);else v.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Pi(v,7):pn(v):rt[0]!="noop"&&v.l&&v.l.ta(rt),v.v=0)}}Un(4)}catch{}}var Je=class{constructor(c,g){this.g=c,this.map=g}};function ct(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wt(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ei(c){return c.h?1:c.g?c.g.size:0}function Ze(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function gr(c,g){c.g?c.g.add(g):c.h=g}function ro(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}ct.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return V(c.i)}function ea(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],v=c.length,S=0;S<v;S++)g.push(c[S]);return g}g=[],v=0;for(S in c)g[v++]=c[S];return g}function ta(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const S in c)g[v++]=S;return g}}}function rs(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=ta(c),S=ea(c),B=S.length,W=0;W<B;W++)g.call(void 0,S[W],v&&v[W],c)}var io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ud(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),B=null;if(0<=S){var W=c[v].substring(0,S);B=c[v].substring(S+1)}else W=c[v];g(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ti(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ti){this.h=c.h,so(this,c.j),this.o=c.o,this.g=c.g,is(this,c.s),this.l=c.l;var g=c.i,v=new ti;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),ss(this,v),this.m=c.m}else c&&(g=String(c).match(io))?(this.h=!1,so(this,g[1]||"",!0),this.o=nt(g[2]||""),this.g=nt(g[3]||"",!0),is(this,g[4]),this.l=nt(g[5]||"",!0),ss(this,g[6]||"",!0),this.m=nt(g[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}Ti.prototype.toString=function(){var c=[],g=this.j;g&&c.push(as(g,na,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(as(g,na,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(as(v,v.charAt(0)=="/"?nc:tc,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",as(v,Il)),c.join("")};function nr(c){return new Ti(c)}function so(c,g,v){c.j=v?nt(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function is(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ss(c,g,v){g instanceof ti?(c.i=g,ni(c.i,c.h)):(v||(g=as(g,rc)),c.i=new ti(g,c.h))}function vt(c,g,v){c.i.set(g,v)}function os(c){return vt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function nt(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function as(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,ec),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ec(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var na=/[#\/\?@]/g,tc=/[#\?:]/g,nc=/[#\?]/g,rc=/[#\?@]/g,Il=/#/g;function ti(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function fn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ud(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=ti.prototype,n.add=function(c,g){fn(this),this.i=null,c=yr(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function Nr(c,g){fn(c),g=yr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Vr(c,g){return fn(c),g=yr(c,g),c.g.has(g)}n.forEach=function(c,g){fn(this),this.g.forEach(function(v,S){v.forEach(function(B){c.call(g,B,S,this)},this)},this)},n.na=function(){fn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let S=0;S<g.length;S++){const B=c[S];for(let W=0;W<B.length;W++)v.push(g[S])}return v},n.V=function(c){fn(this);let g=[];if(typeof c=="string")Vr(this,c)&&(g=g.concat(this.g.get(yr(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},n.set=function(c,g){return fn(this),this.i=null,c=yr(this,c),Vr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ls(c,g,v){Nr(c,g),0<v.length&&(c.i=null,c.g.set(yr(c,g),V(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var S=g[v];const W=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var B=W;ue[S]!==""&&(B+="="+encodeURIComponent(String(ue[S]))),c.push(B)}}return this.i=c.join("&")};function yr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function ni(c,g){g&&!c.j&&(fn(c),c.i=null,c.g.forEach(function(v,S){var B=S.toLowerCase();S!=B&&(Nr(this,S),ls(this,B,v))},c)),c.j=g}function jd(c,g){const v=new K;if(h.Image){const S=new Image;S.onload=R(jn,v,"TestLoadImage: loaded",!0,g,S),S.onerror=R(jn,v,"TestLoadImage: error",!1,g,S),S.onabort=R(jn,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=R(jn,v,"TestLoadImage: timeout",!1,g,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function ic(c,g){const v=new K,S=new AbortController,B=setTimeout(()=>{S.abort(),jn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(W=>{clearTimeout(B),W.ok?jn(v,"TestPingServer: ok",!0,g):jn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),jn(v,"TestPingServer: error",!1,g)})}function jn(c,g,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function Bd(){this.g=new eo}function sc(c,g,v){const S=v||"";try{rs(c,function(B,W){let ue=B;m(B)&&(ue=Zi(B)),g.push(S+W+"="+encodeURIComponent(ue))})}catch(B){throw g.push(S+"type="+encodeURIComponent("_badmap")),B}}function Si(c){this.l=c.Ub||null,this.j=c.eb||!1}F(Si,Qr),Si.prototype.g=function(){return new oo(this.l,this.j)},Si.prototype.i=(function(c){return function(){return c}})({});function oo(c,g){Mt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(oo,Mt),n=oo.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Or(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function oc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Lr(this):Or(this),this.readyState==3&&oc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Lr(this))},n.Qa=function(c){this.g&&(this.response=c,Lr(this))},n.ga=function(){this.g&&Lr(this)};function Lr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Or(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Or(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ai(c){let g="";return fe(c,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function us(c,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ai(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):vt(c,g,v))}function Rt(c){Mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Rt,Mt);var zd=/^https?$/i,Tl=["POST","PUT"];n=Rt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?br(this.o):br(_e),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){ao(this,W);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),B=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Tl,g,void 0))||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of v)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){ao(this,W)}};function ao(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ra(c),rr(c)}function ra(c){c.A||(c.A=!0,xt(c,"complete"),xt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,xt(this,"complete"),xt(this,"abort"),rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rr(this,!0)),Rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sl(this):this.bb())},n.bb=function(){Sl(this)};function Sl(c){if(c.h&&typeof l<"u"&&(!c.v[1]||Bn(c)!=4||c.Z()!=2)){if(c.u&&Bn(c)==4)xn(c.Ea,0,c);else if(xt(c,"readystatechange"),Bn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=ue===0){var B=String(c.D).match(io)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),S=!zd.test(B?B.toLowerCase():"")}v=S}if(v)xt(c,"complete"),xt(c,"success");else{c.m=6;try{var W=2<Bn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",ra(c)}}finally{rr(c)}}}}function rr(c,g){if(c.g){ia(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||xt(c,"ready");try{v.onreadystatechange=S}catch{}}}function ia(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Bn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),es(g)}};function Al(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function sa(c){const g={};c=(c.g&&2<=Bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(H(c[S]))continue;var v=N(c[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[B]||[];g[B]=W,W.push(v)}T(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ri(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function Rl(c){this.Aa=0,this.i=[],this.j=new K,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ri("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ri("baseRetryDelayMs",5e3,c),this.cb=ri("retryDelaySeedMs",1e4,c),this.Wa=ri("forwardChannelMaxRetries",2,c),this.wa=ri("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ct(c&&c.concurrentRequestLimit),this.Da=new Bd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Rl.prototype,n.la=8,n.G=1,n.connect=function(c,g,v,S){Dt(0),this.W=c,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=cc(this,null,this.W),ii(this)};function pn(c){if(oa(c),c.G==3){var g=c.U++,v=nr(c.I);if(vt(v,"SID",c.K),vt(v,"RID",g),vt(v,"TYPE","terminate"),Ri(c,v),g=new Ue(c,c.j,g),g.L=2,g.v=os(nr(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=g.v,v=!0),v||(g.g=hc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Qe(g)}uc(c)}function Mr(c){c.g&&(Pl(c),c.g.cancel(),c.g=null)}function oa(c){Mr(c),c.u&&(h.clearTimeout(c.u),c.u=null),ua(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function ii(c){if(!Wt(c.h)&&!c.s){c.s=!0;var g=c.Ga;ot||me(),se||(ot(),se=!0),xe.add(g,c),c.B=0}}function $d(c,g){return ei(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=U(I(c.Ga,c,g),lc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new Ue(this,this.j,c);let W=this.o;if(this.S&&(W?(W=A(W),x(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=cs(this,B,g),v=nr(this.I),vt(v,"RID",c),vt(v,"CVER",22),this.D&&vt(v,"X-HTTP-Session-Id",this.D),Ri(this,v),W&&(this.O?g="headers="+encodeURIComponent(String(Ai(W)))+"&"+g:this.m&&us(v,this.m,W)),gr(this.h,B),this.Ua&&vt(v,"TYPE","init"),this.P?(vt(v,"$req",g),vt(v,"SID","null"),B.T=!0,dt(B,v,null)):dt(B,v,g),this.G=2}}else this.G==3&&(c?aa(this,c):this.i.length==0||Wt(this.h)||aa(this))};function aa(c,g){var v;g?v=g.l:v=c.U++;const S=nr(c.I);vt(S,"SID",c.K),vt(S,"RID",v),vt(S,"AID",c.T),Ri(c,S),c.m&&c.o&&us(S,c.m,c.o),v=new Ue(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=cs(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gr(c.h,v),dt(v,S,g)}function Ri(c,g){c.H&&fe(c.H,function(v,S){vt(g,S,v)}),c.l&&rs({},function(v,S){vt(g,S,v)})}function cs(c,g,v){v=Math.min(c.i.length,v);var S=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let W=-1;for(;;){const ue=["count="+v];W==-1?0<v?(W=B[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let ft=!0;for(let Zt=0;Zt<v;Zt++){let rt=B[Zt].g;const an=B[Zt].map;if(rt-=W,0>rt)W=Math.max(0,B[Zt].g-100),ft=!1;else try{sc(an,ue,"req"+rt+"_")}catch{S&&S(an)}}if(ft){S=ue.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,S}function lo(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ot||me(),se||(ot(),se=!0),xe.add(g,c),c.v=0}}function la(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=U(I(c.Fa,c),lc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,ac(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=U(I(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Mr(this),ac(this))};function Pl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function ac(c){c.g=new Ue(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=nr(c.qa);vt(g,"RID","rpc"),vt(g,"SID",c.K),vt(g,"AID",c.T),vt(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&vt(g,"TO",c.ja),vt(g,"TYPE","xmlhttp"),Ri(c,g),c.m&&c.o&&us(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=os(nr(g)),v.m=null,v.P=!0,mr(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Mr(this),la(this),Dt(19))};function ua(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ca(c,g){var v=null;if(c.g==g){ua(c),Pl(c),c.g=null;var S=2}else if(Ze(c.h,g))v=g.D,ro(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;S=Jr(),xt(S,new D(S,v)),ii(c)}else lo(c);else if(B=g.s,B==3||B==0&&0<g.X||!(S==1&&$d(c,g)||S==2&&la(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),B){case 1:Pi(c,5);break;case 4:Pi(c,10);break;case 3:Pi(c,6);break;default:Pi(c,2)}}}function lc(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function Pi(c,g){if(c.j.info("Error code "+g),g==2){var v=I(c.fb,c),S=c.Xa;const B=!S;S=new Ti(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||so(S,"https"),os(S),B?jd(S.toString(),v):ic(S.toString(),v)}else Dt(2);c.G=0,c.l&&c.l.sa(g),uc(c),oa(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function uc(c){if(c.G=0,c.ka=[],c.l){const g=Zo(c.h);(g.length!=0||c.i.length!=0)&&(O(c.ka,g),O(c.ka,c.i),c.h.i.length=0,V(c.i),c.i.length=0),c.l.ra()}}function cc(c,g,v){var S=v instanceof Ti?nr(v):new Ti(v);if(S.g!="")g&&(S.g=g+"."+S.g),is(S,S.s);else{var B=h.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var W=new Ti(null);S&&so(W,S),g&&(W.g=g),B&&is(W,B),v&&(W.l=v),S=W}return v=c.D,g=c.ya,v&&g&&vt(S,v,g),vt(S,"VER",c.la),Ri(c,S),S}function hc(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Rt(new Si({eb:v})):new Rt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kl(){}n=kl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ha(){}ha.prototype.g=function(c,g){return new Dn(c,g)};function Dn(c,g){Mt.call(this),this.g=new Rl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!H(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!H(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new si(this)}F(Dn,Mt),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){pn(this.g)},Dn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Zi(c),c=v);g.i.push(new Je(g.Ya++,c)),g.G==3&&ii(g)},Dn.prototype.N=function(){this.g.l=null,delete this.j,pn(this.g),delete this.g,Dn.aa.N.call(this)};function dc(c){Fn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}F(dc,Fn);function fc(){ts.call(this),this.status=1}F(fc,ts);function si(c){this.g=c}F(si,kl),si.prototype.ua=function(){xt(this.g,"a")},si.prototype.ta=function(c){xt(this.g,new dc(c))},si.prototype.sa=function(c){xt(this.g,new fc)},si.prototype.ra=function(){xt(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,x0=function(){return new ha},C0=function(){return Jr()},k0=Zn,qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,Ih=ve,ye.COMPLETE="complete",P0=ye,Ii.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,lu=Ii,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,R0=Rt}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});const Kv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Em("@firebase/firestore");function Fa(){return Bo.logLevel}function ne(n,...e){if(Bo.logLevel<=et.DEBUG){const t=e.map(Vm);Bo.debug(`Firestore (${pl}): ${n}`,...t)}}function $t(n,...e){if(Bo.logLevel<=et.ERROR){const t=e.map(Vm);Bo.error(`Firestore (${pl}): ${n}`,...t)}}function Ru(n,...e){if(Bo.logLevel<=et.WARN){const t=e.map(Vm);Bo.warn(`Firestore (${pl}): ${n}`,...t)}}function Vm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: `+n;throw $t(e),new Error(e)}function De(n,e){n||Ae()}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(An.UNAUTHENTICATED)))}shutdown(){}}class P1{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new A1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new An(e)}}class k1{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C1{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new k1(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(An.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class x1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){De(this.o===void 0);const r=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(De(typeof t.token=="string"),this.R=t.token,new x1(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=b1(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Ya(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function b0(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new Lt(0,0))}static max(){return new be(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(),r===void 0?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Pu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),l=t.get(s);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ht extends Pu{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const N1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Pu{construct(e,t,r){return new Vt(e,t,r)}static isValidIdentifier(e){return N1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(a(),s++)}if(a(),l)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(ht.fromString(e))}static fromName(e){return new pe(ht.fromString(e).popFirst(5))}static empty(){return new pe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Kp(n){return n.fields.find((e=>e.kind===2))}function Ro(n){return n.fields.filter((e=>e.kind!==2))}jh.UNKNOWN_ID=-1;class Th{constructor(e,t){this.fieldPath=e,this.kind=t}}class ku{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ku(0,fr.min())}}function N0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new fr(s,pe.empty(),e)}function V0(n){return new fr(n.readTime,n.key,-1)}class fr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fr(be.min(),pe.empty(),-1)}static max(){return new fr(be.max(),pe.empty(),-1)}}function Lm(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==L0)throw n;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,r)=>{t(e)}))}static reject(e){return new $(((t,r)=>{r(e)}))}static waitFor(e){return new $(((t,r)=>{let s=0,a=0,l=!1;e.forEach((h=>{++s,h.next((()=>{++a,l&&a===s&&t()}),(f=>r(f)))})),l=!0,a===s&&t()}))}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next((s=>s?$.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new $(((r,s)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{l[m]=_,++h,h===a&&r(l)}),(_=>s(_)))}}))}static doWhile(e,t){return new $(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new mi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new pu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Om(r.target.error);this.V.reject(new pu(e,s))}}static open(e,t,r,s){try{return new dd(t,e.transaction(s,r))}catch(a){throw new pu(t,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new L1(t)}}class Us{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Us.S(nn())===12.2&&$t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),Co(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!UE())return!1;if(Us.v())return!0;const e=nn(),t=Us.S(e),r=0<t&&t<10,s=M0(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ne("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{r(new pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new he(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new he(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new pu(e,l))},s.onupgradeneeded=a=>{ne("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.p.O(l,s.transaction,a.oldVersion,this.version).next((()=>{ne("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const h=dd.open(this.db,e,a?"readonly":"readwrite",r),f=s(h).next((m=>(h.g(),m))).catch((m=>(h.abort(m),$.reject(m)))).toPromise();return f.catch((()=>{})),await h.m,f}catch(h){const f=h,m=f.name!=="FirebaseError"&&l<3;if(ne("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function M0(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class V1{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Co(this.B.delete())}}class pu extends he{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qs(n){return n.name==="IndexedDbTransactionError"}class L1{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Co(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),Co(this.store.add(e))}get(e){return Co(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),Co(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),Co(this.store.count())}U(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new $(((l,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(r),l=[];return this.W(a,((h,f)=>{l.push(f)})).next((()=>l))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new $(((s,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{s(l.target.result)}}))}j(e,t){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.W(s,((a,l,h)=>h.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Y(e){const t=this.cursor({});return new $(((r,s)=>{t.onerror=a=>{const l=Om(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():r()})):r()}}))}W(e,t){const r=[];return new $(((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void s();const f=new V1(h),m=t(h.primaryKey,h.value,f);if(m instanceof $){const _=m.catch((w=>(f.done(),$.reject(w))));r.push(_)}f.isDone?s():f.K===null?h.continue():h.continue(f.K)}})).next((()=>$.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Co(n){return new $(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Om(r.target.error);t(s)}}))}let Gv=!1;function Om(n){const e=Us.S(nn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gv||(Gv=!0,setTimeout((()=>{throw r}),0)),r}}return n}class O1{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ne("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ne("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Qs(t)?ne("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Hs(t)}await this.X(6e4)}))}}class M1{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let s=t,a=!0;return $.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return ne("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,s).next((h=>{s-=h,r.add(l)}));a=!1})))).next((()=>t-s))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this.re(s,a))).next((h=>(ne("IndexBackfiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}re(e,t){let r=e;return t.changes.forEach(((s,a)=>{const l=V0(a);Lm(l,r)>0&&(r=l)})),new fr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jn.oe=-1;function fd(n){return n==null}function Cu(n){return n===0&&1/n==-1/0}function F0(n){return typeof n=="number"&&Number.isInteger(n)&&!Cu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wv(e)),e=F1(n.get(t),e);return Wv(e)}function F1(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Wv(n){return n+""}function hi(n){const e=n.length;if(De(e>=2),e===2)return De(n.charAt(0)===""&&n.charAt(1)===""),ht.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const l=n.indexOf("",a);switch((l<0||l>t)&&Ae(),n.charAt(l+1)){case"":const h=n.substring(a,l);let f;s.length===0?f=h:(s+=h,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:Ae()}a=l+2}return new ht(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(n,e){return[n,Vn(e)]}function U0(n,e,t){return[n,Vn(e),t]}const U1={},j1=["prefixPath","collectionGroup","readTime","documentId"],B1=["prefixPath","collectionGroup","documentId"],z1=["collectionGroup","readTime","prefixPath","documentId"],$1=["canonicalId","targetId"],q1=["targetId","path"],K1=["path","targetId"],G1=["collectionId","parent"],W1=["indexId","uid"],H1=["uid","sequenceNumber"],Q1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],J1=["indexId","uid","orderedDocumentKey"],Y1=["userId","collectionPath","documentId"],X1=["userId","collectionPath","largestBatchId"],Z1=["userId","collectionGroup","largestBatchId"],j0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ex=[...j0,"documentOverlays"],B0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],z0=B0,Mm=[...z0,"indexConfiguration","indexState","indexEntries"],tx=Mm,nx=[...Mm,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends O0{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function sn(n,e){const t=Pe(n);return Us.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||yn.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ch(this.root,e,this.comparator,!0)}}class ch{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??yn.RED,this.left=s??yn.EMPTY,this.right=a??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new yn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,s,a){return this}insert(e,t,r){return new yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Va(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new _t(Vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new q0("Invalid base64 string: "+a):a}})(e);return new Kt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(n){if(De(!!n),typeof n=="string"){let e=0;const t=rx.exec(n);if(De(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zs(n){return typeof n=="string"?Kt.fromBase64String(n):Kt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Um(n){const e=n.mapValue.fields.__previous_value__;return Fm(e)?Um(e):e}function xu(n){const e=Ki(n.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,r,s,a,l,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class zo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ah={nullValue:"NULL_VALUE"};function $o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fm(n)?4:K0(n)?9007199254740991:pd(n)?10:11:Ae()}function yi(n,e){if(n===e)return!0;const t=$o(n);if(t!==$o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xu(n).isEqual(xu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Ki(s.timestampValue),h=Ki(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return zs(s.bytesValue).isEqual(zs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ct(s.geoPointValue.latitude)===Ct(a.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ct(s.integerValue)===Ct(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ct(s.doubleValue),h=Ct(a.doubleValue);return l===h?Cu(l)===Cu(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return Ya(n.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},h=a.mapValue.fields||{};if(Qv(l)!==Qv(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!yi(l[f],h[f])))return!1;return!0})(n,e);default:return Ae()}}function Du(n,e){return(n.values||[]).find((t=>yi(t,e)))!==void 0}function $s(n,e){if(n===e)return 0;const t=$o(n),r=$o(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=Ct(a.integerValue||a.doubleValue),f=Ct(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return Yv(n.timestampValue,e.timestampValue);case 4:return Yv(xu(n),xu(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=zs(a),f=zs(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let m=0;m<h.length&&m<f.length;m++){const _=ze(h[m],f[m]);if(_!==0)return _}return ze(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=ze(Ct(a.latitude),Ct(l.latitude));return h!==0?h:ze(Ct(a.longitude),Ct(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Xv(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var h,f,m,_;const w=a.fields||{},I=l.fields||{},R=(h=w.value)===null||h===void 0?void 0:h.arrayValue,F=(f=I.value)===null||f===void 0?void 0:f.arrayValue,V=ze(((m=R?.values)===null||m===void 0?void 0:m.length)||0,((_=F?.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:Xv(R,F)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Ls.mapValue&&l===Ls.mapValue)return 0;if(a===Ls.mapValue)return 1;if(l===Ls.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=l.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const I=ze(f[w],_[w]);if(I!==0)return I;const R=$s(h[f[w]],m[_[w]]);if(R!==0)return R}return ze(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Ae()}}function Yv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Ki(n),r=Ki(e),s=ze(t.seconds,r.seconds);return s!==0?s:ze(t.nanos,r.nanos)}function Xv(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=$s(t[s],r[s]);if(a)return a}return ze(t.length,r.length)}function Xa(n){return Wp(n)}function Wp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ki(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Wp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Wp(t.fields[l])}`;return s+"}"})(n.mapValue):Ae()}function bu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hp(n){return!!n&&"integerValue"in n}function Nu(n){return!!n&&"arrayValue"in n}function Zv(n){return!!n&&"nullValue"in n}function ew(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rh(n){return!!n&&"mapValue"in n}function pd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=mu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function K0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const G0={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function sx(n){return"nullValue"in n?Ah:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bu(zo.empty(),pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?pd(n)?G0:{mapValue:{}}:Ae()}function ox(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bu(zo.empty(),pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?G0:"mapValue"in n?pd(n)?{mapValue:{}}:Ls:Ae()}function tw(n,e){const t=$s(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nw(n,e){const t=$s(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=Vt.emptyPath(),r={},s=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}l?r[h.lastSegment()]=mu(l):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Rh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Jo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Rn(mu(this.value))}}function W0(n){const e=[];return Jo(n.fields,((t,r)=>{const s=new Vt([t]);if(Rh(r)){const a=W0(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t,r,s,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new jt(e,0,be.min(),be.min(),be.min(),Rn.empty(),0)}static newFoundDocument(e,t,r,s){return new jt(e,1,t,be.min(),r,s,0)}static newNoDocument(e,t){return new jt(e,2,t,be.min(),be.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,be.min(),be.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){this.position=e,this.inclusive=t}}function rw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=pe.comparator(pe.fromName(l.referenceValue),t.key):r=$s(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function iw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ax(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{}class tt extends H0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lx(e,t,r):t==="array-contains"?new hx(e,r):t==="in"?new eI(e,r):t==="not-in"?new dx(e,r):t==="array-contains-any"?new fx(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ux(e,r):new cx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison($s(t,this.value)):t!==null&&$o(this.value)===$o(t)&&this.matchesComparison($s(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends H0{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new mt(e,t)}matches(e){return el(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function el(n){return n.op==="and"}function Qp(n){return n.op==="or"}function jm(n){return Q0(n)&&el(n)}function Q0(n){for(const e of n.filters)if(e instanceof mt)return!1;return!0}function Jp(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+Xa(n.value);if(jm(n))return n.filters.map((e=>Jp(e))).join(",");{const e=n.filters.map((t=>Jp(t))).join(",");return`${n.op}(${e})`}}function J0(n,e){return n instanceof tt?(function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&yi(r.value,s.value)})(n,e):n instanceof mt?(function(r,s){return s instanceof mt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,h)=>a&&J0(l,s.filters[h])),!0):!1})(n,e):void Ae()}function Y0(n,e){const t=n.filters.concat(e);return mt.create(t,n.op)}function X0(n){return n instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xa(t.value)}`})(n):n instanceof mt?(function(t){return t.op.toString()+" {"+t.getFilters().map(X0).join(" ,")+"}"})(n):"Filter"}class lx extends tt{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class ux extends tt{constructor(e,t){super(e,"in",t),this.keys=Z0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cx extends tt{constructor(e,t){super(e,"not-in",t),this.keys=Z0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Z0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>pe.fromName(r.referenceValue)))}class hx extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nu(t)&&Du(t.arrayValue,this.value)}}class eI extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Du(this.value.arrayValue,t)}}class dx extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Du(this.value.arrayValue,t)}}class fx extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Du(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t=null,r=[],s=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=h,this.ue=null}}function Yp(n,e=null,t=[],r=[],s=null,a=null,l=null){return new px(n,e,t,r,s,a,l)}function qo(n){const e=Pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Jp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),fd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Xa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Xa(r))).join(",")),e.ue=t}return e.ue}function Gu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ax(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!J0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iw(n.startAt,e.startAt)&&iw(n.endAt,e.endAt)}function Bh(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zh(n,e){return n.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function sw(n,e,t){let r=Ah,s=!0;for(const a of zh(n,e)){let l=Ah,h=!0;switch(a.op){case"<":case"<=":l=sx(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Ah}tw({value:r,inclusive:s},{value:l,inclusive:h})<0&&(r=l,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];tw({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function ow(n,e,t){let r=Ls,s=!0;for(const a of zh(n,e)){let l=Ls,h=!0;switch(a.op){case">=":case">":l=ox(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Ls}nw({value:r,inclusive:s},{value:l,inclusive:h})>0&&(r=l,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];nw({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t=null,r=[],s=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tI(n,e,t,r,s,a,l,h){return new ml(n,e,t,r,s,a,l,h)}function Wu(n){return new ml(n)}function aw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nI(n){return n.collectionGroup!==null}function gu(n){const e=Pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new _t(Vt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Vu(a,r))})),t.has(Vt.keyField().canonicalString())||e.ce.push(new Vu(Vt.keyField(),r))}return e.ce}function hr(n){const e=Pe(n);return e.le||(e.le=mx(e,gu(n))),e.le}function mx(n,e){if(n.limitType==="F")return Yp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Vu(s.field,a)}));const t=n.endAt?new Za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Za(n.startAt.position,n.startAt.inclusive):null;return Yp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Xp(n,e){const t=n.filters.concat([e]);return new ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $h(n,e,t){return new ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function md(n,e){return Gu(hr(n),hr(e))&&n.limitType===e.limitType}function rI(n){return`${qo(hr(n))}|lt:${n.limitType}`}function Ua(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>X0(s))).join(", ")}]`),fd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Xa(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Xa(s))).join(",")),`Target(${r})`})(hr(n))}; limitType=${n.limitType})`}function Hu(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):pe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of gu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,h,f){const m=rw(l,h,f);return l.inclusive?m<=0:m<0})(r.startAt,gu(r),s)||r.endAt&&!(function(l,h,f){const m=rw(l,h,f);return l.inclusive?m>=0:m>0})(r.endAt,gu(r),s))})(n,e)}function iI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sI(n){return(e,t)=>{let r=!1;for(const s of gu(n)){const a=gx(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function gx(n,e,t){const r=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),m=h.data.field(a);return f!==null&&m!==null?$s(f,m):Ae()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return $0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Tt(pe.comparator);function cr(){return yx}const oI=new Tt(pe.comparator);function uu(...n){let e=oI;for(const t of n)e=e.insert(t.key,t);return e}function aI(n){let e=oI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function di(){return yu()}function lI(){return yu()}function yu(){return new Js((n=>n.toString()),((n,e)=>n.isEqual(e)))}const _x=new Tt(pe.comparator),vx=new _t(pe.comparator);function Ge(...n){let e=vx;for(const t of n)e=e.add(t);return e}const wx=new _t(ze);function Bm(){return wx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function uI(n){return{integerValue:""+n}}function cI(n,e){return F0(e)?uI(e):zm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function Ex(n,e,t){return n instanceof Lu?(function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Fm(a)&&(a=Um(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(t,e):n instanceof tl?dI(n,e):n instanceof nl?fI(n,e):(function(s,a){const l=hI(s,a),h=lw(l)+lw(s.Pe);return Hp(l)&&Hp(s.Pe)?uI(h):zm(s.serializer,h)})(n,e)}function Ix(n,e,t){return n instanceof tl?dI(n,e):n instanceof nl?fI(n,e):t}function hI(n,e){return n instanceof rl?(function(r){return Hp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Lu extends gd{}class tl extends gd{constructor(e){super(),this.elements=e}}function dI(n,e){const t=pI(e);for(const r of n.elements)t.some((s=>yi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class nl extends gd{constructor(e){super(),this.elements=e}}function fI(n,e){let t=pI(e);for(const r of n.elements)t=t.filter((s=>!yi(s,r)));return{arrayValue:{values:t}}}class rl extends gd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function lw(n){return Ct(n.integerValue||n.doubleValue)}function pI(n){return Nu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){this.field=e,this.transform=t}}function Tx(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof tl&&s instanceof tl||r instanceof nl&&s instanceof nl?Ya(r.elements,s.elements,yi):r instanceof rl&&s instanceof rl?yi(r.Pe,s.Pe):r instanceof Lu&&s instanceof Lu})(n.transform,e.transform)}class Sx{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ph(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yd{}function gI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _d(n.key,Pn.none()):new gl(n.key,n.data,Pn.none());{const t=n.data,r=Rn.empty();let s=new _t(Vt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Hi(n.key,r,new Yn(s.toArray()),Pn.none())}}function Ax(n,e,t){n instanceof gl?(function(s,a,l){const h=s.value.clone(),f=cw(s.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Hi?(function(s,a,l){if(!Ph(s.precondition,a))return void a.convertToUnknownDocument(l.version);const h=cw(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(yI(s)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function _u(n,e,t,r){return n instanceof gl?(function(a,l,h,f){if(!Ph(a.precondition,l))return h;const m=a.value.clone(),_=hw(a.fieldTransforms,f,l);return m.setAll(_),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Hi?(function(a,l,h,f){if(!Ph(a.precondition,l))return h;const m=hw(a.fieldTransforms,f,l),_=l.data;return _.setAll(yI(a)),_.setAll(m),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,l,h){return Ph(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function Rx(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=hI(r.transform,s||null);a!=null&&(t===null&&(t=Rn.empty()),t.set(r.field,a))}return t||null}function uw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ya(r,s,((a,l)=>Tx(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gl extends yd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hi extends yd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function yI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function cw(n,e,t){const r=new Map;De(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,h=e.data.field(a.field);r.set(a.field,Ix(l,h,t[s]))}return r}function hw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,Ex(a,l,e))}return r}class _d extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _I extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Ax(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lI();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(s.key)?null:h;const f=gI(l,h);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(be.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,((t,r)=>uw(t,r)))&&Ya(this.baseMutations,e.baseMutations,((t,r)=>uw(t,r)))}}class qm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){De(e.mutations.length===r.length);let s=(function(){return _x})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new qm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,it;function kx(n){switch(n){default:return Ae();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function vI(n){if(n===void 0)return $t("GRPC error has no .code"),J.UNKNOWN;switch(n){case Jt.OK:return J.OK;case Jt.CANCELLED:return J.CANCELLED;case Jt.UNKNOWN:return J.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return J.INTERNAL;case Jt.UNAVAILABLE:return J.UNAVAILABLE;case Jt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Jt.NOT_FOUND:return J.NOT_FOUND;case Jt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Jt.ABORTED:return J.ABORTED;case Jt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Jt.DATA_LOSS:return J.DATA_LOSS;default:return Ae()}}(it=Jt||(Jt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new Lo([4294967295,4294967295],0);function dw(n){const e=Cx().encode(n),t=new A0;return t.update(e),new Uint8Array(t.digest())}function fw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Lo([t,r],0),new Lo([s,a],0)]}class Gm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cu(`Invalid padding: ${t}`);if(r<0)throw new cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Lo.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(Lo.fromNumber(r)));return s.compare(xx)===1&&(s=new Lo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=dw(e),[r,s]=fw(t);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);if(!this.de(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Gm(a,s,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.Ie===0)return;const t=dw(e),[r,s]=fw(t);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qu(be.min(),s,new Tt(ze),cr(),Ge())}}class Ju{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ju(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class wI{constructor(e,t){this.targetId=e,this.me=t}}class EI{constructor(e,t,r=Kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class pw{constructor(){this.fe=0,this.ge=gw(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ge(),t=Ge(),r=Ge();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ae()}})),new Ju(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=gw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Dx{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=mw(),this.Qe=new Tt(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ae()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const a=s.target;if(Bh(a))if(r===0){const l=new pe(a.path);this.Ue(t,l,jt.newNoDocument(l,be.min()))}else De(r===1);else{const l=this.Ye(t);if(l!==r){const h=this.Ze(e),f=h?this.Xe(h,e,l):1;if(f!==0){this.je(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,h;try{l=zs(r).toUint8Array()}catch(f){if(f instanceof q0)return Ru("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Gm(l,s,a)}catch(f){return Ru(f instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,a,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((a,l)=>{const h=this.Je(l);if(h){if(a.current&&Bh(h.target)){const f=new pe(h.target.path);this.ke.get(f)!==null||this.it(l,f)||this.Ue(l,f,jt.newNoDocument(f,e))}a.be&&(t.set(l,a.ve()),a.Ce())}}));let r=Ge();this.qe.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const s=new Qu(e,t,this.Qe,this.ke,r);return this.ke=cr(),this.qe=mw(),this.Qe=new Tt(ze),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new pw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new _t(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pw),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function mw(){return new Tt(pe.comparator)}function gw(){return new Tt(pe.comparator)}const bx={asc:"ASCENDING",desc:"DESCENDING"},Nx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vx={and:"AND",or:"OR"};class Lx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zp(n,e){return n.useProto3Json||fd(e)?e:{value:e}}function il(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function II(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ox(n,e){return il(n,e.toTimestamp())}function Ln(n){return De(!!n),be.fromTimestamp((function(t){const r=Ki(t);return new Lt(r.seconds,r.nanos)})(n))}function Wm(n,e){return em(n,e).canonicalString()}function em(n,e){const t=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function TI(n){const e=ht.fromString(n);return De(bI(e)),e}function qh(n,e){return Wm(n.databaseId,e.path)}function Oo(n,e){const t=TI(e);if(t.get(1)!==n.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(RI(t))}function SI(n,e){return Wm(n.databaseId,e)}function AI(n){const e=TI(n);return e.length===4?ht.emptyPath():RI(e)}function tm(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RI(n){return De(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function yw(n,e,t){return{name:qh(n,e),fields:t.value.mapValue.fields}}function Mx(n,e,t){const r=Oo(n,e.name),s=Ln(e.updateTime),a=e.createTime?Ln(e.createTime):be.min(),l=new Rn({mapValue:{fields:e.fields}}),h=jt.newFoundDocument(r,s,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Fx(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(De(_===void 0||typeof _=="string"),Kt.fromBase64String(_||"")):(De(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Kt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(m){const _=m.code===void 0?J.UNKNOWN:vI(m.code);return new he(_,m.message||"")})(l);t=new EI(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Oo(n,r.document.name),a=Ln(r.document.updateTime),l=r.document.createTime?Ln(r.document.createTime):be.min(),h=new Rn({mapValue:{fields:r.document.fields}}),f=jt.newFoundDocument(s,a,l,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new kh(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Oo(n,r.document),a=r.readTime?Ln(r.readTime):be.min(),l=jt.newNoDocument(s,a),h=r.removedTargetIds||[];t=new kh([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Oo(n,r.document),a=r.removedTargetIds||[];t=new kh([],a,s,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new Px(s,a),h=r.targetId;t=new wI(h,l)}}return t}function Kh(n,e){let t;if(e instanceof gl)t={update:yw(n,e.key,e.value)};else if(e instanceof _d)t={delete:qh(n,e.key)};else if(e instanceof Hi)t={update:yw(n,e.key,e.data),updateMask:qx(e.fieldMask)};else{if(!(e instanceof _I))return Ae();t={verify:qh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof Lu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof tl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof nl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof rl)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw Ae()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Ox(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()})(n,e.precondition)),t}function nm(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Pn.updateTime(Ln(a.updateTime)):a.exists!==void 0?Pn.exists(a.exists):Pn.none()})(e.currentDocument):Pn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(l,h){let f=null;if("setToServerValue"in h)De(h.setToServerValue==="REQUEST_TIME"),f=new Lu;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];f=new tl(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];f=new nl(_)}else"increment"in h?f=new rl(l,h.increment):Ae();const m=Vt.fromServerFormat(h.fieldPath);return new mI(m,f)})(n,s))):[];if(e.update){e.update.name;const s=Oo(n,e.update.name),a=new Rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const m=f.fieldPaths||[];return new Yn(m.map((_=>Vt.fromServerFormat(_))))})(e.updateMask);return new Hi(s,a,l,t,r)}return new gl(s,a,t,r)}if(e.delete){const s=Oo(n,e.delete);return new _d(s,t)}if(e.verify){const s=Oo(n,e.verify);return new _I(s,t)}return Ae()}function Ux(n,e){return n&&n.length>0?(De(e!==void 0),n.map((t=>(function(s,a){let l=s.updateTime?Ln(s.updateTime):Ln(a);return l.isEqual(be.min())&&(l=Ln(a)),new Sx(l,s.transformResults||[])})(t,e)))):[]}function PI(n,e){return{documents:[SI(n,e.path)]}}function kI(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SI(n,s);const a=(function(m){if(m.length!==0)return DI(mt.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((_=>(function(I){return{field:ja(I.field),direction:Bx(I.dir)}})(_)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=Zp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:t,parent:s}}function CI(n){let e=AI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){De(r===1);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const I=xI(w);return I instanceof mt&&jm(I)?I.getFilters():[I]})(t.where));let l=[];t.orderBy&&(l=(function(w){return w.map((I=>(function(F){return new Vu(Ba(F.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let I;return I=typeof w=="object"?w.value:w,fd(I)?null:I})(t.limit));let f=null;t.startAt&&(f=(function(w){const I=!!w.before,R=w.values||[];return new Za(R,I)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const I=!w.before,R=w.values||[];return new Za(R,I)})(t.endAt)),tI(e,s,l,a,h,"F",f,m)}function jx(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ba(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ba(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ba(t.unaryFilter.field);return tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ba(t.unaryFilter.field);return tt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}})(n):n.fieldFilter!==void 0?(function(t){return tt.create(Ba(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return mt.create(t.compositeFilter.filters.map((r=>xI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae()}})(t.compositeFilter.op))})(n):Ae()}function Bx(n){return bx[n]}function zx(n){return Nx[n]}function $x(n){return Vx[n]}function ja(n){return{fieldPath:n.canonicalString()}}function Ba(n){return Vt.fromServerFormat(n.fieldPath)}function DI(n){return n instanceof tt?(function(t){if(t.op==="=="){if(ew(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NAN"}};if(Zv(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ew(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NAN"}};if(Zv(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(t.field),op:zx(t.op),value:t.value}}})(n):n instanceof mt?(function(t){const r=t.getFilters().map((s=>DI(s)));return r.length===1?r[0]:{compositeFilter:{op:$x(t.op),filters:r}}})(n):Ae()}function qx(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,r,s,a=be.min(),l=be.min(),h=Kt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.ct=e}}function Kx(n,e){let t;if(e.document)t=Mx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),s=Go(e.noDocument.readTime);t=jt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae();{const r=pe.fromSegments(e.unknownDocument.path),s=Go(e.unknownDocument.version);t=jt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new Lt(s[0],s[1]);return be.fromTimestamp(a)})(e.readTime)),t}function _w(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Gh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:qh(a,l.key),fields:l.data.value.mapValue.fields,updateTime:il(a,l.version.toTimestamp()),createTime:il(a,l.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ko(e.version)};else{if(!e.isUnknownDocument())return Ae();r.unknownDocument={path:t.path.toArray(),version:Ko(e.version)}}return r}function Gh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ko(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Go(n){const e=new Lt(n.seconds,n.nanoseconds);return be.fromTimestamp(e)}function xo(n,e){const t=(e.baseMutations||[]).map((a=>nm(n.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>nm(n.ct,a))),s=Lt.fromMillis(e.localWriteTimeMs);return new $m(e.batchId,s,t,r)}function hu(n){const e=Go(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Go(n.lastLimboFreeSnapshotVersion):be.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){return De(a.documents.length===1),hr(Wu(AI(a.documents[0])))})(n.query):(function(a){return hr(CI(a))})(n.query),new ji(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Kt.fromBase64String(n.resumeToken))}function VI(n,e){const t=Ko(e.snapshotVersion),r=Ko(e.lastLimboFreeSnapshotVersion);let s;s=Bh(e.target)?PI(n.ct,e.target):kI(n.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function LI(n){const e=CI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$h(e,e.limit,"L"):e}function Ap(n,e){return new Km(e.largestBatchId,nm(n.ct,e.overlayMutation))}function vw(n,e){const t=e.path.lastSegment();return[n,Vn(e.path.popLast()),t]}function ww(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ko(r.readTime),documentKey:Vn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{getBundleMetadata(e,t){return Ew(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Go(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return Ew(e).put((function(s){return{bundleId:s.id,createTime:Ko(Ln(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return Iw(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:LI(a.bundledQuery),readTime:Go(a.readTime)}})(r)}))}saveNamedQuery(e,t){return Iw(e).put((function(s){return{name:s.name,readTime:Ko(Ln(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function Ew(n){return sn(n,"bundles")}function Iw(n){return sn(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new vd(e,r)}getOverlay(e,t){return nu(e).get(vw(this.userId,t)).next((r=>r?Ap(this.serializer,r):null))}getOverlays(e,t){const r=di();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,l)=>{const h=new Km(t,l);s.push(this.ht(e,h))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((l=>s.add(Vn(l.getCollectionPath()))));const a=[];return s.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(nu(e).j("collectionPathOverlayIndex",h))})),$.waitFor(a)}getOverlaysForCollection(e,t,r){const s=di(),a=Vn(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return nu(e).U("collectionPathOverlayIndex",l).next((h=>{for(const f of h){const m=Ap(this.serializer,f);s.set(m.getKey(),m)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=di();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nu(e).J({index:"collectionGroupOverlayIndex",range:h},((f,m,_)=>{const w=Ap(this.serializer,m);a.size()<s||w.largestBatchId===l?(a.set(w.getKey(),w),l=w.largestBatchId):_.done()})).next((()=>a))}ht(e,t){return nu(e).put((function(s,a,l){const[h,f,m]=vw(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Kh(s.ct,l.mutation)}})(this.serializer,this.userId,t))}}function nu(n){return sn(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{Pt(e){return sn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Kt.fromUint8Array(r):Kt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ct(e.integerValue));else if("doubleValue"in e){const r=Ct(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Cu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ki(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(zs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?K0(e)?this.dt(t,Number.MAX_SAFE_INTEGER):pd(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ae()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const s of Object.keys(r))this.Vt(s,t),this.Tt(r[s],t)}wt(e,t){var r,s;const a=e.fields||{};this.dt(t,53);const l="value",h=((s=(r=a[l].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(t,15),t.At(Ct(h)),this.Vt(l,t),this.Tt(a[l],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const s of r)this.Tt(s,t)}yt(e,t){this.dt(t,37),pe.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Do.vt=new Do;function Hx(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Tw(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const l=Hx(255&r[a]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class Qx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=t.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const t=this.qt(e),r=Tw(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Kt(e){const t=this.qt(e),r=Tw(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Jx{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Yx{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ru{constructor(){this.jt=new Qx,this.Ht=new Jx(this.jt),this.Jt=new Yx(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bo(this.indexId,this.documentKey,this.arrayValue,r)}}function Rs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Sw(n.arrayValue,e.arrayValue),t!==0?t:(t=Sw(n.directionalValue,e.directionalValue),t!==0?t:pe.comparator(n.documentKey,e.documentKey)))}function Sw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.Xt=new _t(((t,r)=>Vt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(De(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Kp(e);if(t!==void 0&&!this.sn(t))return!1;const r=Ro(e);let s=new Set,a=0,l=0;for(;a<r.length&&this.sn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Xt.size>0){const h=this.Xt.getIterator().getNext();if(!s.has(h.field.canonicalString())){const f=r[a];if(!this.on(h,f)||!this._n(this.en[l++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(l>=this.en.length||!this._n(this.en[l++],h))return!1}return!0}an(){if(this.nn)return null;let e=new _t(Vt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Th(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Th(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Th(r.field,r.dir==="asc"?0:1)));return new jh(jh.UNKNOWN_ID,this.collectionId,t,ku.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(n){var e,t;if(De(n instanceof tt||n instanceof mt),n instanceof tt){if(n instanceof eI){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>tt.create(n.field,"==",a))))||[];return mt.create(s,"or")}return n}const r=n.filters.map((s=>OI(s)));return mt.create(r,n.op)}function Xx(n){if(n.getFilters().length===0)return[];const e=sm(OI(n));return De(MI(e)),rm(e)||im(e)?[e]:e.getFilters()}function rm(n){return n instanceof tt}function im(n){return n instanceof mt&&jm(n)}function MI(n){return rm(n)||im(n)||(function(t){if(t instanceof mt&&Qp(t)){for(const r of t.getFilters())if(!rm(r)&&!im(r))return!1;return!0}return!1})(n)}function sm(n){if(De(n instanceof tt||n instanceof mt),n instanceof tt)return n;if(n.filters.length===1)return sm(n.filters[0]);const e=n.filters.map((r=>sm(r)));let t=mt.create(e,n.op);return t=Wh(t),MI(t)?t:(De(t instanceof mt),De(el(t)),De(t.filters.length>1),t.filters.reduce(((r,s)=>Hm(r,s))))}function Hm(n,e){let t;return De(n instanceof tt||n instanceof mt),De(e instanceof tt||e instanceof mt),t=n instanceof tt?e instanceof tt?(function(s,a){return mt.create([s,a],"and")})(n,e):Rw(n,e):e instanceof tt?Rw(e,n):(function(s,a){if(De(s.filters.length>0&&a.filters.length>0),el(s)&&el(a))return Y0(s,a.getFilters());const l=Qp(s)?s:a,h=Qp(s)?a:s,f=l.filters.map((m=>Hm(m,h)));return mt.create(f,"or")})(n,e),Wh(t)}function Rw(n,e){if(el(e))return Y0(e,n.getFilters());{const t=e.filters.map((r=>Hm(n,r)));return mt.create(t,"or")}}function Wh(n){if(De(n instanceof tt||n instanceof mt),n instanceof tt)return n;const e=n.getFilters();if(e.length===1)return Wh(e[0]);if(Q0(n))return n;const t=e.map((s=>Wh(s))),r=[];return t.forEach((s=>{s instanceof tt?r.push(s):s instanceof mt&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:mt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.un=new Qm}addToCollectionParentIndex(e,t){return this.un.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(fr.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class Qm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new _t(ht.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Uint8Array(0);class eD{constructor(e,t){this.databaseId=t,this.cn=new Qm,this.ln=new Js((r=>qo(r)),((r,s)=>Gu(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const a={collectionId:r,parent:Vn(s)};return Pw(e).put(a)}return $.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[b0(t),""],!1,!0);return Pw(e).U(s).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(hi(l.parent))}return r}))}addFieldIndex(e,t){const r=iu(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const l=Oa(e);return a.next((h=>{l.put(ww(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=iu(e),s=Oa(e),a=La(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=iu(e),r=La(e),s=Oa(e);return t.j().next((()=>r.j())).next((()=>s.j()))}createTargetIndexes(e,t){return $.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new Aw(r).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=La(e);let s=!0;const a=new Map;return $.forEach(this.hn(t),(l=>this.Pn(e,l).next((h=>{s&&(s=!!h),a.set(l,h)})))).next((()=>{if(s){let l=Ge();const h=[];return $.forEach(a,((f,m)=>{ne("IndexedDbIndexManager",`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(f)} to execute ${qo(t)}`);const _=(function(ee,ae){const de=Kp(ae);if(de===void 0)return null;for(const fe of zh(ee,de.fieldPath))switch(fe.op){case"array-contains-any":return fe.value.arrayValue.values||[];case"array-contains":return[fe.value]}return null})(m,f),w=(function(ee,ae){const de=new Map;for(const fe of Ro(ae))for(const T of zh(ee,fe.fieldPath))switch(T.op){case"==":case"in":de.set(fe.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return de.set(fe.fieldPath.canonicalString(),T.value),Array.from(de.values())}return null})(m,f),I=(function(ee,ae){const de=[];let fe=!0;for(const T of Ro(ae)){const A=T.kind===0?sw(ee,T.fieldPath,ee.startAt):ow(ee,T.fieldPath,ee.startAt);de.push(A.value),fe&&(fe=A.inclusive)}return new Za(de,fe)})(m,f),R=(function(ee,ae){const de=[];let fe=!0;for(const T of Ro(ae)){const A=T.kind===0?ow(ee,T.fieldPath,ee.endAt):sw(ee,T.fieldPath,ee.endAt);de.push(A.value),fe&&(fe=A.inclusive)}return new Za(de,fe)})(m,f),F=this.In(f,m,I),V=this.In(f,m,R),O=this.Tn(f,m,w),ie=this.En(f.indexId,_,F,I.inclusive,V,R.inclusive,O);return $.forEach(ie,(H=>r.G(H,t.limit).next((ee=>{ee.forEach((ae=>{const de=pe.fromSegments(ae.documentKey);l.has(de)||(l=l.add(de),h.push(de))}))}))))})).next((()=>h))}return $.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=Xx(mt.create(e.filters,"and")).map((r=>Yp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,s,a,l,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),m=f/(t!=null?t.length:1),_=[];for(let w=0;w<f;++w){const I=t?this.dn(t[w/m]):hh,R=this.An(e,I,r[w%m],s),F=this.Rn(e,I,a[w%m],l),V=h.map((O=>this.An(e,I,O,!0)));_.push(...this.createRange(R,F,V))}return _}An(e,t,r,s){const a=new bo(e,pe.empty(),t,r);return s?a:a.Zt()}Rn(e,t,r,s){const a=new bo(e,pe.empty(),t,r);return s?a.Zt():a}Pn(e,t){const r=new Aw(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let l=null;for(const h of a)r.rn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let r=2;const s=this.hn(t);return $.forEach(s,(a=>this.Pn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(f){let m=new _t(Vt.comparator),_=!1;for(const w of f.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?_=!0:m=m.add(I.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(_?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&r===2?1:r))}Vn(e,t){const r=new ru;for(const s of Ro(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=r.Yt(s.kind);Do.vt.It(a,l)}return r.zt()}dn(e){const t=new ru;return Do.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new ru;return Do.vt.It(bu(this.databaseId,t),r.Yt((function(a){const l=Ro(a);return l.length===0?0:l[l.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let s=[];s.push(new ru);let a=0;for(const l of Ro(e)){const h=r[a++];for(const f of s)if(this.fn(t,l.fieldPath)&&Nu(h))s=this.gn(s,l,h);else{const m=f.Yt(l.kind);Do.vt.It(h,m)}}return this.pn(s)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const s=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of s){const f=new ru;f.seed(h.zt()),Do.vt.It(l,f.Yt(t.kind)),a.push(f)}return a}fn(e,t){return!!e.filters.find((r=>r instanceof tt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=iu(e),s=Oa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((a=>{const l=[];return $.forEach(a,(h=>s.get([h.indexId,this.uid]).next((f=>{l.push((function(_,w){const I=w?new ku(w.sequenceNumber,new fr(Go(w.readTime),new pe(hi(w.documentKey)),w.largestBatchId)):ku.empty(),R=_.fields.map((([F,V])=>new Th(Vt.fromServerFormat(F),V)));return new jh(_.indexId,_.collectionGroup,R,I)})(h,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:ze(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=iu(e),a=Oa(e);return this.yn(e).next((l=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((h=>$.forEach(h,(f=>a.put(ww(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return $.forEach(t,((s,a)=>{const l=r.get(s.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(r.set(s.collectionGroup,h),$.forEach(h,(f=>this.wn(e,s,f).next((m=>{const _=this.Sn(a,f);return m.isEqual(_)?$.resolve():this.bn(e,a,f,m,_)})))))))}))}Dn(e,t,r,s){return La(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,s){return La(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=La(e);let a=new _t(Rs);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((l,h)=>{a=a.add(new bo(r.indexId,t,h.arrayValue,h.directionalValue))})).next((()=>a))}Sn(e,t){let r=new _t(Rs);const s=this.Vn(t,e);if(s==null)return r;const a=Kp(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Nu(l))for(const h of l.arrayValue.values||[])r=r.add(new bo(t.indexId,e.key,this.dn(h),s))}else r=r.add(new bo(t.indexId,e.key,hh,s));return r}bn(e,t,r,s,a){ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return(function(f,m,_,w,I){const R=f.getIterator(),F=m.getIterator();let V=Va(R),O=Va(F);for(;V||O;){let ie=!1,H=!1;if(V&&O){const ee=_(V,O);ee<0?H=!0:ee>0&&(ie=!0)}else V!=null?H=!0:ie=!0;ie?(w(O),O=Va(F)):H?(I(V),V=Va(R)):(V=Va(R),O=Va(F))}})(s,a,Rs,(h=>{l.push(this.Dn(e,t,r,h))}),(h=>{l.push(this.vn(e,t,r,h))})),$.waitFor(l)}yn(e){let t=1;return Oa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,h)=>Rs(l,h))).filter(((l,h,f)=>!h||Rs(l,f[h-1])!==0));const s=[];s.push(e);for(const l of r){const h=Rs(l,e),f=Rs(l,t);if(h===0)s[0]=e.Zt();else if(h>0&&f<0)s.push(l),s.push(l.Zt());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Cn(s[l],s[l+1]))return[];const h=[s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,hh,[]],f=[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,hh,[]];a.push(IDBKeyRange.bound(h,f))}return a}Cn(e,t){return Rs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kw)}getMinOffset(e,t){return $.mapArray(this.hn(t),(r=>this.Pn(e,r).next((s=>s||Ae())))).next(kw)}}function Pw(n){return sn(n,"collectionParents")}function La(n){return sn(n,"indexEntries")}function iu(n){return sn(n,"indexConfiguration")}function Oa(n){return sn(n,"indexState")}function kw(n){De(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Lm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new fr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const f=r.J({range:l},((_,w,I)=>(h++,I.delete())));a.push(f.next((()=>{De(h===1)})));const m=[];for(const _ of t.mutations){const w=U0(e,_.key.path,t.batchId);a.push(s.delete(w)),m.push(_.key)}return $.waitFor(a).next((()=>m))}function Hh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ae();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(41943040,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);class wd{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,t,r,s){De(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new wd(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ps(e).J({index:"userMutationsIndex",range:r},((s,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=za(e),l=Ps(e);return l.add({}).next((h=>{De(typeof h=="number");const f=new $m(h,t,r,s),m=(function(R,F,V){const O=V.baseMutations.map((H=>Kh(R.ct,H))),ie=V.mutations.map((H=>Kh(R.ct,H)));return{userId:F,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:O,mutations:ie}})(this.serializer,this.userId,f),_=[];let w=new _t(((I,R)=>ze(I.canonicalString(),R.canonicalString())));for(const I of s){const R=U0(this.userId,I.key.path,h);w=w.add(I.key.path.popLast()),_.push(l.put(m)),_.push(a.put(R,U1))}return w.forEach((I=>{_.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Fn[h]=f.keys()})),$.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return Ps(e).get(t).next((r=>r?(De(r.userId===this.userId),xo(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?$.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Fn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ps(e).J({index:"userMutationsIndex",range:s},((l,h,f)=>{h.userId===this.userId&&(De(h.batchId>=r),a=xo(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ps(e).J({index:"userMutationsIndex",range:t,reverse:!0},((s,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ps(e).U("userMutationsIndex",t).next((r=>r.map((s=>xo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return za(e).J({range:s},((l,h,f)=>{const[m,_,w]=l,I=hi(_);if(m===this.userId&&t.path.isEqual(I))return Ps(e).get(w).next((R=>{if(!R)throw Ae();De(R.userId===this.userId),a.push(xo(this.serializer,R))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _t(ze);const s=[];return t.forEach((a=>{const l=Sh(this.userId,a.path),h=IDBKeyRange.lowerBound(l),f=za(e).J({range:h},((m,_,w)=>{const[I,R,F]=m,V=hi(R);I===this.userId&&a.path.isEqual(V)?r=r.add(F):w.done()}));s.push(f)})),$.waitFor(s).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=Sh(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new _t(ze);return za(e).J({range:l},((f,m,_)=>{const[w,I,R]=f,F=hi(I);w===this.userId&&r.isPrefixOf(F)?F.length===s&&(h=h.add(R)):_.done()})).next((()=>this.xn(e,h)))}xn(e,t){const r=[],s=[];return t.forEach((a=>{s.push(Ps(e).get(a).next((l=>{if(l===null)throw Ae();De(l.userId===this.userId),r.push(xo(this.serializer,l))})))})),$.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return FI(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),$.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return za(e).J({range:r},((a,l,h)=>{if(a[0]===this.userId){const f=hi(a[1]);s.push(f)}else h.done()})).next((()=>{De(s.length===0)}))}))}containsKey(e,t){return UI(e,this.userId,t)}Nn(e){return jI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function UI(n,e,t){const r=Sh(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return za(n).J({range:a,H:!0},((h,f,m)=>{const[_,w,I]=h;_===e&&w===s&&(l=!0),m.done()})).next((()=>l))}function Ps(n){return sn(n,"mutations")}function za(n){return sn(n,"documentMutations")}function jI(n){return sn(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wo(0)}static kn(){return new Wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new Wo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>be.fromTimestamp(new Lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Qn(e,s))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ma(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(De(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return Ma(e).J(((l,h)=>{const f=hu(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>$.waitFor(a))).next((()=>s))}forEachTarget(e,t){return Ma(e).J(((r,s)=>{const a=hu(s);t(a)}))}qn(e){return xw(e).get("targetGlobalKey").next((t=>(De(t!==null),t)))}Qn(e,t){return xw(e).put("targetGlobalKey",t)}Kn(e,t){return Ma(e).put(VI(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=qo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ma(e).J({range:s,index:"queryTargetsIndex"},((l,h,f)=>{const m=hu(h);Gu(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=Ns(e);return t.forEach((l=>{const h=Vn(l.path);s.push(a.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,l))})),$.waitFor(s)}removeMatchingKeys(e,t,r){const s=Ns(e);return $.forEach(t,(a=>{const l=Vn(a.path);return $.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=Ns(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ns(e);let a=Ge();return s.J({range:r,H:!0},((l,h,f)=>{const m=hi(l[1]),_=new pe(m);a=a.add(_)})).next((()=>a))}containsKey(e,t){const r=Vn(t.path),s=IDBKeyRange.bound([r],[b0(r)],!1,!0);let a=0;return Ns(e).J({index:"documentTargetsIndex",H:!0,range:s},(([l,h],f,m)=>{l!==0&&(a++,m.done())})).next((()=>a>0))}ot(e,t){return Ma(e).get(t).next((r=>r?hu(r):null))}}function Ma(n){return sn(n,"targets")}function xw(n){return sn(n,"targetGlobal")}function Ns(n){return sn(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw([n,e],[t,r]){const s=ze(n,t);return s===0?ze(e,r):s}class nD{constructor(e){this.Un=e,this.buffer=new _t(Dw),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Dw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qs(t)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Hs(t)}await this.Hn(3e5)}))}}class iD{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Jn.oe);const r=new nD(t);return this.Jn.forEachTarget(e,(s=>r.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>r.zn(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Cw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cw):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,s,a,l,h,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),Fa()<=et.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w}))))}}function sD(n,e){return new iD(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t){this.db=e,this.garbageCollector=sD(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,s)=>t(s)))}addReference(e,t,r){return dh(e,r)}removeReference(e,t,r){return dh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dh(e,t)}nr(e,t){return(function(s,a){let l=!1;return jI(s).Y((h=>UI(s,h,a).next((f=>(f&&(l=!0),$.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.tr(e,((l,h)=>{if(h<=t){const f=this.nr(e,l).next((m=>{if(!m)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,be.min()),Ns(e).delete((function(w){return[0,Vn(w.path)]})(l)))))}));s.push(f)}})).next((()=>$.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dh(e,t)}tr(e,t){const r=Ns(e);let s,a=Jn.oe;return r.J({index:"documentTargetsIndex"},(([l,h],{path:f,sequenceNumber:m})=>{l===0?(a!==Jn.oe&&t(new pe(hi(s)),a),a=m,s=f):a=Jn.oe})).next((()=>{a!==Jn.oe&&t(new pe(hi(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dh(n,e){return Ns(n).put((function(r,s){return{targetId:0,path:Vn(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.changes=new Js((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return To(e).put(r)}removeEntry(e,t,r){return To(e).delete((function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Gh(l),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=jt.newInvalidDocument(t);return To(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(su(t))},((s,a)=>{r=this.ir(t,a)})).next((()=>r))}sr(e,t){let r={size:0,document:jt.newInvalidDocument(t)};return To(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(su(t))},((s,a)=>{r={document:this.ir(t,a),size:Hh(a)}})).next((()=>r))}getEntries(e,t){let r=cr();return this._r(e,t,((s,a)=>{const l=this.ir(s,a);r=r.insert(s,l)})).next((()=>r))}ar(e,t){let r=cr(),s=new Tt(pe.comparator);return this._r(e,t,((a,l)=>{const h=this.ir(a,l);r=r.insert(a,h),s=s.insert(a,Hh(l))})).next((()=>({documents:r,ur:s})))}_r(e,t,r){if(t.isEmpty())return $.resolve();let s=new _t(Vw);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(su(s.first()),su(s.last())),l=s.getIterator();let h=l.getNext();return To(e).J({index:"documentKeyIndex",range:a},((f,m,_)=>{const w=pe.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;h&&Vw(h,w)<0;)r(h,null),h=l.getNext();h&&h.isEqual(w)&&(r(h,m),h=l.hasNext()?l.getNext():null),h?_.$(su(h)):_.done()})).next((()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),Gh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return To(e).U(IDBKeyRange.bound(h,f,!0)).next((m=>{a?.incrementDocumentReadCount(m.length);let _=cr();for(const w of m){const I=this.ir(pe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);I.isFoundDocument()&&(Hu(t,I)||s.has(I.key))&&(_=_.insert(I.key,I))}return _}))}getAllFromCollectionGroup(e,t,r,s){let a=cr();const l=Nw(t,r),h=Nw(t,fr.max());return To(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},((f,m,_)=>{const w=this.ir(pe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===s&&_.done()})).next((()=>a))}newChangeBuffer(e){return new lD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return bw(e).get("remoteDocumentGlobalKey").next((t=>(De(!!t),t)))}rr(e,t){return bw(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=Kx(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return jt.newInvalidDocument(e)}}function zI(n){return new aD(n)}class lD extends BI{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Js((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new _t(((a,l)=>ze(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const h=this.lr.get(a);if(t.push(this.cr.removeEntry(e,a,h.readTime)),l.isValidDocument()){const f=_w(this.cr.serializer,l);s=s.add(a.path.popLast());const m=Hh(f);r+=m-h.size,t.push(this.cr.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=_w(this.cr.serializer,l.convertToNoDocument(be.min()));t.push(this.cr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.cr.updateMetadata(e,r)),$.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:s})=>(s.forEach(((a,l)=>{this.lr.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function bw(n){return sn(n,"remoteDocumentGlobal")}function To(n){return sn(n,"remoteDocumentsV14")}function su(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nw(n,e){const t=e.documentKey.path.toArray();return[n,Gh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vw(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=ze(t[a],r[a]),s)return s;return s=ze(t.length,r.length),s||(s=ze(t[t.length-2],r[r.length-2]),s||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&_u(r.mutation,s,Yn.empty(),Lt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const s=di();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=uu();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=di();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,s){let a=cr();const l=yu(),h=(function(){return yu()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof Hi)?a=a.insert(m.key,m):_!==void 0?(l.set(m.key,_.mutation.getFieldMask()),_u(_.mutation,m,_.mutation.getFieldMask(),Lt.now())):l.set(m.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>l.set(m,_))),t.forEach(((m,_)=>{var w;return h.set(m,new uD(_,(w=l.get(m))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,t){const r=yu();let s=new Tt(((l,h)=>l-h)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||Yn.empty();_=h.applyToLocalView(m,_),r.set(f,_);const w=(s.get(h.batchId)||Ge()).add(f);s=s.insert(h.batchId,w)}))})).next((()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,_=f.value,w=lI();_.forEach((I=>{if(!a.has(I)){const R=gI(t.get(I),r.get(I));R!==null&&w.set(I,R),a=a.add(I)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return $.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):$.resolve(di());let h=-1,f=a;return l.next((m=>$.forEach(m,((_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(_)?$.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{f=f.insert(_,I)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ge()))).next((_=>({batchId:h,changes:aI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((r=>{let s=uu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=uu();return this.indexManager.getCollectionParents(e,a).next((h=>$.forEach(h,(f=>{const m=(function(w,I){return new ml(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((w,I)=>{l=l.insert(w,I)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((f,m)=>{const _=m.getKey();l.get(_)===null&&(l=l.insert(_,jt.newInvalidDocument(_)))}));let h=uu();return l.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&_u(_.mutation,m,Yn.empty(),Lt.now()),Hu(t,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return $.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ln(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:LI(s.bundledQuery),readTime:Ln(s.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.overlays=new Tt(pe.comparator),this.Ir=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=di();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.ht(e,t,a)})),$.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const s=di(),a=t.length+1,l=new pe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Tt(((m,_)=>m-_));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=di(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=di(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>h.set(m,_))),!(h.size()>=s)););return $.resolve(h)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Km(t,r));let a=this.Ir.get(t);a===void 0&&(a=Ge(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Tr=new _t(hn.Er),this.dr=new _t(hn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new hn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new hn(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new pe(new ht([])),r=new hn(t,e),s=new hn(t,e+1),a=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new pe(new ht([])),r=new hn(t,e),s=new hn(t,e+1);let a=Ge();return this.dr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new hn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return pe.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new _t(hn.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new $m(a,t,r,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new hn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),a=s<0?0:s;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hn(t,0),s=new hn(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(l=>{const h=this.Dr(l.wr);a.push(h)})),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _t(ze);return t.forEach((s=>{const a=new hn(s,0),l=new hn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(h=>{r=r.add(h.wr)}))})),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;pe.isDocumentKey(a)||(a=a.child(""));const l=new hn(new pe(a),0);let h=new _t(ze);return this.br.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.wr)),!0)}),l),$.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){De(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(t.mutations,(s=>{const a=new hn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new hn(t,0),s=this.br.firstAfterOrEqual(r);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.Mr=e,this.docs=(function(){return new Tt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let r=cr();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():jt.newInvalidDocument(s))})),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=cr();const l=t.path,h=new pe(l.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Lm(V0(_),r)<=0||(s.has(_.key)||Hu(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ae()}Or(e,t){return $.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new mD(this)}getSize(e){return $.resolve(this.size)}}class mD extends BI{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),$.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.persistence=e,this.Nr=new Js((t=>qo(t)),Gu),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jm,this.targetCount=0,this.kr=Wo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),$.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Wo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Kn(t),$.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Nr.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),$.waitFor(a).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Jn(0),this.Kr=!1,this.Kr=!0,this.$r=new dD,this.referenceDelegate=e(this),this.Ur=new gD(this),this.indexManager=new Zx,this.remoteDocumentCache=(function(s){return new pD(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new NI(t),this.Gr=new cD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new fD(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const s=new yD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,t){return $.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class yD extends O0{constructor(e){super(),this.currentSequenceNumber=e}}class Ed{constructor(e){this.persistence=e,this.Jr=new Jm,this.Yr=null}static Zr(e){return new Ed(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),$.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,(r=>{const s=pe.fromPath(r);return this.ei(e,s).next((a=>{a||t.removeEntry(s,be.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return $.or([()=>$.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.serializer=e}O(e,t,r,s){const a=new dd("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore("owner")})(e),(function(f){f.createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hv,{unique:!0}),f.createObjectStore("documentMutations")})(e),Lw(e),(function(f){f.createObjectStore("remoteDocuments")})(e));let l=$.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")})(e),Lw(e)),l=l.next((()=>(function(f){const m=f.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",_)})(a)))),r<4&&s>=4&&(r!==0&&(l=l.next((()=>(function(f,m){return m.store("mutations").U().next((_=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hv,{unique:!0});const w=m.store("mutations"),I=_.map((R=>w.put(R)));return $.waitFor(I)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&s>=5&&(l=l.next((()=>this.ni(a)))),r<6&&s>=6&&(l=l.next((()=>((function(f){f.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),r<7&&s>=7&&(l=l.next((()=>this.ii(a)))),r<8&&s>=8&&(l=l.next((()=>this.si(e,a)))),r<9&&s>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(l=l.next((()=>this.oi(a)))),r<11&&s>=11&&(l=l.next((()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(f){f.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&s>=12&&(l=l.next((()=>{(function(f){const m=f.createObjectStore("documentOverlays",{keyPath:Y1});m.createIndex("collectionPathOverlayIndex",X1,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Z1,{unique:!1})})(e)}))),r<13&&s>=13&&(l=l.next((()=>(function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:j1});m.createIndex("documentKeyIndex",B1),m.createIndex("collectionGroupIndex",z1)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&s>=14&&(l=l.next((()=>this.ai(e,a)))),r<15&&s>=15&&(l=l.next((()=>(function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:W1}).createIndex("sequenceNumberIndex",H1,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Q1}).createIndex("documentKeyIndex",J1,{unique:!1})})(e)))),r<16&&s>=16&&(l=l.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&s>=17&&(l=l.next((()=>{(function(f){f.createObjectStore("globals",{keyPath:"name"})})(e)}))),l}ri(e){let t=0;return e.store("remoteDocuments").J(((r,s)=>{t+=Hh(s)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((s=>$.forEach(s,(a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",l).next((h=>$.forEach(h,(f=>{De(f.userId===a.userId);const m=xo(this.serializer,f);return FI(e,a.userId,m).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const a=[];return r.J(((l,h)=>{const f=new ht(l),m=(function(w){return[0,Vn(w)]})(f);a.push(t.get(m).next((_=>_?$.resolve():(w=>t.put({targetId:0,path:Vn(w),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>$.waitFor(a)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:G1});const r=t.store("collectionParents"),s=new Qm,a=l=>{if(s.add(l)){const h=l.lastSegment(),f=l.popLast();return r.put({collectionId:h,parent:Vn(f)})}};return t.store("remoteDocuments").J({H:!0},((l,h)=>{const f=new ht(l);return a(f.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([l,h,f],m)=>{const _=hi(h);return a(_.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,s)=>{const a=hu(s),l=VI(this.serializer,a);return t.put(l)}))}_i(e,t){const r=t.store("remoteDocuments"),s=[];return r.J(((a,l)=>{const h=t.store("remoteDocumentsV14"),f=(function(w){return w.document?new pe(ht.fromString(w.document.name).popFirst(5)):w.noDocument?pe.fromSegments(w.noDocument.path):w.unknownDocument?pe.fromSegments(w.unknownDocument.path):Ae()})(l).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(h.put(m))})).next((()=>$.waitFor(s)))}ai(e,t){const r=t.store("mutations"),s=zI(this.serializer),a=new qI(Ed.Zr,this.serializer.ct);return r.U().next((l=>{const h=new Map;return l.forEach((f=>{var m;let _=(m=h.get(f.userId))!==null&&m!==void 0?m:Ge();xo(this.serializer,f).keys().forEach((w=>_=_.add(w))),h.set(f.userId,_)})),$.forEach(h,((f,m)=>{const _=new An(m),w=vd.lt(this.serializer,_),I=a.getIndexManager(_),R=wd.lt(_,this.serializer,I,a.referenceDelegate);return new $I(s,R,w,I).recalculateAndSaveOverlaysForDocumentKeys(new Gp(t,Jn.oe),f).next()}))}))}}function Lw(n){n.createObjectStore("targetDocuments",{keyPath:q1}).createIndex("documentTargetsIndex",K1,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$1,{unique:!0}),n.createObjectStore("targetGlobal")}const Rp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ym{constructor(e,t,r,s,a,l,h,f,m,_,w=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=a,this.window=l,this.document=h,this.ci=m,this.li=_,this.hi=w,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=I=>Promise.resolve(),!Ym.D())throw new he(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oD(this,s),this.Ai=t+"main",this.serializer=new NI(f),this.Ri=new Us(this.Ai,this.hi,new _D(this.serializer)),this.$r=new Wx,this.Ur=new tD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zI(this.serializer),this.Gr=new Gx,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,_===!1&&$t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(J.FAILED_PRECONDITION,Rp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Jn(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>fh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Qs(e))return ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return ou(e).get("owner").next((t=>$.resolve(this.vi(t))))}Ci(e){return fh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=sn(t,"clientMetadata");return r.U().next((s=>{const a=this.xi(s,18e5),l=s.filter((h=>a.indexOf(h)===-1));return $.forEach(l,(h=>r.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):ou(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new he(J.FAILED_PRECONDITION,Rp);return!1}}return!(!this.networkEnabled||!this.inForeground)||fh(e).U().next((r=>this.xi(r,5e3).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(a||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Gp(e,Jn.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>fh(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return wd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ne("IndexedDbPersistence","Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===17?nx:f===16?tx:f===15?Mm:f===14?z0:f===13?B0:f===12?ex:f===11?j0:void Ae()})(this.hi);let l;return this.Ri.runTransaction(e,s,a,(h=>(l=new Gp(h,this.Qr?this.Qr.next():Jn.oe),t==="readwrite-primary"?this.wi(l).next((f=>!!f||this.Si(l))).next((f=>{if(!f)throw $t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new he(J.FAILED_PRECONDITION,L0);return r(l)})).next((f=>this.Di(l).next((()=>f)))):this.Ki(l).next((()=>r(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Ki(e){return ou(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(J.FAILED_PRECONDITION,Rp)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ou(e).put("owner",t)}static D(){return Us.D()}bi(e){const t=ou(e);return t.get("owner").next((r=>this.vi(r)?(ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||($t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;FE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){$t("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ou(n){return sn(n,"owner")}function fh(n){return sn(n,"clientMetadata")}function KI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Ge(),s=Ge();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Xm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return FE()?8:M0(nn())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Yi(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new vD;return this.Xi(e,t,l).next((h=>{if(a.result=h,this.zi)return this.es(e,t,l,h.size)}))})).next((()=>a.result))}es(e,t,r,s){return r.documentReadCount<this.ji?(Fa()<=et.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ua(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Fa()<=et.DEBUG&&ne("QueryEngine","Query:",Ua(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Fa()<=et.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ua(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(t))):$.resolve())}Yi(e,t){if(aw(t))return $.resolve(null);let r=hr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=$h(t,null,"F"),r=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Ge(...a);return this.Ji.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.ts(t,h);return this.ns(t,m,l,f.readTime)?this.Yi(e,$h(t,null,"F")):this.rs(e,m,t,f)}))))})))))}Zi(e,t,r,s){return aw(t)||s.isEqual(be.min())?$.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(t,a);return this.ns(t,l,r,s)?$.resolve(null):(Fa()<=et.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ua(t)),this.rs(e,l,t,N0(s,-1)).next((h=>h)))}))}ts(e,t){let r=new _t(sI(e));return t.forEach(((s,a)=>{Hu(e,a)&&(r=r.add(a))})),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,t,r){return Fa()<=et.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ua(t)),this.Ji.getDocumentsMatchingQuery(e,t,fr.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new Tt(ze),this._s=new Js((a=>qo(a)),Gu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $I(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function WI(n,e,t,r){return new wD(n,e,t,r)}async function HI(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let f=Ge();for(const m of s){l.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){h.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({hs:m,removedBatchIds:l,addedBatchIds:h})))}))}))}function ED(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,_){const w=m.batch,I=w.keys();let R=$.resolve();return I.forEach((F=>{R=R.next((()=>_.getEntry(f,F))).next((V=>{const O=m.docVersions.get(F);De(O!==null),V.version.compareTo(O)<0&&(w.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),_.addEntry(V)))}))})),R.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Ge();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function QI(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function ID(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const h=[];e.targetChanges.forEach(((_,w)=>{const I=s.get(w);if(!I)return;h.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,w))));let R=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Kt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),s=s.insert(w,R),(function(V,O,ie){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(I,R,_)&&h.push(t.Ur.updateTargetData(a,R))}));let f=cr(),m=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(TD(a,l,e.documentUpdates).next((_=>{f=_.Ps,m=_.Is}))),!r.isEqual(be.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((w=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return $.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.os=s,a)))}function TD(n,e,t){let r=Ge(),s=Ge();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=cr();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(be.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):ne("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{Ps:l,Is:s}}))}function SD(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Qh(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Ur.getTargetData(r,e).next((a=>a?(s=a,$.resolve(s)):t.Ur.allocateTargetId(r).next((l=>(s=new ji(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function sl(n,e,t){const r=Pe(n),s=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Qs(l))throw l;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function om(n,e,t){const r=Pe(n);let s=be.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,m,_){const w=Pe(f),I=w._s.get(_);return I!==void 0?$.resolve(w.os.get(I)):w.Ur.getTargetData(m,_)})(r,l,hr(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,t?s:be.min(),t?a:Ge()))).next((h=>(XI(r,iI(e),h),{documents:h,Ts:a})))))}function JI(n,e){const t=Pe(n),r=Pe(t.Ur),s=t.os.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>r.ot(a,e).next((l=>l?l.target:null))))}function YI(n,e){const t=Pe(n),r=t.us.get(e)||be.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.cs.getAllFromCollectionGroup(s,e,N0(r,-1),Number.MAX_SAFE_INTEGER))).then((s=>(XI(t,e,s),s)))}function XI(n,e,t){let r=n.us.get(e)||be.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.us.set(e,r)}function Ow(n,e){return`firestore_clients_${n}_${e}`}function Mw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pp(n,e){return`firestore_targets_${n}_${e}`}class Jh{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Rs(e,t,r){const s=JSON.parse(r);let a,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(a=new he(s.error.code,s.error.message))),l?new Jh(e,t,s.state,a):($t("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let s,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new he(r.error.code,r.error.message))),a?new vu(e,r.state,s):($t("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,a=Bm();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=F0(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return s?new Yh(e,a):($t("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zm{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Zm(t.clientId,t.onlineState):($t("SharedClientState",`Failed to parse online state: ${e}`),null)}}class am{constructor(){this.activeTargetIds=Bm()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kp{constructor(e,t,r,s,a){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Tt(ze),this.started=!1,this.bs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=Ow(this.persistenceKey,this.ps),this.vs=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new am),this.Cs=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.xs=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.Os=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(Ow(this.persistenceKey,r));if(s){const a=Yh.Rs(r,s);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pp(this.persistenceKey,e));if(s){const a=vu.Rs(e,s);a&&(r=a.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Qs(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ne("SharedClientState","READ",e,t),t}setItem(e,t){ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ne("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void $t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(a){let l=Jn.oe;if(a!=null)try{const h=JSON.parse(a);De(typeof h=="number"),l=h}catch(h){$t("SharedClientState","Failed to read sequence number from WebStorage",h)}return l})(t.newValue);r!==Jn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const s=new Jh(this.currentUser,e,t,r),a=Mw(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Vs())}Qs(e){const t=Mw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const s=Pp(this.persistenceKey,e),a=new vu(e,t,r);this.setItem(s,a.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Yh.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),s=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Jh.Rs(new An(a),s,t)}Ys(e,t){const r=this.Ms.exec(e),s=Number(r[1]);return vu.Rs(s,t)}Ls(e){return Zm.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),s=this.ks(this.Ss),a=this.ks(r),l=[],h=[];return a.forEach((f=>{s.has(f)||l.push(f)})),s.forEach((f=>{a.has(f)||h.push(f)})),this.syncEngine.io(l,h).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Bm();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class ZI{constructor(){this.so=new am,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new am,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph=null;function Cp(){return ph===null?ph=(function(){return 268435456+Math.round(2147483648*Math.random())})():ph++,"0x"+ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class kD extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(t,r,s,a,l){const h=Cp(),f=this.xo(t,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${t}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,l),this.No(t,f,m,s).then((_=>(ne("RestConnection",`Received RPC '${t}' ${h}: `,_),_)),(_=>{throw Ru("RestConnection",`RPC '${t}' ${h} failed with error: `,_,"url: ",f,"request:",s),_}))}Lo(t,r,s,a,l,h){return this.Mo(t,r,s,a,l)}Oo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>t[l]=a)),s&&s.headers.forEach(((a,l)=>t[l]=a))}xo(t,r){const s=RD[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const a=Cp();return new Promise(((l,h)=>{const f=new R0;f.setWithCredentials(!0),f.listenOnce(P0.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ih.NO_ERROR:const _=f.getResponseJson();ne(Sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),l(_);break;case Ih.TIMEOUT:ne(Sn,`RPC '${e}' ${a} timed out`),h(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const w=f.getStatus();if(ne(Sn,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const R=I?.error;if(R&&R.status&&R.message){const F=(function(O){const ie=O.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ie)>=0?ie:J.UNKNOWN})(R.status);h(new he(F,R.message))}else h(new he(J.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(J.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ne(Sn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);ne(Sn,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)}))}Bo(e,t,r){const s=Cp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=x0(),h=C0(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ne(Sn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const w=l.createWebChannel(_,f);let I=!1,R=!1;const F=new PD({Io:O=>{R?ne(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(I||(ne(Sn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),I=!0),ne(Sn,`RPC '${e}' stream ${s} sending:`,O),w.send(O))},To:()=>w.close()}),V=(O,ie,H)=>{O.listen(ie,(ee=>{try{H(ee)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return V(w,lu.EventType.OPEN,(()=>{R||(ne(Sn,`RPC '${e}' stream ${s} transport opened.`),F.yo())})),V(w,lu.EventType.CLOSE,(()=>{R||(R=!0,ne(Sn,`RPC '${e}' stream ${s} transport closed`),F.So())})),V(w,lu.EventType.ERROR,(O=>{R||(R=!0,Ru(Sn,`RPC '${e}' stream ${s} transport errored:`,O),F.So(new he(J.UNAVAILABLE,"The operation could not be completed")))})),V(w,lu.EventType.MESSAGE,(O=>{var ie;if(!R){const H=O.data[0];De(!!H);const ee=H,ae=ee.error||((ie=ee[0])===null||ie===void 0?void 0:ie.error);if(ae){ne(Sn,`RPC '${e}' stream ${s} received error:`,ae);const de=ae.status;let fe=(function(P){const x=Jt[P];if(x!==void 0)return vI(x)})(de),T=ae.message;fe===void 0&&(fe=J.INTERNAL,T="Unknown error status: "+de+" with message "+ae.message),R=!0,F.So(new he(fe,T)),w.close()}else ne(Sn,`RPC '${e}' stream ${s} received:`,H),F.bo(H)}})),V(h,k0.STAT_EVENT,(O=>{O.stat===qp.PROXY?ne(Sn,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===qp.NOPROXY&&ne(Sn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{F.wo()}),0),F}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){return typeof window<"u"?window:null}function Ch(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n){return new Lx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t,r,s,a,l,h,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tT(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?($t(t.toString()),$t("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===t&&this.P_(r,s)}),(r=>{e((()=>{const s=new he(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CD extends nT{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=Fx(this.serializer,e),r=(function(a){if(!("targetChange"in a))return be.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?be.min():l.readTime?Ln(l.readTime):be.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=tm(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=Bh(f)?{documents:PI(a,f)}:{query:kI(a,f)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=II(a,l.resumeToken);const m=Zp(a,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(be.min())>0){h.readTime=il(a,l.snapshotVersion.toTimestamp());const m=Zp(a,l.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=jx(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=tm(this.serializer),t.removeTarget=e,this.a_(t)}}class xD extends nT{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=Ux(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=tm(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Kh(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,em(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(J.UNKNOWN,a.toString())}))}Lo(e,t,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Lo(e,em(t,r),s,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(J.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class bD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($t(t),this.D_=!1):ne("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{Yo(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const m=Pe(f);m.L_.add(4),await Yu(m),m.q_.set("Unknown"),m.L_.delete(4),await Td(m)})(this))}))})),this.q_=new bD(r,s)}}async function Td(n){if(Yo(n))for(const e of n.B_)await e(!0)}async function Yu(n){for(const e of n.B_)await e(!1)}function Sd(n,e){const t=Pe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ng(t)?tg(t):_l(t).r_()&&eg(t,e))}function ol(n,e){const t=Pe(n),r=_l(t);t.N_.delete(e),r.r_()&&rT(t,e),t.N_.size===0&&(r.r_()?r.o_():Yo(t)&&t.q_.set("Unknown"))}function eg(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(n).A_(e)}function rT(n,e){n.Q_.xe(e),_l(n).R_(e)}function tg(n){n.Q_=new Dx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),_l(n).start(),n.q_.v_()}function ng(n){return Yo(n)&&!_l(n).n_()&&n.N_.size>0}function Yo(n){return Pe(n).L_.size===0}function iT(n){n.Q_=void 0}async function VD(n){n.q_.set("Online")}async function LD(n){n.N_.forEach(((e,t)=>{eg(n,e)}))}async function OD(n,e){iT(n),ng(n)?(n.q_.M_(e),tg(n)):n.q_.set("Unknown")}async function MD(n,e,t){if(n.q_.set("Online"),e instanceof EI&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const h of a.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))})(n,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(n,r)}else if(e instanceof kh?n.Q_.Ke(e):e instanceof wI?n.Q_.He(e):n.Q_.We(e),!t.isEqual(be.min()))try{const r=await QI(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.Q_.rt(l);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(m);_&&a.N_.set(m,_.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,m)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(Kt.EMPTY_BYTE_STRING,_.snapshotVersion)),rT(a,f);const w=new ji(_.target,f,m,_.sequenceNumber);eg(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await Xh(n,r)}}async function Xh(n,e,t){if(!Qs(e))throw e;n.L_.add(1),await Yu(n),n.q_.set("Offline"),t||(t=()=>QI(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ne("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Td(n)}))}function sT(n,e){return e().catch((t=>Xh(n,t,e)))}async function yl(n){const e=Pe(n),t=qs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FD(e);)try{const s=await SD(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,UD(e,s)}catch(s){await Xh(e,s)}oT(e)&&aT(e)}function FD(n){return Yo(n)&&n.O_.length<10}function UD(n,e){n.O_.push(e);const t=qs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function oT(n){return Yo(n)&&!qs(n).n_()&&n.O_.length>0}function aT(n){qs(n).start()}async function jD(n){qs(n).p_()}async function BD(n){const e=qs(n);for(const t of n.O_)e.m_(t.mutations)}async function zD(n,e,t){const r=n.O_.shift(),s=qm.from(r,e,t);await sT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await yl(n)}async function $D(n,e){e&&qs(n).V_&&await(async function(r,s){if((function(l){return kx(l)&&l!==J.ABORTED})(s.code)){const a=r.O_.shift();qs(r).s_(),await sT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await yl(r)}})(n,e),oT(n)&&aT(n)}async function Uw(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Yo(t);t.L_.add(3),await Yu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Td(t)}async function lm(n,e){const t=Pe(n);e?(t.L_.delete(2),await Td(t)):e||(t.L_.add(2),await Yu(t),t.q_.set("Unknown"))}function _l(n){return n.K_||(n.K_=(function(t,r,s){const a=Pe(t);return a.w_(),new CD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:VD.bind(null,n),Ro:LD.bind(null,n),mo:OD.bind(null,n),d_:MD.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),ng(n)?tg(n):n.q_.set("Unknown")):(await n.K_.stop(),iT(n))}))),n.K_}function qs(n){return n.U_||(n.U_=(function(t,r,s){const a=Pe(t);return a.w_(),new xD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jD.bind(null,n),mo:$D.bind(null,n),f_:BD.bind(null,n),g_:zD.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await yl(n)):(await n.U_.stop(),n.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,h=new rg(e,t,l,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(n,e){if($t("AsyncQueue",`${e}: ${n}`),Qs(n))return new he(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=uu(),this.sortedSet=new Tt(this.comparator)}static emptySet(e){return new Ga(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ga;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.W_=new Tt(pe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class al{constructor(e,t,r,s,a,l,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new al(e,t,Ga.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class KD{constructor(){this.queries=Bw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=Bw(),a.forEach(((l,h)=>{for(const f of h.j_)f.onError(r)}))})(this,new he(J.ABORTED,"Firestore shutting down"))}}function Bw(){return new Js((n=>rI(n)),md)}async function sg(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new qD,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(s,!0);break;case 1:a.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=ig(l,`Initialization of query '${Ua(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&ag(t)}async function og(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GD(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const h of l.j_)h.X_(s)&&(r=!0);l.z_=s}}r&&ag(t)}function WD(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(t);r.queries.delete(e)}function ag(n){n.Y_.forEach((e=>{e.next()}))}var um,zw;(zw=um||(um={})).ea="default",zw.Cache="cache";class lg{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==um.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.key=e}}class uT{constructor(e){this.key=e}}class HD{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ge(),this.mutatedKeys=Ge(),this.Aa=sI(e),this.Ra=new Ga(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new jw,s=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,w)=>{const I=s.get(_),R=Hu(this.query,w)?w:null,F=!!I&&this.mutatedKeys.has(I.key),V=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let O=!1;I&&R?I.data.isEqual(R.data)?F!==V&&(r.track({type:3,doc:R}),O=!0):this.ga(I,R)||(r.track({type:2,doc:R}),O=!0,(f&&this.Aa(R,f)>0||m&&this.Aa(R,m)<0)&&(h=!0)):!I&&R?(r.track({type:0,doc:R}),O=!0):I&&!R&&(r.track({type:1,doc:I}),O=!0,(f||m)&&(h=!0)),O&&(R?(l=l.add(R),a=V?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{Ra:l,fa:r,ns:h,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((_,w)=>(function(R,F){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return V(R)-V(F)})(_.type,w.type)||this.Aa(_.doc,w.doc))),this.pa(r),s=s!=null&&s;const h=t&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,m=f!==this.Ea;return this.Ea=f,l.length!==0||m?{snapshot:new al(this.query,e.Ra,a,l,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ge(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new uT(r))})),this.da.forEach((r=>{e.has(r)||t.push(new lT(r))})),t}ba(e){this.Ta=e.Ts,this.da=Ge();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return al.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JD{constructor(e){this.key=e,this.va=!1}}class YD{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Js((h=>rI(h)),md),this.Ma=new Map,this.xa=new Set,this.Oa=new Tt(pe.comparator),this.Na=new Map,this.La=new Jm,this.Ba={},this.ka=new Map,this.qa=Wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function XD(n,e,t=!0){const r=Ad(n);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await cT(r,e,t,!0),s}async function ZD(n,e){const t=Ad(n);await cT(t,e,!0,!1)}async function cT(n,e,t,r){const s=await Qh(n.localStore,hr(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await ug(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Sd(n.remoteStore,s),h}async function ug(n,e,t,r,s){n.Ka=(w,I,R)=>(async function(V,O,ie,H){let ee=O.view.ma(ie);ee.ns&&(ee=await om(V.localStore,O.query,!1).then((({documents:T})=>O.view.ma(T,ee))));const ae=H&&H.targetChanges.get(O.targetId),de=H&&H.targetMismatches.get(O.targetId)!=null,fe=O.view.applyChanges(ee,V.isPrimaryClient,ae,de);return cm(V,O.targetId,fe.wa),fe.snapshot})(n,w,I,R);const a=await om(n.localStore,e,!0),l=new HD(e,a.Ts),h=l.ma(a.documents),f=Ju.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=l.applyChanges(h,n.isPrimaryClient,f);cm(n,t,m.wa);const _=new QD(e,t,l);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function eb(n,e,t){const r=Pe(n),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((l=>!md(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ol(r.remoteStore,s.targetId),ll(r,s.targetId)})).catch(Hs)):(ll(r,s.targetId),await sl(r.localStore,s.targetId,!0))}async function tb(n,e){const t=Pe(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ol(t.remoteStore,r.targetId))}async function nb(n,e,t){const r=fg(n);try{const s=await(function(l,h){const f=Pe(l),m=Lt.now(),_=h.reduce(((R,F)=>R.add(F.key)),Ge());let w,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let F=cr(),V=Ge();return f.cs.getEntries(R,_).next((O=>{F=O,F.forEach(((ie,H)=>{H.isValidDocument()||(V=V.add(ie))}))})).next((()=>f.localDocuments.getOverlayedDocuments(R,F))).next((O=>{w=O;const ie=[];for(const H of h){const ee=Rx(H,w.get(H.key).overlayedDocument);ee!=null&&ie.push(new Hi(H.key,ee,W0(ee.value.mapValue),Pn.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,ie,h)})).next((O=>{I=O;const ie=O.applyToLocalDocumentSet(w,V);return f.documentOverlayCache.saveOverlays(R,O.batchId,ie)}))})).then((()=>({batchId:I.batchId,changes:aI(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,h,f){let m=l.Ba[l.currentUser.toKey()];m||(m=new Tt(ze)),m=m.insert(h,f),l.Ba[l.currentUser.toKey()]=m})(r,s.batchId,t),await Ys(r,s.changes),await yl(r.remoteStore)}catch(s){const a=ig(s,"Failed to persist write");t.reject(a)}}async function hT(n,e){const t=Pe(n);try{const r=await ID(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Na.get(a);l&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?De(l.va):s.removedDocuments.size>0&&(De(l.va),l.va=!1))})),await Ys(t,r,e)}catch(r){await Hs(r)}}function $w(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach(((a,l)=>{const h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)})),(function(l,h){const f=Pe(l);f.onlineState=h;let m=!1;f.queries.forEach(((_,w)=>{for(const I of w.j_)I.Z_(h)&&(m=!0)})),m&&ag(f)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rb(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),a=s&&s.key;if(a){let l=new Tt(pe.comparator);l=l.insert(a,jt.newNoDocument(a,be.min()));const h=Ge().add(a),f=new Qu(be.min(),new Map,new Tt(ze),l,h);await hT(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),dg(r)}else await sl(r.localStore,e,!1).then((()=>ll(r,e,t))).catch(Hs)}async function ib(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await ED(t.localStore,e);hg(t,r,null),cg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ys(t,s)}catch(s){await Hs(s)}}async function sb(n,e,t){const r=Pe(n);try{const s=await(function(l,h){const f=Pe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,h).next((w=>(De(w!==null),_=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);hg(r,e,t),cg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ys(r,s)}catch(s){await Hs(s)}}function cg(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function hg(n,e,t){const r=Pe(n);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function ll(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||dT(n,r)}))}function dT(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(ol(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),dg(n))}function cm(n,e,t){for(const r of t)r instanceof lT?(n.La.addReference(r.key,e),ob(n,r)):r instanceof uT?(ne("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||dT(n,r.key)):Ae()}function ob(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ne("SyncEngine","New document in limbo: "+t),n.xa.add(r),dg(n))}function dg(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new pe(ht.fromString(e)),r=n.qa.next();n.Na.set(r,new JD(t)),n.Oa=n.Oa.insert(t,r),Sd(n.remoteStore,new ji(hr(Wu(t.path)),r,"TargetPurposeLimboResolution",Jn.oe))}}async function Ys(n,e,t){const r=Pe(n),s=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((h,f)=>{l.push(r.Ka(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=Xm.Wi(f.targetId,m);a.push(w)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(f,m){const _=Pe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>$.forEach(m,(I=>$.forEach(I.$i,(R=>_.persistence.referenceDelegate.addReference(w,I.targetId,R))).next((()=>$.forEach(I.Ui,(R=>_.persistence.referenceDelegate.removeReference(w,I.targetId,R)))))))))}catch(w){if(!Qs(w))throw w;ne("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const I=w.targetId;if(!w.fromCache){const R=_.os.get(I),F=R.snapshotVersion,V=R.withLastLimboFreeSnapshotVersion(F);_.os=_.os.insert(I,V)}}})(r.localStore,a))}async function ab(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await HI(t.localStore,e);t.currentUser=e,(function(a,l){a.ka.forEach((h=>{h.forEach((f=>{f.reject(new he(J.CANCELLED,l))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ys(t,r.hs)}}function lb(n,e){const t=Pe(n),r=t.Na.get(e);if(r&&r.va)return Ge().add(r.key);{let s=Ge();const a=t.Ma.get(e);if(!a)return s;for(const l of a){const h=t.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}async function ub(n,e){const t=Pe(n),r=await om(t.localStore,e.query,!0),s=e.view.ba(r);return t.isPrimaryClient&&cm(t,e.targetId,s.wa),s}async function cb(n,e){const t=Pe(n);return YI(t.localStore,e).then((r=>Ys(t,r)))}async function hb(n,e,t,r){const s=Pe(n),a=await(function(h,f){const m=Pe(h),_=Pe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(w=>_.Mn(w,f).next((I=>I?m.localDocuments.getDocuments(w,I):$.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await yl(s.remoteStore):t==="acknowledged"||t==="rejected"?(hg(s,e,r||null),cg(s,e),(function(h,f){Pe(Pe(h).mutationQueue).On(f)})(s.localStore,e)):Ae(),await Ys(s,a)):ne("SyncEngine","Cannot apply mutation batch with id: "+e)}async function db(n,e){const t=Pe(n);if(Ad(t),fg(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await qw(t,r.toArray());t.Qa=!0,await lm(t.remoteStore,!0);for(const a of s)Sd(t.remoteStore,a)}else if(e===!1&&t.Qa!==!1){const r=[];let s=Promise.resolve();t.Ma.forEach(((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then((()=>(ll(t,l),sl(t.localStore,l,!0)))),ol(t.remoteStore,l)})),await s,await qw(t,r),(function(l){const h=Pe(l);h.Na.forEach(((f,m)=>{ol(h.remoteStore,m)})),h.La.pr(),h.Na=new Map,h.Oa=new Tt(pe.comparator)})(t),t.Qa=!1,await lm(t.remoteStore,!1)}}async function qw(n,e,t){const r=Pe(n),s=[],a=[];for(const l of e){let h;const f=r.Ma.get(l);if(f&&f.length!==0){h=await Qh(r.localStore,hr(f[0]));for(const m of f){const _=r.Fa.get(m),w=await ub(r,_);w.snapshot&&a.push(w.snapshot)}}else{const m=await JI(r.localStore,l);h=await Qh(r.localStore,m),await ug(r,fT(m),l,!1,h.resumeToken)}s.push(h)}return r.Ca.d_(a),s}function fT(n){return tI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fb(n){return(function(t){return Pe(Pe(t).persistence).Qi()})(Pe(n).localStore)}async function pb(n,e,t,r){const s=Pe(n);if(s.Qa)return void ne("SyncEngine","Ignoring unexpected query state notification.");const a=s.Ma.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await YI(s.localStore,iI(a[0])),h=Qu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Kt.EMPTY_BYTE_STRING);await Ys(s,l,h);break}case"rejected":await sl(s.localStore,e,!0),ll(s,e,r);break;default:Ae()}}async function mb(n,e,t){const r=Ad(n);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ne("SyncEngine","Adding an already active target "+s);continue}const a=await JI(r.localStore,s),l=await Qh(r.localStore,a);await ug(r,fT(a),l.targetId,!1,l.resumeToken),Sd(r.remoteStore,l)}for(const s of t)r.Ma.has(s)&&await sl(r.localStore,s,!1).then((()=>{ol(r.remoteStore,s),ll(r,s)})).catch(Hs)}}function Ad(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rb.bind(null,e),e.Ca.d_=GD.bind(null,e.eventManager),e.Ca.$a=WD.bind(null,e.eventManager),e}function fg(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ib.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sb.bind(null,e),e}class Ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return WI(this.persistence,new GI,e.initialUser,this.serializer)}Ga(e){return new qI(Ed.Zr,this.serializer)}Wa(e){return new ZI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ou.provider={build:()=>new Ou};class pT extends Ou{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await fg(this.Ja.syncEngine),await yl(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return WI(this.persistence,new GI,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new rD(r,e.asyncQueue,t)}Ha(e,t){const r=new M1(t,this.persistence);return new O1(e.asyncQueue,r)}Ga(e){const t=KI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new Ym(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eT(),Ch(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new ZI}}class gb extends pT{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof kp&&(this.sharedClientState.syncEngine={no:hb.bind(null,t),ro:pb.bind(null,t),io:mb.bind(null,t),Qi:fb.bind(null,t),eo:cb.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await db(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=eT();if(!kp.D(t))throw new he(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Mu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ab.bind(null,this.syncEngine),await lm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KD})()}createDatastore(e){const t=Id(e.databaseInfo.databaseId),r=(function(a){return new kD(a)})(e.databaseInfo);return(function(a,l,h,f){return new DD(a,l,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,h){return new ND(r,s,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>$w(this.syncEngine,t,0)),(function(){return Fw.D()?new Fw:new AD})())}createSyncEngine(e,t){return(function(s,a,l,h,f,m,_){const w=new YD(s,a,l,h,f,m);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Pe(s);ne("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Yu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Mu.provider={build:()=>new Mu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$t("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=D0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{ne("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ig(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function xp(n,e){n.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await HI(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Kw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _b(n);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Uw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Uw(e.remoteStore,s))),n._onlineComponents=e}async function _b(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await xp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ru("Error using user provided cache. Falling back to memory cache: "+t),await xp(n,new Ou)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await xp(n,new Ou);return n._offlineComponents}async function mT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await Kw(n,n._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await Kw(n,new Mu))),n._onlineComponents}function vb(n){return mT(n).then((e=>e.syncEngine))}async function Zh(n){const e=await mT(n),t=e.eventManager;return t.onListen=XD.bind(null,e.syncEngine),t.onUnlisten=eb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tb.bind(null,e.syncEngine),t}function wb(n,e,t={}){const r=new mi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,m){const _=new pg({next:I=>{_.Za(),l.enqueueAndForget((()=>og(a,w)));const R=I.docs.has(h);!R&&I.fromCache?m.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&I.fromCache&&f&&f.source==="server"?m.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new lg(Wu(h.path),_,{includeMetadataChanges:!0,_a:!0});return sg(a,w)})(await Zh(n),n.asyncQueue,e,t,r))),r.promise}function Eb(n,e,t={}){const r=new mi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,m){const _=new pg({next:I=>{_.Za(),l.enqueueAndForget((()=>og(a,w))),I.fromCache&&f.source==="server"?m.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new lg(h,_,{includeMetadataChanges:!0,_a:!0});return sg(a,w)})(await Zh(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(n,e,t){if(!t)throw new he(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ib(n,e,t,r){if(e===!0&&r===!0)throw new he(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ww(n){if(!pe.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Hw(n){if(pe.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function dr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rd(n);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ib("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mg{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qw(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new R1;switch(r.type){case"firstParty":return new C1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Gw.get(t);r&&(ne("ComponentProvider","Removing Datastore"),Gw.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class js extends Qi{constructor(e,t,r){super(e,t,Wu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new pe(e))}withConverter(e){return new js(this.firestore,e,this._path)}}function st(n,e,...t){if(n=qt(n),yT("collection","path",e),n instanceof mg){const r=ht.fromString(e,...t);return Hw(r),new js(n,null,r)}{if(!(n instanceof kn||n instanceof js))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Hw(r),new js(n.firestore,null,r)}}function wt(n,e,...t){if(n=qt(n),arguments.length===1&&(e=D0.newId()),yT("doc","path",e),n instanceof mg){const r=ht.fromString(e,...t);return Ww(r),new kn(n,null,new pe(r))}{if(!(n instanceof kn||n instanceof js))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Ww(r),new kn(n.firestore,n instanceof js?n.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tT(this,"async_queue_retry"),this.Vu=()=>{const r=Ch();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Ch();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ch();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new mi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qs(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h})(r);throw $t("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=rg.createAndSchedule(this,e,t,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Yw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=-1;class Gi extends mg{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Jw,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jw(e),this._firestoreClient=void 0,await e}}}function Sb(n,e,t){t||(t="(default)");const r=ld(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(Iu(a,e))return s;throw new he(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function Pd(n){if(n._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ab(n),n._firestoreClient}function Ab(n){var e,t,r;const s=n._freezeSettings(),a=(function(h,f,m,_){return new ix(h,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,gT(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new yb(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(Kt.fromBase64String(e))}catch(t){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ul(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=/^__.*__$/;class Pb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}class _T{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class _g{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _g(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ed(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vT(this.Cu)&&Rb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Id(e)}Qu(e,t,r,s=!1){return new _g({Cu:e,methodName:t,qu:r,path:Vt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(n){const e=n._freezeSettings(),t=Id(n._databaseId);return new kb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wT(n,e,t,r,s,a={}){const l=n.Qu(a.merge||a.mergeFields?2:0,e,t,s);wg("Data must be an object, but it was:",l,r);const h=ET(r,l);let f,m;if(a.merge)f=new Yn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const I=hm(e,w,t);if(!l.contains(I))throw new he(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);TT(_,I)||_.push(I)}f=new Yn(_),m=l.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=l.fieldTransforms;return new Pb(new Rn(h),f,m)}class Dd extends Cd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dd}}class vg extends Cd{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new rl(e.serializer,cI(e.serializer,this.$u));return new mI(e.path,t)}isEqual(e){return e instanceof vg&&this.$u===e.$u}}function Cb(n,e,t,r){const s=n.Qu(1,e,t);wg("Data must be an object, but it was:",s,r);const a=[],l=Rn.empty();Jo(r,((f,m)=>{const _=Eg(e,f,t);m=qt(m);const w=s.Nu(_);if(m instanceof Dd)a.push(_);else{const I=Xu(m,w);I!=null&&(a.push(_),l.set(_,I))}}));const h=new Yn(a);return new _T(l,h,s.fieldTransforms)}function xb(n,e,t,r,s,a){const l=n.Qu(1,e,t),h=[hm(e,r,t)],f=[s];if(a.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)h.push(hm(e,a[I])),f.push(a[I+1]);const m=[],_=Rn.empty();for(let I=h.length-1;I>=0;--I)if(!TT(m,h[I])){const R=h[I];let F=f[I];F=qt(F);const V=l.Nu(R);if(F instanceof Dd)m.push(R);else{const O=Xu(F,V);O!=null&&(m.push(R),_.set(R,O))}}const w=new Yn(m);return new _T(_,w,l.fieldTransforms)}function Db(n,e,t,r=!1){return Xu(t,n.Qu(r?4:3,e))}function Xu(n,e){if(IT(n=qt(n)))return wg("Unsupported field value:",e,n),ET(n,e);if(n instanceof Cd)return(function(r,s){if(!vT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const h of r){let f=Xu(h,s.Lu(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Lt.fromDate(r);return{timestampValue:il(s.serializer,a)}}if(r instanceof Lt){const a=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:il(s.serializer,a)}}if(r instanceof gg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ul)return{bytesValue:II(s.serializer,r._byteString)};if(r instanceof kn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Wm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yg)return(function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return zm(h.serializer,f)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${Rd(r)}`)})(n,e)}function ET(n,e){const t={};return $0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(n,((r,s)=>{const a=Xu(s,e.Mu(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function IT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof gg||n instanceof ul||n instanceof kn||n instanceof Cd||n instanceof yg)}function wg(n,e,t){if(!IT(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const r=Rd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function hm(n,e,t){if((e=qt(e))instanceof kd)return e._internalPath;if(typeof e=="string")return Eg(n,e);throw ed("Field path arguments must be of type string or ",n,!1,void 0,t)}const bb=new RegExp("[~\\*/\\[\\]]");function Eg(n,e,t){if(e.search(bb)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kd(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ed(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new he(J.INVALID_ARGUMENT,h+n+f)}function TT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Nb extends ST{data(){return super.data()}}function bd(n,e){return typeof e=="string"?Eg(n,e):e instanceof kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ig{}class Tg extends Ig{}function Ho(n,e,...t){let r=[];e instanceof Ig&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof Sg)).length,h=a.filter((f=>f instanceof Nd)).length;if(l>1||l>0&&h>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Nd extends Tg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Nd(e,t,r)}_apply(e){const t=this._parse(e);return kT(e._query,t),new Qi(e.firestore,e.converter,Xp(e._query,t))}_parse(e){const t=xd(e.firestore);return(function(a,l,h,f,m,_,w){let I;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Zw(w,_);const R=[];for(const F of w)R.push(Xw(f,a,F));I={arrayValue:{values:R}}}else I=Xw(f,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Zw(w,_),I=Db(h,l,w,_==="in"||_==="not-in");return tt.create(m,_,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cl(n,e,t){const r=e,s=bd("where",n);return Nd._create(s,r,t)}class Sg extends Ig{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:mt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const h=a.getFlattenedFilters();for(const f of h)kT(l,f),l=Xp(l,f)})(e._query,t),new Qi(e.firestore,e.converter,Xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends Tg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ag(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vu(a,l)})(e._query,this._field,this._direction);return new Qi(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new ml(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function RT(n,e="asc"){const t=e,r=bd("orderBy",n);return Ag._create(r,t)}class Rg extends Tg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Rg(e,t,r)}_apply(e){return new Qi(e.firestore,e.converter,$h(e._query,this._limit,this._limitType))}}function PT(n){return Rg._create("limit",n,"F")}function Xw(n,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nI(e)&&t.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!pe.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bu(n,new pe(r))}if(t instanceof kn)return bu(n,t._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(t)}.`)}function Zw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kT(n,e){const t=(function(s,a){for(const l of s)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Vb{convertValue(e,t="none"){switch($o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>Ct(l.doubleValue)));return new yg(a)}convertGeoPoint(e){return new gg(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Um(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=Ki(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);De(bI(r));const s=new zo(r.get(1),r.get(3)),a=new pe(r.popFirst(5));return s.isEqual(t)||$t(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xT extends ST{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xh extends xT{data(e={}){return super.data(e)}}class DT{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new du(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new xh(this._firestore,this._userDataWriter,r.key,r,new du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((h=>{const f=new xh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new du(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new xh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new du(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:Lb(h.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Lb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n){n=dr(n,kn);const e=dr(n.firestore,Gi);return wb(Pd(e),n._key).then((t=>NT(e,n,t)))}class Pg extends Vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function yt(n){n=dr(n,Qi);const e=dr(n.firestore,Gi),t=Pd(e),r=new Pg(e);return AT(n._query),Eb(t,n._query).then((s=>new DT(e,r,n,s)))}function vl(n,e,t){n=dr(n,kn);const r=dr(n.firestore,Gi),s=CT(n.converter,e,t);return Vd(r,[wT(xd(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Pn.none())])}function Ar(n,e,t,...r){n=dr(n,kn);const s=dr(n.firestore,Gi),a=xd(s);let l;return l=typeof(e=qt(e))=="string"||e instanceof kd?xb(a,"updateDoc",n._key,e,t,r):Cb(a,"updateDoc",n._key,e),Vd(s,[l.toMutation(n._key,Pn.exists(!0))])}function ur(n){return Vd(dr(n.firestore,Gi),[new _d(n._key,Pn.none())])}function wl(n,e){const t=dr(n.firestore,Gi),r=wt(n),s=CT(n.converter,e);return Vd(t,[wT(xd(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then((()=>r))}function A2(n,...e){var t,r,s;n=qt(n);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Yw(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Yw(e[l])){const w=e[l];e[l]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let f,m,_;if(n instanceof kn)m=dr(n.firestore,Gi),_=Wu(n._key.path),f={next:w=>{e[l]&&e[l](NT(m,n,w))},error:e[l+1],complete:e[l+2]};else{const w=dr(n,Qi);m=dr(w.firestore,Gi),_=w._query;const I=new Pg(m);f={next:R=>{e[l]&&e[l](new DT(m,I,w,R))},error:e[l+1],complete:e[l+2]},AT(n._query)}return(function(I,R,F,V){const O=new pg(V),ie=new lg(R,O,F);return I.asyncQueue.enqueueAndForget((async()=>sg(await Zh(I),ie))),()=>{O.Za(),I.asyncQueue.enqueueAndForget((async()=>og(await Zh(I),ie)))}})(Pd(m),_,h,f)}function Vd(n,e){return(function(r,s){const a=new mi;return r.asyncQueue.enqueueAndForget((async()=>nb(await vb(r),s,a))),a.promise})(Pd(n),e)}function NT(n,e,t){const r=t.docs.get(e._key),s=new Pg(n);return new xT(n,s,e._key,r,new du(t.hasPendingWrites,t.fromCache),e.converter)}class Ob{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=jb(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Mb(n){return new Ob(n)}class Fb{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Mu.provider,this._offlineComponentProvider={build:t=>new pT(t,e?.cacheSizeBytes,this.forceOwnership)}}}class Ub{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Mu.provider,this._offlineComponentProvider={build:t=>new gb(t,e?.cacheSizeBytes)}}}function jb(n){return new Fb(void 0)}function Bb(){return new Ub}function zb(n){return new vg("increment",n)}(function(e,t=!0){(function(s){pl=s})(dl),Fo(new Bs("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new Gi(new P1(r.getProvider("auth-internal")),new D1(r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zo(m.options.projectId,_)})(l,s),l);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),fi(Kv,"4.7.3",e),fi(Kv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="type.googleapis.com/google.protobuf.Int64Value",qb="type.googleapis.com/google.protobuf.UInt64Value";function VT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function dm(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>dm(e));if(typeof n=="function"||typeof n=="object")return VT(n,e=>dm(e));throw new Error("Data cannot be encoded in JSON: "+n)}function td(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case $b:case qb:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>td(e)):typeof n=="function"||typeof n=="object"?VT(n,e=>td(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wa extends vi{constructor(e,t,r){super(`${kg}/${e}`,t||""),this.details=r}}function Kb(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Gb(n,e){let t=Kb(n),r=t,s;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!eE[l])return new Wa("internal","internal");t=eE[l],r=l}const h=a.message;typeof h=="string"&&(r=h),s=a.details,s!==void 0&&(s=td(s))}}catch{}return t==="ok"?null:new Wa(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="us-central1";function Hb(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Wa("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Qb{constructor(e,t,r,s,a=fm,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new Wb(t,r,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=fm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Jb(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function Yb(n,e,t){return(r=>Zb(n,e,r,{}))}async function Xb(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}function Zb(n,e,t,r){const s=n._url(e);return eN(n,s,t,r)}async function eN(n,e,t,r){t=dm(t);const s={data:t},a={},l=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);l.authToken&&(a.Authorization="Bearer "+l.authToken),l.messagingToken&&(a["Firebase-Instance-ID-Token"]=l.messagingToken),l.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=l.appCheckToken);const h=r.timeout||7e4,f=Hb(h),m=await Promise.race([Xb(e,s,a,n.fetchImpl),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new Wa("cancelled","Firebase Functions instance was deleted.");const _=Gb(m.status,m.json);if(_)throw _;if(!m.json)throw new Wa("internal","Response is not valid JSON object.");let w=m.json.data;if(typeof w>"u"&&(w=m.json.result),typeof w>"u")throw new Wa("internal","Response is missing data field.");return{data:td(w)}}const tE="@firebase/functions",nE="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="auth-internal",nN="app-check-internal",rN="messaging-internal";function iN(n,e){const t=(r,{instanceIdentifier:s})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider(tN),h=r.getProvider(rN),f=r.getProvider(nN);return new Qb(a,l,h,f,s,n)};Fo(new Bs(kg,t,"PUBLIC").setMultipleInstances(!0)),fi(tE,nE,e),fi(tE,nE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n=Tm(),e=fm){const r=ld(qt(n),kg).getImmediate({identifier:e}),s=eP("functions");return s&&sN(r,...s),r}function sN(n,e,t){Jb(qt(n),e,t)}function oN(n,e,t){return Yb(qt(n),e)}iN(fetch.bind(self));const OT={apiKey:"AIzaSyBzC3ewoJvmW-DIHG3kN09kdw6YAf5_6IM",authDomain:"uconn-fsae-ev.firebaseapp.com",projectId:"uconn-fsae-ev",storageBucket:"uconn-fsae-ev.firebasestorage.app",messagingSenderId:"250394437331",appId:"1:250394437331:web:5170ea4d906a220eac5626"};function aN(){const n=Object.entries(OT).filter(([e,t])=>!t).map(([e])=>e);if(n.length){const e=`Missing Firebase env vars: ${n.join(", ")}.
Create .env.local and set VITE_FIREBASE_* variables. See .env.example.`;throw new Error(e)}}aN();const Ld=pk().length?Tm():zE(OT),Ce=globalThis.__FSAE_FIRESTORE__||(globalThis.__FSAE_FIRESTORE__=Sb(Ld,{localCache:Mb({tabManager:Bb(),cacheSizeBytes:Tb})})),R2=LT(Ld,"us-central1"),nd=S0(Ld);async function lN(){const n=LT(void 0,"us-central1"),r=(await oN(n,"getAdminRoles")())?.data??{};if(typeof r.uid!="string"||typeof r.isAdmin!="boolean"||typeof r.isLead!="boolean"||!Array.isArray(r.adminUids)||!Array.isArray(r.leadUids))throw new Error("Roles function did not return the full shape");try{const s=await nd.currentUser?.getIdTokenResult();let a=!!s?.claims?.roles?.team_lead,l=!!s?.claims?.roles?.team_member;if(!a&&!l&&r.uid.startsWith("discord:"))try{const R=(await bT(wt(Ce,"users",r.uid))).data();a=!!R?.roles?.team_lead,l=!!R?.roles?.team_member}catch{}const f=r.isAdmin||!1,m=r.isLead||a,_=l||m||f;return{uid:r.uid,isAdmin:f,isLead:m,isMember:_,adminUids:r.adminUids,leadUids:r.leadUids,version:r.version}}catch{const s=r.isAdmin,a=r.isLead,l=a||s;return{uid:r.uid,isAdmin:s,isLead:a,isMember:l,adminUids:r.adminUids,leadUids:r.leadUids,version:r.version}}}let Kr=null;const Ha=new Set;let rE=!1,MT=null,mh=null;async function uN(n){return mh||(mh=(async()=>{try{await n.getIdToken(!0)}catch{}return await lN()})().finally(()=>{mh=null})),mh}function cN(){rE||(rE=!0,MT=d0(nd,async n=>{if(!n){Kr=null,Ha.forEach(e=>e(Kr));return}try{Kr=await uN(n),Ha.forEach(e=>e(Kr))}catch{Kr={uid:n.uid,isAdmin:!1,isLead:!1,isMember:!1,adminUids:[],leadUids:[]},Ha.forEach(e=>e(Kr))}}))}function Od(n){return cN(),Ha.add(n),n(Kr),()=>{Ha.delete(n),Ha.size}}function P2(){const[n,e]=Xt.useState(Kr),[t,r]=Xt.useState(!1);return Xt.useEffect(()=>{const a=Od(l=>{e(l),r(!0)});return()=>{typeof a=="function"&&a()}},[]),{role:Xt.useMemo(()=>n?n.isAdmin?"admin":n.isLead?"lead":n.isMember?"member":null:null,[n]),ready:t}}function hN({children:n}){const[e,t]=Xt.useState(Kr);return Xt.useEffect(()=>Od(t),[]),e&&(e.isAdmin||e.isLead)?Q.jsx(Q.Fragment,{children:n}):null}function k2({children:n}){const[e,t]=Xt.useState(Kr);return Xt.useEffect(()=>Od(t),[]),e&&e.isAdmin?Q.jsx(Q.Fragment,{children:n}):null}function dN({children:n}){const[e,t]=Xt.useState(Kr);return Xt.useEffect(()=>Od(t),[]),e&&(e.isAdmin||e.isLead||e.isMember)?Q.jsx(Q.Fragment,{children:n}):null}const pm=[],iE=[];function fN(n){return!!n&&pm.includes(n)}const pN=["people","projects","settings","ranked"],mN=["people","projects"];function C2(n,e){const t=typeof n=="string"?void 0:n?.role;return t?t==="admin"?pN.includes(e):t==="lead"?mN.includes(e):!1:!1}function gN(n,e){pm.length=0,pm.push(...n||[]),iE.length=0,iE.push(...e||[]),yN.forEach(t=>{try{t()}catch{}})}const yN=new Set,Ks=S0(Ld),FT=new Oi;FT.setCustomParameters({prompt:"select_account"});function UT(n){return d0(Ks,n)}async function _N(){const{user:n}=await DC(Ks,FT);try{await Ks.currentUser?.getIdToken(!0)}catch{}return n}async function vN(){await hC(Ks)}function x2(){return Ks.currentUser}function Md(){const n=Ks.currentUser;return fN(n?.uid||null)}async function wN(){const e=typeof window<"u"&&window.location.hostname==="localhost"?"http://127.0.0.1:5002/uconn-fsae-ev/us-central1":"https://us-central1-uconn-fsae-ev.cloudfunctions.net",t=new URL("http://127.0.0.1:5002").origin,r=new URL("http://localhost:5002").origin,s=new URL("https://us-central1-uconn-fsae-ev.cloudfunctions.net").origin,a=new Set([t,r,s]),l=`${e}/discordLogin`,h=520,f=720,m=window.screenLeft!==void 0?window.screenLeft:window.screenX,_=window.screenTop!==void 0?window.screenTop:window.screenY,w=window.innerWidth||document.documentElement.clientWidth||screen.width,I=window.innerHeight||document.documentElement.clientHeight||screen.height,R=Math.max(0,(w-h)/2+m),F=Math.max(0,(I-f)/2+_),V=`scrollbars=yes,width=${h},height=${f},top=${F},left=${R}`,O=window.open(l,"discord-auth",V)||null;return new Promise((ie,H)=>{let ee=!1;const ae=(fe,T)=>{if(!ee){if(ee=!0,window.removeEventListener("message",de),O&&!O.closed)try{O.close()}catch{}if(fe)return H(fe);ie(T)}},de=async fe=>{try{if(!a.has(fe.origin))return;const T=fe.data;if(!T||T.source!=="discord-auth"||!T.token)return;const A=await lC(Ks,T.token);try{await Ks.currentUser?.getIdToken(!0)}catch{}ae(void 0,A.user)}catch(T){ae(T)}};window.addEventListener("message",de),(!O||O.closed)&&window.location.assign(l),setTimeout(()=>ae(new Error("Discord login timed out")),120*1e3)})}function EN(){const[n,e]=X.useState(null);return X.useEffect(()=>UT(t=>{e(t)}),[]),n}function IN({className:n}){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 190 512 140",className:n,role:"img","aria-label":"UConn FSAE Team Logo",preserveAspectRatio:"xMidYMid meet",children:Q.jsx("g",{fill:"currentColor",fillRule:"evenodd",className:"text-white dark:text-white",children:Q.jsx("path",{d:"M 46 302 L 49 305 L 139 244 L 198 211 L 205 211 L 212 218 L 206 265 L 209 276 L 216 281 L 240 278 L 301 255 L 341 253 L 425 273 L 480 295 L 464 308 L 479 304 L 485 293 L 477 286 L 421 266 L 334 247 L 303 249 L 218 276 L 211 268 L 217 215 L 209 206 L 200 205 L 133 241 Z M 33 210 L 33 225 L 37 238 L 46 249 L 69 267 L 72 266 L 72 262 L 52 247 L 45 239 L 40 230 L 38 223 L 38 213 L 40 207 L 44 203 L 63 201 L 120 203 L 126 207 L 128 212 L 128 230 L 132 232 L 134 227 L 134 215 L 132 206 L 127 200 L 122 198 L 89 196 L 48 197 L 38 200 Z M 225 223 L 225 224 L 222 229 L 222 239 L 223 240 L 223 242 L 224 243 L 225 246 L 228 249 L 230 249 L 231 250 L 235 250 L 236 251 L 239 251 L 240 252 L 242 252 L 243 253 L 247 253 L 248 254 L 250 254 L 251 255 L 255 255 L 256 256 L 261 256 L 262 255 L 262 254 L 263 253 L 263 248 L 261 246 L 256 246 L 255 245 L 251 245 L 250 244 L 247 244 L 246 243 L 244 243 L 243 242 L 242 242 L 237 237 L 237 233 L 240 230 L 247 230 L 248 231 L 254 231 L 255 232 L 258 232 L 259 231 L 259 228 L 258 227 L 258 226 L 252 220 L 251 220 L 248 218 L 245 218 L 244 217 L 238 217 L 237 218 L 232 219 Z"})})})}const Zu="fsae:",Cg=300*1e3;function rd(n){return`${Zu}${n}`}function El(n){if(Md())return null;try{const e=localStorage.getItem(rd(n));if(!e)return null;const{exp:t,data:r}=JSON.parse(e);return t&&Date.now()<t?r:(localStorage.removeItem(rd(n)),null)}catch{return null}}function Gr(n,e,t=Cg){if(!Md())try{const r=JSON.stringify({exp:Date.now()+t,data:e});localStorage.setItem(rd(n),r)}catch{}}function rn(n){for(const e of n)try{localStorage.removeItem(rd(e))}catch{}}function Fd(n){try{const e=Zu+n;for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t)||"";r.startsWith(e)&&localStorage.removeItem(r)}}catch{}}function jT(n){switch(String(n||"")){case"Complete":case"complete":return"Complete";case"In Progress":case"in_progress":case"in progress":return"In Progress";case"Todo":case"open":default:return"Todo"}}async function TN(){if(!Md())try{const n="784228444983918633",e=(async()=>{try{const _=st(Ce,"discordGuilds",n,"members"),w=Ho(_,RT("displayName"),PT(2e3));return await yt(w)}catch{return null}})(),[t,r,s,a,l,h]=await Promise.all([e,yt(st(Ce,"projects")),yt(st(Ce,"tasks")),yt(st(Ce,"settings")),yt(st(Ce,"ranked")),yt(st(Ce,"people"))]);if(t){const _=new Map;try{h?.docs.forEach(I=>{const R=I.data();(R?.id||I.id)&&_.set(R.id||I.id,R)})}catch{}const w=t.docs.map(I=>{const R=I.data(),F=R?.displayName??R?.globalName??R?.username??I.id,V=R?.avatarUrl||(R?.avatar?`https://cdn.discordapp.com/avatars/${I.id}/${R.avatar}.png?size=64`:void 0),O={id:I.id,name:F,discord:R?.username?`@${R.username}`:void 0,avatar_url:V},ie=_.get(I.id)||{};return{...O,...ie,id:I.id,name:ie.name||O.name,avatar_url:O.avatar_url||ie.avatar_url}});Gr("people",w)}Gr("projects",r.docs.map(_=>_.data())),Gr("tasks",s.docs.map(_=>_.data()));const f=a.docs.find(_=>_.id==="global");f&&Gr("settings",f.data());const m=l.docs.find(_=>_.id==="settings");m&&Gr("ranked:settings",m.data())}catch{}}function SN(){rn(["projects"])}function AN(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e)||"";t.startsWith(Zu)&&n.push(t)}for(const e of n)localStorage.removeItem(e)}catch{}}function Rr(n){const e={};for(const[t,r]of Object.entries(n))r!==void 0&&(e[t]=r);return e}async function RN(){const n=El("people");if(n)return n;const t=st(Ce,"discordGuilds","784228444983918633","members"),r=Ho(t,RT("displayName"),PT(2e3)),[s,a]=await Promise.all([yt(r),yt(st(Ce,"people"))]),l=new Map;try{a.docs.forEach(f=>{const m=f.data();(m?.id||f.id)&&l.set(m.id||f.id,m)})}catch{}const h=s.docs.map(f=>{const m=f.data(),_=m?.displayName??m?.globalName??m?.username??f.id,w=m?.avatarUrl||(m?.avatar?`https://cdn.discordapp.com/avatars/${f.id}/${m.avatar}.png?size=64`:void 0),I={id:f.id,name:_,discord:m?.username?`@${m.username}`:void 0,avatar_url:w},R=l.get(f.id)||{};return{...I,...R,id:f.id,name:R.name||I.name,avatar_url:I.avatar_url||R.avatar_url}});return Gr("people",h),h}async function PN(){const n=El("projects");if(n)return n;const t=(await yt(st(Ce,"projects"))).docs.map(r=>{const s=r.data();return{...s,id:s.id||r.id}});return Gr("projects",t),t}async function kN(){return(await yt(st(Ce,"project_deps"))).docs.map(e=>{const t=e.data();return{...t,id:t?.id||e.id}})}async function CN(){const n=El("tasks");if(n)return n;const t=(await yt(st(Ce,"tasks"))).docs.map(r=>{const s=r.data(),a=jT(s?.status);return{...s,status:a}});return Gr("tasks",t),t}async function xN(n){const e=`tasks:project:${n}`,t=El(e);if(t)return t;const r=Ho(st(Ce,"tasks"),cl("project_id","==",n)),a=(await yt(r)).docs.map(l=>{const h=l.data(),f=jT(h?.status);return{...h,status:f}});return Gr(e,a),a}async function DN(n){const e=Date.now();let t=n.status||"open";const r=String(t||"").toLowerCase();t=r==="complete"?"complete":r==="in progress"||r==="in_progress"?"in_progress":r==="todo"?"open":r||"open";const s=Rr({project_id:n.project_id,description:n.description,status:t,assignee_id:n.assignee_id,ranked_points:n.ranked_points,created_at:n.created_at??e});try{try{await nd.currentUser?.getIdToken(!0)}catch{}}catch{}try{const a=await wl(st(Ce,"tasks"),s);return await Ar(a,{id:a.id}),rn(["tasks"]),Fd("tasks:project:"),a.id}catch(a){try{const h=(await nd.currentUser?.getIdTokenResult())?.claims||{},f=[];!h?.roles?.team_member&&!h?.roles?.team_lead&&f.push("no roles.team_member"),s?.assignee_id&&h?.discordId&&s.assignee_id!==h.discordId&&f.push("assignee_id !== claims.discordId"),s?.status==="complete"&&f.push("status === 'complete' on create")}catch{}throw a}}async function bN(n,e){const t=wt(Ce,"tasks",n);let r=null;try{const a=await bT(t);r=a.exists()?a.data():null}catch{}const s={...e};e.status==="Complete"&&e.completed_at===void 0&&(s.completed_at=Date.now()),await Ar(t,Rr(s)),rn(["tasks"]),Fd("tasks:project:");try{const a=r?.status==="Complete",l=e.status==="Complete";if(!a&&l){const h=await xg(),f=(e.assignee_id??r?.assignee_id)||void 0,m=bg({...r||{},status:"Complete"},h);await Fu({ts:Date.now(),type:"task_points",person_id:f,points:m,note:`Task complete: ${r?.description||n}`})}}catch{}}async function NN(n){const e=wt(Ce,"tasks",n);await ur(e),rn(["tasks"]),Fd("tasks:project:")}async function VN(n){const e=Date.now();if(n.person_id&&n.date){const s=Ho(st(Ce,"attendance"),cl("person_id","==",n.person_id),cl("date","==",n.date));if(!(await yt(s)).empty){const l=new Error("DUPLICATE_ATTENDANCE");throw l.code="DUPLICATE_ATTENDANCE",l}}const t={...n,created_at:n.created_at??e},r=await wl(st(Ce,"attendance"),Rr(t));await Ar(r,{id:r.id});try{await Fu({ts:e,type:"attendance",person_id:n.person_id,points:n.points,note:`Attendance ${n.points} pts on ${n.date}`})}catch{}return r.id}async function LN(){return(await yt(st(Ce,"attendance"))).docs.map(e=>e.data())}async function Fu(n){const e=await wl(st(Ce,"logs"),Rr(n));return await Ar(e,{id:e.id}),e.id}async function ON(n=50){return(await yt(st(Ce,"logs"))).docs.map(r=>r.data()).sort((r,s)=>(s.ts||0)-(r.ts||0)).slice(0,Math.max(1,n))}async function MN(n){return(await yt(st(Ce,"logs"))).docs.map(t=>t.data()).filter(t=>t.person_id===n).sort((t,r)=>(r.ts||0)-(t.ts||0))}function FN(n){const e=["#34d399","#60a5fa","#fbbf24","#f472b6","#a78bfa","#f87171","#22d3ee","#84cc16","#fb7185","#f59e0b"];return e[n%e.length]}async function UN(n,e){const t=wt(Ce,"projects",n);await Ar(t,{owner_ids:e}),rn(["projects","people"])}async function jN(n){if(n.id){const e=wt(Ce,"people",n.id);return await vl(e,Rr({...n,id:n.id}),{merge:!0}),rn(["people"]),n.id}else{const e=await wl(st(Ce,"people"),Rr(n));return await Ar(e,{id:e.id}),rn(["people"]),e.id}}async function BN(n){const e=Date.now();if(n.id){const t=wt(Ce,"projects",n.id);return await vl(t,Rr({...n,id:n.id}),{merge:!0}),rn(["projects"]),n.id}else{const t=await wl(st(Ce,"projects"),Rr({...n,created_at:e}));return await Ar(t,{id:t.id}),rn(["projects"]),t.id}}async function zN(n,e){const t=wt(Ce,"people",n);await vl(t,Rr({...e,id:n}),{merge:!0}),rn(["people"])}async function $N(n){try{const e=Ho(st(Ce,"attendance"),cl("person_id","==",n)),t=await yt(e);await Promise.all(t.docs.map(r=>ur(wt(Ce,"attendance",r.id))))}catch{}try{const e=Ho(st(Ce,"logs"),cl("person_id","==",n)),t=await yt(e);await Promise.all(t.docs.map(r=>ur(wt(Ce,"logs",r.id))))}catch{}await ur(wt(Ce,"people",n)),rn(["people"])}async function qN(n,e){const t=wt(Ce,"projects",n);await Ar(t,Rr(e)),rn(["projects"])}async function KN(n){const e=await wl(st(Ce,"project_deps"),Rr(n));return await Ar(e,{id:e.id}),e.id}async function GN(n){await ur(wt(Ce,"project_deps",n))}async function WN(n){const e=wt(Ce,"projects",n);await Ar(e,{archived:!0}),rn(["projects"])}async function HN(n){try{const e=Ho(st(Ce,"tasks"),cl("project_id","==",n)),t=await yt(e);await Promise.all(t.docs.map(r=>ur(wt(Ce,"tasks",r.id))))}catch{}await ur(wt(Ce,"projects",n)),rn(["projects","tasks"])}async function QN(){const n=El("settings");if(n)return n;const t=(await yt(st(Ce,"settings"))).docs.find(s=>s.id==="global"),r=t?t.data():null;return r&&Gr("settings",r,Cg),r}async function JN(n){const e=wt(Ce,"settings","global");await vl(e,{...n||{}},{merge:!0}),rn(["settings"])}async function xg(){const n=El("ranked:settings");if(n)return n;const t=(await yt(st(Ce,"ranked"))).docs.find(a=>a.id==="settings"),r={enabled:!0,autoApply:!0,applyEvery:"hourly",promotion_pct:{bronze:40,silver:30,gold:20,platinum:10,diamond:0},demotion_pct:{bronze:0,silver:10,gold:15,platinum:20,diamond:0},default_task_points:10},s=t?{...r,...t.data()}:r;return Gr("ranked:settings",s,Cg),s}async function Dg(n){const e=wt(Ce,"ranked","settings");await vl(e,Rr(n),{merge:!0}),rn(["ranked:settings"])}async function BT(n=Date.now()){await Dg({last_reset_at:n})}function YN(n){return"Bronze Silver Gold Platinum Diamond".split(" ").indexOf(n)}function zT(n){const e=["Bronze","Silver","Gold","Platinum","Diamond"];return e[Math.min(e.indexOf(n)+1,e.length-1)]}function $T(n){const e=["Bronze","Silver","Gold","Platinum","Diamond"];return e[Math.max(e.indexOf(n)-1,0)]}function bg(n,e){if(n.ranked_points)return n.ranked_points;const t=e?.default_task_points??10;return n.status==="Complete"?35:(n.status==="In Progress",t)}function qT(n,e,t,r){const s=new Map,a=h=>!!h.ranked_opt_in,l=t.last_reset_at||0;for(const h of n)a(h)&&s.set(h.id,0);for(const h of e){if(!h.assignee_id||!s.has(h.assignee_id)||(h.completed_at||h.created_at||0)<l)continue;const m=bg(h,t);s.set(h.assignee_id,(s.get(h.assignee_id)||0)+m)}if(r&&r.length)for(const h of r){if(!h.person_id||!s.has(h.person_id)||(h.created_at||0)<l)continue;const m=Math.max(0,Number(h.points||0));m&&s.set(h.person_id,(s.get(h.person_id)||0)+m)}return s}async function XN(n,e,t,r){const s=n.filter(R=>!!R.ranked_opt_in),a={Bronze:[],Silver:[],Gold:[],Platinum:[],Diamond:[]};for(const R of s)a[R.rank||"Bronze"].push(R);const l=qT(s,e,t,r),h=[],f=R=>Math.max(0,Math.min(100,R??0)),m=["Bronze","Silver","Gold","Platinum","Diamond"];for(const R of m){const F=a[R];if(F.length===0)continue;const V=[...F].sort((de,fe)=>(l.get(fe.id)||0)-(l.get(de.id)||0)),O=R.toLowerCase(),ie=f(t.promotion_pct?.[O]),H=f(t.demotion_pct?.[O]),ee=Math.floor(ie/100*V.length),ae=Math.floor(H/100*V.length);if(R!=="Diamond")for(let de=0;de<ee;de++){const fe=V[de],T=zT(R);h.push({id:fe.id,rank:T})}if(R!=="Bronze")for(let de=0;de<ae;de++){const fe=V[V.length-1-de],T=$T(R);h.push({id:fe.id,rank:T})}}const _=[],w=Date.now();for(const R of h){const F=n.find(ie=>ie.id===R.id),V=F?.rank||"Bronze",O=R.rank;if(V===O)_.push(Ar(wt(Ce,"people",R.id),{rank:O}));else{const H=[...Array.isArray(F?.rank_history)?F.rank_history:[],{ts:w,from:V,to:O}];_.push(Ar(wt(Ce,"people",R.id),{rank:O,rank_history:H})),_.push(Fu({ts:w,type:"rank_change",person_id:R.id,from_rank:V,to_rank:O}))}}await Promise.all(_);const I=Date.now();try{await Fu({ts:I,type:"rank_apply",note:`Applied promotions/demotions to ${h.length} person(s)`})}catch{}try{await BT(I)}catch{}return rn(["people"]),h.length}async function ZN(){const[n,e,t,r,s,a]=await Promise.all([yt(st(Ce,"people")),yt(st(Ce,"projects")),yt(st(Ce,"tasks")),yt(st(Ce,"attendance")),yt(st(Ce,"logs")),yt(st(Ce,"ranked"))]),l=[];for(const h of t.docs)l.push(ur(wt(Ce,"tasks",h.id)));for(const h of e.docs)l.push(ur(wt(Ce,"projects",h.id)));for(const h of n.docs)l.push(ur(wt(Ce,"people",h.id)));for(const h of r.docs)l.push(ur(wt(Ce,"attendance",h.id)));for(const h of s.docs)l.push(ur(wt(Ce,"logs",h.id)));for(const h of a.docs)h.id!=="settings"&&l.push(ur(wt(Ce,"ranked",h.id)));await Promise.all(l),rn(["people","projects","tasks"]),Fd("tasks:project:"),rn(["ranked:settings"])}const sE=`${Zu}visitor:id`,oE=`${Zu}visitor:last_date`;function e2(){try{let n=localStorage.getItem(sE);return n||(n=Math.random().toString(36).slice(2)+Date.now().toString(36),localStorage.setItem(sE,n)),n}catch{return"anon"}}async function KT(){if(typeof window>"u")return;const n=new Date().toISOString().slice(0,10);try{if(localStorage.getItem(oE)===n)return;e2();const t=wt(Ce,"analytics_daily",n);await vl(t,{date:n,visits:zb(1)},{merge:!0}),localStorage.setItem(oE,n)}catch{}}async function t2(n){const t=(await yt(st(Ce,"analytics_daily"))).docs.map(l=>l.data()),r=new Date,s=new Date;s.setDate(r.getDate()-(n-1));const a=s.toISOString().slice(0,10);return t.filter(l=>l.date>=a).sort((l,h)=>l.date.localeCompare(h.date))}const D2=Object.freeze(Object.defineProperty({__proto__:null,addAttendance:VN,addLogEvent:Fu,addPerson:jN,addProject:BN,addProjectDependency:KN,addTask:DN,applyRankedPromotionsDemotions:XN,archiveProject:WN,clearAllLocalCaches:AN,computeRankedScores:qT,deletePerson:$N,deleteProject:HN,deleteProjectDependency:GN,deleteTaskById:NN,fetchAttendance:LN,fetchDailyAnalyticsRange:t2,fetchLogsForPerson:MN,fetchPeople:RN,fetchProjectDependencies:kN,fetchProjects:PN,fetchRankedSettings:xg,fetchRecentLogs:ON,fetchSettings:QN,fetchTasks:CN,fetchTasksForProject:xN,fullSystemReset:ZN,invalidateProjectsCache:SN,markRankedResetBoundary:BT,nextRank:zT,palette:FN,prevRank:$T,rankOrder:YN,recordAnonymousVisit:KT,refreshAllCaches:TN,setRankedSettings:Dg,setSettings:JN,taskPoints:bg,updatePerson:zN,updateProject:qN,updateProjectOwners:UN,updateTask:bN},Symbol.toStringTag,{value:"Module"})),Dp="ranked:enabled";function n2(){const[n,e]=X.useState(!0);return X.useEffect(()=>{let r=!0;return(async()=>{try{const s=localStorage.getItem(Dp);if(s!==null)r&&e(s==="1");else{const a=await xg();r&&e(!!a.enabled)}}catch{}})(),()=>{r=!1}},[]),X.useEffect(()=>{const r=a=>{a.key===Dp&&a.newValue!=null&&e(a.newValue==="1")};window.addEventListener("storage",r);const s=a=>{try{const l=a.detail;e(!!l)}catch{}};return window.addEventListener("ranked:enabledChanged",s),()=>{window.removeEventListener("storage",r),window.removeEventListener("ranked:enabledChanged",s)}},[]),[n,async r=>{e(r);try{localStorage.setItem(Dp,r?"1":"0")}catch{}try{Md()&&await Dg({enabled:r})}catch{}try{window.dispatchEvent(new CustomEvent("ranked:enabledChanged",{detail:r}))}catch{}}]}const GT=n=>{const e=document.documentElement;e.classList.toggle("dark",n==="dark"),e.style.colorScheme=n,localStorage.setItem("theme",n)},r2=()=>{const n=localStorage.getItem("theme"),e=window.matchMedia("(prefers-color-scheme: dark)").matches;GT(n??(e?"dark":"light"))},i2=()=>{const[n,e]=X.useState("dark");X.useEffect(()=>{r2(),e(document.documentElement.classList.contains("dark")?"dark":"light")},[]);const t=X.useCallback(()=>{const r=n==="dark"?"light":"dark";GT(r),e(r)},[n]);return{theme:n,toggle:t}};function s2({children:n}){const[e,t]=X.useState(!1),[r,s]=n2(),a=Qo(),h=mR().some(V=>V.handle?.fullBleed),f=a.pathname.startsWith("/timeline"),m=h||f,{theme:_,toggle:w}=i2(),I=EN(),R="/fsae-dashboard/",F=X.useMemo(()=>{if(!I)return null;const V=I.uid||"";return V.startsWith("discord:")?V.slice(8):null},[I]);return X.useEffect(()=>{t(!1)},[a.pathname]),X.useEffect(()=>{const V=O=>{O.key==="Escape"&&t(!1)};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[]),Q.jsxs("div",{className:`min-h-[100dvh] bg-background bg-app-gradient text-foreground ${m?"h-[100dvh] overflow-hidden":""}`,children:[Q.jsx("div",{style:{height:"env(safe-area-inset-top)"},className:"bg-background"}),Q.jsx("header",{className:"sticky top-0 z-50 w-full bg-background/95 backdrop-blur border-b border-border",children:Q.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-14 flex items-center justify-between",children:[Q.jsx(xE,{to:"/",className:"flex items-center h-10",children:Q.jsx(IN,{className:"h-8 w-auto invert dark:invert-0"})}),Q.jsxs("button",{"aria-label":e?"Close menu":"Open menu","aria-expanded":e,onClick:()=>t(V=>!V),className:"relative inline-flex h-10 w-10 items-center justify-center rounded-md border border-border/60 bg-overlay-6 hover:bg-overlay-10 transition focus:outline-none focus:ring-2 focus:ring-accent/60",children:[Q.jsx("span",{className:"sr-only",children:"Menu"}),Q.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-transform duration-300 ease-out ${e?"translate-y-0 rotate-45":"-translate-y-2 rotate-0"}`}),Q.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-opacity duration-300 ${e?"opacity-0":"opacity-100"}`}),Q.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-transform duration-300 ease-out ${e?"translate-y-0 -rotate-45":"translate-y-2 rotate-0"}`})]})]})}),Q.jsxs("div",{className:`fixed inset-0 z-50 ${e?"pointer-events-auto":"pointer-events-none"}`,children:[Q.jsx("div",{className:`absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ${e?"opacity-100":"opacity-0"}`,onClick:()=>t(!1)}),Q.jsxs("aside",{className:`absolute right-0 top-0 h-full w-[18rem] max-w-[85vw] bg-background/95 border-l border-border shadow-[0_12px_40px_rgba(0,0,0,0.20)] dark:shadow-xl transition-transform duration-300 ease-out ${e?"translate-x-0":"translate-x-full"}`,children:[Q.jsxs("div",{className:"h-14 px-4 flex items-center justify-between border-b border-border/60",children:[Q.jsx("span",{className:"text-sm font-medium text-muted uppercase tracking-caps",children:"Menu"}),Q.jsxs("button",{"aria-label":"Close menu",onClick:()=>t(!1),className:"h-9 w-9 inline-flex items-center justify-center rounded-md hover:bg-black/20",children:[Q.jsx("span",{className:"sr-only",children:"Close"}),Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})]})]}),Q.jsxs("nav",{className:"px-2 py-3 text-base",children:[Q.jsx(So,{to:"/",label:"Overview"}),F&&Q.jsx(dN,{children:Q.jsx(So,{to:`/person/${F}`,label:"My Dashboard"})}),Q.jsx(So,{to:"/members",label:"Members"}),Q.jsx(So,{to:"/stats",label:"Stats"}),Q.jsx(So,{to:"/timeline",label:"Timeline"}),r&&Q.jsx(So,{to:"/ranked",label:"Ranked"}),Q.jsx(hN,{children:Q.jsx(So,{to:"/admin",label:"Admin"})}),Q.jsx("div",{className:"my-3 border-t border-border/60"}),Q.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm select-none cursor-pointer",children:[Q.jsx("span",{className:"text-sm text-muted-foreground tracking-caps uppercase",children:"RANKED MODE"}),Q.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[Q.jsx("input",{type:"checkbox",checked:r,onChange:V=>s(V.target.checked),className:"peer sr-only"}),Q.jsx("span",{className:`
                    pointer-events-none block h-6 w-11 rounded-full border border-border
                    bg-black/15 dark:bg-white/15
                    transition-colors
                    peer-checked:bg-[#64C7C9]
                    peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
                  `}),Q.jsx("span",{className:`
                    pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                    bg-white dark:bg-background shadow
                    transition-transform
                    peer-checked:translate-x-5
                  `})]})]}),Q.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm select-none cursor-pointer",children:[Q.jsx("span",{className:"text-sm text-muted-foreground tracking-caps uppercase",children:"DARK MODE"}),Q.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[Q.jsx("input",{type:"checkbox",checked:_==="dark",onChange:w,className:"peer sr-only"}),Q.jsx("span",{className:`
                    pointer-events-none block h-6 w-11 rounded-full border border-border
                    bg-black/15 dark:bg-white/15
                    transition-colors
                    peer-checked:bg-[#64C7C9]
                    peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
                  `}),Q.jsx("span",{className:`
                    pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                    bg-white dark:bg-background shadow
                    transition-transform
                    peer-checked:translate-x-5
                  `})]})]}),I?Q.jsxs("div",{className:"px-2 flex items-center gap-2",children:[I.uid?.startsWith("discord:")?Q.jsxs(Q.Fragment,{children:[Q.jsx("img",{src:`${R}icons/Discord-Symbol-Black.svg`,alt:"","aria-hidden":"true",className:"h-5 w-5 block dark:hidden"}),Q.jsx("img",{src:`${R}icons/Discord-Symbol-White.svg`,alt:"","aria-hidden":"true",className:"h-5 w-5 hidden dark:block"})]}):Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-hidden":"true",className:"w-5 h-5",children:[Q.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),Q.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),Q.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),Q.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),Q.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),Q.jsx("button",{onClick:vN,className:"flex-1 text-left px-3 py-2 rounded-md hover:bg-black/20 transition text-sm font-normal",children:"Sign out"})]}):Q.jsxs("div",{className:"grid grid-cols-2 gap-2 px-2",children:[Q.jsxs("button",{onClick:_N,className:"gsi-material-button w-full h-10 border border-border rounded-md bg-white text-black dark:bg-transparent dark:text-white dark:hover:bg-white/10 overflow-hidden focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60",children:[Q.jsx("div",{className:"gsi-material-button-state"}),Q.jsxs("div",{className:"gsi-material-button-content-wrapper flex items-center justify-center gap-2 h-full",children:[Q.jsx("div",{className:"gsi-material-button-icon",children:Q.jsxs("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-hidden":"true",style:{display:"block"},className:"w-4 h-4",children:[Q.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),Q.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),Q.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),Q.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),Q.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),Q.jsx("span",{className:"gsi-material-button-contents text-sm",children:"Sign in"}),Q.jsx("span",{style:{display:"none"},children:"Sign in with Google"})]})]}),Q.jsxs("button",{type:"button","aria-label":"Sign in with Discord",onClick:async()=>{try{await wN(),t(!1)}catch{}},className:"w-full h-10 border border-border rounded-md bg-white dark:bg-transparent hover:bg-black/10 dark:hover:bg-white/10 transition flex items-center justify-center",children:[Q.jsx("img",{src:`${R}icons/Discord-Symbol-Black.svg`,alt:"","aria-hidden":"true",className:"h-5 w-5 block dark:hidden"}),Q.jsx("img",{src:`${R}icons/Discord-Symbol-White.svg`,alt:"","aria-hidden":"true",className:"h-5 w-5 hidden dark:block"}),Q.jsx("span",{className:"sr-only",children:"Sign in with Discord"})]})]})]}),Q.jsx("div",{className:"mt-auto p-3 text-tick text-muted/80 border-t border-border/60",children:"© UConn FSAE"})]})]}),Q.jsx("main",{className:m?"w-full h-[calc(100vh-4rem)] p-0 m-0 overflow-hidden":"max-w-6xl mx-auto px-4 py-6",children:m?n??Q.jsx(hv,{}):Q.jsx(hv,{})}),!m&&Q.jsx("footer",{className:"py-6 text-center text-xs text-muted uppercase tracking-caps",children:"© UConn FSAE"})]})}function So({to:n,label:e}){return Q.jsx(BR,{to:n,className:({isActive:t})=>`group flex items-center gap-2 px-3 py-2 rounded-md transition border ${t?"bg-accent/20 dark:bg-accent/30 border-accent/50 text-foreground dark:text-white shadow-sm":"border-transparent hover:bg-black/10 dark:hover:bg-white/10"} focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60`,children:Q.jsxs("span",{className:"relative",children:[Q.jsx("span",{className:"transition-transform duration-300 group-hover:translate-x-0.5",children:e}),Q.jsx("span",{className:"ml-2 inline-block opacity-0 -translate-x-1 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-0",children:"→"})]})})}function ks(){return Q.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[120px] w-full",children:[Q.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-accent mb-2"}),Q.jsx("div",{className:"text-xs text-muted uppercase tracking-caps",children:"Loading…"})]})}const o2=Xt.lazy(()=>Ws(()=>import("./Overview-DxEbRWNP.js"),__vite__mapDeps([0,1,2,3,4,5]))),a2=Xt.lazy(()=>Ws(()=>import("./Members-D3IGdiRS.js"),[])),l2=Xt.lazy(()=>Ws(()=>import("./PersonDetail-BwMwuMPh.js"),__vite__mapDeps([6,1,2]))),u2=Xt.lazy(()=>Ws(()=>import("./ProjectDetail-DM3-qHq3.js"),__vite__mapDeps([7,8,1,2,3,9,5]))),c2=Xt.lazy(()=>Ws(()=>import("./Admin-DYdgEfU9.js"),__vite__mapDeps([10,3,1,2,8]))),h2=Xt.lazy(()=>Ws(()=>import("./Stats-CmQ8KoSw.js"),__vite__mapDeps([11,12,4,2]))),d2=Xt.lazy(()=>Ws(()=>import("./Timeline-onBJNWDE.js"),__vite__mapDeps([13,9,5,3,1,2,12,14]))),f2=Xt.lazy(()=>Ws(()=>import("./Ranked-cbs3gAPH.js"),[])),p2="/fsae-dashboard/",m2=kR([{element:Q.jsx(s2,{}),children:[{index:!0,element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(o2,{})})},{path:"people",element:Q.jsx(wR,{to:"/members",replace:!0})},{path:"members",element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(a2,{})})},{path:"stats",element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(h2,{})})},{path:"timeline",element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(d2,{})}),handle:{fullBleed:!0}},{path:"ranked",element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(f2,{})})},{path:"person/:id",element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(l2,{})})},{path:"project/:id",element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(u2,{})})},{path:"admin",element:Q.jsx(X.Suspense,{fallback:Q.jsx(ks,{}),children:Q.jsx(c2,{})})}]}],{basename:p2});function gh(){const n=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${n*100}px`)}function g2(){gh();const n=window.visualViewport;window.addEventListener("resize",gh),window.addEventListener("orientationchange",gh),n&&n.addEventListener("resize",gh)}g2();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/fsae-dashboard/sw.js").catch(()=>{})});window.addEventListener("beforeinstallprompt",n=>{n.preventDefault()});const WT=document.getElementById("root");if(!WT)throw new Error("Root element #root not found");const y2=sA.createRoot(WT);y2.render(Q.jsx(Xt.StrictMode,{children:Q.jsx(OR,{router:m2})}));(async()=>{try{await KT()}catch{}UT(async n=>{if(!n){gN([],[]);return}})})();export{KN as $,R2 as A,Xt as B,oA as C,VN as D,Fu as E,QN as F,xg as G,ON as H,C2 as I,k2 as J,$N as K,xE as L,qN as M,jN as N,BN as O,DN as P,Dg as Q,hN as R,JN as S,ZN as T,cE as U,mm as V,t2 as W,_2 as X,lE as Y,GN as Z,Ws as _,PN as a,eA as a0,Rv as a1,Sm as a2,E2 as a3,st as a4,Ho as a5,PT as a6,RT as a7,A2 as a8,TN as a9,qT as aa,D2 as ab,CN as b,LN as c,kN as d,EN as e,RN as f,P2 as g,v2 as h,zN as i,Q as j,x2 as k,UT as l,WN as m,dN as n,bN as o,HN as p,xN as q,X as r,oN as s,SN as t,n2 as u,UN as v,NN as w,bT as x,wt as y,Ce as z};
