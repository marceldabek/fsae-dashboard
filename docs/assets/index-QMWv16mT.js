const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Overview-Cxq4IIIt.js","assets/ProgressBar-lTonIerf.js","assets/clsx-B-dksMZM.js","assets/PersonSelectPopover-D7StPPg9.js","assets/AreaChart-CY1ll7mI.js","assets/ProjectDetail-DqYDXPm7.js","assets/TaskCreateCard-DYrzv6U6.js","assets/Admin-QFi67FWt.js","assets/Stats-C9ZwjeZr.js"])))=>i.map(i=>d[i]);
function Ww(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var eV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var np={exports:{}},Wl={},rp={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function VS(){if(C_)return He;C_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,M={};function U(F,Q,Se){this.props=F,this.context=Q,this.refs=M,this.updater=Se||A}U.prototype.isReactComponent={},U.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},U.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ae(){}ae.prototype=U.prototype;function H(F,Q,Se){this.props=F,this.context=Q,this.refs=M,this.updater=Se||A}var ee=H.prototype=new ae;ee.constructor=H,j(ee,U.prototype),ee.isPureReactComponent=!0;var le=Array.isArray,de=Object.prototype.hasOwnProperty,me={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function R(F,Q,Se){var Be,Oe={},$e=null,qe=null;if(Q!=null)for(Be in Q.ref!==void 0&&(qe=Q.ref),Q.key!==void 0&&($e=""+Q.key),Q)de.call(Q,Be)&&!T.hasOwnProperty(Be)&&(Oe[Be]=Q[Be]);var Xe=arguments.length-2;if(Xe===1)Oe.children=Se;else if(1<Xe){for(var gt=Array(Xe),Kt=0;Kt<Xe;Kt++)gt[Kt]=arguments[Kt+2];Oe.children=gt}if(F&&F.defaultProps)for(Be in Xe=F.defaultProps,Xe)Oe[Be]===void 0&&(Oe[Be]=Xe[Be]);return{$$typeof:n,type:F,key:$e,ref:qe,props:Oe,_owner:me.current}}function P(F,Q){return{$$typeof:n,type:F.type,key:Q,ref:F.ref,props:F.props,_owner:F._owner}}function x(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function N(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Se){return Q[Se]})}var L=/\/+/g;function k(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?N(""+F.key):Q.toString(36)}function Ye(F,Q,Se,Be,Oe){var $e=typeof F;($e==="undefined"||$e==="boolean")&&(F=null);var qe=!1;if(F===null)qe=!0;else switch($e){case"string":case"number":qe=!0;break;case"object":switch(F.$$typeof){case n:case e:qe=!0}}if(qe)return qe=F,Oe=Oe(qe),F=Be===""?"."+k(qe,0):Be,le(Oe)?(Se="",F!=null&&(Se=F.replace(L,"$&/")+"/"),Ye(Oe,Q,Se,"",function(Kt){return Kt})):Oe!=null&&(x(Oe)&&(Oe=P(Oe,Se+(!Oe.key||qe&&qe.key===Oe.key?"":(""+Oe.key).replace(L,"$&/")+"/")+F)),Q.push(Oe)),1;if(qe=0,Be=Be===""?".":Be+":",le(F))for(var Xe=0;Xe<F.length;Xe++){$e=F[Xe];var gt=Be+k($e,Xe);qe+=Ye($e,Q,Se,gt,Oe)}else if(gt=I(F),typeof gt=="function")for(F=gt.call(F),Xe=0;!($e=F.next()).done;)$e=$e.value,gt=Be+k($e,Xe++),qe+=Ye($e,Q,Se,gt,Oe);else if($e==="object")throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return qe}function vt(F,Q,Se){if(F==null)return F;var Be=[],Oe=0;return Ye(F,Be,"","",function($e){return Q.call(Se,$e,Oe++)}),Be}function Bt(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(Se){(F._status===0||F._status===-1)&&(F._status=1,F._result=Se)},function(Se){(F._status===0||F._status===-1)&&(F._status=2,F._result=Se)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var st={current:null},re={transition:null},ke={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:re,ReactCurrentOwner:me};function pe(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:vt,forEach:function(F,Q,Se){vt(F,function(){Q.apply(this,arguments)},Se)},count:function(F){var Q=0;return vt(F,function(){Q++}),Q},toArray:function(F){return vt(F,function(Q){return Q})||[]},only:function(F){if(!x(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},He.Component=U,He.Fragment=t,He.Profiler=s,He.PureComponent=H,He.StrictMode=r,He.Suspense=f,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,He.act=pe,He.cloneElement=function(F,Q,Se){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Be=j({},F.props),Oe=F.key,$e=F.ref,qe=F._owner;if(Q!=null){if(Q.ref!==void 0&&($e=Q.ref,qe=me.current),Q.key!==void 0&&(Oe=""+Q.key),F.type&&F.type.defaultProps)var Xe=F.type.defaultProps;for(gt in Q)de.call(Q,gt)&&!T.hasOwnProperty(gt)&&(Be[gt]=Q[gt]===void 0&&Xe!==void 0?Xe[gt]:Q[gt])}var gt=arguments.length-2;if(gt===1)Be.children=Se;else if(1<gt){Xe=Array(gt);for(var Kt=0;Kt<gt;Kt++)Xe[Kt]=arguments[Kt+2];Be.children=Xe}return{$$typeof:n,type:F.type,key:Oe,ref:$e,props:Be,_owner:qe}},He.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},He.createElement=R,He.createFactory=function(F){var Q=R.bind(null,F);return Q.type=F,Q},He.createRef=function(){return{current:null}},He.forwardRef=function(F){return{$$typeof:h,render:F}},He.isValidElement=x,He.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Bt}},He.memo=function(F,Q){return{$$typeof:m,type:F,compare:Q===void 0?null:Q}},He.startTransition=function(F){var Q=re.transition;re.transition={};try{F()}finally{re.transition=Q}},He.unstable_act=pe,He.useCallback=function(F,Q){return st.current.useCallback(F,Q)},He.useContext=function(F){return st.current.useContext(F)},He.useDebugValue=function(){},He.useDeferredValue=function(F){return st.current.useDeferredValue(F)},He.useEffect=function(F,Q){return st.current.useEffect(F,Q)},He.useId=function(){return st.current.useId()},He.useImperativeHandle=function(F,Q,Se){return st.current.useImperativeHandle(F,Q,Se)},He.useInsertionEffect=function(F,Q){return st.current.useInsertionEffect(F,Q)},He.useLayoutEffect=function(F,Q){return st.current.useLayoutEffect(F,Q)},He.useMemo=function(F,Q){return st.current.useMemo(F,Q)},He.useReducer=function(F,Q,Se){return st.current.useReducer(F,Q,Se)},He.useRef=function(F){return st.current.useRef(F)},He.useState=function(F){return st.current.useState(F)},He.useSyncExternalStore=function(F,Q,Se){return st.current.useSyncExternalStore(F,Q,Se)},He.useTransition=function(){return st.current.useTransition()},He.version="18.3.1",He}var k_;function lm(){return k_||(k_=1,rp.exports=VS()),rp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function LS(){if(x_)return Wl;x_=1;var n=lm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var _,w={},I=null,A=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(A=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:h,key:I,ref:A,props:w,_owner:s.current}}return Wl.Fragment=t,Wl.jsx=u,Wl.jsxs=u,Wl}var D_;function OS(){return D_||(D_=1,np.exports=LS()),np.exports}var se=OS(),Y=lm();const cn=Hw(Y),MS=Ww({__proto__:null,default:cn},[Y]);var th={},ip={exports:{}},Wn={},sp={exports:{}},op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function FS(){return b_||(b_=1,(function(n){function e(re,ke){var pe=re.length;re.push(ke);e:for(;0<pe;){var F=pe-1>>>1,Q=re[F];if(0<s(Q,ke))re[F]=ke,re[pe]=Q,pe=F;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var ke=re[0],pe=re.pop();if(pe!==ke){re[0]=pe;e:for(var F=0,Q=re.length,Se=Q>>>1;F<Se;){var Be=2*(F+1)-1,Oe=re[Be],$e=Be+1,qe=re[$e];if(0>s(Oe,pe))$e<Q&&0>s(qe,Oe)?(re[F]=qe,re[$e]=pe,F=$e):(re[F]=Oe,re[Be]=pe,F=Be);else if($e<Q&&0>s(qe,pe))re[F]=qe,re[$e]=pe,F=$e;else break e}}return ke}function s(re,ke){var pe=re.sortIndex-ke.sortIndex;return pe!==0?pe:re.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],_=1,w=null,I=3,A=!1,j=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(re){for(var ke=t(m);ke!==null;){if(ke.callback===null)r(m);else if(ke.startTime<=re)r(m),ke.sortIndex=ke.expirationTime,e(f,ke);else break;ke=t(m)}}function le(re){if(M=!1,ee(re),!j)if(t(f)!==null)j=!0,Bt(de);else{var ke=t(m);ke!==null&&st(le,ke.startTime-re)}}function de(re,ke){j=!1,M&&(M=!1,ae(R),R=-1),A=!0;var pe=I;try{for(ee(ke),w=t(f);w!==null&&(!(w.expirationTime>ke)||re&&!N());){var F=w.callback;if(typeof F=="function"){w.callback=null,I=w.priorityLevel;var Q=F(w.expirationTime<=ke);ke=n.unstable_now(),typeof Q=="function"?w.callback=Q:w===t(f)&&r(f),ee(ke)}else r(f);w=t(f)}if(w!==null)var Se=!0;else{var Be=t(m);Be!==null&&st(le,Be.startTime-ke),Se=!1}return Se}finally{w=null,I=pe,A=!1}}var me=!1,T=null,R=-1,P=5,x=-1;function N(){return!(n.unstable_now()-x<P)}function L(){if(T!==null){var re=n.unstable_now();x=re;var ke=!0;try{ke=T(!0,re)}finally{ke?k():(me=!1,T=null)}}else me=!1}var k;if(typeof H=="function")k=function(){H(L)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,vt=Ye.port2;Ye.port1.onmessage=L,k=function(){vt.postMessage(null)}}else k=function(){U(L,0)};function Bt(re){T=re,me||(me=!0,k())}function st(re,ke){R=U(function(){re(n.unstable_now())},ke)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){j||A||(j=!0,Bt(de))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(re){switch(I){case 1:case 2:case 3:var ke=3;break;default:ke=I}var pe=I;I=ke;try{return re()}finally{I=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ke){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=I;I=re;try{return ke()}finally{I=pe}},n.unstable_scheduleCallback=function(re,ke,pe){var F=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?F+pe:F):pe=F,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=pe+Q,re={id:_++,callback:ke,priorityLevel:re,startTime:pe,expirationTime:Q,sortIndex:-1},pe>F?(re.sortIndex=pe,e(m,re),t(f)===null&&re===t(m)&&(M?(ae(R),R=-1):M=!0,st(le,pe-F))):(re.sortIndex=Q,e(f,re),j||A||(j=!0,Bt(de))),re},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(re){var ke=I;return function(){var pe=I;I=ke;try{return re.apply(this,arguments)}finally{I=pe}}}})(op)),op}var N_;function US(){return N_||(N_=1,sp.exports=FS()),sp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function jS(){if(V_)return Wn;V_=1;var n=lm(),e=US();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function I(i){return f.call(w,i)?!0:f.call(_,i)?!1:m.test(i)?w[i]=!0:(_[i]=!0,!1)}function A(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,o,l,d){if(o===null||typeof o>"u"||A(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function M(i,o,l,d,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){U[i]=new M(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];U[o]=new M(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){U[i]=new M(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){U[i]=new M(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){U[i]=new M(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){U[i]=new M(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){U[i]=new M(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){U[i]=new M(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){U[i]=new M(i,5,!1,i.toLowerCase(),null,!1,!1)});var ae=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(ae,H);U[o]=new M(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(ae,H);U[o]=new M(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(ae,H);U[o]=new M(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){U[i]=new M(i,1,!1,i.toLowerCase(),null,!1,!1)}),U.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){U[i]=new M(i,1,!1,i.toLowerCase(),null,!0,!0)});function ee(i,o,l,d){var p=U.hasOwnProperty(o)?U[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(j(o,l,p,d)&&(l=null),d||p===null?I(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var le=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),me=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),vt=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),st=Symbol.for("react.offscreen"),re=Symbol.iterator;function ke(i){return i===null||typeof i!="object"?null:(i=re&&i[re]||i["@@iterator"],typeof i=="function"?i:null)}var pe=Object.assign,F;function Q(i){if(F===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+i}var Se=!1;function Be(i,o){if(!i||Se)return"";Se=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var d=G}Reflect.construct(i,[],o)}else{try{o.call()}catch(G){d=G}i.call(o.prototype)}else{try{throw Error()}catch(G){d=G}i()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var p=G.stack.split(`
`),y=d.stack.split(`
`),E=p.length-1,C=y.length-1;1<=E&&0<=C&&p[E]!==y[C];)C--;for(;1<=E&&0<=C;E--,C--)if(p[E]!==y[C]){if(E!==1||C!==1)do if(E--,C--,0>C||p[E]!==y[C]){var b=`
`+p[E].replace(" at new "," at ");return i.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",i.displayName)),b}while(1<=E&&0<=C);break}}}finally{Se=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Q(i):""}function Oe(i){switch(i.tag){case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return i=Be(i.type,!1),i;case 11:return i=Be(i.type.render,!1),i;case 1:return i=Be(i.type,!0),i;default:return""}}function $e(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case me:return"Portal";case P:return"Profiler";case R:return"StrictMode";case k:return"Suspense";case Ye:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case N:return(i.displayName||"Context")+".Consumer";case x:return(i._context.displayName||"Context")+".Provider";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case vt:return o=i.displayName||null,o!==null?o:$e(i.type)||"Memo";case Bt:o=i._payload,i=i._init;try{return $e(i(o))}catch{}}return null}function qe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function gt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Kt(i){var o=gt(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ar(i){i._valueTracker||(i._valueTracker=Kt(i))}function Ot(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=gt(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function Cn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Gr(i,o){var l=o.checked;return pe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Wi(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Xe(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Xn(i,o){o=o.checked,o!=null&&ee(i,"checked",o,!1)}function Hs(i,o){Xn(i,o);var l=Xe(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?_i(i,o.type,l):o.hasOwnProperty("defaultValue")&&_i(i,o.type,Xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Wo(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function _i(i,o,l){(o!=="number"||Cn(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Pr=Array.isArray;function Cr(i,o,l,d){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Xe(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Qs(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return pe({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Hi(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Pr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Xe(l)}}function On(i,o){var l=Xe(o.value),d=Xe(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function kr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Mt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Mt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var rn,kn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(rn=rn||document.createElement("div"),rn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=rn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function xr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(pr).forEach(function(i){vi.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),pr[o]=pr[i]})});function Mn(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||pr.hasOwnProperty(i)&&pr[i]?(""+o).trim():o+"px"}function Qi(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=Mn(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var Ji=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yi(i,o){if(o){if(Ji[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Js(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wr=null;function Dr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var wi=null,_n=null,Fn=null;function Xi(i){if(i=bl(i)){if(typeof wi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=gc(o),wi(i.stateNode,i.type,o))}}function Zn(i){_n?Fn?Fn.push(i):Fn=[i]:_n=i}function Ys(){if(_n){var i=_n,o=Fn;if(Fn=_n=null,Xi(i),o)for(i=0;i<o.length;i++)Xi(o[i])}}function Hr(i,o){return i(o)}function Qr(){}var Un=!1;function Xs(i,o,l){if(Un)return i(o,l);Un=!0;try{return Hr(i,o,l)}finally{Un=!1,(_n!==null||Fn!==null)&&(Qr(),Ys())}}function Dt(i,o){var l=i.stateNode;if(l===null)return null;var d=gc(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var D=!1;if(h)try{var O={};Object.defineProperty(O,"passive",{get:function(){D=!0}}),window.addEventListener("test",O,O),window.removeEventListener("test",O,O)}catch{D=!1}function K(i,o,l,d,p,y,E,C,b){var G=Array.prototype.slice.call(arguments,3);try{o.apply(l,G)}catch(ne){this.onError(ne)}}var X=!1,ce=null,we=!1,Ne=null,Ee={onError:function(i){X=!0,ce=i}};function ve(i,o,l,d,p,y,E,C,b){X=!1,ce=null,K.apply(Ee,arguments)}function ye(i,o,l,d,p,y,E,C,b){if(ve.apply(this,arguments),X){if(X){var G=ce;X=!1,ce=null}else throw Error(t(198));we||(we=!0,Ne=G)}}function _e(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Me(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Ue(i){if(_e(i)!==i)throw Error(t(188))}function Ft(i){var o=i.alternate;if(!o){if(o=_e(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,d=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Ue(p),i;if(y===d)return Ue(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=y;else{for(var E=!1,C=p.child;C;){if(C===l){E=!0,l=p,d=y;break}if(C===d){E=!0,d=p,l=y;break}C=C.sibling}if(!E){for(C=y.child;C;){if(C===l){E=!0,l=y,d=p;break}if(C===d){E=!0,d=y,l=p;break}C=C.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function at(i){return i=Ft(i),i!==null?We(i):null}function We(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=We(i);if(o!==null)return o;i=i.sibling}return null}var dt=e.unstable_scheduleCallback,mr=e.unstable_cancelCallback,Jr=e.unstable_shouldYield,er=e.unstable_requestPaint,Qe=e.unstable_now,Zi=e.unstable_getCurrentPriorityLevel,tr=e.unstable_ImmediatePriority,vn=e.unstable_UserBlockingPriority,dn=e.unstable_NormalPriority,Yr=e.unstable_LowPriority,Je=e.unstable_IdlePriority,ct=null,Gt=null;function Xr(i){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Ho,gr=Math.log,Zs=Math.LN2;function Ho(i){return i>>>=0,i===0?32:31-(gr(i)/Zs|0)|0}var Qo=64,Jo=4194304;function es(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function eo(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,y=i.pingedLanes,E=l&268435455;if(E!==0){var C=E&~p;C!==0?d=es(C):(y&=E,y!==0&&(d=es(y)))}else E=l&~p,E!==0?d=es(E):y!==0&&(d=es(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-Ze(o),p=1<<l,d|=i[l],o&=~p;return d}function Dd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ei(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-Ze(y),C=1<<E,b=p[E];b===-1?((C&l)===0||(C&d)!==0)&&(p[E]=Dd(C,o)):b<=o&&(i.expiredLanes|=C),y&=~C}}function nr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function to(){var i=Qo;return Qo<<=1,(Qo&4194240)===0&&(Qo=64),i}function ts(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function ns(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Ze(o),i[o]=l}function _t(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Ze(l),y=1<<p;o[p]=0,d[p]=-1,i[p]=-1,l&=~y}}function rs(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-Ze(l),p=1<<d;p&o|i[d]&o&&(i[d]|=o),l&=~p}}var nt=0;function is(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Qu,Yo,Ju,Yu,Xu,yl=!1,Zr=[],fn=null,br=null,Nr=null,ss=new Map,yr=new Map,ei=[],bd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(i,o){switch(i){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":ss.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(o.pointerId)}}function jn(i,o,l,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=bl(o),o!==null&&Yo(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Nd(i,o,l,d,p){switch(o){case"focusin":return fn=jn(fn,i,o,l,d,p),!0;case"dragenter":return br=jn(br,i,o,l,d,p),!0;case"mouseover":return Nr=jn(Nr,i,o,l,d,p),!0;case"pointerover":var y=p.pointerId;return ss.set(y,jn(ss.get(y)||null,i,o,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,yr.set(y,jn(yr.get(y)||null,i,o,l,d,p)),!0}return!1}function ec(i){var o=oo(i.target);if(o!==null){var l=_e(o);if(l!==null){if(o=l.tag,o===13){if(o=Me(l),o!==null){i.blockedOn=o,Xu(i.priority,function(){Ju(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ii(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Xo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Wr=d,l.target.dispatchEvent(d),Wr=null}else return o=bl(l),o!==null&&Yo(o),i.blockedOn=l,!1;o.shift()}return!0}function no(i,o,l){Ii(i)&&l.delete(o)}function tc(){yl=!1,fn!==null&&Ii(fn)&&(fn=null),br!==null&&Ii(br)&&(br=null),Nr!==null&&Ii(Nr)&&(Nr=null),ss.forEach(no),yr.forEach(no)}function Vr(i,o){i.blockedOn===o&&(i.blockedOn=null,yl||(yl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tc)))}function Lr(i){function o(p){return Vr(p,i)}if(0<Zr.length){Vr(Zr[0],i);for(var l=1;l<Zr.length;l++){var d=Zr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(fn!==null&&Vr(fn,i),br!==null&&Vr(br,i),Nr!==null&&Vr(Nr,i),ss.forEach(o),yr.forEach(o),l=0;l<ei.length;l++)d=ei[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<ei.length&&(l=ei[0],l.blockedOn===null);)ec(l),l.blockedOn===null&&ei.shift()}var Ti=le.ReactCurrentBatchConfig,os=!0;function At(i,o,l,d){var p=nt,y=Ti.transition;Ti.transition=null;try{nt=1,_l(i,o,l,d)}finally{nt=p,Ti.transition=y}}function Vd(i,o,l,d){var p=nt,y=Ti.transition;Ti.transition=null;try{nt=4,_l(i,o,l,d)}finally{nt=p,Ti.transition=y}}function _l(i,o,l,d){if(os){var p=Xo(i,o,l,d);if(p===null)Kd(i,o,d,ro,l),Zu(i,d);else if(Nd(p,i,o,l,d))d.stopPropagation();else if(Zu(i,d),o&4&&-1<bd.indexOf(i)){for(;p!==null;){var y=bl(p);if(y!==null&&Qu(y),y=Xo(i,o,l,d),y===null&&Kd(i,o,d,ro,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else Kd(i,o,d,null,l)}}var ro=null;function Xo(i,o,l,d){if(ro=null,i=Dr(d),i=oo(i),i!==null)if(o=_e(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Me(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ro=i,null}function vl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zi()){case tr:return 1;case vn:return 4;case dn:case Yr:return 16;case Je:return 536870912;default:return 16}default:return 16}}var rr=null,Zo=null,Bn=null;function wl(){if(Bn)return Bn;var i,o=Zo,l=o.length,d,p="value"in rr?rr.value:rr.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var E=l-i;for(d=1;d<=E&&o[l-d]===p[y-d];d++);return Bn=p.slice(i,1<d?1-d:void 0)}function ea(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ti(){return!0}function El(){return!1}function pn(i){function o(l,d,p,y,E){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ti:El,this.isPropagationStopped=El,this}return pe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),o}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ta=pn(Or),ni=pe({},Or,{view:0,detail:0}),Ld=pn(ni),na,Si,as,io=pe({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ri,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==as&&(as&&i.type==="mousemove"?(na=i.screenX-as.screenX,Si=i.screenY-as.screenY):Si=na=0,as=i),na)},movementY:function(i){return"movementY"in i?i.movementY:Si}}),ra=pn(io),Il=pe({},io,{dataTransfer:0}),nc=pn(Il),ia=pe({},ni,{relatedTarget:0}),sa=pn(ia),rc=pe({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),Ri=pn(rc),ic=pe({},Or,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),sc=pn(ic),oc=pe({},Or,{data:0}),Tl=pn(oc),oa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ac[i])?!!o[i]:!1}function ri(){return lc}var c=pe({},ni,{key:function(i){if(i.key){var o=oa[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ea(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ri,charCode:function(i){return i.type==="keypress"?ea(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ea(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=pn(c),v=pe({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=pn(v),B=pe({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ri}),W=pn(B),ue=pe({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),ft=pn(ue),Xt=pe({},io,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rt=pn(Xt),sn=[9,13,27,32],Wt=h&&"CompositionEvent"in window,_r=null;h&&"documentMode"in document&&(_r=document.documentMode);var ir=h&&"TextEvent"in window&&!_r,so=h&&(!Wt||_r&&8<_r&&11>=_r),aa=" ",Ig=!1;function Tg(i,o){switch(i){case"keyup":return sn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var la=!1;function DT(i,o){switch(i){case"compositionend":return Sg(o);case"keypress":return o.which!==32?null:(Ig=!0,aa);case"textInput":return i=o.data,i===aa&&Ig?null:i;default:return null}}function bT(i,o){if(la)return i==="compositionend"||!Wt&&Tg(i,o)?(i=wl(),Bn=Zo=rr=null,la=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return so&&o.locale!=="ko"?null:o.data;default:return null}}var NT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!NT[i.type]:o==="textarea"}function Ag(i,o,l,d){Zn(d),o=fc(o,"onChange"),0<o.length&&(l=new ta("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var Sl=null,Rl=null;function VT(i){qg(i,0)}function uc(i){var o=fa(i);if(Ot(o))return i}function LT(i,o){if(i==="change")return o}var Pg=!1;if(h){var Od;if(h){var Md="oninput"in document;if(!Md){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),Md=typeof Cg.oninput=="function"}Od=Md}else Od=!1;Pg=Od&&(!document.documentMode||9<document.documentMode)}function kg(){Sl&&(Sl.detachEvent("onpropertychange",xg),Rl=Sl=null)}function xg(i){if(i.propertyName==="value"&&uc(Rl)){var o=[];Ag(o,Rl,i,Dr(i)),Xs(VT,o)}}function OT(i,o,l){i==="focusin"?(kg(),Sl=o,Rl=l,Sl.attachEvent("onpropertychange",xg)):i==="focusout"&&kg()}function MT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return uc(Rl)}function FT(i,o){if(i==="click")return uc(o)}function UT(i,o){if(i==="input"||i==="change")return uc(o)}function jT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Mr=typeof Object.is=="function"?Object.is:jT;function Al(i,o){if(Mr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(o,p)||!Mr(i[p],o[p]))return!1}return!0}function Dg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bg(i,o){var l=Dg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Dg(l)}}function Ng(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ng(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Vg(){for(var i=window,o=Cn();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=Cn(i.document)}return o}function Fd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function BT(i){var o=Vg(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&Ng(l.ownerDocument.documentElement,l)){if(d!==null&&Fd(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!i.extend&&y>d&&(p=d,d=y,y=p),p=bg(l,y);var E=bg(l,d);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var zT=h&&"documentMode"in document&&11>=document.documentMode,ua=null,Ud=null,Pl=null,jd=!1;function Lg(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jd||ua==null||ua!==Cn(d)||(d=ua,"selectionStart"in d&&Fd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Pl&&Al(Pl,d)||(Pl=d,d=fc(Ud,"onSelect"),0<d.length&&(o=new ta("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=ua)))}function cc(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var ca={animationend:cc("Animation","AnimationEnd"),animationiteration:cc("Animation","AnimationIteration"),animationstart:cc("Animation","AnimationStart"),transitionend:cc("Transition","TransitionEnd")},Bd={},Og={};h&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function hc(i){if(Bd[i])return Bd[i];if(!ca[i])return i;var o=ca[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Og)return Bd[i]=o[l];return i}var Mg=hc("animationend"),Fg=hc("animationiteration"),Ug=hc("animationstart"),jg=hc("transitionend"),Bg=new Map,zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(i,o){Bg.set(i,o),a(o,[i])}for(var zd=0;zd<zg.length;zd++){var $d=zg[zd],$T=$d.toLowerCase(),qT=$d[0].toUpperCase()+$d.slice(1);ls($T,"on"+qT)}ls(Mg,"onAnimationEnd"),ls(Fg,"onAnimationIteration"),ls(Ug,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(jg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function $g(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,ye(d,o,void 0,i),i.currentTarget=null}function qg(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var E=d.length-1;0<=E;E--){var C=d[E],b=C.instance,G=C.currentTarget;if(C=C.listener,b!==y&&p.isPropagationStopped())break e;$g(p,C,G),y=b}else for(E=0;E<d.length;E++){if(C=d[E],b=C.instance,G=C.currentTarget,C=C.listener,b!==y&&p.isPropagationStopped())break e;$g(p,C,G),y=b}}}if(we)throw i=Ne,we=!1,Ne=null,i}function St(i,o){var l=o[Yd];l===void 0&&(l=o[Yd]=new Set);var d=i+"__bubble";l.has(d)||(Kg(o,i,2,!1),l.add(d))}function qd(i,o,l){var d=0;o&&(d|=4),Kg(l,i,d,o)}var dc="_reactListening"+Math.random().toString(36).slice(2);function kl(i){if(!i[dc]){i[dc]=!0,r.forEach(function(l){l!=="selectionchange"&&(KT.has(l)||qd(l,!1,i),qd(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[dc]||(o[dc]=!0,qd("selectionchange",!1,o))}}function Kg(i,o,l,d){switch(vl(o)){case 1:var p=At;break;case 4:p=Vd;break;default:p=_l}l=p.bind(null,o,l,i),p=void 0,!D||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Kd(i,o,l,d,p){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var C=d.stateNode.containerInfo;if(C===p||C.nodeType===8&&C.parentNode===p)break;if(E===4)for(E=d.return;E!==null;){var b=E.tag;if((b===3||b===4)&&(b=E.stateNode.containerInfo,b===p||b.nodeType===8&&b.parentNode===p))return;E=E.return}for(;C!==null;){if(E=oo(C),E===null)return;if(b=E.tag,b===5||b===6){d=y=E;continue e}C=C.parentNode}}d=d.return}Xs(function(){var G=y,ne=Dr(l),ie=[];e:{var Z=Bg.get(i);if(Z!==void 0){var ge=ta,Te=i;switch(i){case"keypress":if(ea(l)===0)break e;case"keydown":case"keyup":ge=g;break;case"focusin":Te="focus",ge=sa;break;case"focusout":Te="blur",ge=sa;break;case"beforeblur":case"afterblur":ge=sa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=W;break;case Mg:case Fg:case Ug:ge=Ri;break;case jg:ge=ft;break;case"scroll":ge=Ld;break;case"wheel":ge=rt;break;case"copy":case"cut":case"paste":ge=sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=S}var Ae=(o&4)!==0,zt=!Ae&&i==="scroll",z=Ae?Z!==null?Z+"Capture":null:Z;Ae=[];for(var V=G,q;V!==null;){q=V;var oe=q.stateNode;if(q.tag===5&&oe!==null&&(q=oe,z!==null&&(oe=Dt(V,z),oe!=null&&Ae.push(xl(V,oe,q)))),zt)break;V=V.return}0<Ae.length&&(Z=new ge(Z,Te,null,l,ne),ie.push({event:Z,listeners:Ae}))}}if((o&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",Z&&l!==Wr&&(Te=l.relatedTarget||l.fromElement)&&(oo(Te)||Te[Ai]))break e;if((ge||Z)&&(Z=ne.window===ne?ne:(Z=ne.ownerDocument)?Z.defaultView||Z.parentWindow:window,ge?(Te=l.relatedTarget||l.toElement,ge=G,Te=Te?oo(Te):null,Te!==null&&(zt=_e(Te),Te!==zt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ge=null,Te=G),ge!==Te)){if(Ae=ra,oe="onMouseLeave",z="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Ae=S,oe="onPointerLeave",z="onPointerEnter",V="pointer"),zt=ge==null?Z:fa(ge),q=Te==null?Z:fa(Te),Z=new Ae(oe,V+"leave",ge,l,ne),Z.target=zt,Z.relatedTarget=q,oe=null,oo(ne)===G&&(Ae=new Ae(z,V+"enter",Te,l,ne),Ae.target=q,Ae.relatedTarget=zt,oe=Ae),zt=oe,ge&&Te)t:{for(Ae=ge,z=Te,V=0,q=Ae;q;q=ha(q))V++;for(q=0,oe=z;oe;oe=ha(oe))q++;for(;0<V-q;)Ae=ha(Ae),V--;for(;0<q-V;)z=ha(z),q--;for(;V--;){if(Ae===z||z!==null&&Ae===z.alternate)break t;Ae=ha(Ae),z=ha(z)}Ae=null}else Ae=null;ge!==null&&Gg(ie,Z,ge,Ae,!1),Te!==null&&zt!==null&&Gg(ie,zt,Te,Ae,!0)}}e:{if(Z=G?fa(G):window,ge=Z.nodeName&&Z.nodeName.toLowerCase(),ge==="select"||ge==="input"&&Z.type==="file")var Ce=LT;else if(Rg(Z))if(Pg)Ce=UT;else{Ce=MT;var Ve=OT}else(ge=Z.nodeName)&&ge.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(Ce=FT);if(Ce&&(Ce=Ce(i,G))){Ag(ie,Ce,l,ne);break e}Ve&&Ve(i,Z,G),i==="focusout"&&(Ve=Z._wrapperState)&&Ve.controlled&&Z.type==="number"&&_i(Z,"number",Z.value)}switch(Ve=G?fa(G):window,i){case"focusin":(Rg(Ve)||Ve.contentEditable==="true")&&(ua=Ve,Ud=G,Pl=null);break;case"focusout":Pl=Ud=ua=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Lg(ie,l,ne);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":Lg(ie,l,ne)}var Le;if(Wt)e:{switch(i){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else la?Tg(i,l)&&(Fe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(so&&l.locale!=="ko"&&(la||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&la&&(Le=wl()):(rr=ne,Zo="value"in rr?rr.value:rr.textContent,la=!0)),Ve=fc(G,Fe),0<Ve.length&&(Fe=new Tl(Fe,i,null,l,ne),ie.push({event:Fe,listeners:Ve}),Le?Fe.data=Le:(Le=Sg(l),Le!==null&&(Fe.data=Le)))),(Le=ir?DT(i,l):bT(i,l))&&(G=fc(G,"onBeforeInput"),0<G.length&&(ne=new Tl("onBeforeInput","beforeinput",null,l,ne),ie.push({event:ne,listeners:G}),ne.data=Le))}qg(ie,o)})}function xl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function fc(i,o){for(var l=o+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Dt(i,l),y!=null&&d.unshift(xl(i,y,p)),y=Dt(i,o),y!=null&&d.push(xl(i,y,p))),i=i.return}return d}function ha(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Gg(i,o,l,d,p){for(var y=o._reactName,E=[];l!==null&&l!==d;){var C=l,b=C.alternate,G=C.stateNode;if(b!==null&&b===d)break;C.tag===5&&G!==null&&(C=G,p?(b=Dt(l,y),b!=null&&E.unshift(xl(l,b,C))):p||(b=Dt(l,y),b!=null&&E.push(xl(l,b,C)))),l=l.return}E.length!==0&&i.push({event:o,listeners:E})}var GT=/\r\n?/g,WT=/\u0000|\uFFFD/g;function Wg(i){return(typeof i=="string"?i:""+i).replace(GT,`
`).replace(WT,"")}function pc(i,o,l){if(o=Wg(o),Wg(i)!==o&&l)throw Error(t(425))}function mc(){}var Gd=null,Wd=null;function Hd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,HT=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,QT=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(i){return Hg.resolve(null).then(i).catch(JT)}:Qd;function JT(i){setTimeout(function(){throw i})}function Jd(i,o){var l=o,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),Lr(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Lr(o)}function us(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Qg(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var da=Math.random().toString(36).slice(2),ii="__reactFiber$"+da,Dl="__reactProps$"+da,Ai="__reactContainer$"+da,Yd="__reactEvents$"+da,YT="__reactListeners$"+da,XT="__reactHandles$"+da;function oo(i){var o=i[ii];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Ai]||l[ii]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Qg(i);i!==null;){if(l=i[ii])return l;i=Qg(i)}return o}i=l,l=i.parentNode}return null}function bl(i){return i=i[ii]||i[Ai],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function fa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function gc(i){return i[Dl]||null}var Xd=[],pa=-1;function cs(i){return{current:i}}function Rt(i){0>pa||(i.current=Xd[pa],Xd[pa]=null,pa--)}function wt(i,o){pa++,Xd[pa]=i.current,i.current=o}var hs={},wn=cs(hs),zn=cs(!1),ao=hs;function ma(i,o){var l=i.type.contextTypes;if(!l)return hs;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function $n(i){return i=i.childContextTypes,i!=null}function yc(){Rt(zn),Rt(wn)}function Jg(i,o,l){if(wn.current!==hs)throw Error(t(168));wt(wn,o),wt(zn,l)}function Yg(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,qe(i)||"Unknown",p));return pe({},l,d)}function _c(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||hs,ao=wn.current,wt(wn,i),wt(zn,zn.current),!0}function Xg(i,o,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=Yg(i,o,ao),d.__reactInternalMemoizedMergedChildContext=i,Rt(zn),Rt(wn),wt(wn,i)):Rt(zn),wt(zn,l)}var Pi=null,vc=!1,Zd=!1;function Zg(i){Pi===null?Pi=[i]:Pi.push(i)}function ZT(i){vc=!0,Zg(i)}function ds(){if(!Zd&&Pi!==null){Zd=!0;var i=0,o=nt;try{var l=Pi;for(nt=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}Pi=null,vc=!1}catch(p){throw Pi!==null&&(Pi=Pi.slice(i+1)),dt(tr,ds),p}finally{nt=o,Zd=!1}}return null}var ga=[],ya=0,wc=null,Ec=0,vr=[],wr=0,lo=null,Ci=1,ki="";function uo(i,o){ga[ya++]=Ec,ga[ya++]=wc,wc=i,Ec=o}function ey(i,o,l){vr[wr++]=Ci,vr[wr++]=ki,vr[wr++]=lo,lo=i;var d=Ci;i=ki;var p=32-Ze(d)-1;d&=~(1<<p),l+=1;var y=32-Ze(o)+p;if(30<y){var E=p-p%5;y=(d&(1<<E)-1).toString(32),d>>=E,p-=E,Ci=1<<32-Ze(o)+p|l<<p|d,ki=y+i}else Ci=1<<y|l<<p|d,ki=i}function ef(i){i.return!==null&&(uo(i,1),ey(i,1,0))}function tf(i){for(;i===wc;)wc=ga[--ya],ga[ya]=null,Ec=ga[--ya],ga[ya]=null;for(;i===lo;)lo=vr[--wr],vr[wr]=null,ki=vr[--wr],vr[wr]=null,Ci=vr[--wr],vr[wr]=null}var sr=null,or=null,Pt=!1,Fr=null;function ty(i,o){var l=Sr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function ny(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,sr=i,or=us(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,sr=i,or=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=lo!==null?{id:Ci,overflow:ki}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Sr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,sr=i,or=null,!0):!1;default:return!1}}function nf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function rf(i){if(Pt){var o=or;if(o){var l=o;if(!ny(i,o)){if(nf(i))throw Error(t(418));o=us(l.nextSibling);var d=sr;o&&ny(i,o)?ty(d,l):(i.flags=i.flags&-4097|2,Pt=!1,sr=i)}}else{if(nf(i))throw Error(t(418));i.flags=i.flags&-4097|2,Pt=!1,sr=i}}}function ry(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;sr=i}function Ic(i){if(i!==sr)return!1;if(!Pt)return ry(i),Pt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Hd(i.type,i.memoizedProps)),o&&(o=or)){if(nf(i))throw iy(),Error(t(418));for(;o;)ty(i,o),o=us(o.nextSibling)}if(ry(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){or=us(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}or=null}}else or=sr?us(i.stateNode.nextSibling):null;return!0}function iy(){for(var i=or;i;)i=us(i.nextSibling)}function _a(){or=sr=null,Pt=!1}function sf(i){Fr===null?Fr=[i]:Fr.push(i)}var eS=le.ReactCurrentBatchConfig;function Nl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var p=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var C=p.refs;E===null?delete C[y]:C[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Tc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function sy(i){var o=i._init;return o(i._payload)}function oy(i){function o(z,V){if(i){var q=z.deletions;q===null?(z.deletions=[V],z.flags|=16):q.push(V)}}function l(z,V){if(!i)return null;for(;V!==null;)o(z,V),V=V.sibling;return null}function d(z,V){for(z=new Map;V!==null;)V.key!==null?z.set(V.key,V):z.set(V.index,V),V=V.sibling;return z}function p(z,V){return z=ws(z,V),z.index=0,z.sibling=null,z}function y(z,V,q){return z.index=q,i?(q=z.alternate,q!==null?(q=q.index,q<V?(z.flags|=2,V):q):(z.flags|=2,V)):(z.flags|=1048576,V)}function E(z){return i&&z.alternate===null&&(z.flags|=2),z}function C(z,V,q,oe){return V===null||V.tag!==6?(V=Jf(q,z.mode,oe),V.return=z,V):(V=p(V,q),V.return=z,V)}function b(z,V,q,oe){var Ce=q.type;return Ce===T?ne(z,V,q.props.children,oe,q.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Bt&&sy(Ce)===V.type)?(oe=p(V,q.props),oe.ref=Nl(z,V,q),oe.return=z,oe):(oe=Wc(q.type,q.key,q.props,null,z.mode,oe),oe.ref=Nl(z,V,q),oe.return=z,oe)}function G(z,V,q,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=Yf(q,z.mode,oe),V.return=z,V):(V=p(V,q.children||[]),V.return=z,V)}function ne(z,V,q,oe,Ce){return V===null||V.tag!==7?(V=_o(q,z.mode,oe,Ce),V.return=z,V):(V=p(V,q),V.return=z,V)}function ie(z,V,q){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Jf(""+V,z.mode,q),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case de:return q=Wc(V.type,V.key,V.props,null,z.mode,q),q.ref=Nl(z,null,V),q.return=z,q;case me:return V=Yf(V,z.mode,q),V.return=z,V;case Bt:var oe=V._init;return ie(z,oe(V._payload),q)}if(Pr(V)||ke(V))return V=_o(V,z.mode,q,null),V.return=z,V;Tc(z,V)}return null}function Z(z,V,q,oe){var Ce=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ce!==null?null:C(z,V,""+q,oe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case de:return q.key===Ce?b(z,V,q,oe):null;case me:return q.key===Ce?G(z,V,q,oe):null;case Bt:return Ce=q._init,Z(z,V,Ce(q._payload),oe)}if(Pr(q)||ke(q))return Ce!==null?null:ne(z,V,q,oe,null);Tc(z,q)}return null}function ge(z,V,q,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return z=z.get(q)||null,C(V,z,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case de:return z=z.get(oe.key===null?q:oe.key)||null,b(V,z,oe,Ce);case me:return z=z.get(oe.key===null?q:oe.key)||null,G(V,z,oe,Ce);case Bt:var Ve=oe._init;return ge(z,V,q,Ve(oe._payload),Ce)}if(Pr(oe)||ke(oe))return z=z.get(q)||null,ne(V,z,oe,Ce,null);Tc(V,oe)}return null}function Te(z,V,q,oe){for(var Ce=null,Ve=null,Le=V,Fe=V=0,ln=null;Le!==null&&Fe<q.length;Fe++){Le.index>Fe?(ln=Le,Le=null):ln=Le.sibling;var lt=Z(z,Le,q[Fe],oe);if(lt===null){Le===null&&(Le=ln);break}i&&Le&&lt.alternate===null&&o(z,Le),V=y(lt,V,Fe),Ve===null?Ce=lt:Ve.sibling=lt,Ve=lt,Le=ln}if(Fe===q.length)return l(z,Le),Pt&&uo(z,Fe),Ce;if(Le===null){for(;Fe<q.length;Fe++)Le=ie(z,q[Fe],oe),Le!==null&&(V=y(Le,V,Fe),Ve===null?Ce=Le:Ve.sibling=Le,Ve=Le);return Pt&&uo(z,Fe),Ce}for(Le=d(z,Le);Fe<q.length;Fe++)ln=ge(Le,z,Fe,q[Fe],oe),ln!==null&&(i&&ln.alternate!==null&&Le.delete(ln.key===null?Fe:ln.key),V=y(ln,V,Fe),Ve===null?Ce=ln:Ve.sibling=ln,Ve=ln);return i&&Le.forEach(function(Es){return o(z,Es)}),Pt&&uo(z,Fe),Ce}function Ae(z,V,q,oe){var Ce=ke(q);if(typeof Ce!="function")throw Error(t(150));if(q=Ce.call(q),q==null)throw Error(t(151));for(var Ve=Ce=null,Le=V,Fe=V=0,ln=null,lt=q.next();Le!==null&&!lt.done;Fe++,lt=q.next()){Le.index>Fe?(ln=Le,Le=null):ln=Le.sibling;var Es=Z(z,Le,lt.value,oe);if(Es===null){Le===null&&(Le=ln);break}i&&Le&&Es.alternate===null&&o(z,Le),V=y(Es,V,Fe),Ve===null?Ce=Es:Ve.sibling=Es,Ve=Es,Le=ln}if(lt.done)return l(z,Le),Pt&&uo(z,Fe),Ce;if(Le===null){for(;!lt.done;Fe++,lt=q.next())lt=ie(z,lt.value,oe),lt!==null&&(V=y(lt,V,Fe),Ve===null?Ce=lt:Ve.sibling=lt,Ve=lt);return Pt&&uo(z,Fe),Ce}for(Le=d(z,Le);!lt.done;Fe++,lt=q.next())lt=ge(Le,z,Fe,lt.value,oe),lt!==null&&(i&&lt.alternate!==null&&Le.delete(lt.key===null?Fe:lt.key),V=y(lt,V,Fe),Ve===null?Ce=lt:Ve.sibling=lt,Ve=lt);return i&&Le.forEach(function(NS){return o(z,NS)}),Pt&&uo(z,Fe),Ce}function zt(z,V,q,oe){if(typeof q=="object"&&q!==null&&q.type===T&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case de:e:{for(var Ce=q.key,Ve=V;Ve!==null;){if(Ve.key===Ce){if(Ce=q.type,Ce===T){if(Ve.tag===7){l(z,Ve.sibling),V=p(Ve,q.props.children),V.return=z,z=V;break e}}else if(Ve.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Bt&&sy(Ce)===Ve.type){l(z,Ve.sibling),V=p(Ve,q.props),V.ref=Nl(z,Ve,q),V.return=z,z=V;break e}l(z,Ve);break}else o(z,Ve);Ve=Ve.sibling}q.type===T?(V=_o(q.props.children,z.mode,oe,q.key),V.return=z,z=V):(oe=Wc(q.type,q.key,q.props,null,z.mode,oe),oe.ref=Nl(z,V,q),oe.return=z,z=oe)}return E(z);case me:e:{for(Ve=q.key;V!==null;){if(V.key===Ve)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){l(z,V.sibling),V=p(V,q.children||[]),V.return=z,z=V;break e}else{l(z,V);break}else o(z,V);V=V.sibling}V=Yf(q,z.mode,oe),V.return=z,z=V}return E(z);case Bt:return Ve=q._init,zt(z,V,Ve(q._payload),oe)}if(Pr(q))return Te(z,V,q,oe);if(ke(q))return Ae(z,V,q,oe);Tc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,V!==null&&V.tag===6?(l(z,V.sibling),V=p(V,q),V.return=z,z=V):(l(z,V),V=Jf(q,z.mode,oe),V.return=z,z=V),E(z)):l(z,V)}return zt}var va=oy(!0),ay=oy(!1),Sc=cs(null),Rc=null,wa=null,of=null;function af(){of=wa=Rc=null}function lf(i){var o=Sc.current;Rt(Sc),i._currentValue=o}function uf(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function Ea(i,o){Rc=i,of=wa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(qn=!0),i.firstContext=null)}function Er(i){var o=i._currentValue;if(of!==i)if(i={context:i,memoizedValue:o,next:null},wa===null){if(Rc===null)throw Error(t(308));wa=i,Rc.dependencies={lanes:0,firstContext:i}}else wa=wa.next=i;return o}var co=null;function cf(i){co===null?co=[i]:co.push(i)}function ly(i,o,l,d){var p=o.interleaved;return p===null?(l.next=l,cf(o)):(l.next=p.next,p.next=l),o.interleaved=l,xi(i,d)}function xi(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var fs=!1;function hf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Di(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ps(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ot&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,xi(i,l)}return p=d.interleaved,p===null?(o.next=o,cf(d)):(o.next=p.next,p.next=o),d.interleaved=o,xi(i,l)}function Ac(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,rs(i,l)}}function cy(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Pc(i,o,l,d){var p=i.updateQueue;fs=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var b=C,G=b.next;b.next=null,E===null?y=G:E.next=G,E=b;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==E&&(C===null?ne.firstBaseUpdate=G:C.next=G,ne.lastBaseUpdate=b))}if(y!==null){var ie=p.baseState;E=0,ne=G=b=null,C=y;do{var Z=C.lane,ge=C.eventTime;if((d&Z)===Z){ne!==null&&(ne=ne.next={eventTime:ge,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var Te=i,Ae=C;switch(Z=o,ge=l,Ae.tag){case 1:if(Te=Ae.payload,typeof Te=="function"){ie=Te.call(ge,ie,Z);break e}ie=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ae.payload,Z=typeof Te=="function"?Te.call(ge,ie,Z):Te,Z==null)break e;ie=pe({},ie,Z);break e;case 2:fs=!0}}C.callback!==null&&C.lane!==0&&(i.flags|=64,Z=p.effects,Z===null?p.effects=[C]:Z.push(C))}else ge={eventTime:ge,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(G=ne=ge,b=ie):ne=ne.next=ge,E|=Z;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);if(ne===null&&(b=ie),p.baseState=b,p.firstBaseUpdate=G,p.lastBaseUpdate=ne,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);po|=E,i.lanes=E,i.memoizedState=ie}}function hy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Vl={},si=cs(Vl),Ll=cs(Vl),Ol=cs(Vl);function ho(i){if(i===Vl)throw Error(t(174));return i}function df(i,o){switch(wt(Ol,o),wt(Ll,i),wt(si,Vl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:xt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=xt(o,i)}Rt(si),wt(si,o)}function Ia(){Rt(si),Rt(Ll),Rt(Ol)}function dy(i){ho(Ol.current);var o=ho(si.current),l=xt(o,i.type);o!==l&&(wt(Ll,i),wt(si,l))}function ff(i){Ll.current===i&&(Rt(si),Rt(Ll))}var bt=cs(0);function Cc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var pf=[];function mf(){for(var i=0;i<pf.length;i++)pf[i]._workInProgressVersionPrimary=null;pf.length=0}var kc=le.ReactCurrentDispatcher,gf=le.ReactCurrentBatchConfig,fo=0,Nt=null,Zt=null,on=null,xc=!1,Ml=!1,Fl=0,tS=0;function En(){throw Error(t(321))}function yf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Mr(i[l],o[l]))return!1;return!0}function _f(i,o,l,d,p,y){if(fo=y,Nt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,kc.current=i===null||i.memoizedState===null?sS:oS,i=l(d,p),Ml){y=0;do{if(Ml=!1,Fl=0,25<=y)throw Error(t(301));y+=1,on=Zt=null,o.updateQueue=null,kc.current=aS,i=l(d,p)}while(Ml)}if(kc.current=Nc,o=Zt!==null&&Zt.next!==null,fo=0,on=Zt=Nt=null,xc=!1,o)throw Error(t(300));return i}function vf(){var i=Fl!==0;return Fl=0,i}function oi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Nt.memoizedState=on=i:on=on.next=i,on}function Ir(){if(Zt===null){var i=Nt.alternate;i=i!==null?i.memoizedState:null}else i=Zt.next;var o=on===null?Nt.memoizedState:on.next;if(o!==null)on=o,Zt=i;else{if(i===null)throw Error(t(310));Zt=i,i={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},on===null?Nt.memoizedState=on=i:on=on.next=i}return on}function Ul(i,o){return typeof o=="function"?o(i):o}function wf(i){var o=Ir(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=Zt,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var C=E=null,b=null,G=y;do{var ne=G.lane;if((fo&ne)===ne)b!==null&&(b=b.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:i(d,G.action);else{var ie={lane:ne,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};b===null?(C=b=ie,E=d):b=b.next=ie,Nt.lanes|=ne,po|=ne}G=G.next}while(G!==null&&G!==y);b===null?E=d:b.next=C,Mr(d,o.memoizedState)||(qn=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=b,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do y=p.lane,Nt.lanes|=y,po|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Ef(i){var o=Ir(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Mr(y,o.memoizedState)||(qn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,d]}function fy(){}function py(i,o){var l=Nt,d=Ir(),p=o(),y=!Mr(d.memoizedState,p);if(y&&(d.memoizedState=p,qn=!0),d=d.queue,If(yy.bind(null,l,d,i),[i]),d.getSnapshot!==o||y||on!==null&&on.memoizedState.tag&1){if(l.flags|=2048,jl(9,gy.bind(null,l,d,p,o),void 0,null),an===null)throw Error(t(349));(fo&30)!==0||my(l,o,p)}return p}function my(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Nt.updateQueue,o===null?(o={lastEffect:null,stores:null},Nt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function gy(i,o,l,d){o.value=l,o.getSnapshot=d,_y(o)&&vy(i)}function yy(i,o,l){return l(function(){_y(o)&&vy(i)})}function _y(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Mr(i,l)}catch{return!0}}function vy(i){var o=xi(i,1);o!==null&&zr(o,i,1,-1)}function wy(i){var o=oi();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:i},o.queue=i,i=i.dispatch=iS.bind(null,Nt,i),[o.memoizedState,i]}function jl(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=Nt.updateQueue,o===null?(o={lastEffect:null,stores:null},Nt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function Ey(){return Ir().memoizedState}function Dc(i,o,l,d){var p=oi();Nt.flags|=i,p.memoizedState=jl(1|o,l,void 0,d===void 0?null:d)}function bc(i,o,l,d){var p=Ir();d=d===void 0?null:d;var y=void 0;if(Zt!==null){var E=Zt.memoizedState;if(y=E.destroy,d!==null&&yf(d,E.deps)){p.memoizedState=jl(o,l,y,d);return}}Nt.flags|=i,p.memoizedState=jl(1|o,l,y,d)}function Iy(i,o){return Dc(8390656,8,i,o)}function If(i,o){return bc(2048,8,i,o)}function Ty(i,o){return bc(4,2,i,o)}function Sy(i,o){return bc(4,4,i,o)}function Ry(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Ay(i,o,l){return l=l!=null?l.concat([i]):null,bc(4,4,Ry.bind(null,o,i),l)}function Tf(){}function Py(i,o){var l=Ir();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&yf(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function Cy(i,o){var l=Ir();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&yf(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function ky(i,o,l){return(fo&21)===0?(i.baseState&&(i.baseState=!1,qn=!0),i.memoizedState=l):(Mr(l,o)||(l=to(),Nt.lanes|=l,po|=l,i.baseState=!0),o)}function nS(i,o){var l=nt;nt=l!==0&&4>l?l:4,i(!0);var d=gf.transition;gf.transition={};try{i(!1),o()}finally{nt=l,gf.transition=d}}function xy(){return Ir().memoizedState}function rS(i,o,l){var d=_s(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Dy(i))by(o,l);else if(l=ly(i,o,l,d),l!==null){var p=bn();zr(l,i,d,p),Ny(l,o,d)}}function iS(i,o,l){var d=_s(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dy(i))by(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,C=y(E,l);if(p.hasEagerState=!0,p.eagerState=C,Mr(C,E)){var b=o.interleaved;b===null?(p.next=p,cf(o)):(p.next=b.next,b.next=p),o.interleaved=p;return}}catch{}finally{}l=ly(i,o,p,d),l!==null&&(p=bn(),zr(l,i,d,p),Ny(l,o,d))}}function Dy(i){var o=i.alternate;return i===Nt||o!==null&&o===Nt}function by(i,o){Ml=xc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function Ny(i,o,l){if((l&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,rs(i,l)}}var Nc={readContext:Er,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},sS={readContext:Er,useCallback:function(i,o){return oi().memoizedState=[i,o===void 0?null:o],i},useContext:Er,useEffect:Iy,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,Dc(4194308,4,Ry.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Dc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Dc(4,2,i,o)},useMemo:function(i,o){var l=oi();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=oi();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=rS.bind(null,Nt,i),[d.memoizedState,i]},useRef:function(i){var o=oi();return i={current:i},o.memoizedState=i},useState:wy,useDebugValue:Tf,useDeferredValue:function(i){return oi().memoizedState=i},useTransition:function(){var i=wy(!1),o=i[0];return i=nS.bind(null,i[1]),oi().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=Nt,p=oi();if(Pt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),an===null)throw Error(t(349));(fo&30)!==0||my(d,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Iy(yy.bind(null,d,y,i),[i]),d.flags|=2048,jl(9,gy.bind(null,d,y,l,o),void 0,null),l},useId:function(){var i=oi(),o=an.identifierPrefix;if(Pt){var l=ki,d=Ci;l=(d&~(1<<32-Ze(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Fl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=tS++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},oS={readContext:Er,useCallback:Py,useContext:Er,useEffect:If,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Cy,useReducer:wf,useRef:Ey,useState:function(){return wf(Ul)},useDebugValue:Tf,useDeferredValue:function(i){var o=Ir();return ky(o,Zt.memoizedState,i)},useTransition:function(){var i=wf(Ul)[0],o=Ir().memoizedState;return[i,o]},useMutableSource:fy,useSyncExternalStore:py,useId:xy,unstable_isNewReconciler:!1},aS={readContext:Er,useCallback:Py,useContext:Er,useEffect:If,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Cy,useReducer:Ef,useRef:Ey,useState:function(){return Ef(Ul)},useDebugValue:Tf,useDeferredValue:function(i){var o=Ir();return Zt===null?o.memoizedState=i:ky(o,Zt.memoizedState,i)},useTransition:function(){var i=Ef(Ul)[0],o=Ir().memoizedState;return[i,o]},useMutableSource:fy,useSyncExternalStore:py,useId:xy,unstable_isNewReconciler:!1};function Ur(i,o){if(i&&i.defaultProps){o=pe({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Sf(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:pe({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Vc={isMounted:function(i){return(i=i._reactInternals)?_e(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=bn(),p=_s(i),y=Di(d,p);y.payload=o,l!=null&&(y.callback=l),o=ps(i,y,p),o!==null&&(zr(o,i,p,d),Ac(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=bn(),p=_s(i),y=Di(d,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=ps(i,y,p),o!==null&&(zr(o,i,p,d),Ac(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=bn(),d=_s(i),p=Di(l,d);p.tag=2,o!=null&&(p.callback=o),o=ps(i,p,d),o!==null&&(zr(o,i,d,l),Ac(o,i,d))}};function Vy(i,o,l,d,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,E):o.prototype&&o.prototype.isPureReactComponent?!Al(l,d)||!Al(p,y):!0}function Ly(i,o,l){var d=!1,p=hs,y=o.contextType;return typeof y=="object"&&y!==null?y=Er(y):(p=$n(o)?ao:wn.current,d=o.contextTypes,y=(d=d!=null)?ma(i,p):hs),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Vc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function Oy(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&Vc.enqueueReplaceState(o,o.state,null)}function Rf(i,o,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},hf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=Er(y):(y=$n(o)?ao:wn.current,p.context=ma(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Sf(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Vc.enqueueReplaceState(p,p.state,null),Pc(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Ta(i,o){try{var l="",d=o;do l+=Oe(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Af(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Pf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var lS=typeof WeakMap=="function"?WeakMap:Map;function My(i,o,l){l=Di(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){Bc||(Bc=!0,zf=d),Pf(i,o)},l}function Fy(i,o,l){l=Di(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){Pf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Pf(i,o),typeof d!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),l}function Uy(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new lS;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),i=IS.bind(null,i,o,l),o.then(i,i))}function jy(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function By(i,o,l,d,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Di(-1,1),o.tag=2,ps(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var uS=le.ReactCurrentOwner,qn=!1;function Dn(i,o,l,d){o.child=i===null?ay(o,null,l,d):va(o,i.child,l,d)}function zy(i,o,l,d,p){l=l.render;var y=o.ref;return Ea(o,p),d=_f(i,o,l,d,y,p),l=vf(),i!==null&&!qn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,bi(i,o,p)):(Pt&&l&&ef(o),o.flags|=1,Dn(i,o,d,p),o.child)}function $y(i,o,l,d,p){if(i===null){var y=l.type;return typeof y=="function"&&!Qf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,qy(i,o,y,d,p)):(i=Wc(l.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:Al,l(E,d)&&i.ref===o.ref)return bi(i,o,p)}return o.flags|=1,i=ws(y,d),i.ref=o.ref,i.return=o,o.child=i}function qy(i,o,l,d,p){if(i!==null){var y=i.memoizedProps;if(Al(y,d)&&i.ref===o.ref)if(qn=!1,o.pendingProps=d=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(qn=!0);else return o.lanes=i.lanes,bi(i,o,p)}return Cf(i,o,l,d,p)}function Ky(i,o,l){var d=o.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Ra,ar),ar|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,wt(Ra,ar),ar|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,wt(Ra,ar),ar|=d}else y!==null?(d=y.baseLanes|l,o.memoizedState=null):d=l,wt(Ra,ar),ar|=d;return Dn(i,o,p,l),o.child}function Gy(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Cf(i,o,l,d,p){var y=$n(l)?ao:wn.current;return y=ma(o,y),Ea(o,p),l=_f(i,o,l,d,y,p),d=vf(),i!==null&&!qn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,bi(i,o,p)):(Pt&&d&&ef(o),o.flags|=1,Dn(i,o,l,p),o.child)}function Wy(i,o,l,d,p){if($n(l)){var y=!0;_c(o)}else y=!1;if(Ea(o,p),o.stateNode===null)Oc(i,o),Ly(o,l,d),Rf(o,l,d,p),d=!0;else if(i===null){var E=o.stateNode,C=o.memoizedProps;E.props=C;var b=E.context,G=l.contextType;typeof G=="object"&&G!==null?G=Er(G):(G=$n(l)?ao:wn.current,G=ma(o,G));var ne=l.getDerivedStateFromProps,ie=typeof ne=="function"||typeof E.getSnapshotBeforeUpdate=="function";ie||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==d||b!==G)&&Oy(o,E,d,G),fs=!1;var Z=o.memoizedState;E.state=Z,Pc(o,d,E,p),b=o.memoizedState,C!==d||Z!==b||zn.current||fs?(typeof ne=="function"&&(Sf(o,l,ne,d),b=o.memoizedState),(C=fs||Vy(o,l,C,d,Z,b,G))?(ie||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=b),E.props=d,E.state=b,E.context=G,d=C):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,uy(i,o),C=o.memoizedProps,G=o.type===o.elementType?C:Ur(o.type,C),E.props=G,ie=o.pendingProps,Z=E.context,b=l.contextType,typeof b=="object"&&b!==null?b=Er(b):(b=$n(l)?ao:wn.current,b=ma(o,b));var ge=l.getDerivedStateFromProps;(ne=typeof ge=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==ie||Z!==b)&&Oy(o,E,d,b),fs=!1,Z=o.memoizedState,E.state=Z,Pc(o,d,E,p);var Te=o.memoizedState;C!==ie||Z!==Te||zn.current||fs?(typeof ge=="function"&&(Sf(o,l,ge,d),Te=o.memoizedState),(G=fs||Vy(o,l,G,d,Z,Te,b)||!1)?(ne||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,Te,b),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,Te,b)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Te),E.props=d,E.state=Te,E.context=b,d=G):(typeof E.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),d=!1)}return kf(i,o,l,d,y,p)}function kf(i,o,l,d,p,y){Gy(i,o);var E=(o.flags&128)!==0;if(!d&&!E)return p&&Xg(o,l,!1),bi(i,o,y);d=o.stateNode,uS.current=o;var C=E&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&E?(o.child=va(o,i.child,null,y),o.child=va(o,null,C,y)):Dn(i,o,C,y),o.memoizedState=d.state,p&&Xg(o,l,!0),o.child}function Hy(i){var o=i.stateNode;o.pendingContext?Jg(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Jg(i,o.context,!1),df(i,o.containerInfo)}function Qy(i,o,l,d,p){return _a(),sf(p),o.flags|=256,Dn(i,o,l,d),o.child}var xf={dehydrated:null,treeContext:null,retryLane:0};function Df(i){return{baseLanes:i,cachePool:null,transitions:null}}function Jy(i,o,l){var d=o.pendingProps,p=bt.current,y=!1,E=(o.flags&128)!==0,C;if((C=E)||(C=i!==null&&i.memoizedState===null?!1:(p&2)!==0),C?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),wt(bt,p&1),i===null)return rf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,i=d.fallback,y?(d=o.mode,y=o.child,E={mode:"hidden",children:E},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Hc(E,d,0,null),i=_o(i,d,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Df(l),o.memoizedState=xf,i):bf(o,E));if(p=i.memoizedState,p!==null&&(C=p.dehydrated,C!==null))return cS(i,o,E,d,C,p,l);if(y){y=d.fallback,E=o.mode,p=i.child,C=p.sibling;var b={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=b,o.deletions=null):(d=ws(p,b),d.subtreeFlags=p.subtreeFlags&14680064),C!==null?y=ws(C,y):(y=_o(y,E,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,E=i.child.memoizedState,E=E===null?Df(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~l,o.memoizedState=xf,d}return y=i.child,i=y.sibling,d=ws(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function bf(i,o){return o=Hc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Lc(i,o,l,d){return d!==null&&sf(d),va(o,i.child,null,l),i=bf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function cS(i,o,l,d,p,y,E){if(l)return o.flags&256?(o.flags&=-257,d=Af(Error(t(422))),Lc(i,o,E,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=Hc({mode:"visible",children:d.children},p,0,null),y=_o(y,p,E,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&va(o,i.child,null,E),o.child.memoizedState=Df(E),o.memoizedState=xf,y);if((o.mode&1)===0)return Lc(i,o,E,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var C=d.dgst;return d=C,y=Error(t(419)),d=Af(y,d,void 0),Lc(i,o,E,d)}if(C=(E&i.childLanes)!==0,qn||C){if(d=an,d!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|E))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,xi(i,p),zr(d,i,p,-1))}return Hf(),d=Af(Error(t(421))),Lc(i,o,E,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=TS.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,or=us(p.nextSibling),sr=o,Pt=!0,Fr=null,i!==null&&(vr[wr++]=Ci,vr[wr++]=ki,vr[wr++]=lo,Ci=i.id,ki=i.overflow,lo=o),o=bf(o,d.children),o.flags|=4096,o)}function Yy(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),uf(i.return,o,l)}function Nf(i,o,l,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function Xy(i,o,l){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(Dn(i,o,d.children,l),d=bt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Yy(i,l,o);else if(i.tag===19)Yy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(wt(bt,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&Cc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Nf(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Cc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Nf(o,!0,l,null,y);break;case"together":Nf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Oc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function bi(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),po|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=ws(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=ws(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function hS(i,o,l){switch(o.tag){case 3:Hy(o),_a();break;case 5:dy(o);break;case 1:$n(o.type)&&_c(o);break;case 4:df(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;wt(Sc,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(wt(bt,bt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Jy(i,o,l):(wt(bt,bt.current&1),i=bi(i,o,l),i!==null?i.sibling:null);wt(bt,bt.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(i.flags&128)!==0){if(d)return Xy(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),wt(bt,bt.current),d)break;return null;case 22:case 23:return o.lanes=0,Ky(i,o,l)}return bi(i,o,l)}var Zy,Vf,e_,t_;Zy=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Vf=function(){},e_=function(i,o,l,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,ho(si.current);var y=null;switch(l){case"input":p=Gr(i,p),d=Gr(i,d),y=[];break;case"select":p=pe({},p,{value:void 0}),d=pe({},d,{value:void 0}),y=[];break;case"textarea":p=Qs(i,p),d=Qs(i,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=mc)}Yi(l,d);var E;l=null;for(G in p)if(!d.hasOwnProperty(G)&&p.hasOwnProperty(G)&&p[G]!=null)if(G==="style"){var C=p[G];for(E in C)C.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in d){var b=d[G];if(C=p?.[G],d.hasOwnProperty(G)&&b!==C&&(b!=null||C!=null))if(G==="style")if(C){for(E in C)!C.hasOwnProperty(E)||b&&b.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in b)b.hasOwnProperty(E)&&C[E]!==b[E]&&(l||(l={}),l[E]=b[E])}else l||(y||(y=[]),y.push(G,l)),l=b;else G==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,C=C?C.__html:void 0,b!=null&&C!==b&&(y=y||[]).push(G,b)):G==="children"?typeof b!="string"&&typeof b!="number"||(y=y||[]).push(G,""+b):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(b!=null&&G==="onScroll"&&St("scroll",i),y||C===b||(y=[])):(y=y||[]).push(G,b))}l&&(y=y||[]).push("style",l);var G=y;(o.updateQueue=G)&&(o.flags|=4)}},t_=function(i,o,l,d){l!==d&&(o.flags|=4)};function Bl(i,o){if(!Pt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function In(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function dS(i,o,l){var d=o.pendingProps;switch(tf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(o),null;case 1:return $n(o.type)&&yc(),In(o),null;case 3:return d=o.stateNode,Ia(),Rt(zn),Rt(wn),mf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Ic(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Fr!==null&&(Kf(Fr),Fr=null))),Vf(i,o),In(o),null;case 5:ff(o);var p=ho(Ol.current);if(l=o.type,i!==null&&o.stateNode!=null)e_(i,o,l,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return In(o),null}if(i=ho(si.current),Ic(o)){d=o.stateNode,l=o.type;var y=o.memoizedProps;switch(d[ii]=o,d[Dl]=y,i=(o.mode&1)!==0,l){case"dialog":St("cancel",d),St("close",d);break;case"iframe":case"object":case"embed":St("load",d);break;case"video":case"audio":for(p=0;p<Cl.length;p++)St(Cl[p],d);break;case"source":St("error",d);break;case"img":case"image":case"link":St("error",d),St("load",d);break;case"details":St("toggle",d);break;case"input":Wi(d,y),St("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},St("invalid",d);break;case"textarea":Hi(d,y),St("invalid",d)}Yi(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var C=y[E];E==="children"?typeof C=="string"?d.textContent!==C&&(y.suppressHydrationWarning!==!0&&pc(d.textContent,C,i),p=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&pc(d.textContent,C,i),p=["children",""+C]):s.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&St("scroll",d)}switch(l){case"input":Ar(d),Wo(d,y,!0);break;case"textarea":Ar(d),kr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=mc)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Mt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=E.createElement(l,{is:d.is}):(i=E.createElement(l),l==="select"&&(E=i,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):i=E.createElementNS(i,l),i[ii]=o,i[Dl]=d,Zy(i,o,!1,!1),o.stateNode=i;e:{switch(E=Js(l,d),l){case"dialog":St("cancel",i),St("close",i),p=d;break;case"iframe":case"object":case"embed":St("load",i),p=d;break;case"video":case"audio":for(p=0;p<Cl.length;p++)St(Cl[p],i);p=d;break;case"source":St("error",i),p=d;break;case"img":case"image":case"link":St("error",i),St("load",i),p=d;break;case"details":St("toggle",i),p=d;break;case"input":Wi(i,d),p=Gr(i,d),St("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=pe({},d,{value:void 0}),St("invalid",i);break;case"textarea":Hi(i,d),p=Qs(i,d),St("invalid",i);break;default:p=d}Yi(l,p),C=p;for(y in C)if(C.hasOwnProperty(y)){var b=C[y];y==="style"?Qi(i,b):y==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&kn(i,b)):y==="children"?typeof b=="string"?(l!=="textarea"||b!=="")&&xr(i,b):typeof b=="number"&&xr(i,""+b):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?b!=null&&y==="onScroll"&&St("scroll",i):b!=null&&ee(i,y,b,E))}switch(l){case"input":Ar(i),Wo(i,d,!1);break;case"textarea":Ar(i),kr(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Xe(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?Cr(i,!!d.multiple,y,!1):d.defaultValue!=null&&Cr(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=mc)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return In(o),null;case 6:if(i&&o.stateNode!=null)t_(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(l=ho(Ol.current),ho(si.current),Ic(o)){if(d=o.stateNode,l=o.memoizedProps,d[ii]=o,(y=d.nodeValue!==l)&&(i=sr,i!==null))switch(i.tag){case 3:pc(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&pc(d.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[ii]=o,o.stateNode=d}return In(o),null;case 13:if(Rt(bt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Pt&&or!==null&&(o.mode&1)!==0&&(o.flags&128)===0)iy(),_a(),o.flags|=98560,y=!1;else if(y=Ic(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[ii]=o}else _a(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;In(o),y=!1}else Fr!==null&&(Kf(Fr),Fr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(bt.current&1)!==0?en===0&&(en=3):Hf())),o.updateQueue!==null&&(o.flags|=4),In(o),null);case 4:return Ia(),Vf(i,o),i===null&&kl(o.stateNode.containerInfo),In(o),null;case 10:return lf(o.type._context),In(o),null;case 17:return $n(o.type)&&yc(),In(o),null;case 19:if(Rt(bt),y=o.memoizedState,y===null)return In(o),null;if(d=(o.flags&128)!==0,E=y.rendering,E===null)if(d)Bl(y,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(E=Cc(i),E!==null){for(o.flags|=128,Bl(y,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)y=l,i=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return wt(bt,bt.current&1|2),o.child}i=i.sibling}y.tail!==null&&Qe()>Aa&&(o.flags|=128,d=!0,Bl(y,!1),o.lanes=4194304)}else{if(!d)if(i=Cc(E),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Bl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Pt)return In(o),null}else 2*Qe()-y.renderingStartTime>Aa&&l!==1073741824&&(o.flags|=128,d=!0,Bl(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(l=y.last,l!==null?l.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Qe(),o.sibling=null,l=bt.current,wt(bt,d?l&1|2:l&1),o):(In(o),null);case 22:case 23:return Wf(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(ar&1073741824)!==0&&(In(o),o.subtreeFlags&6&&(o.flags|=8192)):In(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function fS(i,o){switch(tf(o),o.tag){case 1:return $n(o.type)&&yc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ia(),Rt(zn),Rt(wn),mf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return ff(o),null;case 13:if(Rt(bt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));_a()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Rt(bt),null;case 4:return Ia(),null;case 10:return lf(o.type._context),null;case 22:case 23:return Wf(),null;case 24:return null;default:return null}}var Mc=!1,Tn=!1,pS=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Sa(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Ut(i,o,d)}else l.current=null}function Lf(i,o,l){try{l()}catch(d){Ut(i,o,d)}}var n_=!1;function mS(i,o){if(Gd=os,i=Vg(),Fd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,C=-1,b=-1,G=0,ne=0,ie=i,Z=null;t:for(;;){for(var ge;ie!==l||p!==0&&ie.nodeType!==3||(C=E+p),ie!==y||d!==0&&ie.nodeType!==3||(b=E+d),ie.nodeType===3&&(E+=ie.nodeValue.length),(ge=ie.firstChild)!==null;)Z=ie,ie=ge;for(;;){if(ie===i)break t;if(Z===l&&++G===p&&(C=E),Z===y&&++ne===d&&(b=E),(ge=ie.nextSibling)!==null)break;ie=Z,Z=ie.parentNode}ie=ge}l=C===-1||b===-1?null:{start:C,end:b}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wd={focusedElem:i,selectionRange:l},os=!1,Ie=o;Ie!==null;)if(o=Ie,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ie=i;else for(;Ie!==null;){o=Ie;try{var Te=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ae=Te.memoizedProps,zt=Te.memoizedState,z=o.stateNode,V=z.getSnapshotBeforeUpdate(o.elementType===o.type?Ae:Ur(o.type,Ae),zt);z.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var q=o.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){Ut(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,Ie=i;break}Ie=o.return}return Te=n_,n_=!1,Te}function zl(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Lf(o,l,y)}p=p.next}while(p!==d)}}function Fc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function Of(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function r_(i){var o=i.alternate;o!==null&&(i.alternate=null,r_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[ii],delete o[Dl],delete o[Yd],delete o[YT],delete o[XT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function i_(i){return i.tag===5||i.tag===3||i.tag===4}function s_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||i_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mf(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=mc));else if(d!==4&&(i=i.child,i!==null))for(Mf(i,o,l),i=i.sibling;i!==null;)Mf(i,o,l),i=i.sibling}function Ff(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Ff(i,o,l),i=i.sibling;i!==null;)Ff(i,o,l),i=i.sibling}var mn=null,jr=!1;function ms(i,o,l){for(l=l.child;l!==null;)o_(i,o,l),l=l.sibling}function o_(i,o,l){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ct,l)}catch{}switch(l.tag){case 5:Tn||Sa(l,o);case 6:var d=mn,p=jr;mn=null,ms(i,o,l),mn=d,jr=p,mn!==null&&(jr?(i=mn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):mn.removeChild(l.stateNode));break;case 18:mn!==null&&(jr?(i=mn,l=l.stateNode,i.nodeType===8?Jd(i.parentNode,l):i.nodeType===1&&Jd(i,l),Lr(i)):Jd(mn,l.stateNode));break;case 4:d=mn,p=jr,mn=l.stateNode.containerInfo,jr=!0,ms(i,o,l),mn=d,jr=p;break;case 0:case 11:case 14:case 15:if(!Tn&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&Lf(l,o,E),p=p.next}while(p!==d)}ms(i,o,l);break;case 1:if(!Tn&&(Sa(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(C){Ut(l,o,C)}ms(i,o,l);break;case 21:ms(i,o,l);break;case 22:l.mode&1?(Tn=(d=Tn)||l.memoizedState!==null,ms(i,o,l),Tn=d):ms(i,o,l);break;default:ms(i,o,l)}}function a_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new pS),o.forEach(function(d){var p=SS.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Br(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=i,E=o,C=E;e:for(;C!==null;){switch(C.tag){case 5:mn=C.stateNode,jr=!1;break e;case 3:mn=C.stateNode.containerInfo,jr=!0;break e;case 4:mn=C.stateNode.containerInfo,jr=!0;break e}C=C.return}if(mn===null)throw Error(t(160));o_(y,E,p),mn=null,jr=!1;var b=p.alternate;b!==null&&(b.return=null),p.return=null}catch(G){Ut(p,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)l_(o,i),o=o.sibling}function l_(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Br(o,i),ai(i),d&4){try{zl(3,i,i.return),Fc(3,i)}catch(Ae){Ut(i,i.return,Ae)}try{zl(5,i,i.return)}catch(Ae){Ut(i,i.return,Ae)}}break;case 1:Br(o,i),ai(i),d&512&&l!==null&&Sa(l,l.return);break;case 5:if(Br(o,i),ai(i),d&512&&l!==null&&Sa(l,l.return),i.flags&32){var p=i.stateNode;try{xr(p,"")}catch(Ae){Ut(i,i.return,Ae)}}if(d&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=l!==null?l.memoizedProps:y,C=i.type,b=i.updateQueue;if(i.updateQueue=null,b!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&Xn(p,y),Js(C,E);var G=Js(C,y);for(E=0;E<b.length;E+=2){var ne=b[E],ie=b[E+1];ne==="style"?Qi(p,ie):ne==="dangerouslySetInnerHTML"?kn(p,ie):ne==="children"?xr(p,ie):ee(p,ne,ie,G)}switch(C){case"input":Hs(p,y);break;case"textarea":On(p,y);break;case"select":var Z=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Cr(p,!!y.multiple,ge,!1):Z!==!!y.multiple&&(y.defaultValue!=null?Cr(p,!!y.multiple,y.defaultValue,!0):Cr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Dl]=y}catch(Ae){Ut(i,i.return,Ae)}}break;case 6:if(Br(o,i),ai(i),d&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Ae){Ut(i,i.return,Ae)}}break;case 3:if(Br(o,i),ai(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Lr(o.containerInfo)}catch(Ae){Ut(i,i.return,Ae)}break;case 4:Br(o,i),ai(i);break;case 13:Br(o,i),ai(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Bf=Qe())),d&4&&a_(i);break;case 22:if(ne=l!==null&&l.memoizedState!==null,i.mode&1?(Tn=(G=Tn)||ne,Br(o,i),Tn=G):Br(o,i),ai(i),d&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!ne&&(i.mode&1)!==0)for(Ie=i,ne=i.child;ne!==null;){for(ie=Ie=ne;Ie!==null;){switch(Z=Ie,ge=Z.child,Z.tag){case 0:case 11:case 14:case 15:zl(4,Z,Z.return);break;case 1:Sa(Z,Z.return);var Te=Z.stateNode;if(typeof Te.componentWillUnmount=="function"){d=Z,l=Z.return;try{o=d,Te.props=o.memoizedProps,Te.state=o.memoizedState,Te.componentWillUnmount()}catch(Ae){Ut(d,l,Ae)}}break;case 5:Sa(Z,Z.return);break;case 22:if(Z.memoizedState!==null){h_(ie);continue}}ge!==null?(ge.return=Z,Ie=ge):h_(ie)}ne=ne.sibling}e:for(ne=null,ie=i;;){if(ie.tag===5){if(ne===null){ne=ie;try{p=ie.stateNode,G?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=ie.stateNode,b=ie.memoizedProps.style,E=b!=null&&b.hasOwnProperty("display")?b.display:null,C.style.display=Mn("display",E))}catch(Ae){Ut(i,i.return,Ae)}}}else if(ie.tag===6){if(ne===null)try{ie.stateNode.nodeValue=G?"":ie.memoizedProps}catch(Ae){Ut(i,i.return,Ae)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;ne===ie&&(ne=null),ie=ie.return}ne===ie&&(ne=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Br(o,i),ai(i),d&4&&a_(i);break;case 21:break;default:Br(o,i),ai(i)}}function ai(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(i_(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(xr(p,""),d.flags&=-33);var y=s_(i);Ff(i,y,p);break;case 3:case 4:var E=d.stateNode.containerInfo,C=s_(i);Mf(i,C,E);break;default:throw Error(t(161))}}catch(b){Ut(i,i.return,b)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function gS(i,o,l){Ie=i,u_(i)}function u_(i,o,l){for(var d=(i.mode&1)!==0;Ie!==null;){var p=Ie,y=p.child;if(p.tag===22&&d){var E=p.memoizedState!==null||Mc;if(!E){var C=p.alternate,b=C!==null&&C.memoizedState!==null||Tn;C=Mc;var G=Tn;if(Mc=E,(Tn=b)&&!G)for(Ie=p;Ie!==null;)E=Ie,b=E.child,E.tag===22&&E.memoizedState!==null?d_(p):b!==null?(b.return=E,Ie=b):d_(p);for(;y!==null;)Ie=y,u_(y),y=y.sibling;Ie=p,Mc=C,Tn=G}c_(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Ie=y):c_(i)}}function c_(i){for(;Ie!==null;){var o=Ie;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Tn||Fc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Tn)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Ur(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&hy(o,y,d);break;case 3:var E=o.updateQueue;if(E!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}hy(o,E,l)}break;case 5:var C=o.stateNode;if(l===null&&o.flags&4){l=C;var b=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&l.focus();break;case"img":b.src&&(l.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var ne=G.memoizedState;if(ne!==null){var ie=ne.dehydrated;ie!==null&&Lr(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tn||o.flags&512&&Of(o)}catch(Z){Ut(o,o.return,Z)}}if(o===i){Ie=null;break}if(l=o.sibling,l!==null){l.return=o.return,Ie=l;break}Ie=o.return}}function h_(i){for(;Ie!==null;){var o=Ie;if(o===i){Ie=null;break}var l=o.sibling;if(l!==null){l.return=o.return,Ie=l;break}Ie=o.return}}function d_(i){for(;Ie!==null;){var o=Ie;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Fc(4,o)}catch(b){Ut(o,l,b)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(b){Ut(o,p,b)}}var y=o.return;try{Of(o)}catch(b){Ut(o,y,b)}break;case 5:var E=o.return;try{Of(o)}catch(b){Ut(o,E,b)}}}catch(b){Ut(o,o.return,b)}if(o===i){Ie=null;break}var C=o.sibling;if(C!==null){C.return=o.return,Ie=C;break}Ie=o.return}}var yS=Math.ceil,Uc=le.ReactCurrentDispatcher,Uf=le.ReactCurrentOwner,Tr=le.ReactCurrentBatchConfig,ot=0,an=null,Ht=null,gn=0,ar=0,Ra=cs(0),en=0,$l=null,po=0,jc=0,jf=0,ql=null,Kn=null,Bf=0,Aa=1/0,Ni=null,Bc=!1,zf=null,gs=null,zc=!1,ys=null,$c=0,Kl=0,$f=null,qc=-1,Kc=0;function bn(){return(ot&6)!==0?Qe():qc!==-1?qc:qc=Qe()}function _s(i){return(i.mode&1)===0?1:(ot&2)!==0&&gn!==0?gn&-gn:eS.transition!==null?(Kc===0&&(Kc=to()),Kc):(i=nt,i!==0||(i=window.event,i=i===void 0?16:vl(i.type)),i)}function zr(i,o,l,d){if(50<Kl)throw Kl=0,$f=null,Error(t(185));ns(i,l,d),((ot&2)===0||i!==an)&&(i===an&&((ot&2)===0&&(jc|=l),en===4&&vs(i,gn)),Gn(i,d),l===1&&ot===0&&(o.mode&1)===0&&(Aa=Qe()+500,vc&&ds()))}function Gn(i,o){var l=i.callbackNode;Ei(i,o);var d=eo(i,i===an?gn:0);if(d===0)l!==null&&mr(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&mr(l),o===1)i.tag===0?ZT(p_.bind(null,i)):Zg(p_.bind(null,i)),QT(function(){(ot&6)===0&&ds()}),l=null;else{switch(is(d)){case 1:l=tr;break;case 4:l=vn;break;case 16:l=dn;break;case 536870912:l=Je;break;default:l=dn}l=I_(l,f_.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function f_(i,o){if(qc=-1,Kc=0,(ot&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Pa()&&i.callbackNode!==l)return null;var d=eo(i,i===an?gn:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=Gc(i,d);else{o=d;var p=ot;ot|=2;var y=g_();(an!==i||gn!==o)&&(Ni=null,Aa=Qe()+500,go(i,o));do try{wS();break}catch(C){m_(i,C)}while(!0);af(),Uc.current=y,ot=p,Ht!==null?o=0:(an=null,gn=0,o=en)}if(o!==0){if(o===2&&(p=nr(i),p!==0&&(d=p,o=qf(i,p))),o===1)throw l=$l,go(i,0),vs(i,d),Gn(i,Qe()),l;if(o===6)vs(i,d);else{if(p=i.current.alternate,(d&30)===0&&!_S(p)&&(o=Gc(i,d),o===2&&(y=nr(i),y!==0&&(d=y,o=qf(i,y))),o===1))throw l=$l,go(i,0),vs(i,d),Gn(i,Qe()),l;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:yo(i,Kn,Ni);break;case 3:if(vs(i,d),(d&130023424)===d&&(o=Bf+500-Qe(),10<o)){if(eo(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){bn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Qd(yo.bind(null,i,Kn,Ni),o);break}yo(i,Kn,Ni);break;case 4:if(vs(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var E=31-Ze(d);y=1<<E,E=o[E],E>p&&(p=E),d&=~y}if(d=p,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*yS(d/1960))-d,10<d){i.timeoutHandle=Qd(yo.bind(null,i,Kn,Ni),d);break}yo(i,Kn,Ni);break;case 5:yo(i,Kn,Ni);break;default:throw Error(t(329))}}}return Gn(i,Qe()),i.callbackNode===l?f_.bind(null,i):null}function qf(i,o){var l=ql;return i.current.memoizedState.isDehydrated&&(go(i,o).flags|=256),i=Gc(i,o),i!==2&&(o=Kn,Kn=l,o!==null&&Kf(o)),i}function Kf(i){Kn===null?Kn=i:Kn.push.apply(Kn,i)}function _S(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Mr(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function vs(i,o){for(o&=~jf,o&=~jc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Ze(o),d=1<<l;i[l]=-1,o&=~d}}function p_(i){if((ot&6)!==0)throw Error(t(327));Pa();var o=eo(i,0);if((o&1)===0)return Gn(i,Qe()),null;var l=Gc(i,o);if(i.tag!==0&&l===2){var d=nr(i);d!==0&&(o=d,l=qf(i,d))}if(l===1)throw l=$l,go(i,0),vs(i,o),Gn(i,Qe()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,yo(i,Kn,Ni),Gn(i,Qe()),null}function Gf(i,o){var l=ot;ot|=1;try{return i(o)}finally{ot=l,ot===0&&(Aa=Qe()+500,vc&&ds())}}function mo(i){ys!==null&&ys.tag===0&&(ot&6)===0&&Pa();var o=ot;ot|=1;var l=Tr.transition,d=nt;try{if(Tr.transition=null,nt=1,i)return i()}finally{nt=d,Tr.transition=l,ot=o,(ot&6)===0&&ds()}}function Wf(){ar=Ra.current,Rt(Ra)}function go(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,HT(l)),Ht!==null)for(l=Ht.return;l!==null;){var d=l;switch(tf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&yc();break;case 3:Ia(),Rt(zn),Rt(wn),mf();break;case 5:ff(d);break;case 4:Ia();break;case 13:Rt(bt);break;case 19:Rt(bt);break;case 10:lf(d.type._context);break;case 22:case 23:Wf()}l=l.return}if(an=i,Ht=i=ws(i.current,null),gn=ar=o,en=0,$l=null,jf=jc=po=0,Kn=ql=null,co!==null){for(o=0;o<co.length;o++)if(l=co[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,d.next=E}l.pending=d}co=null}return i}function m_(i,o){do{var l=Ht;try{if(af(),kc.current=Nc,xc){for(var d=Nt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}xc=!1}if(fo=0,on=Zt=Nt=null,Ml=!1,Fl=0,Uf.current=null,l===null||l.return===null){en=1,$l=o,Ht=null;break}e:{var y=i,E=l.return,C=l,b=o;if(o=gn,C.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=b,ne=C,ie=ne.tag;if((ne.mode&1)===0&&(ie===0||ie===11||ie===15)){var Z=ne.alternate;Z?(ne.updateQueue=Z.updateQueue,ne.memoizedState=Z.memoizedState,ne.lanes=Z.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ge=jy(E);if(ge!==null){ge.flags&=-257,By(ge,E,C,y,o),ge.mode&1&&Uy(y,G,o),o=ge,b=G;var Te=o.updateQueue;if(Te===null){var Ae=new Set;Ae.add(b),o.updateQueue=Ae}else Te.add(b);break e}else{if((o&1)===0){Uy(y,G,o),Hf();break e}b=Error(t(426))}}else if(Pt&&C.mode&1){var zt=jy(E);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),By(zt,E,C,y,o),sf(Ta(b,C));break e}}y=b=Ta(b,C),en!==4&&(en=2),ql===null?ql=[y]:ql.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=My(y,b,o);cy(y,z);break e;case 1:C=b;var V=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(gs===null||!gs.has(q)))){y.flags|=65536,o&=-o,y.lanes|=o;var oe=Fy(y,C,o);cy(y,oe);break e}}y=y.return}while(y!==null)}__(l)}catch(Ce){o=Ce,Ht===l&&l!==null&&(Ht=l=l.return);continue}break}while(!0)}function g_(){var i=Uc.current;return Uc.current=Nc,i===null?Nc:i}function Hf(){(en===0||en===3||en===2)&&(en=4),an===null||(po&268435455)===0&&(jc&268435455)===0||vs(an,gn)}function Gc(i,o){var l=ot;ot|=2;var d=g_();(an!==i||gn!==o)&&(Ni=null,go(i,o));do try{vS();break}catch(p){m_(i,p)}while(!0);if(af(),ot=l,Uc.current=d,Ht!==null)throw Error(t(261));return an=null,gn=0,en}function vS(){for(;Ht!==null;)y_(Ht)}function wS(){for(;Ht!==null&&!Jr();)y_(Ht)}function y_(i){var o=E_(i.alternate,i,ar);i.memoizedProps=i.pendingProps,o===null?__(i):Ht=o,Uf.current=null}function __(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=dS(l,o,ar),l!==null){Ht=l;return}}else{if(l=fS(l,o),l!==null){l.flags&=32767,Ht=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{en=6,Ht=null;return}}if(o=o.sibling,o!==null){Ht=o;return}Ht=o=i}while(o!==null);en===0&&(en=5)}function yo(i,o,l){var d=nt,p=Tr.transition;try{Tr.transition=null,nt=1,ES(i,o,l,d)}finally{Tr.transition=p,nt=d}return null}function ES(i,o,l,d){do Pa();while(ys!==null);if((ot&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(_t(i,y),i===an&&(Ht=an=null,gn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||zc||(zc=!0,I_(dn,function(){return Pa(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Tr.transition,Tr.transition=null;var E=nt;nt=1;var C=ot;ot|=4,Uf.current=null,mS(i,l),l_(l,i),BT(Wd),os=!!Gd,Wd=Gd=null,i.current=l,gS(l),er(),ot=C,nt=E,Tr.transition=y}else i.current=l;if(zc&&(zc=!1,ys=i,$c=p),y=i.pendingLanes,y===0&&(gs=null),Xr(l.stateNode),Gn(i,Qe()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(Bc)throw Bc=!1,i=zf,zf=null,i;return($c&1)!==0&&i.tag!==0&&Pa(),y=i.pendingLanes,(y&1)!==0?i===$f?Kl++:(Kl=0,$f=i):Kl=0,ds(),null}function Pa(){if(ys!==null){var i=is($c),o=Tr.transition,l=nt;try{if(Tr.transition=null,nt=16>i?16:i,ys===null)var d=!1;else{if(i=ys,ys=null,$c=0,(ot&6)!==0)throw Error(t(331));var p=ot;for(ot|=4,Ie=i.current;Ie!==null;){var y=Ie,E=y.child;if((Ie.flags&16)!==0){var C=y.deletions;if(C!==null){for(var b=0;b<C.length;b++){var G=C[b];for(Ie=G;Ie!==null;){var ne=Ie;switch(ne.tag){case 0:case 11:case 15:zl(8,ne,y)}var ie=ne.child;if(ie!==null)ie.return=ne,Ie=ie;else for(;Ie!==null;){ne=Ie;var Z=ne.sibling,ge=ne.return;if(r_(ne),ne===G){Ie=null;break}if(Z!==null){Z.return=ge,Ie=Z;break}Ie=ge}}}var Te=y.alternate;if(Te!==null){var Ae=Te.child;if(Ae!==null){Te.child=null;do{var zt=Ae.sibling;Ae.sibling=null,Ae=zt}while(Ae!==null)}}Ie=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,Ie=E;else e:for(;Ie!==null;){if(y=Ie,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:zl(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,Ie=z;break e}Ie=y.return}}var V=i.current;for(Ie=V;Ie!==null;){E=Ie;var q=E.child;if((E.subtreeFlags&2064)!==0&&q!==null)q.return=E,Ie=q;else e:for(E=V;Ie!==null;){if(C=Ie,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Fc(9,C)}}catch(Ce){Ut(C,C.return,Ce)}if(C===E){Ie=null;break e}var oe=C.sibling;if(oe!==null){oe.return=C.return,Ie=oe;break e}Ie=C.return}}if(ot=p,ds(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ct,i)}catch{}d=!0}return d}finally{nt=l,Tr.transition=o}}return!1}function v_(i,o,l){o=Ta(l,o),o=My(i,o,1),i=ps(i,o,1),o=bn(),i!==null&&(ns(i,1,o),Gn(i,o))}function Ut(i,o,l){if(i.tag===3)v_(i,i,l);else for(;o!==null;){if(o.tag===3){v_(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(gs===null||!gs.has(d))){i=Ta(l,i),i=Fy(o,i,1),o=ps(o,i,1),i=bn(),o!==null&&(ns(o,1,i),Gn(o,i));break}}o=o.return}}function IS(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=bn(),i.pingedLanes|=i.suspendedLanes&l,an===i&&(gn&l)===l&&(en===4||en===3&&(gn&130023424)===gn&&500>Qe()-Bf?go(i,0):jf|=l),Gn(i,o)}function w_(i,o){o===0&&((i.mode&1)===0?o=1:(o=Jo,Jo<<=1,(Jo&130023424)===0&&(Jo=4194304)));var l=bn();i=xi(i,o),i!==null&&(ns(i,o,l),Gn(i,l))}function TS(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),w_(i,l)}function SS(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),w_(i,l)}var E_;E_=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||zn.current)qn=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return qn=!1,hS(i,o,l);qn=(i.flags&131072)!==0}else qn=!1,Pt&&(o.flags&1048576)!==0&&ey(o,Ec,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Oc(i,o),i=o.pendingProps;var p=ma(o,wn.current);Ea(o,l),p=_f(null,o,d,i,p,l);var y=vf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,$n(d)?(y=!0,_c(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,hf(o),p.updater=Vc,o.stateNode=p,p._reactInternals=o,Rf(o,d,i,l),o=kf(null,o,d,!0,y,l)):(o.tag=0,Pt&&y&&ef(o),Dn(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(Oc(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=AS(d),i=Ur(d,i),p){case 0:o=Cf(null,o,d,i,l);break e;case 1:o=Wy(null,o,d,i,l);break e;case 11:o=zy(null,o,d,i,l);break e;case 14:o=$y(null,o,d,Ur(d.type,i),l);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Ur(d,p),Cf(i,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Ur(d,p),Wy(i,o,d,p,l);case 3:e:{if(Hy(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,p=y.element,uy(i,o),Pc(o,d,null,l);var E=o.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Ta(Error(t(423)),o),o=Qy(i,o,d,l,p);break e}else if(d!==p){p=Ta(Error(t(424)),o),o=Qy(i,o,d,l,p);break e}else for(or=us(o.stateNode.containerInfo.firstChild),sr=o,Pt=!0,Fr=null,l=ay(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(_a(),d===p){o=bi(i,o,l);break e}Dn(i,o,d,l)}o=o.child}return o;case 5:return dy(o),i===null&&rf(o),d=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,Hd(d,p)?E=null:y!==null&&Hd(d,y)&&(o.flags|=32),Gy(i,o),Dn(i,o,E,l),o.child;case 6:return i===null&&rf(o),null;case 13:return Jy(i,o,l);case 4:return df(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=va(o,null,d,l):Dn(i,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Ur(d,p),zy(i,o,d,p,l);case 7:return Dn(i,o,o.pendingProps,l),o.child;case 8:return Dn(i,o,o.pendingProps.children,l),o.child;case 12:return Dn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,wt(Sc,d._currentValue),d._currentValue=E,y!==null)if(Mr(y.value,E)){if(y.children===p.children&&!zn.current){o=bi(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var C=y.dependencies;if(C!==null){E=y.child;for(var b=C.firstContext;b!==null;){if(b.context===d){if(y.tag===1){b=Di(-1,l&-l),b.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var ne=G.pending;ne===null?b.next=b:(b.next=ne.next,ne.next=b),G.pending=b}}y.lanes|=l,b=y.alternate,b!==null&&(b.lanes|=l),uf(y.return,l,o),C.lanes|=l;break}b=b.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,C=E.alternate,C!==null&&(C.lanes|=l),uf(E,l,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}Dn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,Ea(o,l),p=Er(p),d=d(p),o.flags|=1,Dn(i,o,d,l),o.child;case 14:return d=o.type,p=Ur(d,o.pendingProps),p=Ur(d.type,p),$y(i,o,d,p,l);case 15:return qy(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Ur(d,p),Oc(i,o),o.tag=1,$n(d)?(i=!0,_c(o)):i=!1,Ea(o,l),Ly(o,d,p),Rf(o,d,p,l),kf(null,o,d,!0,i,l);case 19:return Xy(i,o,l);case 22:return Ky(i,o,l)}throw Error(t(156,o.tag))};function I_(i,o){return dt(i,o)}function RS(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(i,o,l,d){return new RS(i,o,l,d)}function Qf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function AS(i){if(typeof i=="function")return Qf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===vt)return 14}return 2}function ws(i,o){var l=i.alternate;return l===null?(l=Sr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Wc(i,o,l,d,p,y){var E=2;if(d=i,typeof i=="function")Qf(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case T:return _o(l.children,p,y,o);case R:E=8,p|=8;break;case P:return i=Sr(12,l,o,p|2),i.elementType=P,i.lanes=y,i;case k:return i=Sr(13,l,o,p),i.elementType=k,i.lanes=y,i;case Ye:return i=Sr(19,l,o,p),i.elementType=Ye,i.lanes=y,i;case st:return Hc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case x:E=10;break e;case N:E=9;break e;case L:E=11;break e;case vt:E=14;break e;case Bt:E=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Sr(E,l,o,p),o.elementType=i,o.type=d,o.lanes=y,o}function _o(i,o,l,d){return i=Sr(7,i,d,o),i.lanes=l,i}function Hc(i,o,l,d){return i=Sr(22,i,d,o),i.elementType=st,i.lanes=l,i.stateNode={isHidden:!1},i}function Jf(i,o,l){return i=Sr(6,i,null,o),i.lanes=l,i}function Yf(i,o,l){return o=Sr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function PS(i,o,l,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ts(0),this.expirationTimes=ts(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Xf(i,o,l,d,p,y,E,C,b){return i=new PS(i,o,l,C,b),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Sr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(y),i}function CS(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function T_(i){if(!i)return hs;i=i._reactInternals;e:{if(_e(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if($n(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if($n(l))return Yg(i,l,o)}return o}function S_(i,o,l,d,p,y,E,C,b){return i=Xf(l,d,!0,i,p,y,E,C,b),i.context=T_(null),l=i.current,d=bn(),p=_s(l),y=Di(d,p),y.callback=o??null,ps(l,y,p),i.current.lanes=p,ns(i,p,d),Gn(i,d),i}function Qc(i,o,l,d){var p=o.current,y=bn(),E=_s(p);return l=T_(l),o.context===null?o.context=l:o.pendingContext=l,o=Di(y,E),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=ps(p,o,E),i!==null&&(zr(i,p,E,y),Ac(i,p,E)),E}function Jc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function R_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Zf(i,o){R_(i,o),(i=i.alternate)&&R_(i,o)}function kS(){return null}var A_=typeof reportError=="function"?reportError:function(i){console.error(i)};function ep(i){this._internalRoot=i}Yc.prototype.render=ep.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Qc(i,o,null,null)},Yc.prototype.unmount=ep.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;mo(function(){Qc(null,i,null,null)}),o[Ai]=null}};function Yc(i){this._internalRoot=i}Yc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Yu();i={blockedOn:null,target:i,priority:o};for(var l=0;l<ei.length&&o!==0&&o<ei[l].priority;l++);ei.splice(l,0,i),l===0&&ec(i)}};function tp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Xc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function P_(){}function xS(i,o,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var G=Jc(E);y.call(G)}}var E=S_(o,d,i,0,null,!1,!1,"",P_);return i._reactRootContainer=E,i[Ai]=E.current,kl(i.nodeType===8?i.parentNode:i),mo(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var C=d;d=function(){var G=Jc(b);C.call(G)}}var b=Xf(i,0,!1,null,null,!1,!1,"",P_);return i._reactRootContainer=b,i[Ai]=b.current,kl(i.nodeType===8?i.parentNode:i),mo(function(){Qc(o,b,l,d)}),b}function Zc(i,o,l,d,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var C=p;p=function(){var b=Jc(E);C.call(b)}}Qc(o,E,i,p)}else E=xS(l,o,i,p,d);return Jc(E)}Qu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=es(o.pendingLanes);l!==0&&(rs(o,l|1),Gn(o,Qe()),(ot&6)===0&&(Aa=Qe()+500,ds()))}break;case 13:mo(function(){var d=xi(i,1);if(d!==null){var p=bn();zr(d,i,1,p)}}),Zf(i,1)}},Yo=function(i){if(i.tag===13){var o=xi(i,134217728);if(o!==null){var l=bn();zr(o,i,134217728,l)}Zf(i,134217728)}},Ju=function(i){if(i.tag===13){var o=_s(i),l=xi(i,o);if(l!==null){var d=bn();zr(l,i,o,d)}Zf(i,o)}},Yu=function(){return nt},Xu=function(i,o){var l=nt;try{return nt=i,o()}finally{nt=l}},wi=function(i,o,l){switch(o){case"input":if(Hs(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var p=gc(d);if(!p)throw Error(t(90));Ot(d),Hs(d,p)}}}break;case"textarea":On(i,l);break;case"select":o=l.value,o!=null&&Cr(i,!!l.multiple,o,!1)}},Hr=Gf,Qr=mo;var DS={usingClientEntryPoint:!1,Events:[bl,fa,gc,Zn,Ys,Gf]},Gl={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bS={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:le.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=at(i),i===null?null:i.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||kS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{ct=eh.inject(bS),Gt=eh}catch{}}return Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DS,Wn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tp(o))throw Error(t(200));return CS(i,o,null,l)},Wn.createRoot=function(i,o){if(!tp(i))throw Error(t(299));var l=!1,d="",p=A_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Xf(i,1,!1,null,null,l,!1,d,p),i[Ai]=o.current,kl(i.nodeType===8?i.parentNode:i),new ep(o)},Wn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=at(o),i=i===null?null:i.stateNode,i},Wn.flushSync=function(i){return mo(i)},Wn.hydrate=function(i,o,l){if(!Xc(o))throw Error(t(200));return Zc(null,i,o,!0,l)},Wn.hydrateRoot=function(i,o,l){if(!tp(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",E=A_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),o=S_(o,null,i,1,l??null,p,!1,y,E),i[Ai]=o.current,kl(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Yc(o)},Wn.render=function(i,o,l){if(!Xc(o))throw Error(t(200));return Zc(null,i,o,!1,l)},Wn.unmountComponentAtNode=function(i){if(!Xc(i))throw Error(t(40));return i._reactRootContainer?(mo(function(){Zc(null,null,i,!1,function(){i._reactRootContainer=null,i[Ai]=null})}),!0):!1},Wn.unstable_batchedUpdates=Gf,Wn.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!Xc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Zc(i,o,l,!1,d)},Wn.version="18.3.1-next-f1338f8080-20240426",Wn}var L_;function Qw(){if(L_)return ip.exports;L_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ip.exports=jS(),ip.exports}var O_;function BS(){if(O_)return th;O_=1;var n=Qw();return th.createRoot=n.createRoot,th.hydrateRoot=n.hydrateRoot,th}var zS=BS(),Jw=Qw();const $S=Hw(Jw),qS=Ww({__proto__:null,default:$S},[Jw]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ct(){return Ct=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ct.apply(this,arguments)}var Jt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Jt||(Jt={}));const M_="popstate";function KS(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:h}=r.location;return mu("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:No(s)}return WS(e,t,null,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GS(){return Math.random().toString(36).substr(2,8)}function F_(n,e){return{usr:n.state,key:n.key,idx:e}}function mu(n,e,t,r){return t===void 0&&(t=null),Ct({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?zs(e):e,{state:t,key:e&&e.key||r||GS()})}function No(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function WS(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h=Jt.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(Ct({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function w(){h=Jt.Pop;let U=_(),ae=U==null?null:U-m;m=U,f&&f({action:h,location:M.location,delta:ae})}function I(U,ae){h=Jt.Push;let H=mu(M.location,U,ae);m=_()+1;let ee=F_(H,m),le=M.createHref(H);try{u.pushState(ee,"",le)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(le)}a&&f&&f({action:h,location:M.location,delta:1})}function A(U,ae){h=Jt.Replace;let H=mu(M.location,U,ae);m=_();let ee=F_(H,m),le=M.createHref(H);u.replaceState(ee,"",le),a&&f&&f({action:h,location:M.location,delta:0})}function j(U){let ae=s.location.origin!=="null"?s.location.origin:s.location.href,H=typeof U=="string"?U:No(U);return H=H.replace(/ $/,"%20"),Ke(ae,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,ae)}let M={get action(){return h},get location(){return n(s,u)},listen(U){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(M_,w),f=U,()=>{s.removeEventListener(M_,w),f=null}},createHref(U){return e(s,U)},createURL:j,encodeLocation(U){let ae=j(U);return{pathname:ae.pathname,search:ae.search,hash:ae.hash}},push:I,replace:A,go(U){return u.go(U)}};return M}var pt;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(pt||(pt={}));const HS=new Set(["lazy","caseSensitive","path","id","index","children"]);function QS(n){return n.index===!0}function Ah(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((s,a)=>{let u=[...t,String(a)],h=typeof s.id=="string"?s.id:u.join("-");if(Ke(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ke(!r[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),QS(s)){let f=Ct({},s,e(s),{id:h});return r[h]=f,f}else{let f=Ct({},s,e(s),{id:h,children:void 0});return r[h]=f,s.children&&(f.children=Ah(s.children,e,u,r)),f}})}function Io(n,e,t){return t===void 0&&(t="/"),hh(n,e,t,!1)}function hh(n,e,t,r){let s=typeof e=="string"?zs(e):e,a=Bi(s.pathname||"/",t);if(a==null)return null;let u=Xw(n);JS(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=aR(a);h=sR(u[f],m,r)}return h}function Yw(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function Xw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Ke(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=ji([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Ke(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Xw(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:rR(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of Zw(a.path))s(a,u,f)}),e}function Zw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=Zw(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function JS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:iR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const YS=/^:[\w-]+$/,XS=3,ZS=2,eR=1,tR=10,nR=-2,U_=n=>n==="*";function rR(n,e){let t=n.split("/"),r=t.length;return t.some(U_)&&(r+=nR),e&&(r+=ZS),t.filter(s=>!U_(s)).reduce((s,a)=>s+(YS.test(a)?XS:a===""?eR:tR),r)}function iR(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function sR(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=Ph({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),I=f.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=Ph({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:ji([a,w.pathname]),pathnameBase:cR(ji([a,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(a=ji([a,w.pathnameBase]))}return u}function Ph(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,_,w)=>{let{paramName:I,isOptional:A}=_;if(I==="*"){let M=h[w]||"";u=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const j=h[w];return A&&!j?m[I]=void 0:m[I]=(j||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function oR(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),qa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qa(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Bi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function lR(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?zs(n):n;return{pathname:t?t.startsWith("/")?t:uR(t,e):e,search:hR(r),hash:dR(s)}}function uR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ap(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Yh(n,e){let t=eE(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Xh(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=zs(n):(s=Ct({},n),Ke(!s.pathname||!s.pathname.includes("?"),ap("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),ap("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),ap("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let I=u.split("/");for(;I[0]==="..";)I.shift(),w-=1;s.pathname=I.join("/")}h=w>=0?e[w]:"/"}let f=lR(s,h),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const ji=n=>n.join("/").replace(/\/\/+/g,"/"),cR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Ch{constructor(e,t,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=t||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function gu(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const tE=["post","put","patch","delete"],fR=new Set(tE),pR=["get",...tE],mR=new Set(pR),gR=new Set([301,302,303,307,308]),yR=new Set([307,308]),lp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_R={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Hl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},um=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vR=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),nE="remix-router-transitions";function wR(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;Ke(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(n.mapRouteProperties)s=n.mapRouteProperties;else if(n.detectErrorBoundary){let D=n.detectErrorBoundary;s=O=>({hasErrorBoundary:D(O)})}else s=vR;let a={},u=Ah(n.routes,s,void 0,a),h,f=n.basename||"/",m=n.dataStrategy||SR,_=n.patchRoutesOnNavigation,w=Ct({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),I=null,A=new Set,j=null,M=null,U=null,ae=n.hydrationData!=null,H=Io(u,n.history.location,f),ee=!1,le=null;if(H==null&&!_){let D=Hn(404,{pathname:n.history.location.pathname}),{matches:O,route:K}=J_(u);H=O,le={[K.id]:D}}H&&!n.hydrationData&&Qr(H,u,n.history.location.pathname).active&&(H=null);let de;if(H)if(H.some(D=>D.route.lazy))de=!1;else if(!H.some(D=>D.route.loader))de=!0;else if(w.v7_partialHydration){let D=n.hydrationData?n.hydrationData.loaderData:null,O=n.hydrationData?n.hydrationData.errors:null;if(O){let K=H.findIndex(X=>O[X.route.id]!==void 0);de=H.slice(0,K+1).every(X=>!Rp(X.route,D,O))}else de=H.every(K=>!Rp(K.route,D,O))}else de=n.hydrationData!=null;else if(de=!1,H=[],w.v7_partialHydration){let D=Qr(null,u,n.history.location.pathname);D.active&&D.matches&&(ee=!0,H=D.matches)}let me,T={historyAction:n.history.action,location:n.history.location,matches:H,initialized:de,navigation:lp,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||le,fetchers:new Map,blockers:new Map},R=Jt.Pop,P=!1,x,N=!1,L=new Map,k=null,Ye=!1,vt=!1,Bt=[],st=new Set,re=new Map,ke=0,pe=-1,F=new Map,Q=new Set,Se=new Map,Be=new Map,Oe=new Set,$e=new Map,qe=new Map,Xe;function gt(){if(I=n.history.listen(D=>{let{action:O,location:K,delta:X}=D;if(Xe){Xe(),Xe=void 0;return}qa(qe.size===0||X!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=wi({currentLocation:T.location,nextLocation:K,historyAction:O});if(ce&&X!=null){let we=new Promise(Ne=>{Xe=Ne});n.history.go(X*-1),Dr(ce,{state:"blocked",location:K,proceed(){Dr(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),we.then(()=>n.history.go(X))},reset(){let Ne=new Map(T.blockers);Ne.set(ce,Hl),Ot({blockers:Ne})}});return}return Xn(O,K)}),t){FR(e,L);let D=()=>UR(e,L);e.addEventListener("pagehide",D),k=()=>e.removeEventListener("pagehide",D)}return T.initialized||Xn(Jt.Pop,T.location,{initialHydration:!0}),me}function Kt(){I&&I(),k&&k(),A.clear(),x&&x.abort(),T.fetchers.forEach((D,O)=>pr(O)),T.blockers.forEach((D,O)=>Wr(O))}function Ar(D){return A.add(D),()=>A.delete(D)}function Ot(D,O){O===void 0&&(O={}),T=Ct({},T,D);let K=[],X=[];w.v7_fetcherPersist&&T.fetchers.forEach((ce,we)=>{ce.state==="idle"&&(Oe.has(we)?X.push(we):K.push(we))}),Oe.forEach(ce=>{!T.fetchers.has(ce)&&!re.has(ce)&&X.push(ce)}),[...A].forEach(ce=>ce(T,{deletedFetchers:X,viewTransitionOpts:O.viewTransitionOpts,flushSync:O.flushSync===!0})),w.v7_fetcherPersist?(K.forEach(ce=>T.fetchers.delete(ce)),X.forEach(ce=>pr(ce))):X.forEach(ce=>Oe.delete(ce))}function Cn(D,O,K){var X,ce;let{flushSync:we}=K===void 0?{}:K,Ne=T.actionData!=null&&T.navigation.formMethod!=null&&$r(T.navigation.formMethod)&&T.navigation.state==="loading"&&((X=D.state)==null?void 0:X._isRedirect)!==!0,Ee;O.actionData?Object.keys(O.actionData).length>0?Ee=O.actionData:Ee=null:Ne?Ee=T.actionData:Ee=null;let ve=O.loaderData?H_(T.loaderData,O.loaderData,O.matches||[],O.errors):T.loaderData,ye=T.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((Ue,Ft)=>ye.set(Ft,Hl)));let _e=P===!0||T.navigation.formMethod!=null&&$r(T.navigation.formMethod)&&((ce=D.state)==null?void 0:ce._isRedirect)!==!0;h&&(u=h,h=void 0),Ye||R===Jt.Pop||(R===Jt.Push?n.history.push(D,D.state):R===Jt.Replace&&n.history.replace(D,D.state));let Me;if(R===Jt.Pop){let Ue=L.get(T.location.pathname);Ue&&Ue.has(D.pathname)?Me={currentLocation:T.location,nextLocation:D}:L.has(D.pathname)&&(Me={currentLocation:D,nextLocation:T.location})}else if(N){let Ue=L.get(T.location.pathname);Ue?Ue.add(D.pathname):(Ue=new Set([D.pathname]),L.set(T.location.pathname,Ue)),Me={currentLocation:T.location,nextLocation:D}}Ot(Ct({},O,{actionData:Ee,loaderData:ve,historyAction:R,location:D,initialized:!0,navigation:lp,revalidation:"idle",restoreScrollPosition:Hr(D,O.matches||T.matches),preventScrollReset:_e,blockers:ye}),{viewTransitionOpts:Me,flushSync:we===!0}),R=Jt.Pop,P=!1,N=!1,Ye=!1,vt=!1,Bt=[]}async function Gr(D,O){if(typeof D=="number"){n.history.go(D);return}let K=Sp(T.location,T.matches,f,w.v7_prependBasename,D,w.v7_relativeSplatPath,O?.fromRouteId,O?.relative),{path:X,submission:ce,error:we}=j_(w.v7_normalizeFormMethod,!1,K,O),Ne=T.location,Ee=mu(T.location,X,O&&O.state);Ee=Ct({},Ee,n.history.encodeLocation(Ee));let ve=O&&O.replace!=null?O.replace:void 0,ye=Jt.Push;ve===!0?ye=Jt.Replace:ve===!1||ce!=null&&$r(ce.formMethod)&&ce.formAction===T.location.pathname+T.location.search&&(ye=Jt.Replace);let _e=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,Me=(O&&O.flushSync)===!0,Ue=wi({currentLocation:Ne,nextLocation:Ee,historyAction:ye});if(Ue){Dr(Ue,{state:"blocked",location:Ee,proceed(){Dr(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),Gr(D,O)},reset(){let Ft=new Map(T.blockers);Ft.set(Ue,Hl),Ot({blockers:Ft})}});return}return await Xn(ye,Ee,{submission:ce,pendingError:we,preventScrollReset:_e,replace:O&&O.replace,enableViewTransition:O&&O.viewTransition,flushSync:Me})}function Wi(){if(xt(),Ot({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){Xn(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}Xn(R||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:N===!0})}}async function Xn(D,O,K){x&&x.abort(),x=null,R=D,Ye=(K&&K.startUninterruptedRevalidation)===!0,Ys(T.location,T.matches),P=(K&&K.preventScrollReset)===!0,N=(K&&K.enableViewTransition)===!0;let X=h||u,ce=K&&K.overrideNavigation,we=K!=null&&K.initialHydration&&T.matches&&T.matches.length>0&&!ee?T.matches:Io(X,O,f),Ne=(K&&K.flushSync)===!0;if(we&&T.initialized&&!vt&&xR(T.location,O)&&!(K&&K.submission&&$r(K.submission.formMethod))){Cn(O,{matches:we},{flushSync:Ne});return}let Ee=Qr(we,X,O.pathname);if(Ee.active&&Ee.matches&&(we=Ee.matches),!we){let{error:at,notFoundMatches:We,route:dt}=_n(O.pathname);Cn(O,{matches:We,loaderData:{},errors:{[dt.id]:at}},{flushSync:Ne});return}x=new AbortController;let ve=Ca(n.history,O,x.signal,K&&K.submission),ye;if(K&&K.pendingError)ye=[To(we).route.id,{type:pt.error,error:K.pendingError}];else if(K&&K.submission&&$r(K.submission.formMethod)){let at=await Hs(ve,O,K.submission,we,Ee.active,{replace:K.replace,flushSync:Ne});if(at.shortCircuited)return;if(at.pendingActionResult){let[We,dt]=at.pendingActionResult;if(lr(dt)&&gu(dt.error)&&dt.error.status===404){x=null,Cn(O,{matches:at.matches,loaderData:{},errors:{[We]:dt.error}});return}}we=at.matches||we,ye=at.pendingActionResult,ce=up(O,K.submission),Ne=!1,Ee.active=!1,ve=Ca(n.history,ve.url,ve.signal)}let{shortCircuited:_e,matches:Me,loaderData:Ue,errors:Ft}=await Wo(ve,O,we,Ee.active,ce,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Ne,ye);_e||(x=null,Cn(O,Ct({matches:Me||we},Q_(ye),{loaderData:Ue,errors:Ft})))}async function Hs(D,O,K,X,ce,we){we===void 0&&(we={}),xt();let Ne=OR(O,K);if(Ot({navigation:Ne},{flushSync:we.flushSync===!0}),ce){let ye=await Un(X,O.pathname,D.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let _e=To(ye.partialMatches).route.id;return{matches:ye.partialMatches,pendingActionResult:[_e,{type:pt.error,error:ye.error}]}}else if(ye.matches)X=ye.matches;else{let{notFoundMatches:_e,error:Me,route:Ue}=_n(O.pathname);return{matches:_e,pendingActionResult:[Ue.id,{type:pt.error,error:Me}]}}}let Ee,ve=nu(X,O);if(!ve.route.action&&!ve.route.lazy)Ee={type:pt.error,error:Hn(405,{method:D.method,pathname:O.pathname,routeId:ve.route.id})};else if(Ee=(await kr("action",T,D,[ve],X,null))[ve.route.id],D.signal.aborted)return{shortCircuited:!0};if(Co(Ee)){let ye;return we&&we.replace!=null?ye=we.replace:ye=K_(Ee.response.headers.get("Location"),new URL(D.url),f)===T.location.pathname+T.location.search,await On(D,Ee,!0,{submission:K,replace:ye}),{shortCircuited:!0}}if(bs(Ee))throw Hn(400,{type:"defer-action"});if(lr(Ee)){let ye=To(X,ve.route.id);return(we&&we.replace)!==!0&&(R=Jt.Push),{matches:X,pendingActionResult:[ye.route.id,Ee]}}return{matches:X,pendingActionResult:[ve.route.id,Ee]}}async function Wo(D,O,K,X,ce,we,Ne,Ee,ve,ye,_e){let Me=ce||up(O,we),Ue=we||Ne||X_(Me),Ft=!Ye&&(!w.v7_partialHydration||!ve);if(X){if(Ft){let ct=_i(_e);Ot(Ct({navigation:Me},ct!==void 0?{actionData:ct}:{}),{flushSync:ye})}let Je=await Un(K,O.pathname,D.signal);if(Je.type==="aborted")return{shortCircuited:!0};if(Je.type==="error"){let ct=To(Je.partialMatches).route.id;return{matches:Je.partialMatches,loaderData:{},errors:{[ct]:Je.error}}}else if(Je.matches)K=Je.matches;else{let{error:ct,notFoundMatches:Gt,route:Xr}=_n(O.pathname);return{matches:Gt,loaderData:{},errors:{[Xr.id]:ct}}}}let at=h||u,[We,dt]=z_(n.history,T,K,Ue,O,w.v7_partialHydration&&ve===!0,w.v7_skipActionErrorRevalidation,vt,Bt,st,Oe,Se,Q,at,f,_e);if(Fn(Je=>!(K&&K.some(ct=>ct.route.id===Je))||We&&We.some(ct=>ct.route.id===Je)),pe=++ke,We.length===0&&dt.length===0){let Je=Ji();return Cn(O,Ct({matches:K,loaderData:{},errors:_e&&lr(_e[1])?{[_e[0]]:_e[1].error}:null},Q_(_e),Je?{fetchers:new Map(T.fetchers)}:{}),{flushSync:ye}),{shortCircuited:!0}}if(Ft){let Je={};if(!X){Je.navigation=Me;let ct=_i(_e);ct!==void 0&&(Je.actionData=ct)}dt.length>0&&(Je.fetchers=Pr(dt)),Ot(Je,{flushSync:ye})}dt.forEach(Je=>{Mn(Je.key),Je.controller&&re.set(Je.key,Je.controller)});let mr=()=>dt.forEach(Je=>Mn(Je.key));x&&x.signal.addEventListener("abort",mr);let{loaderResults:Jr,fetcherResults:er}=await Mt(T,K,We,dt,D);if(D.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",mr),dt.forEach(Je=>re.delete(Je.key));let Qe=nh(Jr);if(Qe)return await On(D,Qe.result,!0,{replace:Ee}),{shortCircuited:!0};if(Qe=nh(er),Qe)return Q.add(Qe.key),await On(D,Qe.result,!0,{replace:Ee}),{shortCircuited:!0};let{loaderData:Zi,errors:tr}=W_(T,K,Jr,_e,dt,er,$e);$e.forEach((Je,ct)=>{Je.subscribe(Gt=>{(Gt||Je.done)&&$e.delete(ct)})}),w.v7_partialHydration&&ve&&T.errors&&(tr=Ct({},T.errors,tr));let vn=Ji(),dn=Yi(pe),Yr=vn||dn||dt.length>0;return Ct({matches:K,loaderData:Zi,errors:tr},Yr?{fetchers:new Map(T.fetchers)}:{})}function _i(D){if(D&&!lr(D[1]))return{[D[0]]:D[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function Pr(D){return D.forEach(O=>{let K=T.fetchers.get(O.key),X=Ql(void 0,K?K.data:void 0);T.fetchers.set(O.key,X)}),new Map(T.fetchers)}function Cr(D,O,K,X){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Mn(D);let ce=(X&&X.flushSync)===!0,we=h||u,Ne=Sp(T.location,T.matches,f,w.v7_prependBasename,K,w.v7_relativeSplatPath,O,X?.relative),Ee=Io(we,Ne,f),ve=Qr(Ee,we,Ne);if(ve.active&&ve.matches&&(Ee=ve.matches),!Ee){kn(D,O,Hn(404,{pathname:Ne}),{flushSync:ce});return}let{path:ye,submission:_e,error:Me}=j_(w.v7_normalizeFormMethod,!0,Ne,X);if(Me){kn(D,O,Me,{flushSync:ce});return}let Ue=nu(Ee,ye),Ft=(X&&X.preventScrollReset)===!0;if(_e&&$r(_e.formMethod)){Qs(D,O,ye,Ue,Ee,ve.active,ce,Ft,_e);return}Se.set(D,{routeId:O,path:ye}),Hi(D,O,ye,Ue,Ee,ve.active,ce,Ft,_e)}async function Qs(D,O,K,X,ce,we,Ne,Ee,ve){xt(),Se.delete(D);function ye(Ze){if(!Ze.route.action&&!Ze.route.lazy){let gr=Hn(405,{method:ve.formMethod,pathname:K,routeId:O});return kn(D,O,gr,{flushSync:Ne}),!0}return!1}if(!we&&ye(X))return;let _e=T.fetchers.get(D);rn(D,MR(ve,_e),{flushSync:Ne});let Me=new AbortController,Ue=Ca(n.history,K,Me.signal,ve);if(we){let Ze=await Un(ce,new URL(Ue.url).pathname,Ue.signal,D);if(Ze.type==="aborted")return;if(Ze.type==="error"){kn(D,O,Ze.error,{flushSync:Ne});return}else if(Ze.matches){if(ce=Ze.matches,X=nu(ce,K),ye(X))return}else{kn(D,O,Hn(404,{pathname:K}),{flushSync:Ne});return}}re.set(D,Me);let Ft=ke,We=(await kr("action",T,Ue,[X],ce,D))[X.route.id];if(Ue.signal.aborted){re.get(D)===Me&&re.delete(D);return}if(w.v7_fetcherPersist&&Oe.has(D)){if(Co(We)||lr(We)){rn(D,As(void 0));return}}else{if(Co(We))if(re.delete(D),pe>Ft){rn(D,As(void 0));return}else return Q.add(D),rn(D,Ql(ve)),On(Ue,We,!1,{fetcherSubmission:ve,preventScrollReset:Ee});if(lr(We)){kn(D,O,We.error);return}}if(bs(We))throw Hn(400,{type:"defer-action"});let dt=T.navigation.location||T.location,mr=Ca(n.history,dt,Me.signal),Jr=h||u,er=T.navigation.state!=="idle"?Io(Jr,T.navigation.location,f):T.matches;Ke(er,"Didn't find any matches after fetcher action");let Qe=++ke;F.set(D,Qe);let Zi=Ql(ve,We.data);T.fetchers.set(D,Zi);let[tr,vn]=z_(n.history,T,er,ve,dt,!1,w.v7_skipActionErrorRevalidation,vt,Bt,st,Oe,Se,Q,Jr,f,[X.route.id,We]);vn.filter(Ze=>Ze.key!==D).forEach(Ze=>{let gr=Ze.key,Zs=T.fetchers.get(gr),Ho=Ql(void 0,Zs?Zs.data:void 0);T.fetchers.set(gr,Ho),Mn(gr),Ze.controller&&re.set(gr,Ze.controller)}),Ot({fetchers:new Map(T.fetchers)});let dn=()=>vn.forEach(Ze=>Mn(Ze.key));Me.signal.addEventListener("abort",dn);let{loaderResults:Yr,fetcherResults:Je}=await Mt(T,er,tr,vn,mr);if(Me.signal.aborted)return;Me.signal.removeEventListener("abort",dn),F.delete(D),re.delete(D),vn.forEach(Ze=>re.delete(Ze.key));let ct=nh(Yr);if(ct)return On(mr,ct.result,!1,{preventScrollReset:Ee});if(ct=nh(Je),ct)return Q.add(ct.key),On(mr,ct.result,!1,{preventScrollReset:Ee});let{loaderData:Gt,errors:Xr}=W_(T,er,Yr,void 0,vn,Je,$e);if(T.fetchers.has(D)){let Ze=As(We.data);T.fetchers.set(D,Ze)}Yi(Qe),T.navigation.state==="loading"&&Qe>pe?(Ke(R,"Expected pending action"),x&&x.abort(),Cn(T.navigation.location,{matches:er,loaderData:Gt,errors:Xr,fetchers:new Map(T.fetchers)})):(Ot({errors:Xr,loaderData:H_(T.loaderData,Gt,er,Xr),fetchers:new Map(T.fetchers)}),vt=!1)}async function Hi(D,O,K,X,ce,we,Ne,Ee,ve){let ye=T.fetchers.get(D);rn(D,Ql(ve,ye?ye.data:void 0),{flushSync:Ne});let _e=new AbortController,Me=Ca(n.history,K,_e.signal);if(we){let We=await Un(ce,new URL(Me.url).pathname,Me.signal,D);if(We.type==="aborted")return;if(We.type==="error"){kn(D,O,We.error,{flushSync:Ne});return}else if(We.matches)ce=We.matches,X=nu(ce,K);else{kn(D,O,Hn(404,{pathname:K}),{flushSync:Ne});return}}re.set(D,_e);let Ue=ke,at=(await kr("loader",T,Me,[X],ce,D))[X.route.id];if(bs(at)&&(at=await cm(at,Me.signal,!0)||at),re.get(D)===_e&&re.delete(D),!Me.signal.aborted){if(Oe.has(D)){rn(D,As(void 0));return}if(Co(at))if(pe>Ue){rn(D,As(void 0));return}else{Q.add(D),await On(Me,at,!1,{preventScrollReset:Ee});return}if(lr(at)){kn(D,O,at.error);return}Ke(!bs(at),"Unhandled fetcher deferred data"),rn(D,As(at.data))}}async function On(D,O,K,X){let{submission:ce,fetcherSubmission:we,preventScrollReset:Ne,replace:Ee}=X===void 0?{}:X;O.response.headers.has("X-Remix-Revalidate")&&(vt=!0);let ve=O.response.headers.get("Location");Ke(ve,"Expected a Location header on the redirect Response"),ve=K_(ve,new URL(D.url),f);let ye=mu(T.location,ve,{_isRedirect:!0});if(t){let We=!1;if(O.response.headers.has("X-Remix-Reload-Document"))We=!0;else if(um.test(ve)){const dt=n.history.createURL(ve);We=dt.origin!==e.location.origin||Bi(dt.pathname,f)==null}if(We){Ee?e.location.replace(ve):e.location.assign(ve);return}}x=null;let _e=Ee===!0||O.response.headers.has("X-Remix-Replace")?Jt.Replace:Jt.Push,{formMethod:Me,formAction:Ue,formEncType:Ft}=T.navigation;!ce&&!we&&Me&&Ue&&Ft&&(ce=X_(T.navigation));let at=ce||we;if(yR.has(O.response.status)&&at&&$r(at.formMethod))await Xn(_e,ye,{submission:Ct({},at,{formAction:ve}),preventScrollReset:Ne||P,enableViewTransition:K?N:void 0});else{let We=up(ye,ce);await Xn(_e,ye,{overrideNavigation:We,fetcherSubmission:we,preventScrollReset:Ne||P,enableViewTransition:K?N:void 0})}}async function kr(D,O,K,X,ce,we){let Ne,Ee={};try{Ne=await RR(m,D,O,K,X,ce,we,a,s)}catch(ve){return X.forEach(ye=>{Ee[ye.route.id]={type:pt.error,error:ve}}),Ee}for(let[ve,ye]of Object.entries(Ne))if(DR(ye)){let _e=ye.result;Ee[ve]={type:pt.redirect,response:CR(_e,K,ve,ce,f,w.v7_relativeSplatPath)}}else Ee[ve]=await PR(ye);return Ee}async function Mt(D,O,K,X,ce){let we=D.matches,Ne=kr("loader",D,ce,K,O,null),Ee=Promise.all(X.map(async _e=>{if(_e.matches&&_e.match&&_e.controller){let Ue=(await kr("loader",D,Ca(n.history,_e.path,_e.controller.signal),[_e.match],_e.matches,_e.key))[_e.match.route.id];return{[_e.key]:Ue}}else return Promise.resolve({[_e.key]:{type:pt.error,error:Hn(404,{pathname:_e.path})}})})),ve=await Ne,ye=(await Ee).reduce((_e,Me)=>Object.assign(_e,Me),{});return await Promise.all([VR(O,ve,ce.signal,we,D.loaderData),LR(O,ye,X)]),{loaderResults:ve,fetcherResults:ye}}function xt(){vt=!0,Bt.push(...Fn()),Se.forEach((D,O)=>{re.has(O)&&st.add(O),Mn(O)})}function rn(D,O,K){K===void 0&&(K={}),T.fetchers.set(D,O),Ot({fetchers:new Map(T.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function kn(D,O,K,X){X===void 0&&(X={});let ce=To(T.matches,O);pr(D),Ot({errors:{[ce.route.id]:K},fetchers:new Map(T.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function xr(D){return Be.set(D,(Be.get(D)||0)+1),Oe.has(D)&&Oe.delete(D),T.fetchers.get(D)||_R}function pr(D){let O=T.fetchers.get(D);re.has(D)&&!(O&&O.state==="loading"&&F.has(D))&&Mn(D),Se.delete(D),F.delete(D),Q.delete(D),w.v7_fetcherPersist&&Oe.delete(D),st.delete(D),T.fetchers.delete(D)}function vi(D){let O=(Be.get(D)||0)-1;O<=0?(Be.delete(D),Oe.add(D),w.v7_fetcherPersist||pr(D)):Be.set(D,O),Ot({fetchers:new Map(T.fetchers)})}function Mn(D){let O=re.get(D);O&&(O.abort(),re.delete(D))}function Qi(D){for(let O of D){let K=xr(O),X=As(K.data);T.fetchers.set(O,X)}}function Ji(){let D=[],O=!1;for(let K of Q){let X=T.fetchers.get(K);Ke(X,"Expected fetcher: "+K),X.state==="loading"&&(Q.delete(K),D.push(K),O=!0)}return Qi(D),O}function Yi(D){let O=[];for(let[K,X]of F)if(X<D){let ce=T.fetchers.get(K);Ke(ce,"Expected fetcher: "+K),ce.state==="loading"&&(Mn(K),F.delete(K),O.push(K))}return Qi(O),O.length>0}function Js(D,O){let K=T.blockers.get(D)||Hl;return qe.get(D)!==O&&qe.set(D,O),K}function Wr(D){T.blockers.delete(D),qe.delete(D)}function Dr(D,O){let K=T.blockers.get(D)||Hl;Ke(K.state==="unblocked"&&O.state==="blocked"||K.state==="blocked"&&O.state==="blocked"||K.state==="blocked"&&O.state==="proceeding"||K.state==="blocked"&&O.state==="unblocked"||K.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+K.state+" -> "+O.state);let X=new Map(T.blockers);X.set(D,O),Ot({blockers:X})}function wi(D){let{currentLocation:O,nextLocation:K,historyAction:X}=D;if(qe.size===0)return;qe.size>1&&qa(!1,"A router only supports one blocker at a time");let ce=Array.from(qe.entries()),[we,Ne]=ce[ce.length-1],Ee=T.blockers.get(we);if(!(Ee&&Ee.state==="proceeding")&&Ne({currentLocation:O,nextLocation:K,historyAction:X}))return we}function _n(D){let O=Hn(404,{pathname:D}),K=h||u,{matches:X,route:ce}=J_(K);return Fn(),{notFoundMatches:X,route:ce,error:O}}function Fn(D){let O=[];return $e.forEach((K,X)=>{(!D||D(X))&&(K.cancel(),O.push(X),$e.delete(X))}),O}function Xi(D,O,K){if(j=D,U=O,M=K||null,!ae&&T.navigation===lp){ae=!0;let X=Hr(T.location,T.matches);X!=null&&Ot({restoreScrollPosition:X})}return()=>{j=null,U=null,M=null}}function Zn(D,O){return M&&M(D,O.map(X=>Yw(X,T.loaderData)))||D.key}function Ys(D,O){if(j&&U){let K=Zn(D,O);j[K]=U()}}function Hr(D,O){if(j){let K=Zn(D,O),X=j[K];if(typeof X=="number")return X}return null}function Qr(D,O,K){if(_)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:hh(O,K,f,!0)}}else return{active:!0,matches:hh(O,K,f,!0)||[]};return{active:!1,matches:null}}async function Un(D,O,K,X){if(!_)return{type:"success",matches:D};let ce=D;for(;;){let we=h==null,Ne=h||u,Ee=a;try{await _({signal:K,path:O,matches:ce,fetcherKey:X,patch:(_e,Me)=>{K.aborted||q_(_e,Me,Ne,Ee,s)}})}catch(_e){return{type:"error",error:_e,partialMatches:ce}}finally{we&&!K.aborted&&(u=[...u])}if(K.aborted)return{type:"aborted"};let ve=Io(Ne,O,f);if(ve)return{type:"success",matches:ve};let ye=hh(Ne,O,f,!0);if(!ye||ce.length===ye.length&&ce.every((_e,Me)=>_e.route.id===ye[Me].route.id))return{type:"success",matches:null};ce=ye}}function Xs(D){a={},h=Ah(D,s,void 0,a)}function Dt(D,O){let K=h==null;q_(D,O,h||u,a,s),K&&(u=[...u],Ot({}))}return me={get basename(){return f},get future(){return w},get state(){return T},get routes(){return u},get window(){return e},initialize:gt,subscribe:Ar,enableScrollRestoration:Xi,navigate:Gr,fetch:Cr,revalidate:Wi,createHref:D=>n.history.createHref(D),encodeLocation:D=>n.history.encodeLocation(D),getFetcher:xr,deleteFetcher:vi,dispose:Kt,getBlocker:Js,deleteBlocker:Wr,patchRoutes:Dt,_internalFetchControllers:re,_internalActiveDeferreds:$e,_internalSetRoutes:Xs},me}function ER(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Sp(n,e,t,r,s,a,u,h){let f,m;if(u){f=[];for(let w of e)if(f.push(w),w.route.id===u){m=w;break}}else f=e,m=e[e.length-1];let _=Xh(s||".",Yh(f,a),Bi(n.pathname,t)||n.pathname,h==="path");if(s==null&&(_.search=n.search,_.hash=n.hash),(s==null||s===""||s===".")&&m){let w=hm(_.search);if(m.route.index&&!w)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&w){let I=new URLSearchParams(_.search),A=I.getAll("index");I.delete("index"),A.filter(M=>M).forEach(M=>I.append("index",M));let j=I.toString();_.search=j?"?"+j:""}}return r&&t!=="/"&&(_.pathname=_.pathname==="/"?t:ji([t,_.pathname])),No(_)}function j_(n,e,t,r){if(!r||!ER(r))return{path:t};if(r.formMethod&&!NR(r.formMethod))return{path:t,error:Hn(405,{method:r.formMethod})};let s=()=>({path:t,error:Hn(400,{type:"invalid-body"})}),a=r.formMethod||"get",u=n?a.toUpperCase():a.toLowerCase(),h=sE(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!$r(u))return s();let I=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((A,j)=>{let[M,U]=j;return""+A+M+"="+U+`
`},""):String(r.body);return{path:t,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:void 0,text:I}}}else if(r.formEncType==="application/json"){if(!$r(u))return s();try{let I=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:I,text:void 0}}}catch{return s()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let f,m;if(r.formData)f=Ap(r.formData),m=r.formData;else if(r.body instanceof FormData)f=Ap(r.body),m=r.body;else if(r.body instanceof URLSearchParams)f=r.body,m=G_(f);else if(r.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(r.body),m=G_(f)}catch{return s()}let _={formMethod:u,formAction:h,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if($r(_.formMethod))return{path:t,submission:_};let w=zs(t);return e&&w.search&&hm(w.search)&&f.append("index",""),w.search="?"+f,{path:No(w),submission:_}}function B_(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function z_(n,e,t,r,s,a,u,h,f,m,_,w,I,A,j,M){let U=M?lr(M[1])?M[1].error:M[1].data:void 0,ae=n.createURL(e.location),H=n.createURL(s),ee=t;a&&e.errors?ee=B_(t,Object.keys(e.errors)[0],!0):M&&lr(M[1])&&(ee=B_(t,M[0]));let le=M?M[1].statusCode:void 0,de=u&&le&&le>=400,me=ee.filter((R,P)=>{let{route:x}=R;if(x.lazy)return!0;if(x.loader==null)return!1;if(a)return Rp(x,e.loaderData,e.errors);if(IR(e.loaderData,e.matches[P],R)||f.some(k=>k===R.route.id))return!0;let N=e.matches[P],L=R;return $_(R,Ct({currentUrl:ae,currentParams:N.params,nextUrl:H,nextParams:L.params},r,{actionResult:U,actionStatus:le,defaultShouldRevalidate:de?!1:h||ae.pathname+ae.search===H.pathname+H.search||ae.search!==H.search||rE(N,L)}))}),T=[];return w.forEach((R,P)=>{if(a||!t.some(Ye=>Ye.route.id===R.routeId)||_.has(P))return;let x=Io(A,R.path,j);if(!x){T.push({key:P,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(P),L=nu(x,R.path),k=!1;I.has(P)?k=!1:m.has(P)?(m.delete(P),k=!0):N&&N.state!=="idle"&&N.data===void 0?k=h:k=$_(L,Ct({currentUrl:ae,currentParams:e.matches[e.matches.length-1].params,nextUrl:H,nextParams:t[t.length-1].params},r,{actionResult:U,actionStatus:le,defaultShouldRevalidate:de?!1:h})),k&&T.push({key:P,routeId:R.routeId,path:R.path,matches:x,match:L,controller:new AbortController})}),[me,T]}function Rp(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function IR(n,e,t){let r=!e||t.route.id!==e.route.id,s=n[t.route.id]===void 0;return r||s}function rE(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function $_(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function q_(n,e,t,r,s){var a;let u;if(n){let m=r[n];Ke(m,"No route found to patch children into: routeId = "+n),m.children||(m.children=[]),u=m.children}else u=t;let h=e.filter(m=>!u.some(_=>iE(m,_))),f=Ah(h,s,[n||"_","patch",String(((a=u)==null?void 0:a.length)||"0")],r);u.push(...f)}function iE(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>iE(t,a))}):!1}async function TR(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];Ke(s,"No route found in manifest");let a={};for(let u in r){let f=s[u]!==void 0&&u!=="hasErrorBoundary";qa(!f,'Route "'+s.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!f&&!HS.has(u)&&(a[u]=r[u])}Object.assign(s,a),Object.assign(s,Ct({},e(s),{lazy:void 0}))}async function SR(n){let{matches:e}=n,t=e.filter(s=>s.shouldLoad);return(await Promise.all(t.map(s=>s.resolve()))).reduce((s,a,u)=>Object.assign(s,{[t[u].route.id]:a}),{})}async function RR(n,e,t,r,s,a,u,h,f,m){let _=a.map(A=>A.route.lazy?TR(A.route,f,h):void 0),w=a.map((A,j)=>{let M=_[j],U=s.some(H=>H.route.id===A.route.id);return Ct({},A,{shouldLoad:U,resolve:async H=>(H&&r.method==="GET"&&(A.route.lazy||A.route.loader)&&(U=!0),U?AR(e,r,A,M,H,m):Promise.resolve({type:pt.data,result:void 0}))})}),I=await n({matches:w,request:r,params:a[0].params,fetcherKey:u,context:m});try{await Promise.all(_)}catch{}return I}async function AR(n,e,t,r,s,a){let u,h,f=m=>{let _,w=new Promise((j,M)=>_=M);h=()=>_(),e.signal.addEventListener("abort",h);let I=j=>typeof m!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):m({request:e,params:t.params,context:a},...j!==void 0?[j]:[]),A=(async()=>{try{return{type:"data",result:await(s?s(M=>I(M)):I())}}catch(j){return{type:"error",result:j}}})();return Promise.race([A,w])};try{let m=t.route[n];if(r)if(m){let _,[w]=await Promise.all([f(m).catch(I=>{_=I}),r]);if(_!==void 0)throw _;u=w}else if(await r,m=t.route[n],m)u=await f(m);else if(n==="action"){let _=new URL(e.url),w=_.pathname+_.search;throw Hn(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:pt.data,result:void 0};else if(m)u=await f(m);else{let _=new URL(e.url),w=_.pathname+_.search;throw Hn(404,{pathname:w})}Ke(u.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(m){return{type:pt.error,result:m}}finally{h&&e.signal.removeEventListener("abort",h)}return u}async function PR(n){let{result:e,type:t}=n;if(oE(e)){let w;try{let I=e.headers.get("Content-Type");I&&/\bapplication\/json\b/.test(I)?e.body==null?w=null:w=await e.json():w=await e.text()}catch(I){return{type:pt.error,error:I}}return t===pt.error?{type:pt.error,error:new Ch(e.status,e.statusText,w),statusCode:e.status,headers:e.headers}:{type:pt.data,data:w,statusCode:e.status,headers:e.headers}}if(t===pt.error){if(Y_(e)){var r,s;if(e.data instanceof Error){var a,u;return{type:pt.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:pt.error,error:new Ch(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:gu(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:pt.error,error:e,statusCode:gu(e)?e.status:void 0}}if(bR(e)){var h,f;return{type:pt.deferred,deferredData:e,statusCode:(h=e.init)==null?void 0:h.status,headers:((f=e.init)==null?void 0:f.headers)&&new Headers(e.init.headers)}}if(Y_(e)){var m,_;return{type:pt.data,data:e.data,statusCode:(m=e.init)==null?void 0:m.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:pt.data,data:e}}function CR(n,e,t,r,s,a){let u=n.headers.get("Location");if(Ke(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!um.test(u)){let h=r.slice(0,r.findIndex(f=>f.route.id===t)+1);u=Sp(new URL(e.url),h,s,!0,u,a),n.headers.set("Location",u)}return n}function K_(n,e,t){if(um.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Bi(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return n}function Ca(n,e,t,r){let s=n.createURL(sE(e)).toString(),a={signal:t};if(r&&$r(r.formMethod)){let{formMethod:u,formEncType:h}=r;a.method=u.toUpperCase(),h==="application/json"?(a.headers=new Headers({"Content-Type":h}),a.body=JSON.stringify(r.json)):h==="text/plain"?a.body=r.text:h==="application/x-www-form-urlencoded"&&r.formData?a.body=Ap(r.formData):a.body=r.formData}return new Request(s,a)}function Ap(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function G_(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function kR(n,e,t,r,s){let a={},u=null,h,f=!1,m={},_=t&&lr(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let I=w.route.id,A=e[I];if(Ke(!Co(A),"Cannot handle redirect results in processLoaderData"),lr(A)){let j=A.error;_!==void 0&&(j=_,_=void 0),u=u||{};{let M=To(n,I);u[M.route.id]==null&&(u[M.route.id]=j)}a[I]=void 0,f||(f=!0,h=gu(A.error)?A.error.status:500),A.headers&&(m[I]=A.headers)}else bs(A)?(r.set(I,A.deferredData),a[I]=A.deferredData.data,A.statusCode!=null&&A.statusCode!==200&&!f&&(h=A.statusCode),A.headers&&(m[I]=A.headers)):(a[I]=A.data,A.statusCode&&A.statusCode!==200&&!f&&(h=A.statusCode),A.headers&&(m[I]=A.headers))}),_!==void 0&&t&&(u={[t[0]]:_},a[t[0]]=void 0),{loaderData:a,errors:u,statusCode:h||200,loaderHeaders:m}}function W_(n,e,t,r,s,a,u){let{loaderData:h,errors:f}=kR(e,t,r,u);return s.forEach(m=>{let{key:_,match:w,controller:I}=m,A=a[_];if(Ke(A,"Did not find corresponding fetcher result"),!(I&&I.signal.aborted))if(lr(A)){let j=To(n.matches,w?.route.id);f&&f[j.route.id]||(f=Ct({},f,{[j.route.id]:A.error})),n.fetchers.delete(_)}else if(Co(A))Ke(!1,"Unhandled fetcher revalidation redirect");else if(bs(A))Ke(!1,"Unhandled fetcher deferred data");else{let j=As(A.data);n.fetchers.set(_,j)}}),{loaderData:h,errors:f}}function H_(n,e,t,r){let s=Ct({},e);for(let a of t){let u=a.route.id;if(e.hasOwnProperty(u)?e[u]!==void 0&&(s[u]=e[u]):n[u]!==void 0&&a.route.loader&&(s[u]=n[u]),r&&r.hasOwnProperty(u))break}return s}function Q_(n){return n?lr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function To(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function J_(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Hn(n,e){let{pathname:t,routeId:r,method:s,type:a,message:u}=e===void 0?{}:e,h="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(h="Bad Request",s&&t&&r?f="You made a "+s+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?f="defer() is not supported in actions":a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(h="Forbidden",f='Route "'+r+'" does not match URL "'+t+'"'):n===404?(h="Not Found",f='No route matches URL "'+t+'"'):n===405&&(h="Method Not Allowed",s&&t&&r?f="You made a "+s.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(f='Invalid request method "'+s.toUpperCase()+'"')),new Ch(n||500,h,new Error(f),!0)}function nh(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(Co(s))return{key:r,result:s}}}function sE(n){let e=typeof n=="string"?zs(n):n;return No(Ct({},e,{hash:""}))}function xR(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function DR(n){return oE(n.result)&&gR.has(n.result.status)}function bs(n){return n.type===pt.deferred}function lr(n){return n.type===pt.error}function Co(n){return(n&&n.type)===pt.redirect}function Y_(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function bR(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function oE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function NR(n){return mR.has(n.toLowerCase())}function $r(n){return fR.has(n.toLowerCase())}async function VR(n,e,t,r,s){let a=Object.entries(e);for(let u=0;u<a.length;u++){let[h,f]=a[u],m=n.find(I=>I?.route.id===h);if(!m)continue;let _=r.find(I=>I.route.id===m.route.id),w=_!=null&&!rE(_,m)&&(s&&s[m.route.id])!==void 0;bs(f)&&w&&await cm(f,t,!1).then(I=>{I&&(e[h]=I)})}}async function LR(n,e,t){for(let r=0;r<t.length;r++){let{key:s,routeId:a,controller:u}=t[r],h=e[s];n.find(m=>m?.route.id===a)&&bs(h)&&(Ke(u,"Expected an AbortController for revalidating fetcher deferred result"),await cm(h,u.signal,!0).then(m=>{m&&(e[s]=m)}))}}async function cm(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:pt.data,data:n.deferredData.unwrappedData}}catch(s){return{type:pt.error,error:s}}return{type:pt.data,data:n.deferredData.data}}}function hm(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function nu(n,e){let t=typeof e=="string"?zs(e).search:e.search;if(n[n.length-1].route.index&&hm(t||""))return n[n.length-1];let r=eE(n);return r[r.length-1]}function X_(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:u}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function up(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function OR(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ql(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function MR(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function As(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function FR(n,e){try{let t=n.sessionStorage.getItem(nE);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function UR(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(nE,JSON.stringify(t))}catch(r){qa(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(){return kh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kh.apply(this,arguments)}const Vu=Y.createContext(null),dm=Y.createContext(null),Ki=Y.createContext(null),fm=Y.createContext(null),gi=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),aE=Y.createContext(null);function jR(n,e){let{relative:t}=e===void 0?{}:e;al()||Ke(!1);let{basename:r,navigator:s}=Y.useContext(Ki),{hash:a,pathname:u,search:h}=Zh(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:ji([r,u])),s.createHref({pathname:f,search:h,hash:a})}function al(){return Y.useContext(fm)!=null}function $o(){return al()||Ke(!1),Y.useContext(fm).location}function lE(n){Y.useContext(Ki).static||Y.useLayoutEffect(n)}function uE(){let{isDataRoute:n}=Y.useContext(gi);return n?eA():BR()}function BR(){al()||Ke(!1);let n=Y.useContext(Vu),{basename:e,future:t,navigator:r}=Y.useContext(Ki),{matches:s}=Y.useContext(gi),{pathname:a}=$o(),u=JSON.stringify(Yh(s,t.v7_relativeSplatPath)),h=Y.useRef(!1);return lE(()=>{h.current=!0}),Y.useCallback(function(m,_){if(_===void 0&&(_={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let w=Xh(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ji([e,w.pathname])),(_.replace?r.replace:r.push)(w,_.state,_)},[e,r,u,a,n])}const zR=Y.createContext(null);function $R(n){let e=Y.useContext(gi).outlet;return e&&Y.createElement(zR.Provider,{value:n},e)}function tV(){let{matches:n}=Y.useContext(gi),e=n[n.length-1];return e?e.params:{}}function Zh(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=Y.useContext(Ki),{matches:s}=Y.useContext(gi),{pathname:a}=$o(),u=JSON.stringify(Yh(s,r.v7_relativeSplatPath));return Y.useMemo(()=>Xh(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function qR(n,e,t,r){al()||Ke(!1);let{navigator:s}=Y.useContext(Ki),{matches:a}=Y.useContext(gi),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=$o(),_;_=m;let w=_.pathname||"/",I=w;if(f!=="/"){let M=f.replace(/^\//,"").split("/");I="/"+w.replace(/^\//,"").split("/").slice(M.length).join("/")}let A=Io(n,{pathname:I});return QR(A&&A.map(M=>Object.assign({},M,{params:Object.assign({},h,M.params),pathname:ji([f,s.encodeLocation?s.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?f:ji([f,s.encodeLocation?s.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,t,r)}function KR(){let n=ZR(),e=gu(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:s},t):null,null)}const GR=Y.createElement(KR,null);class WR extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(gi.Provider,{value:this.props.routeContext},Y.createElement(aE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HR(n){let{routeContext:e,match:t,children:r}=n,s=Y.useContext(Vu);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(gi.Provider,{value:e},r)}function QR(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(s=t)==null?void 0:s.errors;if(h!=null){let _=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);_>=0||Ke(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let w=u[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=_),w.route.id){let{loaderData:I,errors:A}=t,j=w.route.loader&&I[w.route.id]===void 0&&(!A||A[w.route.id]===void 0);if(w.route.lazy||j){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,w,I)=>{let A,j=!1,M=null,U=null;t&&(A=h&&w.route.id?h[w.route.id]:void 0,M=w.route.errorElement||GR,f&&(m<0&&I===0?(tA("route-fallback"),j=!0,U=null):m===I&&(j=!0,U=w.route.hydrateFallbackElement||null)));let ae=e.concat(u.slice(0,I+1)),H=()=>{let ee;return A?ee=M:j?ee=U:w.route.Component?ee=Y.createElement(w.route.Component,null):w.route.element?ee=w.route.element:ee=_,Y.createElement(HR,{match:w,routeContext:{outlet:_,matches:ae,isDataRoute:t!=null},children:ee})};return t&&(w.route.ErrorBoundary||w.route.errorElement||I===0)?Y.createElement(WR,{location:t.location,revalidation:t.revalidation,component:M,error:A,children:H(),routeContext:{outlet:null,matches:ae,isDataRoute:!0}}):H()},null)}var cE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(cE||{}),hE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(hE||{});function JR(n){let e=Y.useContext(Vu);return e||Ke(!1),e}function dE(n){let e=Y.useContext(dm);return e||Ke(!1),e}function YR(n){let e=Y.useContext(gi);return e||Ke(!1),e}function fE(n){let e=YR(),t=e.matches[e.matches.length-1];return t.route.id||Ke(!1),t.route.id}function XR(){let{matches:n,loaderData:e}=dE();return Y.useMemo(()=>n.map(t=>Yw(t,e)),[n,e])}function ZR(){var n;let e=Y.useContext(aE),t=dE(),r=fE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function eA(){let{router:n}=JR(cE.UseNavigateStable),e=fE(hE.UseNavigateStable),t=Y.useRef(!1);return lE(()=>{t.current=!0}),Y.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,kh({fromRouteId:e},a)))},[n,e])}const Z_={};function tA(n,e,t){Z_[n]||(Z_[n]=!0)}function nA(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function rA(n){let{to:e,replace:t,state:r,relative:s}=n;al()||Ke(!1);let{future:a,static:u}=Y.useContext(Ki),{matches:h}=Y.useContext(gi),{pathname:f}=$o(),m=uE(),_=Xh(e,Yh(h,a.v7_relativeSplatPath),f,s==="path"),w=JSON.stringify(_);return Y.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:s}),[m,w,s,t,r]),null}function ev(n){return $R(n.context)}function iA(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Jt.Pop,navigator:a,static:u=!1,future:h}=n;al()&&Ke(!1);let f=e.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:f,navigator:a,static:u,future:kh({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=zs(r));let{pathname:_="/",search:w="",hash:I="",state:A=null,key:j="default"}=r,M=Y.useMemo(()=>{let U=Bi(_,f);return U==null?null:{location:{pathname:U,search:w,hash:I,state:A,key:j},navigationType:s}},[f,_,w,I,A,j,s]);return M==null?null:Y.createElement(Ki.Provider,{value:m},Y.createElement(fm.Provider,{children:t,value:M}))}new Promise(()=>{});function sA(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:Y.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Y.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:Y.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ka.apply(this,arguments)}function pE(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function oA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aA(n,e){return n.button===0&&(!e||e==="_self")&&!oA(n)}const lA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cA="6";try{window.__reactRouterVersion=cA}catch{}function hA(n,e){return wR({basename:e?.basename,future:Ka({},e?.future,{v7_prependBasename:!0}),history:KS({window:e?.window}),hydrationData:e?.hydrationData||dA(),routes:n,mapRouteProperties:sA,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function dA(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Ka({},e,{errors:fA(e.errors)})),e}function fA(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new Ch(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let u=new a(s.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}const mE=Y.createContext({isTransitioning:!1}),pA=Y.createContext(new Map),mA="startTransition",tv=MS[mA],gA="flushSync",nv=qS[gA];function yA(n){tv?tv(n):n()}function Jl(n){nv?nv(n):n()}let _A=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function vA(n){let{fallbackElement:e,router:t,future:r}=n,[s,a]=Y.useState(t.state),[u,h]=Y.useState(),[f,m]=Y.useState({isTransitioning:!1}),[_,w]=Y.useState(),[I,A]=Y.useState(),[j,M]=Y.useState(),U=Y.useRef(new Map),{v7_startTransition:ae}=r||{},H=Y.useCallback(R=>{ae?yA(R):R()},[ae]),ee=Y.useCallback((R,P)=>{let{deletedFetchers:x,flushSync:N,viewTransitionOpts:L}=P;R.fetchers.forEach((Ye,vt)=>{Ye.data!==void 0&&U.current.set(vt,Ye.data)}),x.forEach(Ye=>U.current.delete(Ye));let k=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!L||k){N?Jl(()=>a(R)):H(()=>a(R));return}if(N){Jl(()=>{I&&(_&&_.resolve(),I.skipTransition()),m({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let Ye=t.window.document.startViewTransition(()=>{Jl(()=>a(R))});Ye.finished.finally(()=>{Jl(()=>{w(void 0),A(void 0),h(void 0),m({isTransitioning:!1})})}),Jl(()=>A(Ye));return}I?(_&&_.resolve(),I.skipTransition(),M({state:R,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(h(R),m({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[t.window,I,_,U,H]);Y.useLayoutEffect(()=>t.subscribe(ee),[t,ee]),Y.useEffect(()=>{f.isTransitioning&&!f.flushSync&&w(new _A)},[f]),Y.useEffect(()=>{if(_&&u&&t.window){let R=u,P=_.promise,x=t.window.document.startViewTransition(async()=>{H(()=>a(R)),await P});x.finished.finally(()=>{w(void 0),A(void 0),h(void 0),m({isTransitioning:!1})}),A(x)}},[H,u,_,t.window]),Y.useEffect(()=>{_&&u&&s.location.key===u.location.key&&_.resolve()},[_,I,s.location,u]),Y.useEffect(()=>{!f.isTransitioning&&j&&(h(j.state),m({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}),M(void 0))},[f.isTransitioning,j]),Y.useEffect(()=>{},[]);let le=Y.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:R=>t.navigate(R),push:(R,P,x)=>t.navigate(R,{state:P,preventScrollReset:x?.preventScrollReset}),replace:(R,P,x)=>t.navigate(R,{replace:!0,state:P,preventScrollReset:x?.preventScrollReset})}),[t]),de=t.basename||"/",me=Y.useMemo(()=>({router:t,navigator:le,static:!1,basename:de}),[t,le,de]),T=Y.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return Y.useEffect(()=>nA(r,t.future),[r,t.future]),Y.createElement(Y.Fragment,null,Y.createElement(Vu.Provider,{value:me},Y.createElement(dm.Provider,{value:s},Y.createElement(pA.Provider,{value:U.current},Y.createElement(mE.Provider,{value:f},Y.createElement(iA,{basename:de,location:s.location,navigationType:s.historyAction,navigator:le,future:T},s.initialized||t.future.v7_partialHydration?Y.createElement(wA,{routes:t.routes,future:t.future,state:s}):e))))),null)}const wA=Y.memo(EA);function EA(n){let{routes:e,future:t,state:r}=n;return qR(e,void 0,r,t)}const IA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gE=Y.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:u,state:h,target:f,to:m,preventScrollReset:_,viewTransition:w}=e,I=pE(e,lA),{basename:A}=Y.useContext(Ki),j,M=!1;if(typeof m=="string"&&TA.test(m)&&(j=m,IA))try{let ee=new URL(window.location.href),le=m.startsWith("//")?new URL(ee.protocol+m):new URL(m),de=Bi(le.pathname,A);le.origin===ee.origin&&de!=null?m=de+le.search+le.hash:M=!0}catch{}let U=jR(m,{relative:s}),ae=AA(m,{replace:u,state:h,target:f,preventScrollReset:_,relative:s,viewTransition:w});function H(ee){r&&r(ee),ee.defaultPrevented||ae(ee)}return Y.createElement("a",Ka({},I,{href:j||U,onClick:M||a?r:H,ref:t,target:f}))}),SA=Y.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:u=!1,style:h,to:f,viewTransition:m,children:_}=e,w=pE(e,uA),I=Zh(f,{relative:w.relative}),A=$o(),j=Y.useContext(dm),{navigator:M,basename:U}=Y.useContext(Ki),ae=j!=null&&PA(I)&&m===!0,H=M.encodeLocation?M.encodeLocation(I).pathname:I.pathname,ee=A.pathname,le=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(ee=ee.toLowerCase(),le=le?le.toLowerCase():null,H=H.toLowerCase()),le&&U&&(le=Bi(le,U)||le);const de=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let me=ee===H||!u&&ee.startsWith(H)&&ee.charAt(de)==="/",T=le!=null&&(le===H||!u&&le.startsWith(H)&&le.charAt(H.length)==="/"),R={isActive:me,isPending:T,isTransitioning:ae},P=me?r:void 0,x;typeof a=="function"?x=a(R):x=[a,me?"active":null,T?"pending":null,ae?"transitioning":null].filter(Boolean).join(" ");let N=typeof h=="function"?h(R):h;return Y.createElement(gE,Ka({},w,{"aria-current":P,className:x,ref:t,style:N,to:f,viewTransition:m}),typeof _=="function"?_(R):_)});var Pp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Pp||(Pp={}));var rv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(rv||(rv={}));function RA(n){let e=Y.useContext(Vu);return e||Ke(!1),e}function AA(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:u,viewTransition:h}=e===void 0?{}:e,f=uE(),m=$o(),_=Zh(n,{relative:u});return Y.useCallback(w=>{if(aA(w,t)){w.preventDefault();let I=r!==void 0?r:No(m)===No(_);f(n,{replace:I,state:s,preventScrollReset:a,relative:u,viewTransition:h})}},[m,f,_,r,s,t,n,a,u,h])}function PA(n,e){e===void 0&&(e={});let t=Y.useContext(mE);t==null&&Ke(!1);let{basename:r}=RA(Pp.useViewTransitionState),s=Zh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Bi(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Bi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ph(s.pathname,u)!=null||Ph(s.pathname,a)!=null}const CA="modulepreload",kA=function(n){return"/fsae-dashboard/"+n},iv={},$s=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(_=>Promise.resolve(_).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");s=f(t.map(m=>{if(m=kA(m),m in iv)return;iv[m]=!0;const _=m.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const I=document.createElement("link");if(I.rel=_?"stylesheet":CA,_||(I.as="script"),I.crossOrigin="",I.href=m,h&&I.setAttribute("nonce",h),document.head.appendChild(I),_)return new Promise((A,j)=>{I.addEventListener("load",A),I.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return s.then(u=>{for(const h of u||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})};var sv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},xA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,h=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,w=(a&3)<<4|h>>4;let I=(h&15)<<2|m>>6,A=m&63;f||(A=64,u||(I=64)),r.push(t[_],t[w],t[I],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||m==null||w==null)throw new DA;const I=a<<2|h>>4;if(r.push(I),m!==64){const A=h<<4&240|m>>2;if(r.push(A),w!==64){const j=m<<6&192|w;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bA=function(n){const e=yE(n);return _E.encodeByteArray(e,!0)},vE=function(n){return bA(n).replace(/\./g,"")},wE=function(n){try{return _E.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=()=>NA().__FIREBASE_DEFAULTS__,LA=()=>{if(typeof process>"u"||typeof sv>"u")return;const n=sv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&wE(n[1]);return e&&JSON.parse(e)},ed=()=>{try{return VA()||LA()||OA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},EE=n=>{var e,t;return(t=(e=ed())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},MA=n=>{const e=EE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},IE=()=>{var n;return(n=ed())===null||n===void 0?void 0:n.config},TE=n=>{var e;return(e=ed())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function jA(){var n;const e=(n=ed())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qA(){const n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function SE(){return!jA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RE(){try{return typeof indexedDB=="object"}catch{return!1}}function KA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="FirebaseError";class yi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=GA,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?WA(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new yi(s,h,r)}}function WA(n,e){return n.replace(HA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HA=/\{\$([^}]+)}/g;function QA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function yu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(ov(a)&&ov(u)){if(!yu(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function ov(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JA(n,e){const t=new YA(n,e);return t.subscribe.bind(t)}class YA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=cp),s.error===void 0&&(s.error=cp),s.complete===void 0&&(s.complete=cp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){return n&&n._delegate?n._delegate:n}class Fs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new FA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tP(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eP(n){return n===wo?void 0:n}function tP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(et||(et={}));const rP={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},iP=et.INFO,sP={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},oP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=sP[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=iP,this._logHandler=oP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const aP=(n,e)=>e.some(t=>n instanceof t);let av,lv;function lP(){return av||(av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uP(){return lv||(lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,Cp=new WeakMap,PE=new WeakMap,hp=new WeakMap,mm=new WeakMap;function cP(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Vs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&AE.set(t,n)}).catch(()=>{}),mm.set(e,n),e}function hP(n){if(Cp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Cp.set(n,e)}let kp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function dP(n){kp=n(kp)}function fP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(dp(this),e,...t);return PE.set(r,e.sort?e.sort():[e]),Vs(r)}:uP().includes(n)?function(...e){return n.apply(dp(this),e),Vs(AE.get(this))}:function(...e){return Vs(n.apply(dp(this),e))}}function pP(n){return typeof n=="function"?fP(n):(n instanceof IDBTransaction&&hP(n),aP(n,lP())?new Proxy(n,kp):n)}function Vs(n){if(n instanceof IDBRequest)return cP(n);if(hp.has(n))return hp.get(n);const e=pP(n);return e!==n&&(hp.set(n,e),mm.set(e,n)),e}const dp=n=>mm.get(n);function mP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),h=Vs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Vs(u.result),f.oldVersion,f.newVersion,Vs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const gP=["get","getKey","getAll","getAllKeys","count"],yP=["put","add","delete","clear"],fp=new Map;function uv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fp.get(e))return fp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=yP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gP.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&f.done]))[0]};return fp.set(e,a),a}dP(n=>({...n,get:(e,t,r)=>uv(e,t)||n.get(e,t,r),has:(e,t)=>!!uv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vP(n){const e=n.getComponent();return e?.type==="VERSION"}const xp="@firebase/app",cv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new pm("@firebase/app"),wP="@firebase/app-compat",EP="@firebase/analytics-compat",IP="@firebase/analytics",TP="@firebase/app-check-compat",SP="@firebase/app-check",RP="@firebase/auth",AP="@firebase/auth-compat",PP="@firebase/database",CP="@firebase/data-connect",kP="@firebase/database-compat",xP="@firebase/functions",DP="@firebase/functions-compat",bP="@firebase/installations",NP="@firebase/installations-compat",VP="@firebase/messaging",LP="@firebase/messaging-compat",OP="@firebase/performance",MP="@firebase/performance-compat",FP="@firebase/remote-config",UP="@firebase/remote-config-compat",jP="@firebase/storage",BP="@firebase/storage-compat",zP="@firebase/firestore",$P="@firebase/vertexai-preview",qP="@firebase/firestore-compat",KP="firebase",GP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="[DEFAULT]",WP={[xp]:"fire-core",[wP]:"fire-core-compat",[IP]:"fire-analytics",[EP]:"fire-analytics-compat",[SP]:"fire-app-check",[TP]:"fire-app-check-compat",[RP]:"fire-auth",[AP]:"fire-auth-compat",[PP]:"fire-rtdb",[CP]:"fire-data-connect",[kP]:"fire-rtdb-compat",[xP]:"fire-fn",[DP]:"fire-fn-compat",[bP]:"fire-iid",[NP]:"fire-iid-compat",[VP]:"fire-fcm",[LP]:"fire-fcm-compat",[OP]:"fire-perf",[MP]:"fire-perf-compat",[FP]:"fire-rc",[UP]:"fire-rc-compat",[jP]:"fire-gcs",[BP]:"fire-gcs-compat",[zP]:"fire-fst",[qP]:"fire-fst-compat",[$P]:"fire-vertex","fire-js":"fire-js",[KP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,HP=new Map,bp=new Map;function hv(n,e){try{n.container.addComponent(e)}catch(t){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vo(n){const e=n.name;if(bp.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;bp.set(e,n);for(const t of _u.values())hv(t,n);for(const t of HP.values())hv(t,n);return!0}function td(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Li(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ls=new Lu("app","Firebase",QP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=GP;function CE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ls.create("bad-app-name",{appName:String(s)});if(t||(t=IE()),!t)throw Ls.create("no-options");const a=_u.get(s);if(a){if(yu(t,a.options)&&yu(r,a.config))return a;throw Ls.create("duplicate-app",{appName:s})}const u=new nP(s);for(const f of bp.values())u.addComponent(f);const h=new JP(t,r,u);return _u.set(s,h),h}function gm(n=Dp){const e=_u.get(n);if(!e&&n===Dp&&IE())return CE();if(!e)throw Ls.create("no-app",{appName:n});return e}function YP(){return Array.from(_u.values())}function ci(n,e,t){var r;let s=(r=WP[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(h.join(" "));return}Vo(new Fs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="firebase-heartbeat-database",ZP=1,vu="firebase-heartbeat-store";let pp=null;function kE(){return pp||(pp=mP(XP,ZP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ls.create("idb-open",{originalErrorMessage:n.message})})),pp}async function eC(n){try{const t=(await kE()).transaction(vu),r=await t.objectStore(vu).get(xE(n));return await t.done,r}catch(e){if(e instanceof yi)zi.warn(e.message);else{const t=Ls.create("idb-get",{originalErrorMessage:e?.message});zi.warn(t.message)}}}async function dv(n,e){try{const r=(await kE()).transaction(vu,"readwrite");await r.objectStore(vu).put(e,xE(n)),await r.done}catch(t){if(t instanceof yi)zi.warn(t.message);else{const r=Ls.create("idb-set",{originalErrorMessage:t?.message});zi.warn(r.message)}}}function xE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1024,nC=720*60*60*1e3;class rC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=fv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=nC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fv(),{heartbeatsToSend:r,unsentEntries:s}=iC(this._heartbeatsCache.heartbeats),a=vE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zi.warn(t),""}}}function fv(){return new Date().toISOString().substring(0,10)}function iC(n,e=tC){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),pv(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),pv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RE()?KA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return dv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return dv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function pv(n){return vE(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n){Vo(new Fs("platform-logger",e=>new _P(e),"PRIVATE")),Vo(new Fs("heartbeat",e=>new rC(e),"PRIVATE")),ci(xp,cv,n),ci(xp,cv,"esm2017"),ci("fire-js","")}oC("");function ym(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function DE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aC=DE,bE=new Lu("auth","Firebase",DE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new pm("@firebase/auth");function lC(n,...e){xh.logLevel<=et.WARN&&xh.warn(`Auth (${ll}): ${n}`,...e)}function dh(n,...e){xh.logLevel<=et.ERROR&&xh.error(`Auth (${ll}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(n,...e){throw vm(n,...e)}function Kr(n,...e){return vm(n,...e)}function _m(n,e,t){const r=Object.assign(Object.assign({},aC()),{[e]:t});return new Lu("auth","Firebase",r).create(e,{appName:n.name})}function xo(n){return _m(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uC(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&fi(n,"argument-error"),_m(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bE.create(n,...e)}function je(n,e,...t){if(!n)throw vm(e,...t)}function Oi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dh(e),new Error(e)}function $i(n,e){n||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function cC(){return mv()==="http:"||mv()==="https:"}function mv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cC()||zA()||"connection"in navigator)?navigator.onLine:!0}function dC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=UA()||$A()}get(){return hC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n,e){$i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Mu(3e4,6e4);function Em(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ul(n,e,t,r,s={}){return VE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=Ou(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return BA()||(m.referrerPolicy="no-referrer"),NE.fetch()(LE(n,n.config.apiHost,t,h),m)})}async function VE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},fC),e);try{const s=new gC(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw rh(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw rh(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw rh(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _m(n,_,m);fi(n,_)}}catch(s){if(s instanceof yi)throw s;fi(n,"network-request-failed",{message:String(s)})}}async function mC(n,e,t,r,s={}){const a=await ul(n,e,t,r,s);return"mfaPendingCredential"in a&&fi(n,"multi-factor-auth-required",{_serverResponse:a}),a}function LE(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?wm(n.config,s):`${n.config.apiScheme}://${s}`}class gC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kr(this.auth,"network-request-failed")),pC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Kr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(n,e){return ul(n,"POST","/v1/accounts:delete",e)}async function OE(n,e){return ul(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _C(n,e=!1){const t=Yt(n),r=await t.getIdToken(e),s=Im(r);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:r,authTime:lu(mp(s.auth_time)),issuedAtTime:lu(mp(s.iat)),expirationTime:lu(mp(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function mp(n){return Number(n)*1e3}function Im(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const s=wE(t);return s?JSON.parse(s):(dh("Failed to decode base64 JWT payload"),null)}catch(s){return dh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function gv(n){const e=Im(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof yi&&vC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function vC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await wu(n,OE(t,{idToken:r}));je(s?.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ME(a.providerUserInfo):[],h=IC(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!h?.length,_=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Vp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function EC(n){const e=Yt(n);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IC(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ME(n){return n.map(e=>{var{providerId:t}=e,r=ym(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(n,e){const t=await VE(n,{},async()=>{const r=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=LE(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",NE.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SC(n,e){return ul(n,"POST","/v2/accounts:revokeToken",Em(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=gv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await TC(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new Ua;return r&&(je(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(je(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mi{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await wu(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _C(this,e)}reload(){return EC(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Li(this.auth.app))return Promise.reject(xo(this.auth));const e=await this.getIdToken();return await wu(this,yC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,h,f,m,_;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(s=t.email)!==null&&s!==void 0?s:void 0,A=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,j=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(h=t.tenantId)!==null&&h!==void 0?h:void 0,U=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,ae=(m=t.createdAt)!==null&&m!==void 0?m:void 0,H=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ee,emailVerified:le,isAnonymous:de,providerData:me,stsTokenManager:T}=t;je(ee&&T,e,"internal-error");const R=Ua.fromJSON(this.name,T);je(typeof ee=="string",e,"internal-error"),Is(w,e.name),Is(I,e.name),je(typeof le=="boolean",e,"internal-error"),je(typeof de=="boolean",e,"internal-error"),Is(A,e.name),Is(j,e.name),Is(M,e.name),Is(U,e.name),Is(ae,e.name),Is(H,e.name);const P=new Mi({uid:ee,auth:e,email:I,emailVerified:le,displayName:w,isAnonymous:de,photoURL:j,phoneNumber:A,tenantId:M,stsTokenManager:R,createdAt:ae,lastLoginAt:H});return me&&Array.isArray(me)&&(P.providerData=me.map(x=>Object.assign({},x))),U&&(P._redirectEventId=U),P}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ua;s.updateFromServerResponse(t);const a=new Mi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Dh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];je(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?ME(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,h=new Ua;h.updateFromIdToken(r);const f=new Mi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;function Fi(n){$i(n instanceof Function,"Expected a class definition");let e=yv.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}FE.type="NONE";const _v=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(n,e,t){return`firebase:${n}:${e}:${t}`}class ja{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=fh(this.userKey,s.apiKey,a),this.fullPersistenceKey=fh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ja(Fi(_v),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Fi(_v);const u=fh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(u);if(_){const w=Mi._fromJSON(e,_);m!==a&&(h=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new ja(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new ja(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qE(e))return"Blackberry";if(KE(e))return"Webos";if(jE(e))return"Safari";if((e.includes("chrome/")||BE(e))&&!e.includes("edge/"))return"Chrome";if($E(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function UE(n=tn()){return/firefox\//i.test(n)}function jE(n=tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BE(n=tn()){return/crios\//i.test(n)}function zE(n=tn()){return/iemobile/i.test(n)}function $E(n=tn()){return/android/i.test(n)}function qE(n=tn()){return/blackberry/i.test(n)}function KE(n=tn()){return/webos/i.test(n)}function Tm(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RC(n=tn()){var e;return Tm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AC(){return qA()&&document.documentMode===10}function GE(n=tn()){return Tm(n)||$E(n)||KE(n)||qE(n)||/windows phone/i.test(n)||zE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e=[]){let t;switch(n){case"Browser":t=vv(tn());break;case"Worker":t=`${vv(tn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(n,e={}){return ul(n,"GET","/v2/passwordPolicy",Em(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=6;class xC{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:kC,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new PC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fi(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ja.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await OE(this,{idToken:e}),r=await Mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Li(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Li(this.app))return Promise.reject(xo(this));const t=e?Yt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Li(this.app)?Promise.reject(xo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Li(this.app)?Promise.reject(xo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CC(this),t=new xC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await SC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fi(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[Fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&lC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function nd(n){return Yt(n)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=JA(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bC(n){Sm=n}function NC(n){return Sm.loadJS(n)}function VC(){return Sm.gapiScript}function LC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n,e){const t=td(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(yu(a,e??{}))return s;fi(s,"already-initialized")}return t.initialize({options:e})}function MC(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Fi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function FC(n,e,t){const r=nd(n);je(r._canInitEmulator,r,"emulator-config-failed"),je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=HE(e),{host:u,port:h}=UC(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),jC()}function HE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function UC(n){const e=HE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Ev(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:Ev(u)}}}function Ev(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,t){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(n,e){return mC(n,"POST","/v1/accounts:signInWithIdp",Em(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="http://localhost";class Lo extends QE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=ym(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Lo(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ba(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ba(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ba(e,t)}buildRequest(){const e={requestUri:BC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends Rm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Fu{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Fu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lo._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Vi.credential(t,r)}catch{return null}}}Vi.GOOGLE_SIGN_IN_METHOD="google.com";Vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Fu{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.GITHUB_SIGN_IN_METHOD="github.com";Cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Fu{constructor(){super("twitter.com")}static credential(e,t){return Lo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ks.credential(t,r)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Mi._fromIdTokenResponse(e,r,s),u=Iv(r);return new Ga({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Iv(r);return new Ga({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Iv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends yi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new bh(e,t,r,s)}}function JE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(n,a,e,r):a})}async function zC(n,e,t=!1){const r=await wu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(n,e,t=!1){const{auth:r}=n;if(Li(r.app))return Promise.reject(xo(r));const s="reauthenticate";try{const a=await wu(n,JE(r,s,e,n),t);je(a.idToken,r,"internal-error");const u=Im(a.idToken);je(u,r,"internal-error");const{sub:h}=u;return je(n.uid===h,r,"user-mismatch"),Ga._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&fi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(n,e,t=!1){if(Li(n.app))return Promise.reject(xo(n));const r="signIn",s=await JE(n,r,e),a=await Ga._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}function KC(n,e,t,r){return Yt(n).onIdTokenChanged(e,t,r)}function GC(n,e,t){return Yt(n).beforeAuthStateChanged(e,t)}function YE(n,e,t,r){return Yt(n).onAuthStateChanged(e,t,r)}function WC(n){return Yt(n).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=1e3,QC=10;class ZE extends XE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);AC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QC):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},HC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZE.type="LOCAL";const JC=ZE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends XE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}eI.type="SESSION";const tI=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new rd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await YC(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=Am("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const I=w;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(I.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function ZC(n){hi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function ek(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function nk(){return nI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebaseLocalStorageDb",rk=1,Vh="firebaseLocalStorage",iI="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(n,e){return n.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function ik(){const n=indexedDB.deleteDatabase(rI);return new Uu(n).toPromise()}function Lp(){const n=indexedDB.open(rI,rk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Vh,{keyPath:iI})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Vh)?e(r):(r.close(),await ik(),e(await Lp()))})})}async function Tv(n,e,t){const r=id(n,!0).put({[iI]:e,value:t});return new Uu(r).toPromise()}async function sk(n,e){const t=id(n,!1).get(e),r=await new Uu(t).toPromise();return r===void 0?null:r.value}function Sv(n,e){const t=id(n,!0).delete(e);return new Uu(t).toPromise()}const ok=800,ak=3;class sI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ak)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(nk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ek(),!this.activeServiceWorker)return;this.sender=new XC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lp();return await Tv(e,Nh,"1"),await Sv(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=id(s,!1).getAll();return new Uu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sI.type="LOCAL";const lk=sI;new Mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n,e){return e?Fi(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends QE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ba(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uk(n){return qC(n.auth,new Pm(n),n.bypassAuthState)}function ck(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),$C(t,new Pm(n),n.bypassAuthState)}async function hk(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),zC(t,new Pm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uk;case"linkViaPopup":case"linkViaRedirect":return hk;case"reauthViaPopup":case"reauthViaRedirect":return ck;default:fi(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new Mu(2e3,1e4);async function fk(n,e,t){if(Li(n.app))return Promise.reject(Kr(n,"operation-not-supported-in-this-environment"));const r=nd(n);uC(n,e,Rm);const s=oI(r,t);return new ko(r,"signInViaPopup",e,s).executeNotNull()}class ko extends aI{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dk.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="pendingRedirect",ph=new Map;class mk extends aI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ph.get(this.auth._key());if(!e){try{const r=await gk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ph.set(this.auth._key(),e)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gk(n,e){const t=vk(e),r=_k(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function yk(n,e){ph.set(n._key(),e)}function _k(n){return Fi(n._redirectPersistence)}function vk(n){return fh(pk,n.config.apiKey,n.name)}async function wk(n,e,t=!1){if(Li(n.app))return Promise.reject(xo(n));const r=nd(n),s=oI(r,e),u=await new mk(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=600*1e3;class Ik{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Kr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rv(e))}saveEventToCache(e){this.cachedEventUids.add(Rv(e)),this.lastProcessedEventTime=Date.now()}}function Rv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Tk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e={}){return ul(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ak=/^https?/;async function Pk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Sk(n);for(const t of e)try{if(Ck(t))return}catch{}fi(n,"unauthorized-domain")}function Ck(n){const e=Np(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!Ak.test(t))return!1;if(Rk.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Mu(3e4,6e4);function Av(){const n=hi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xk(n){return new Promise((e,t)=>{var r,s,a;function u(){Av(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Av(),t(Kr(n,"network-request-failed"))},timeout:kk.get()})}if(!((s=(r=hi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=hi().gapi)===null||a===void 0)&&a.load)u();else{const h=LC("iframefcb");return hi()[h]=()=>{gapi.load?u():t(Kr(n,"network-request-failed"))},NC(`${VC()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw mh=null,e})}let mh=null;function Dk(n){return mh=mh||xk(n),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new Mu(5e3,15e3),Nk="__/auth/iframe",Vk="emulator/auth/iframe",Lk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ok=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mk(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wm(e,Vk):`https://${n.config.authDomain}/${Nk}`,r={apiKey:e.apiKey,appName:n.name,v:ll},s=Ok.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Ou(r).slice(1)}`}async function Fk(n){const e=await Dk(n),t=hi().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:Mk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=Kr(n,"network-request-failed"),h=hi().setTimeout(()=>{a(u)},bk.get());function f(){hi().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,Bk=600,zk="_blank",$k="http://localhost";class Pv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qk(n,e,t,r=jk,s=Bk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},Uk),{width:r.toString(),height:s.toString(),top:a,left:u}),m=tn().toLowerCase();t&&(h=BE(m)?zk:t),UE(m)&&(e=e||$k,f.scrollbars="yes");const _=Object.entries(f).reduce((I,[A,j])=>`${I}${A}=${j},`,"");if(RC(m)&&h!=="_self")return Kk(e||"",h),new Pv(null);const w=window.open(e||"",h,_);je(w,n,"popup-blocked");try{w.focus()}catch{}return new Pv(w)}function Kk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="__/auth/handler",Wk="emulator/auth/handler",Hk=encodeURIComponent("fac");async function Cv(n,e,t,r,s,a){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ll,eventId:s};if(e instanceof Rm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",QA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))u[_]=w}if(e instanceof Fu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),m=f?`#${Hk}=${encodeURIComponent(f)}`:"";return`${Qk(n)}?${Ou(h).slice(1)}${m}`}function Qk({config:n}){return n.emulator?wm(n,Wk):`https://${n.authDomain}/${Gk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="webStorageSupport";class Jk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tI,this._completeRedirectFn=wk,this._overrideRedirectResult=yk}async _openPopup(e,t,r,s){var a;$i((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await Cv(e,t,r,Np(),s);return qk(e,u,Am())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await Cv(e,t,r,Np(),s);return ZC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):($i(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Fk(e),r=new Ik(e);return t.register("authEvent",s=>(je(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gp,{type:gp},s=>{var a;const u=(a=s?.[0])===null||a===void 0?void 0:a[gp];u!==void 0&&t(!!u),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GE()||jE()||Tm()}}const Yk=Jk;var kv="@firebase/auth",xv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ex(n){Vo(new Fs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;je(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(n)},m=new DC(r,s,a,f);return MC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Vo(new Fs("auth-internal",e=>{const t=nd(e.getProvider("auth").getImmediate());return(r=>new Xk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(kv,xv,Zk(n)),ci(kv,xv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=300,nx=TE("authIdTokenMaxAge")||tx;let Dv=null;const rx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>nx)return;const s=t?.token;Dv!==s&&(Dv=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uI(n=gm()){const e=td(n,"auth");if(e.isInitialized())return e.getImmediate();const t=OC(n,{popupRedirectResolver:Yk,persistence:[lk,JC,tI]}),r=TE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=rx(a.toString());GC(t,u,()=>u(t.currentUser)),KC(t,h=>u(h))}}const s=EE("auth");return s&&FC(t,`http://${s}`),t}function ix(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}bC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Kr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",ix().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ex("Browser");var sx="firebase",ox="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(sx,ox,"app");var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Do,cI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,R){function P(){}P.prototype=R.prototype,T.D=R.prototype,T.prototype=new P,T.prototype.constructor=T,T.C=function(x,N,L){for(var k=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)k[Ye-2]=arguments[Ye];return R.prototype[N].apply(x,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,R,P){P||(P=0);var x=Array(16);if(typeof R=="string")for(var N=0;16>N;++N)x[N]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(N=0;16>N;++N)x[N]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=T.g[0],P=T.g[1],N=T.g[2];var L=T.g[3],k=R+(L^P&(N^L))+x[0]+3614090360&4294967295;R=P+(k<<7&4294967295|k>>>25),k=L+(N^R&(P^N))+x[1]+3905402710&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(P^L&(R^P))+x[2]+606105819&4294967295,N=L+(k<<17&4294967295|k>>>15),k=P+(R^N&(L^R))+x[3]+3250441966&4294967295,P=N+(k<<22&4294967295|k>>>10),k=R+(L^P&(N^L))+x[4]+4118548399&4294967295,R=P+(k<<7&4294967295|k>>>25),k=L+(N^R&(P^N))+x[5]+1200080426&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(P^L&(R^P))+x[6]+2821735955&4294967295,N=L+(k<<17&4294967295|k>>>15),k=P+(R^N&(L^R))+x[7]+4249261313&4294967295,P=N+(k<<22&4294967295|k>>>10),k=R+(L^P&(N^L))+x[8]+1770035416&4294967295,R=P+(k<<7&4294967295|k>>>25),k=L+(N^R&(P^N))+x[9]+2336552879&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(P^L&(R^P))+x[10]+4294925233&4294967295,N=L+(k<<17&4294967295|k>>>15),k=P+(R^N&(L^R))+x[11]+2304563134&4294967295,P=N+(k<<22&4294967295|k>>>10),k=R+(L^P&(N^L))+x[12]+1804603682&4294967295,R=P+(k<<7&4294967295|k>>>25),k=L+(N^R&(P^N))+x[13]+4254626195&4294967295,L=R+(k<<12&4294967295|k>>>20),k=N+(P^L&(R^P))+x[14]+2792965006&4294967295,N=L+(k<<17&4294967295|k>>>15),k=P+(R^N&(L^R))+x[15]+1236535329&4294967295,P=N+(k<<22&4294967295|k>>>10),k=R+(N^L&(P^N))+x[1]+4129170786&4294967295,R=P+(k<<5&4294967295|k>>>27),k=L+(P^N&(R^P))+x[6]+3225465664&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^P&(L^R))+x[11]+643717713&4294967295,N=L+(k<<14&4294967295|k>>>18),k=P+(L^R&(N^L))+x[0]+3921069994&4294967295,P=N+(k<<20&4294967295|k>>>12),k=R+(N^L&(P^N))+x[5]+3593408605&4294967295,R=P+(k<<5&4294967295|k>>>27),k=L+(P^N&(R^P))+x[10]+38016083&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^P&(L^R))+x[15]+3634488961&4294967295,N=L+(k<<14&4294967295|k>>>18),k=P+(L^R&(N^L))+x[4]+3889429448&4294967295,P=N+(k<<20&4294967295|k>>>12),k=R+(N^L&(P^N))+x[9]+568446438&4294967295,R=P+(k<<5&4294967295|k>>>27),k=L+(P^N&(R^P))+x[14]+3275163606&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^P&(L^R))+x[3]+4107603335&4294967295,N=L+(k<<14&4294967295|k>>>18),k=P+(L^R&(N^L))+x[8]+1163531501&4294967295,P=N+(k<<20&4294967295|k>>>12),k=R+(N^L&(P^N))+x[13]+2850285829&4294967295,R=P+(k<<5&4294967295|k>>>27),k=L+(P^N&(R^P))+x[2]+4243563512&4294967295,L=R+(k<<9&4294967295|k>>>23),k=N+(R^P&(L^R))+x[7]+1735328473&4294967295,N=L+(k<<14&4294967295|k>>>18),k=P+(L^R&(N^L))+x[12]+2368359562&4294967295,P=N+(k<<20&4294967295|k>>>12),k=R+(P^N^L)+x[5]+4294588738&4294967295,R=P+(k<<4&4294967295|k>>>28),k=L+(R^P^N)+x[8]+2272392833&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^P)+x[11]+1839030562&4294967295,N=L+(k<<16&4294967295|k>>>16),k=P+(N^L^R)+x[14]+4259657740&4294967295,P=N+(k<<23&4294967295|k>>>9),k=R+(P^N^L)+x[1]+2763975236&4294967295,R=P+(k<<4&4294967295|k>>>28),k=L+(R^P^N)+x[4]+1272893353&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^P)+x[7]+4139469664&4294967295,N=L+(k<<16&4294967295|k>>>16),k=P+(N^L^R)+x[10]+3200236656&4294967295,P=N+(k<<23&4294967295|k>>>9),k=R+(P^N^L)+x[13]+681279174&4294967295,R=P+(k<<4&4294967295|k>>>28),k=L+(R^P^N)+x[0]+3936430074&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^P)+x[3]+3572445317&4294967295,N=L+(k<<16&4294967295|k>>>16),k=P+(N^L^R)+x[6]+76029189&4294967295,P=N+(k<<23&4294967295|k>>>9),k=R+(P^N^L)+x[9]+3654602809&4294967295,R=P+(k<<4&4294967295|k>>>28),k=L+(R^P^N)+x[12]+3873151461&4294967295,L=R+(k<<11&4294967295|k>>>21),k=N+(L^R^P)+x[15]+530742520&4294967295,N=L+(k<<16&4294967295|k>>>16),k=P+(N^L^R)+x[2]+3299628645&4294967295,P=N+(k<<23&4294967295|k>>>9),k=R+(N^(P|~L))+x[0]+4096336452&4294967295,R=P+(k<<6&4294967295|k>>>26),k=L+(P^(R|~N))+x[7]+1126891415&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~P))+x[14]+2878612391&4294967295,N=L+(k<<15&4294967295|k>>>17),k=P+(L^(N|~R))+x[5]+4237533241&4294967295,P=N+(k<<21&4294967295|k>>>11),k=R+(N^(P|~L))+x[12]+1700485571&4294967295,R=P+(k<<6&4294967295|k>>>26),k=L+(P^(R|~N))+x[3]+2399980690&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~P))+x[10]+4293915773&4294967295,N=L+(k<<15&4294967295|k>>>17),k=P+(L^(N|~R))+x[1]+2240044497&4294967295,P=N+(k<<21&4294967295|k>>>11),k=R+(N^(P|~L))+x[8]+1873313359&4294967295,R=P+(k<<6&4294967295|k>>>26),k=L+(P^(R|~N))+x[15]+4264355552&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~P))+x[6]+2734768916&4294967295,N=L+(k<<15&4294967295|k>>>17),k=P+(L^(N|~R))+x[13]+1309151649&4294967295,P=N+(k<<21&4294967295|k>>>11),k=R+(N^(P|~L))+x[4]+4149444226&4294967295,R=P+(k<<6&4294967295|k>>>26),k=L+(P^(R|~N))+x[11]+3174756917&4294967295,L=R+(k<<10&4294967295|k>>>22),k=N+(R^(L|~P))+x[2]+718787259&4294967295,N=L+(k<<15&4294967295|k>>>17),k=P+(L^(N|~R))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+R&4294967295,T.g[1]=T.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+L&4294967295}r.prototype.u=function(T,R){R===void 0&&(R=T.length);for(var P=R-this.blockSize,x=this.B,N=this.h,L=0;L<R;){if(N==0)for(;L<=P;)s(this,T,L),L+=this.blockSize;if(typeof T=="string"){for(;L<R;)if(x[N++]=T.charCodeAt(L++),N==this.blockSize){s(this,x),N=0;break}}else for(;L<R;)if(x[N++]=T[L++],N==this.blockSize){s(this,x),N=0;break}}this.h=N,this.o+=R},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var R=1;R<T.length-8;++R)T[R]=0;var P=8*this.o;for(R=T.length-8;R<T.length;++R)T[R]=P&255,P/=256;for(this.u(T),T=Array(16),R=P=0;4>R;++R)for(var x=0;32>x;x+=8)T[P++]=this.g[R]>>>x&255;return T};function a(T,R){var P=h;return Object.prototype.hasOwnProperty.call(P,T)?P[T]:P[T]=R(T)}function u(T,R){this.h=R;for(var P=[],x=!0,N=T.length-1;0<=N;N--){var L=T[N]|0;x&&L==R||(P[N]=L,x=!1)}this.g=P}var h={};function f(T){return-128<=T&&128>T?a(T,function(R){return new u([R|0],0>R?-1:0)}):new u([T|0],0>T?-1:0)}function m(T){if(isNaN(T)||!isFinite(T))return w;if(0>T)return U(m(-T));for(var R=[],P=1,x=0;T>=P;x++)R[x]=T/P|0,P*=4294967296;return new u(R,0)}function _(T,R){if(T.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(T.charAt(0)=="-")return U(_(T.substring(1),R));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(R,8)),x=w,N=0;N<T.length;N+=8){var L=Math.min(8,T.length-N),k=parseInt(T.substring(N,N+L),R);8>L?(L=m(Math.pow(R,L)),x=x.j(L).add(m(k))):(x=x.j(P),x=x.add(m(k)))}return x}var w=f(0),I=f(1),A=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-U(this).m();for(var T=0,R=1,P=0;P<this.g.length;P++){var x=this.i(P);T+=(0<=x?x:4294967296+x)*R,R*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(j(this))return"0";if(M(this))return"-"+U(this).toString(T);for(var R=m(Math.pow(T,6)),P=this,x="";;){var N=le(P,R).g;P=ae(P,N.j(R));var L=((0<P.g.length?P.g[0]:P.h)>>>0).toString(T);if(P=N,j(P))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function j(T){if(T.h!=0)return!1;for(var R=0;R<T.g.length;R++)if(T.g[R]!=0)return!1;return!0}function M(T){return T.h==-1}n.l=function(T){return T=ae(this,T),M(T)?-1:j(T)?0:1};function U(T){for(var R=T.g.length,P=[],x=0;x<R;x++)P[x]=~T.g[x];return new u(P,~T.h).add(I)}n.abs=function(){return M(this)?U(this):this},n.add=function(T){for(var R=Math.max(this.g.length,T.g.length),P=[],x=0,N=0;N<=R;N++){var L=x+(this.i(N)&65535)+(T.i(N)&65535),k=(L>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);x=k>>>16,L&=65535,k&=65535,P[N]=k<<16|L}return new u(P,P[P.length-1]&-2147483648?-1:0)};function ae(T,R){return T.add(U(R))}n.j=function(T){if(j(this)||j(T))return w;if(M(this))return M(T)?U(this).j(U(T)):U(U(this).j(T));if(M(T))return U(this.j(U(T)));if(0>this.l(A)&&0>T.l(A))return m(this.m()*T.m());for(var R=this.g.length+T.g.length,P=[],x=0;x<2*R;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<T.g.length;N++){var L=this.i(x)>>>16,k=this.i(x)&65535,Ye=T.i(N)>>>16,vt=T.i(N)&65535;P[2*x+2*N]+=k*vt,H(P,2*x+2*N),P[2*x+2*N+1]+=L*vt,H(P,2*x+2*N+1),P[2*x+2*N+1]+=k*Ye,H(P,2*x+2*N+1),P[2*x+2*N+2]+=L*Ye,H(P,2*x+2*N+2)}for(x=0;x<R;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=R;x<2*R;x++)P[x]=0;return new u(P,0)};function H(T,R){for(;(T[R]&65535)!=T[R];)T[R+1]+=T[R]>>>16,T[R]&=65535,R++}function ee(T,R){this.g=T,this.h=R}function le(T,R){if(j(R))throw Error("division by zero");if(j(T))return new ee(w,w);if(M(T))return R=le(U(T),R),new ee(U(R.g),U(R.h));if(M(R))return R=le(T,U(R)),new ee(U(R.g),R.h);if(30<T.g.length){if(M(T)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var P=I,x=R;0>=x.l(T);)P=de(P),x=de(x);var N=me(P,1),L=me(x,1);for(x=me(x,2),P=me(P,2);!j(x);){var k=L.add(x);0>=k.l(T)&&(N=N.add(P),L=k),x=me(x,1),P=me(P,1)}return R=ae(T,N.j(R)),new ee(N,R)}for(N=w;0<=T.l(R);){for(P=Math.max(1,Math.floor(T.m()/R.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=m(P),k=L.j(R);M(k)||0<k.l(T);)P-=x,L=m(P),k=L.j(R);j(L)&&(L=I),N=N.add(L),T=ae(T,k)}return new ee(N,T)}n.A=function(T){return le(this,T).h},n.and=function(T){for(var R=Math.max(this.g.length,T.g.length),P=[],x=0;x<R;x++)P[x]=this.i(x)&T.i(x);return new u(P,this.h&T.h)},n.or=function(T){for(var R=Math.max(this.g.length,T.g.length),P=[],x=0;x<R;x++)P[x]=this.i(x)|T.i(x);return new u(P,this.h|T.h)},n.xor=function(T){for(var R=Math.max(this.g.length,T.g.length),P=[],x=0;x<R;x++)P[x]=this.i(x)^T.i(x);return new u(P,this.h^T.h)};function de(T){for(var R=T.g.length+1,P=[],x=0;x<R;x++)P[x]=T.i(x)<<1|T.i(x-1)>>>31;return new u(P,T.h)}function me(T,R){var P=R>>5;R%=32;for(var x=T.g.length-P,N=[],L=0;L<x;L++)N[L]=0<R?T.i(L+P)>>>R|T.i(L+P+1)<<32-R:T.i(L+P);return new u(N,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Do=u}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hI,ru,dI,gh,Op,fI,pI,mI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var B=c[S];if(!(B in v))break e;v=v[B]}c=c[c.length-1],S=v[c],g=g(S),g!=S&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var v=0,S=!1,B={next:function(){if(!S&&v<c.length){var W=v++;return{value:g(W,c[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,v){return c.call.apply(c.bind,arguments)}function w(c,g,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function I(c,g,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,I.apply(null,arguments)}function A(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function j(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,B,W){for(var ue=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)ue[ft-2]=arguments[ft];return g.prototype[B].apply(S,ue)}}function M(c){const g=c.length;if(0<g){const v=Array(g);for(let S=0;S<g;S++)v[S]=c[S];return v}return[]}function U(c,g){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(f(S)){const B=c.length||0,W=S.length||0;c.length=B+W;for(let ue=0;ue<W;ue++)c[B+ue]=S[ue]}else c.push(S)}}class ae{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function H(c){return/^[\s\xa0]*$/.test(c)}function ee(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function le(c){return le[" "](c),c}le[" "]=function(){};var de=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function me(c,g,v){for(const S in c)g.call(v,c[S],S,c)}function T(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function R(c){const g={};for(const v in c)g[v]=c[v];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)c[v]=S[v];for(let W=0;W<P.length;W++)v=P[W],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function N(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function L(c){h.setTimeout(()=>{throw c},0)}function k(){var c=ke;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ye{constructor(){this.h=this.g=null}add(g,v){const S=vt.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var vt=new ae(()=>new Bt,c=>c.reset());class Bt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let st,re=!1,ke=new Ye,pe=()=>{const c=h.Promise.resolve(void 0);st=()=>{c.then(F)}};var F=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(v){L(v)}var g=vt;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Be=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,g),h.removeEventListener("test",v,g)}catch{}return c})();function Oe(c,g){if(Se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(de){e:{try{le(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:$e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Oe.aa.h.call(this)}}j(Oe,Se);var $e={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function gt(c,g,v,S,B){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=B,this.key=++Xe,this.da=this.fa=!1}function Kt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ar(c){this.src=c,this.g={},this.h=0}Ar.prototype.add=function(c,g,v,S,B){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ue=Cn(c,g,S,B);return-1<ue?(g=c[ue],v||(g.fa=!1)):(g=new gt(g,this.src,W,!!S,B),g.fa=v,c.push(g)),g};function Ot(c,g){var v=g.type;if(v in c.g){var S=c.g[v],B=Array.prototype.indexOf.call(S,g,void 0),W;(W=0<=B)&&Array.prototype.splice.call(S,B,1),W&&(Kt(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Cn(c,g,v,S){for(var B=0;B<c.length;++B){var W=c[B];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==S)return B}return-1}var Gr="closure_lm_"+(1e6*Math.random()|0),Wi={};function Xn(c,g,v,S,B){if(Array.isArray(g)){for(var W=0;W<g.length;W++)Xn(c,g[W],v,S,B);return null}return v=kr(v),c&&c[qe]?c.K(g,v,m(S)?!!S.capture:!1,B):Hs(c,g,v,!1,S,B)}function Hs(c,g,v,S,B,W){if(!g)throw Error("Invalid event type");var ue=m(B)?!!B.capture:!!B,ft=Hi(c);if(ft||(c[Gr]=ft=new Ar(c)),v=ft.add(g,v,S,ue,W),v.proxy)return v;if(S=Wo(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)Be||(B=ue),B===void 0&&(B=!1),c.addEventListener(g.toString(),S,B);else if(c.attachEvent)c.attachEvent(Cr(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Wo(){function c(v){return g.call(c.src,c.listener,v)}const g=Qs;return c}function _i(c,g,v,S,B){if(Array.isArray(g))for(var W=0;W<g.length;W++)_i(c,g[W],v,S,B);else S=m(S)?!!S.capture:!!S,v=kr(v),c&&c[qe]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],v=Cn(W,v,S,B),-1<v&&(Kt(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=Hi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Cn(g,v,S,B)),(v=-1<c?g[c]:null)&&Pr(v))}function Pr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[qe])Ot(g.i,c);else{var v=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(v,S,c.capture):g.detachEvent?g.detachEvent(Cr(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=Hi(g))?(Ot(v,c),v.h==0&&(v.src=null,g[Gr]=null)):Kt(c)}}}function Cr(c){return c in Wi?Wi[c]:Wi[c]="on"+c}function Qs(c,g){if(c.da)c=!0;else{g=new Oe(g,this);var v=c.listener,S=c.ha||c.src;c.fa&&Pr(c),c=v.call(S,g)}return c}function Hi(c){return c=c[Gr],c instanceof Ar?c:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function kr(c){return typeof c=="function"?c:(c[On]||(c[On]=function(g){return c.handleEvent(g)}),c[On])}function Mt(){Q.call(this),this.i=new Ar(this),this.M=this,this.F=null}j(Mt,Q),Mt.prototype[qe]=!0,Mt.prototype.removeEventListener=function(c,g,v,S){_i(this,c,g,v,S)};function xt(c,g){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new Se(g,c);else if(g instanceof Se)g.target=g.target||c;else{var B=g;g=new Se(S,c),x(g,B)}if(B=!0,v)for(var W=v.length-1;0<=W;W--){var ue=g.g=v[W];B=rn(ue,S,!0,g)&&B}if(ue=g.g=c,B=rn(ue,S,!0,g)&&B,B=rn(ue,S,!1,g)&&B,v)for(W=0;W<v.length;W++)ue=g.g=v[W],B=rn(ue,S,!1,g)&&B}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],S=0;S<v.length;S++)Kt(v[S]);delete c.g[g],c.h--}}this.F=null},Mt.prototype.K=function(c,g,v,S){return this.i.add(String(c),g,!1,v,S)},Mt.prototype.L=function(c,g,v,S){return this.i.add(String(c),g,!0,v,S)};function rn(c,g,v,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,W=0;W<g.length;++W){var ue=g[W];if(ue&&!ue.da&&ue.capture==v){var ft=ue.listener,Xt=ue.ha||ue.src;ue.fa&&Ot(c.i,ue),B=ft.call(Xt,S)!==!1&&B}}return B&&!S.defaultPrevented}function kn(c,g,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function xr(c){c.g=kn(()=>{c.g=null,c.i&&(c.i=!1,xr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class pr extends Q{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(c){Q.call(this),this.h=c,this.g={}}j(vi,Q);var Mn=[];function Qi(c){me(c.g,function(g,v){this.g.hasOwnProperty(v)&&Pr(g)},c),c.g={}}vi.prototype.N=function(){vi.aa.N.call(this),Qi(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ji=h.JSON.stringify,Yi=h.JSON.parse,Js=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Wr(){}Wr.prototype.h=null;function Dr(c){return c.h||(c.h=c.i())}function wi(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fn(){Se.call(this,"d")}j(Fn,Se);function Xi(){Se.call(this,"c")}j(Xi,Se);var Zn={},Ys=null;function Hr(){return Ys=Ys||new Mt}Zn.La="serverreachability";function Qr(c){Se.call(this,Zn.La,c)}j(Qr,Se);function Un(c){const g=Hr();xt(g,new Qr(g))}Zn.STAT_EVENT="statevent";function Xs(c,g){Se.call(this,Zn.STAT_EVENT,c),this.stat=g}j(Xs,Se);function Dt(c){const g=Hr();xt(g,new Xs(g,c))}Zn.Ma="timingevent";function D(c,g){Se.call(this,Zn.Ma,c),this.size=g}j(D,Se);function O(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function K(){this.g=!0}K.prototype.xa=function(){this.g=!1};function X(c,g,v,S,B,W){c.info(function(){if(c.g)if(W)for(var ue="",ft=W.split("&"),Xt=0;Xt<ft.length;Xt++){var rt=ft[Xt].split("=");if(1<rt.length){var sn=rt[0];rt=rt[1];var Wt=sn.split("_");ue=2<=Wt.length&&Wt[1]=="type"?ue+(sn+"="+rt+"&"):ue+(sn+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+v+`
`+ue})}function ce(c,g,v,S,B,W,ue){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+v+`
`+W+" "+ue})}function we(c,g,v,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ee(c,v)+(S?" "+S:"")})}function Ne(c,g){c.info(function(){return"TIMEOUT: "+g})}K.prototype.info=function(){};function Ee(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<B.length;ue++)B[ue]=""}}}}return Ji(v)}catch{return g}}var ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ye={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_e;function Me(){}j(Me,Wr),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},_e=new Me;function Ue(c,g,v,S){this.j=c,this.i=g,this.l=v,this.R=S||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var at={},We={};function dt(c,g,v){c.L=1,c.v=rs(nr(g)),c.m=v,c.P=!0,mr(c,null)}function mr(c,g){c.F=Date.now(),Qe(c),c.A=nr(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),ss(v.i,"t",S),c.C=0,v=c.j.J,c.h=new Ft,c.g=oc(c.j,v?g:null,!c.m),0<c.O&&(c.M=new pr(I(c.Y,c,c.g),c.O)),g=c.U,v=c.g,S=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Mn[0]=B.toString()),B=Mn);for(var W=0;W<B.length;W++){var ue=Xn(v,B[W],S||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Un(),X(c.i,c.u,c.A,c.l,c.R,c.m)}Ue.prototype.ca=function(c){c=c.target;const g=this.M;g&&Bn(c)==3?g.j():this.Y(c)},Ue.prototype.Y=function(c){try{if(c==this.g)e:{const Wt=Bn(this.g);var g=this.g.Ba();const _r=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||wl(this.g)))){this.J||Wt!=4||g==7||(g==8||0>=_r?Un(3):Un(2)),tr(this);var v=this.g.Z();this.X=v;t:if(Jr(this)){var S=wl(this.g);c="";var B=S.length,W=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),vn(this);var ue="";break t}this.h.i=new h.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(W&&g==B-1)});S.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,ce(this.i,this.u,this.A,this.l,this.R,Wt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ft,Xt=this.g;if((ft=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ft)){var rt=ft;break t}}rt=null}if(v=rt)we(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,v);else{this.o=!1,this.s=3,Dt(12),dn(this),vn(this);break e}}if(this.P){v=!0;let ir;for(;!this.J&&this.C<ue.length;)if(ir=er(this,ue),ir==We){Wt==4&&(this.s=4,Dt(14),v=!1),we(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==at){this.s=4,Dt(15),we(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else we(this.i,this.l,ir,null),Yr(this,ir);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||ue.length!=0||this.h.h||(this.s=1,Dt(16),v=!1),this.o=this.o&&v,!v)we(this.i,this.l,ue,"[Invalid Chunked Response]"),dn(this),vn(this);else if(0<ue.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Il(sn),sn.M=!0,Dt(11))}}else we(this.i,this.l,ue,null),Yr(this,ue);Wt==4&&dn(this),this.o&&!this.J&&(Wt==4?sa(this.j,this):(this.o=!1,Qe(this)))}else ea(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),dn(this),vn(this)}}}catch{}finally{}};function Jr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function er(c,g){var v=c.C,S=g.indexOf(`
`,v);return S==-1?We:(v=Number(g.substring(v,S)),isNaN(v)?at:(S+=1,S+v>g.length?We:(g=g.slice(S,S+v),c.C=S+v,g)))}Ue.prototype.cancel=function(){this.J=!0,dn(this)};function Qe(c){c.S=Date.now()+c.I,Zi(c,c.I)}function Zi(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=O(I(c.ba,c),g)}function tr(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Ue.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ne(this.i,this.A),this.L!=2&&(Un(),Dt(17)),dn(this),this.s=2,vn(this)):Zi(this,this.S-c)};function vn(c){c.j.G==0||c.J||sa(c.j,c)}function dn(c){tr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Qi(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Yr(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||Ze(v.h,c))){if(!c.K&&Ze(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ia(v),Or(v);else break e;ra(v),Dt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=O(I(v.Za,v),6e3));if(1>=Xr(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ri(v,11)}else if((c.K||v.g==c)&&ia(v),!H(g))for(B=v.Da.g.parse(g),g=0;g<B.length;g++){let rt=B[g];if(v.T=rt[0],rt=rt[1],v.G==2)if(rt[0]=="c"){v.K=rt[1],v.ia=rt[2];const sn=rt[3];sn!=null&&(v.la=sn,v.j.info("VER="+v.la));const Wt=rt[4];Wt!=null&&(v.Aa=Wt,v.j.info("SVER="+v.Aa));const _r=rt[5];_r!=null&&typeof _r=="number"&&0<_r&&(S=1.5*_r,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ir=c.g;if(ir){const so=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(so){var W=S.h;W.g||so.indexOf("spdy")==-1&&so.indexOf("quic")==-1&&so.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(gr(W,W.h),W.h=null))}if(S.D){const aa=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;aa&&(S.ya=aa,_t(S.I,S.D,aa))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ue=c;if(S.qa=sc(S,S.J?S.ia:null,S.W),ue.K){Zs(S.h,ue);var ft=ue,Xt=S.L;Xt&&(ft.I=Xt),ft.B&&(tr(ft),Qe(ft)),S.g=ue}else io(S);0<v.i.length&&ni(v)}else rt[0]!="stop"&&rt[0]!="close"||Ri(v,7);else v.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Ri(v,7):pn(v):rt[0]!="noop"&&v.l&&v.l.ta(rt),v.v=0)}}Un(4)}catch{}}var Je=class{constructor(c,g){this.g=c,this.map=g}};function ct(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gt(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Xr(c){return c.h?1:c.g?c.g.size:0}function Ze(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function gr(c,g){c.g?c.g.add(g):c.h=g}function Zs(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}ct.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ho(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return M(c.i)}function Qo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],v=c.length,S=0;S<v;S++)g.push(c[S]);return g}g=[],v=0;for(S in c)g[v++]=c[S];return g}function Jo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const S in c)g[v++]=S;return g}}}function es(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=Jo(c),S=Qo(c),B=S.length,W=0;W<B;W++)g.call(void 0,S[W],v&&v[W],c)}var eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dd(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),B=null;if(0<=S){var W=c[v].substring(0,S);B=c[v].substring(S+1)}else W=c[v];g(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ei(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ei){this.h=c.h,to(this,c.j),this.o=c.o,this.g=c.g,ts(this,c.s),this.l=c.l;var g=c.i,v=new Zr;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),ns(this,v),this.m=c.m}else c&&(g=String(c).match(eo))?(this.h=!1,to(this,g[1]||"",!0),this.o=nt(g[2]||""),this.g=nt(g[3]||"",!0),ts(this,g[4]),this.l=nt(g[5]||"",!0),ns(this,g[6]||"",!0),this.m=nt(g[7]||"")):(this.h=!1,this.i=new Zr(null,this.h))}Ei.prototype.toString=function(){var c=[],g=this.j;g&&c.push(is(g,Yo,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(is(g,Yo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(is(v,v.charAt(0)=="/"?Yu:Ju,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",is(v,yl)),c.join("")};function nr(c){return new Ei(c)}function to(c,g,v){c.j=v?nt(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ts(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ns(c,g,v){g instanceof Zr?(c.i=g,ei(c.i,c.h)):(v||(g=is(g,Xu)),c.i=new Zr(g,c.h))}function _t(c,g,v){c.i.set(g,v)}function rs(c){return _t(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function nt(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function is(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,Qu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Qu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yo=/[#\/\?@]/g,Ju=/[#\?:]/g,Yu=/[#\?]/g,Xu=/[#\?@]/g,yl=/#/g;function Zr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function fn(c){c.g||(c.g=new Map,c.h=0,c.i&&Dd(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Zr.prototype,n.add=function(c,g){fn(this),this.i=null,c=yr(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function br(c,g){fn(c),g=yr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Nr(c,g){return fn(c),g=yr(c,g),c.g.has(g)}n.forEach=function(c,g){fn(this),this.g.forEach(function(v,S){v.forEach(function(B){c.call(g,B,S,this)},this)},this)},n.na=function(){fn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let S=0;S<g.length;S++){const B=c[S];for(let W=0;W<B.length;W++)v.push(g[S])}return v},n.V=function(c){fn(this);let g=[];if(typeof c=="string")Nr(this,c)&&(g=g.concat(this.g.get(yr(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},n.set=function(c,g){return fn(this),this.i=null,c=yr(this,c),Nr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ss(c,g,v){br(c,g),0<v.length&&(c.i=null,c.g.set(yr(c,g),M(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var S=g[v];const W=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var B=W;ue[S]!==""&&(B+="="+encodeURIComponent(String(ue[S]))),c.push(B)}}return this.i=c.join("&")};function yr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function ei(c,g){g&&!c.j&&(fn(c),c.i=null,c.g.forEach(function(v,S){var B=S.toLowerCase();S!=B&&(br(this,S),ss(this,B,v))},c)),c.j=g}function bd(c,g){const v=new K;if(h.Image){const S=new Image;S.onload=A(jn,v,"TestLoadImage: loaded",!0,g,S),S.onerror=A(jn,v,"TestLoadImage: error",!1,g,S),S.onabort=A(jn,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=A(jn,v,"TestLoadImage: timeout",!1,g,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function Zu(c,g){const v=new K,S=new AbortController,B=setTimeout(()=>{S.abort(),jn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(W=>{clearTimeout(B),W.ok?jn(v,"TestPingServer: ok",!0,g):jn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),jn(v,"TestPingServer: error",!1,g)})}function jn(c,g,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function Nd(){this.g=new Js}function ec(c,g,v){const S=v||"";try{es(c,function(B,W){let ue=B;m(B)&&(ue=Ji(B)),g.push(S+W+"="+encodeURIComponent(ue))})}catch(B){throw g.push(S+"type="+encodeURIComponent("_badmap")),B}}function Ii(c){this.l=c.Ub||null,this.j=c.eb||!1}j(Ii,Wr),Ii.prototype.g=function(){return new no(this.l,this.j)},Ii.prototype.i=(function(c){return function(){return c}})({});function no(c,g){Mt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(no,Mt),n=no.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Lr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function tc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Vr(this):Lr(this),this.readyState==3&&tc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Vr(this))},n.Qa=function(c){this.g&&(this.response=c,Vr(this))},n.ga=function(){this.g&&Vr(this)};function Vr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Lr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Lr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(no.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ti(c){let g="";return me(c,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function os(c,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ti(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):_t(c,g,v))}function At(c){Mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(At,Mt);var Vd=/^https?$/i,_l=["POST","PUT"];n=At.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?Dr(this.o):Dr(_e),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){ro(this,W);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),B=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(_l,g,void 0))||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of v)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zo(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){ro(this,W)}};function ro(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Xo(c),rr(c)}function Xo(c){c.A||(c.A=!0,xt(c,"complete"),xt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,xt(this,"complete"),xt(this,"abort"),rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rr(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vl(this):this.bb())},n.bb=function(){vl(this)};function vl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Bn(c)!=4||c.Z()!=2)){if(c.u&&Bn(c)==4)kn(c.Ea,0,c);else if(xt(c,"readystatechange"),Bn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=ue===0){var B=String(c.D).match(eo)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),S=!Vd.test(B?B.toLowerCase():"")}v=S}if(v)xt(c,"complete"),xt(c,"success");else{c.m=6;try{var W=2<Bn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Xo(c)}}finally{rr(c)}}}}function rr(c,g){if(c.g){Zo(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||xt(c,"ready");try{v.onreadystatechange=S}catch{}}}function Zo(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Bn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Yi(g)}};function wl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ea(c){const g={};c=(c.g&&2<=Bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(H(c[S]))continue;var v=N(c[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[B]||[];g[B]=W,W.push(v)}T(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function El(c){this.Aa=0,this.i=[],this.j=new K,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ti("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ti("baseRetryDelayMs",5e3,c),this.cb=ti("retryDelaySeedMs",1e4,c),this.Wa=ti("forwardChannelMaxRetries",2,c),this.wa=ti("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ct(c&&c.concurrentRequestLimit),this.Da=new Nd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=El.prototype,n.la=8,n.G=1,n.connect=function(c,g,v,S){Dt(0),this.W=c,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=sc(this,null,this.W),ni(this)};function pn(c){if(ta(c),c.G==3){var g=c.U++,v=nr(c.I);if(_t(v,"SID",c.K),_t(v,"RID",g),_t(v,"TYPE","terminate"),Si(c,v),g=new Ue(c,c.j,g),g.L=2,g.v=rs(nr(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=g.v,v=!0),v||(g.g=oc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Qe(g)}ic(c)}function Or(c){c.g&&(Il(c),c.g.cancel(),c.g=null)}function ta(c){Or(c),c.u&&(h.clearTimeout(c.u),c.u=null),ia(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function ni(c){if(!Gt(c.h)&&!c.s){c.s=!0;var g=c.Ga;st||pe(),re||(st(),re=!0),ke.add(g,c),c.B=0}}function Ld(c,g){return Xr(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=O(I(c.Ga,c,g),rc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new Ue(this,this.j,c);let W=this.o;if(this.S&&(W?(W=R(W),x(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=as(this,B,g),v=nr(this.I),_t(v,"RID",c),_t(v,"CVER",22),this.D&&_t(v,"X-HTTP-Session-Id",this.D),Si(this,v),W&&(this.O?g="headers="+encodeURIComponent(String(Ti(W)))+"&"+g:this.m&&os(v,this.m,W)),gr(this.h,B),this.Ua&&_t(v,"TYPE","init"),this.P?(_t(v,"$req",g),_t(v,"SID","null"),B.T=!0,dt(B,v,null)):dt(B,v,g),this.G=2}}else this.G==3&&(c?na(this,c):this.i.length==0||Gt(this.h)||na(this))};function na(c,g){var v;g?v=g.l:v=c.U++;const S=nr(c.I);_t(S,"SID",c.K),_t(S,"RID",v),_t(S,"AID",c.T),Si(c,S),c.m&&c.o&&os(S,c.m,c.o),v=new Ue(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=as(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gr(c.h,v),dt(v,S,g)}function Si(c,g){c.H&&me(c.H,function(v,S){_t(g,S,v)}),c.l&&es({},function(v,S){_t(g,S,v)})}function as(c,g,v){v=Math.min(c.i.length,v);var S=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let W=-1;for(;;){const ue=["count="+v];W==-1?0<v?(W=B[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let ft=!0;for(let Xt=0;Xt<v;Xt++){let rt=B[Xt].g;const sn=B[Xt].map;if(rt-=W,0>rt)W=Math.max(0,B[Xt].g-100),ft=!1;else try{ec(sn,ue,"req"+rt+"_")}catch{S&&S(sn)}}if(ft){S=ue.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,S}function io(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;st||pe(),re||(st(),re=!0),ke.add(g,c),c.v=0}}function ra(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=O(I(c.Fa,c),rc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,nc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=O(I(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Or(this),nc(this))};function Il(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function nc(c){c.g=new Ue(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=nr(c.qa);_t(g,"RID","rpc"),_t(g,"SID",c.K),_t(g,"AID",c.T),_t(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&_t(g,"TO",c.ja),_t(g,"TYPE","xmlhttp"),Si(c,g),c.m&&c.o&&os(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=rs(nr(g)),v.m=null,v.P=!0,mr(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Or(this),ra(this),Dt(19))};function ia(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function sa(c,g){var v=null;if(c.g==g){ia(c),Il(c),c.g=null;var S=2}else if(Ze(c.h,g))v=g.D,Zs(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;S=Hr(),xt(S,new D(S,v)),ni(c)}else io(c);else if(B=g.s,B==3||B==0&&0<g.X||!(S==1&&Ld(c,g)||S==2&&ra(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),B){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function rc(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function Ri(c,g){if(c.j.info("Error code "+g),g==2){var v=I(c.fb,c),S=c.Xa;const B=!S;S=new Ei(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||to(S,"https"),rs(S),B?bd(S.toString(),v):Zu(S.toString(),v)}else Dt(2);c.G=0,c.l&&c.l.sa(g),ic(c),ta(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function ic(c){if(c.G=0,c.ka=[],c.l){const g=Ho(c.h);(g.length!=0||c.i.length!=0)&&(U(c.ka,g),U(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function sc(c,g,v){var S=v instanceof Ei?nr(v):new Ei(v);if(S.g!="")g&&(S.g=g+"."+S.g),ts(S,S.s);else{var B=h.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var W=new Ei(null);S&&to(W,S),g&&(W.g=g),B&&ts(W,B),v&&(W.l=v),S=W}return v=c.D,g=c.ya,v&&g&&_t(S,v,g),_t(S,"VER",c.la),Si(c,S),S}function oc(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new At(new Ii({eb:v})):new At(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tl(){}n=Tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oa(){}oa.prototype.g=function(c,g){return new xn(c,g)};function xn(c,g){Mt.call(this),this.g=new El(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!H(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!H(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ri(this)}j(xn,Mt),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){pn(this.g)},xn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Ji(c),c=v);g.i.push(new Je(g.Ya++,c)),g.G==3&&ni(g)},xn.prototype.N=function(){this.g.l=null,delete this.j,pn(this.g),delete this.g,xn.aa.N.call(this)};function ac(c){Fn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}j(ac,Fn);function lc(){Xi.call(this),this.status=1}j(lc,Xi);function ri(c){this.g=c}j(ri,Tl),ri.prototype.ua=function(){xt(this.g,"a")},ri.prototype.ta=function(c){xt(this.g,new ac(c))},ri.prototype.sa=function(c){xt(this.g,new lc)},ri.prototype.ra=function(){xt(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,mI=function(){return new oa},pI=function(){return Hr()},fI=Zn,Op={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,gh=ve,ye.COMPLETE="complete",dI=ye,wi.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,ru=wi,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,hI=At}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const Nv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new pm("@firebase/firestore");function Va(){return Oo.logLevel}function te(n,...e){if(Oo.logLevel<=et.DEBUG){const t=e.map(Cm);Oo.debug(`Firestore (${cl}): ${n}`,...t)}}function $t(n,...e){if(Oo.logLevel<=et.ERROR){const t=e.map(Cm);Oo.error(`Firestore (${cl}): ${n}`,...t)}}function Eu(n,...e){if(Oo.logLevel<=et.WARN){const t=e.map(Cm);Oo.warn(`Firestore (${cl}): ${n}`,...t)}}function Cm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: `+n;throw $t(e),new Error(e)}function xe(n,e){n||Re()}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends yi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class ux{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new di;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new di,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new di)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new ax(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new Rn(e)}}class cx{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hx{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cx(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){xe(this.o===void 0);const r=a=>{a.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xe(typeof t.token=="string"),this.R=t.token,new dx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=px(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Wa(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function yI(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new Lt(0,0))}static max(){return new be(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(),r===void 0?r=e.length-t:r>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Iu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Iu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),u=t.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ht extends Iu{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const mx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Iu{construct(e,t,r){return new Vt(e,t,r)}static isValidIdentifier(e){return mx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(ht.fromString(e))}static fromName(e){return new fe(ht.fromString(e).popFirst(5))}static empty(){return new fe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Mp(n){return n.fields.find((e=>e.kind===2))}function Eo(n){return n.fields.filter((e=>e.kind!==2))}Lh.UNKNOWN_ID=-1;class yh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tu(0,dr.min())}}function _I(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new dr(s,fe.empty(),e)}function vI(n){return new dr(n.readTime,n.key,-1)}class dr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dr(be.min(),fe.empty(),-1)}static max(){return new dr(be.max(),fe.empty(),-1)}}function km(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==wI)throw n;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,r)=>{t(e)}))}static reject(e){return new $(((t,r)=>{r(e)}))}static waitFor(e){return new $(((t,r)=>{let s=0,a=0,u=!1;e.forEach((h=>{++s,h.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next((s=>s?$.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new $(((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++h,h===a&&r(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new $(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new di,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new uu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=xm(r.target.error);this.V.reject(new uu(e,s))}}static open(e,t,r,s){try{return new sd(t,e.transaction(s,r))}catch(a){throw new uu(t,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yx(t)}}class Os{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Os.S(tn())===12.2&&$t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),So(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!RE())return!1;if(Os.v())return!0;const e=tn(),t=Os.S(e),r=0<t&&t<10,s=II(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const u=a.target.result;t(u)},s.onblocked=()=>{r(new uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const u=a.target.error;u.name==="VersionError"?r(new he(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new he(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new uu(e,u))},s.onupgradeneeded=a=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.p.O(u,s.transaction,a.oldVersion,this.version).next((()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.M(e);const h=sd.open(this.db,e,a?"readonly":"readwrite",r),f=s(h).next((m=>(h.g(),m))).catch((m=>(h.abort(m),$.reject(m)))).toPromise();return f.catch((()=>{})),await h.m,f}catch(h){const f=h,m=f.name!=="FirebaseError"&&u<3;if(te("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function II(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class gx{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return So(this.B.delete())}}class uu extends he{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ks(n){return n.name==="IndexedDbTransactionError"}class yx{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(te("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),So(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),So(this.store.add(e))}get(e){return So(this.store.get(e)).next((t=>(t===void 0&&(t=null),te("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),So(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),So(this.store.count())}U(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new $(((u,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{u(f.target.result)}}))}{const a=this.cursor(r),u=[];return this.W(a,((h,f)=>{u.push(f)})).next((()=>u))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new $(((s,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{s(u.target.result)}}))}j(e,t){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.W(s,((a,u,h)=>h.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Y(e){const t=this.cursor({});return new $(((r,s)=>{t.onerror=a=>{const u=xm(a.target.error);s(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():r()})):r()}}))}W(e,t){const r=[];return new $(((s,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const f=new gx(h),m=t(h.primaryKey,h.value,f);if(m instanceof $){const _=m.catch((w=>(f.done(),$.reject(w))));r.push(_)}f.isDone?s():f.K===null?h.continue():h.continue(f.K)}})).next((()=>$.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function So(n){return new $(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=xm(r.target.error);t(s)}}))}let Vv=!1;function xm(n){const e=Os.S(tn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vv||(Vv=!0,setTimeout((()=>{throw r}),0)),r}}return n}class _x{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){te("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{te("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Ks(t)?te("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await qs(t)}await this.X(6e4)}))}}class vx{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let s=t,a=!0;return $.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return te("IndexBackfiller",`Processing collection: ${u}`),this.ne(e,u,s).next((h=>{s-=h,r.add(u)}));a=!1})))).next((()=>t-s))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.re(s,a))).next((h=>(te("IndexBackfiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>u.size))}))))}re(e,t){let r=e;return t.changes.forEach(((s,a)=>{const u=vI(a);km(u,r)>0&&(r=u)})),new dr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jn.oe=-1;function od(n){return n==null}function Su(n){return n===0&&1/n==-1/0}function TI(n){return typeof n=="number"&&Number.isInteger(n)&&!Su(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lv(e)),e=wx(n.get(t),e);return Lv(e)}function wx(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Lv(n){return n+""}function li(n){const e=n.length;if(xe(e>=2),e===2)return xe(n.charAt(0)===""&&n.charAt(1)===""),ht.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const u=n.indexOf("",a);switch((u<0||u>t)&&Re(),n.charAt(u+1)){case"":const h=n.substring(a,u);let f;s.length===0?f=h:(s+=h,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,u),s+="\0";break;case"":s+=n.substring(a,u+1);break;default:Re()}a=u+2}return new ht(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(n,e){return[n,Nn(e)]}function SI(n,e,t){return[n,Nn(e),t]}const Ex={},Ix=["prefixPath","collectionGroup","readTime","documentId"],Tx=["prefixPath","collectionGroup","documentId"],Sx=["collectionGroup","readTime","prefixPath","documentId"],Rx=["canonicalId","targetId"],Ax=["targetId","path"],Px=["path","targetId"],Cx=["collectionId","parent"],kx=["indexId","uid"],xx=["uid","sequenceNumber"],Dx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bx=["indexId","uid","orderedDocumentKey"],Nx=["userId","collectionPath","documentId"],Vx=["userId","collectionPath","largestBatchId"],Lx=["userId","collectionGroup","largestBatchId"],RI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ox=[...RI,"documentOverlays"],AI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PI=AI,Dm=[...PI,"indexConfiguration","indexState","indexEntries"],Mx=Dm,Fx=[...Dm,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends EI{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function nn(n,e){const t=Pe(n);return Os.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||yn.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??yn.RED,this.left=s??yn.EMPTY,this.right=a??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new yn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,r,s,a){return this}insert(e,t,r){return new yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fv(this.data.getIterator())}getIteratorFrom(e){return new Fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yt(this.comparator);return t.data=e,t}}class Fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ka(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new yt(Vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new kI("Invalid base64 string: "+a):a}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const Ux=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(n){if(xe(!!n),typeof n=="string"){let e=0;const t=Ux.exec(n);if(xe(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Us(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Nm(n){const e=n.mapValue.fields.__previous_value__;return bm(e)?Nm(e):e}function Ru(n){const e=qi(n.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,r,s,a,u,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class Mo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vh={nullValue:"NULL_VALUE"};function Fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bm(n)?4:xI(n)?9007199254740991:ad(n)?10:11:Re()}function pi(n,e){if(n===e)return!0;const t=Fo(n);if(t!==Fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ru(n).isEqual(Ru(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=qi(s.timestampValue),h=qi(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Us(s.bytesValue).isEqual(Us(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return kt(s.geoPointValue.latitude)===kt(a.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return kt(s.integerValue)===kt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=kt(s.doubleValue),h=kt(a.doubleValue);return u===h?Su(u)===Su(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Wa(n.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(Mv(u)!==Mv(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!pi(u[f],h[f])))return!1;return!0})(n,e);default:return Re()}}function Au(n,e){return(n.values||[]).find((t=>pi(t,e)))!==void 0}function js(n,e){if(n===e)return 0;const t=Fo(n),r=Fo(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const h=kt(a.integerValue||a.doubleValue),f=kt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return Uv(n.timestampValue,e.timestampValue);case 4:return Uv(Ru(n),Ru(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return(function(a,u){const h=Us(a),f=Us(u);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const _=ze(h[m],f[m]);if(_!==0)return _}return ze(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const h=ze(kt(a.latitude),kt(u.latitude));return h!==0?h:ze(kt(a.longitude),kt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jv(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var h,f,m,_;const w=a.fields||{},I=u.fields||{},A=(h=w.value)===null||h===void 0?void 0:h.arrayValue,j=(f=I.value)===null||f===void 0?void 0:f.arrayValue,M=ze(((m=A?.values)===null||m===void 0?void 0:m.length)||0,((_=j?.values)===null||_===void 0?void 0:_.length)||0);return M!==0?M:jv(A,j)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Ns.mapValue&&u===Ns.mapValue)return 0;if(a===Ns.mapValue)return 1;if(u===Ns.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const I=ze(f[w],_[w]);if(I!==0)return I;const A=js(h[f[w]],m[_[w]]);if(A!==0)return A}return ze(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Re()}}function Uv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=qi(n),r=qi(e),s=ze(t.seconds,r.seconds);return s!==0?s:ze(t.nanos,r.nanos)}function jv(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=js(t[s],r[s]);if(a)return a}return ze(t.length,r.length)}function Ha(n){return Up(n)}function Up(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=qi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Us(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Up(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Up(t.fields[u])}`;return s+"}"})(n.mapValue):Re()}function Pu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jp(n){return!!n&&"integerValue"in n}function Cu(n){return!!n&&"arrayValue"in n}function Bv(n){return!!n&&"nullValue"in n}function zv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wh(n){return!!n&&"mapValue"in n}function ad(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function cu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=cu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const DI={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Bx(n){return"nullValue"in n?vh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pu(Mo.empty(),fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ad(n)?DI:{mapValue:{}}:Re()}function zx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pu(Mo.empty(),fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?DI:"mapValue"in n?ad(n)?{mapValue:{}}:Ns:Re()}function $v(n,e){const t=js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qv(n,e){const t=js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=Vt.emptyPath(),r={},s=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=cu(u):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];wh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){qo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new An(cu(this.value))}}function bI(n){const e=[];return qo(n.fields,((t,r)=>{const s=new Vt([t]);if(wh(r)){const a=bI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t,r,s,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new jt(e,0,be.min(),be.min(),be.min(),An.empty(),0)}static newFoundDocument(e,t,r,s){return new jt(e,1,t,be.min(),r,s,0)}static newNoDocument(e,t){return new jt(e,2,t,be.min(),be.min(),An.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,be.min(),be.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t){this.position=e,this.inclusive=t}}function Kv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=fe.comparator(fe.fromName(u.referenceValue),t.key):r=js(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t="asc"){this.field=e,this.dir=t}}function $x(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{}class tt extends NI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qx(e,t,r):t==="array-contains"?new Wx(e,r):t==="in"?new UI(e,r):t==="not-in"?new Hx(e,r):t==="array-contains-any"?new Qx(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Kx(e,r):new Gx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(js(t,this.value)):t!==null&&Fo(this.value)===Fo(t)&&this.matchesComparison(js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends NI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new mt(e,t)}matches(e){return Ja(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ja(n){return n.op==="and"}function Bp(n){return n.op==="or"}function Vm(n){return VI(n)&&Ja(n)}function VI(n){for(const e of n.filters)if(e instanceof mt)return!1;return!0}function zp(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+Ha(n.value);if(Vm(n))return n.filters.map((e=>zp(e))).join(",");{const e=n.filters.map((t=>zp(t))).join(",");return`${n.op}(${e})`}}function LI(n,e){return n instanceof tt?(function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&pi(r.value,s.value)})(n,e):n instanceof mt?(function(r,s){return s instanceof mt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,h)=>a&&LI(u,s.filters[h])),!0):!1})(n,e):void Re()}function OI(n,e){const t=n.filters.concat(e);return mt.create(t,n.op)}function MI(n){return n instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ha(t.value)}`})(n):n instanceof mt?(function(t){return t.op.toString()+" {"+t.getFilters().map(MI).join(" ,")+"}"})(n):"Filter"}class qx extends tt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kx extends tt{constructor(e,t){super(e,"in",t),this.keys=FI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Gx extends tt{constructor(e,t){super(e,"not-in",t),this.keys=FI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>fe.fromName(r.referenceValue)))}class Wx extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cu(t)&&Au(t.arrayValue,this.value)}}class UI extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Au(this.value.arrayValue,t)}}class Hx extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Au(this.value.arrayValue,t)}}class Qx extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Au(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function $p(n,e=null,t=[],r=[],s=null,a=null,u=null){return new Jx(n,e,t,r,s,a,u)}function Uo(n){const e=Pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>zp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ha(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ha(r))).join(",")),e.ue=t}return e.ue}function ju(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$x(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gv(n.startAt,e.startAt)&&Gv(n.endAt,e.endAt)}function Mh(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Fh(n,e){return n.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function Wv(n,e,t){let r=vh,s=!0;for(const a of Fh(n,e)){let u=vh,h=!0;switch(a.op){case"<":case"<=":u=Bx(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,h=!1;break;case"!=":case"not-in":u=vh}$v({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];$v({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function Hv(n,e,t){let r=Ns,s=!0;for(const a of Fh(n,e)){let u=Ns,h=!0;switch(a.op){case">=":case">":u=zx(a.value),h=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,h=!1;break;case"!=":case"not-in":u=Ns}qv({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];qv({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jI(n,e,t,r,s,a,u,h){return new Bu(n,e,t,r,s,a,u,h)}function ld(n){return new Bu(n)}function Qv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BI(n){return n.collectionGroup!==null}function hu(n){const e=Pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new yt(Vt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Oh(a,r))})),t.has(Vt.keyField().canonicalString())||e.ce.push(new Oh(Vt.keyField(),r))}return e.ce}function hr(n){const e=Pe(n);return e.le||(e.le=Yx(e,hu(n))),e.le}function Yx(n,e){if(n.limitType==="F")return $p(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Oh(s.field,a)}));const t=n.endAt?new Qa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qa(n.startAt.position,n.startAt.inclusive):null;return $p(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function qp(n,e){const t=n.filters.concat([e]);return new Bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kp(n,e,t){return new Bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ud(n,e){return ju(hr(n),hr(e))&&n.limitType===e.limitType}function zI(n){return`${Uo(hr(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>MI(s))).join(", ")}]`),od(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ha(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ha(s))).join(",")),`Target(${r})`})(hr(n))}; limitType=${n.limitType})`}function zu(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):fe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of hu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,h,f){const m=Kv(u,h,f);return u.inclusive?m<=0:m<0})(r.startAt,hu(r),s)||r.endAt&&!(function(u,h,f){const m=Kv(u,h,f);return u.inclusive?m>=0:m>0})(r.endAt,hu(r),s))})(n,e)}function $I(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qI(n){return(e,t)=>{let r=!1;for(const s of hu(n)){const a=Xx(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Xx(n,e,t){const r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?js(f,m):Re()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return CI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Tt(fe.comparator);function cr(){return Zx}const KI=new Tt(fe.comparator);function iu(...n){let e=KI;for(const t of n)e=e.insert(t.key,t);return e}function GI(n){let e=KI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ui(){return du()}function WI(){return du()}function du(){return new Gs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const e1=new Tt(fe.comparator),t1=new yt(fe.comparator);function Ge(...n){let e=t1;for(const t of n)e=e.add(t);return e}const n1=new yt(ze);function Lm(){return n1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(e)?"-0":e}}function HI(n){return{integerValue:""+n}}function QI(n,e){return TI(e)?HI(e):Om(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function r1(n,e,t){return n instanceof ku?(function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&bm(a)&&(a=Nm(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Ya?YI(n,e):n instanceof Xa?XI(n,e):(function(s,a){const u=JI(s,a),h=Jv(u)+Jv(s.Pe);return jp(u)&&jp(s.Pe)?HI(h):Om(s.serializer,h)})(n,e)}function i1(n,e,t){return n instanceof Ya?YI(n,e):n instanceof Xa?XI(n,e):t}function JI(n,e){return n instanceof Za?(function(r){return jp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class ku extends cd{}class Ya extends cd{constructor(e){super(),this.elements=e}}function YI(n,e){const t=ZI(e);for(const r of n.elements)t.some((s=>pi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Xa extends cd{constructor(e){super(),this.elements=e}}function XI(n,e){let t=ZI(e);for(const r of n.elements)t=t.filter((s=>!pi(s,r)));return{arrayValue:{values:t}}}class Za extends cd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Jv(n){return kt(n.integerValue||n.doubleValue)}function ZI(n){return Cu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this.field=e,this.transform=t}}function s1(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ya&&s instanceof Ya||r instanceof Xa&&s instanceof Xa?Wa(r.elements,s.elements,pi):r instanceof Za&&s instanceof Za?pi(r.Pe,s.Pe):r instanceof ku&&s instanceof ku})(n.transform,e.transform)}class o1{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class hd{}function t0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dd(n.key,Pn.none()):new hl(n.key,n.data,Pn.none());{const t=n.data,r=An.empty();let s=new yt(Vt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Gi(n.key,r,new Yn(s.toArray()),Pn.none())}}function a1(n,e,t){n instanceof hl?(function(s,a,u){const h=s.value.clone(),f=Xv(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Gi?(function(s,a,u){if(!Eh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=Xv(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(n0(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fu(n,e,t,r){return n instanceof hl?(function(a,u,h,f){if(!Eh(a.precondition,u))return h;const m=a.value.clone(),_=Zv(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Gi?(function(a,u,h,f){if(!Eh(a.precondition,u))return h;const m=Zv(a.fieldTransforms,f,u),_=u.data;return _.setAll(n0(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,u,h){return Eh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function l1(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=JI(r.transform,s||null);a!=null&&(t===null&&(t=An.empty()),t.set(r.field,a))}return t||null}function Yv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wa(r,s,((a,u)=>s1(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hl extends hd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gi extends hd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function n0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Xv(n,e,t){const r=new Map;xe(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,i1(u,h,t[s]))}return r}function Zv(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,r1(a,u,e))}return r}class dd extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r0 extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&a1(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WI();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(s.key)?null:h;const f=t0(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(be.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,((t,r)=>Yv(t,r)))&&Wa(this.baseMutations,e.baseMutations,((t,r)=>Yv(t,r)))}}class Fm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){xe(e.mutations.length===r.length);let s=(function(){return e1})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Fm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,it;function c1(n){switch(n){default:return Re();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function i0(n){if(n===void 0)return $t("GRPC error has no .code"),J.UNKNOWN;switch(n){case Qt.OK:return J.OK;case Qt.CANCELLED:return J.CANCELLED;case Qt.UNKNOWN:return J.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return J.INTERNAL;case Qt.UNAVAILABLE:return J.UNAVAILABLE;case Qt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Qt.NOT_FOUND:return J.NOT_FOUND;case Qt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Qt.ABORTED:return J.ABORTED;case Qt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Qt.DATA_LOSS:return J.DATA_LOSS;default:return Re()}}(it=Qt||(Qt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Do([4294967295,4294967295],0);function ew(n){const e=h1().encode(n),t=new cI;return t.update(e),new Uint8Array(t.digest())}function tw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Do([t,r],0),new Do([s,a],0)]}class jm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new su(`Invalid padding: ${t}`);if(r<0)throw new su(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new su(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Do.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(Do.fromNumber(r)));return s.compare(d1)===1&&(s=new Do([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=ew(e),[r,s]=tw(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new jm(a,s,t);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.Ie===0)return;const t=ew(e),[r,s]=tw(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,qu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $u(be.min(),s,new Tt(ze),cr(),Ge())}}class qu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qu(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class s0{constructor(e,t){this.targetId=e,this.me=t}}class o0{constructor(e,t,r=qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class nw{constructor(){this.fe=0,this.ge=iw(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ge(),t=Ge(),r=Ge();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Re()}})),new qu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=iw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class f1{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=rw(),this.Qe=new Tt(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const a=s.target;if(Mh(a))if(r===0){const u=new fe(a.path);this.Ue(t,u,jt.newNoDocument(u,be.min()))}else xe(r===1);else{const u=this.Ye(t);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,h;try{u=Us(r).toUint8Array()}catch(f){if(f instanceof kI)return Eu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new jm(u,s,a)}catch(f){return Eu(f instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,a,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const h=this.Je(u);if(h){if(a.current&&Mh(h.target)){const f=new fe(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,jt.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let r=Ge();this.qe.forEach(((a,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const s=new $u(e,t,this.Qe,this.ke,r);return this.ke=cr(),this.qe=rw(),this.Qe=new Tt(ze),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new nw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new yt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nw),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function rw(){return new Tt(fe.comparator)}function iw(){return new Tt(fe.comparator)}const p1={asc:"ASCENDING",desc:"DESCENDING"},m1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g1={and:"AND",or:"OR"};class y1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gp(n,e){return n.useProto3Json||od(e)?e:{value:e}}function el(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _1(n,e){return el(n,e.toTimestamp())}function Vn(n){return xe(!!n),be.fromTimestamp((function(t){const r=qi(t);return new Lt(r.seconds,r.nanos)})(n))}function Bm(n,e){return Wp(n,e).canonicalString()}function Wp(n,e){const t=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function l0(n){const e=ht.fromString(n);return xe(y0(e)),e}function Uh(n,e){return Bm(n.databaseId,e.path)}function bo(n,e){const t=l0(e);if(t.get(1)!==n.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(h0(t))}function u0(n,e){return Bm(n.databaseId,e)}function c0(n){const e=l0(n);return e.length===4?ht.emptyPath():h0(e)}function Hp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function h0(n){return xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function sw(n,e,t){return{name:Uh(n,e),fields:t.value.mapValue.fields}}function v1(n,e,t){const r=bo(n,e.name),s=Vn(e.updateTime),a=e.createTime?Vn(e.createTime):be.min(),u=new An({mapValue:{fields:e.fields}}),h=jt.newFoundDocument(r,s,a,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function w1(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(xe(_===void 0||typeof _=="string"),qt.fromBase64String(_||"")):(xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),qt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const _=m.code===void 0?J.UNKNOWN:i0(m.code);return new he(_,m.message||"")})(u);t=new o0(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bo(n,r.document.name),a=Vn(r.document.updateTime),u=r.document.createTime?Vn(r.document.createTime):be.min(),h=new An({mapValue:{fields:r.document.fields}}),f=jt.newFoundDocument(s,a,u,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new Ih(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bo(n,r.document),a=r.readTime?Vn(r.readTime):be.min(),u=jt.newNoDocument(s,a),h=r.removedTargetIds||[];t=new Ih([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bo(n,r.document),a=r.removedTargetIds||[];t=new Ih([],a,s,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new u1(s,a),h=r.targetId;t=new s0(h,u)}}return t}function jh(n,e){let t;if(e instanceof hl)t={update:sw(n,e.key,e.value)};else if(e instanceof dd)t={delete:Uh(n,e.key)};else if(e instanceof Gi)t={update:sw(n,e.key,e.data),updateMask:A1(e.fieldMask)};else{if(!(e instanceof r0))return Re();t={verify:Uh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const h=u.transform;if(h instanceof ku)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ya)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Xa)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Za)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Re()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:_1(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re()})(n,e.precondition)),t}function Qp(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Pn.updateTime(Vn(a.updateTime)):a.exists!==void 0?Pn.exists(a.exists):Pn.none()})(e.currentDocument):Pn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(u,h){let f=null;if("setToServerValue"in h)xe(h.setToServerValue==="REQUEST_TIME"),f=new ku;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];f=new Ya(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];f=new Xa(_)}else"increment"in h?f=new Za(u,h.increment):Re();const m=Vt.fromServerFormat(h.fieldPath);return new e0(m,f)})(n,s))):[];if(e.update){e.update.name;const s=bo(n,e.update.name),a=new An({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const m=f.fieldPaths||[];return new Yn(m.map((_=>Vt.fromServerFormat(_))))})(e.updateMask);return new Gi(s,a,u,t,r)}return new hl(s,a,t,r)}if(e.delete){const s=bo(n,e.delete);return new dd(s,t)}if(e.verify){const s=bo(n,e.verify);return new r0(s,t)}return Re()}function E1(n,e){return n&&n.length>0?(xe(e!==void 0),n.map((t=>(function(s,a){let u=s.updateTime?Vn(s.updateTime):Vn(a);return u.isEqual(be.min())&&(u=Vn(a)),new o1(u,s.transformResults||[])})(t,e)))):[]}function d0(n,e){return{documents:[u0(n,e.path)]}}function f0(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=u0(n,s);const a=(function(m){if(m.length!==0)return g0(mt.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(I){return{field:Oa(I.field),direction:T1(I.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Gp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:t,parent:s}}function p0(n){let e=c0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){xe(r===1);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const I=m0(w);return I instanceof mt&&Vm(I)?I.getFilters():[I]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((I=>(function(j){return new Oh(Ma(j.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(I)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let I;return I=typeof w=="object"?w.value:w,od(I)?null:I})(t.limit));let f=null;t.startAt&&(f=(function(w){const I=!!w.before,A=w.values||[];return new Qa(A,I)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const I=!w.before,A=w.values||[];return new Qa(A,I)})(t.endAt)),jI(e,s,u,a,h,"F",f,m)}function I1(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function m0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ma(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ma(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ma(t.unaryFilter.field);return tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ma(t.unaryFilter.field);return tt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(n):n.fieldFilter!==void 0?(function(t){return tt.create(Ma(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return mt.create(t.compositeFilter.filters.map((r=>m0(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re()}})(t.compositeFilter.op))})(n):Re()}function T1(n){return p1[n]}function S1(n){return m1[n]}function R1(n){return g1[n]}function Oa(n){return{fieldPath:n.canonicalString()}}function Ma(n){return Vt.fromServerFormat(n.fieldPath)}function g0(n){return n instanceof tt?(function(t){if(t.op==="=="){if(zv(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NAN"}};if(Bv(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zv(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NAN"}};if(Bv(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(t.field),op:S1(t.op),value:t.value}}})(n):n instanceof mt?(function(t){const r=t.getFilters().map((s=>g0(s)));return r.length===1?r[0]:{compositeFilter:{op:R1(t.op),filters:r}}})(n):Re()}function A1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function y0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,r,s,a=be.min(),u=be.min(),h=qt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this.ct=e}}function P1(n,e){let t;if(e.document)t=v1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),s=Bo(e.noDocument.readTime);t=jt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Re();{const r=fe.fromSegments(e.unknownDocument.path),s=Bo(e.unknownDocument.version);t=jt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new Lt(s[0],s[1]);return be.fromTimestamp(a)})(e.readTime)),t}function ow(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,u){return{name:Uh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:el(a,u.version.toTimestamp()),createTime:el(a,u.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jo(e.version)};else{if(!e.isUnknownDocument())return Re();r.unknownDocument={path:t.path.toArray(),version:jo(e.version)}}return r}function Bh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bo(n){const e=new Lt(n.seconds,n.nanoseconds);return be.fromTimestamp(e)}function Ro(n,e){const t=(e.baseMutations||[]).map((a=>Qp(n.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Qp(n.ct,a))),s=Lt.fromMillis(e.localWriteTimeMs);return new Mm(e.batchId,s,t,r)}function ou(n){const e=Bo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bo(n.lastLimboFreeSnapshotVersion):be.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){return xe(a.documents.length===1),hr(ld(c0(a.documents[0])))})(n.query):(function(a){return hr(p0(a))})(n.query),new Ui(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,qt.fromBase64String(n.resumeToken))}function v0(n,e){const t=jo(e.snapshotVersion),r=jo(e.lastLimboFreeSnapshotVersion);let s;s=Mh(e.target)?d0(n.ct,e.target):f0(n.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function w0(n){const e=p0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kp(e,e.limit,"L"):e}function yp(n,e){return new Um(e.largestBatchId,Qp(n.ct,e.overlayMutation))}function aw(n,e){const t=e.path.lastSegment();return[n,Nn(e.path.popLast()),t]}function lw(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:jo(r.readTime),documentKey:Nn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{getBundleMetadata(e,t){return uw(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Bo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return uw(e).put((function(s){return{bundleId:s.id,createTime:jo(Vn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return cw(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:w0(a.bundledQuery),readTime:Bo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return cw(e).put((function(s){return{name:s.name,readTime:jo(Vn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function uw(n){return nn(n,"bundles")}function cw(n){return nn(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new fd(e,r)}getOverlay(e,t){return Yl(e).get(aw(this.userId,t)).next((r=>r?yp(this.serializer,r):null))}getOverlays(e,t){const r=ui();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,u)=>{const h=new Um(t,u);s.push(this.ht(e,h))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((u=>s.add(Nn(u.getCollectionPath()))));const a=[];return s.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(Yl(e).j("collectionPathOverlayIndex",h))})),$.waitFor(a)}getOverlaysForCollection(e,t,r){const s=ui(),a=Nn(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Yl(e).U("collectionPathOverlayIndex",u).next((h=>{for(const f of h){const m=yp(this.serializer,f);s.set(m.getKey(),m)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=ui();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yl(e).J({index:"collectionGroupOverlayIndex",range:h},((f,m,_)=>{const w=yp(this.serializer,m);a.size()<s||w.largestBatchId===u?(a.set(w.getKey(),w),u=w.largestBatchId):_.done()})).next((()=>a))}ht(e,t){return Yl(e).put((function(s,a,u){const[h,f,m]=aw(a,u.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:jh(s.ct,u.mutation)}})(this.serializer,this.userId,t))}}function Yl(n){return nn(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{Pt(e){return nn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t?.value;return r?qt.fromUint8Array(r):qt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(kt(e.integerValue));else if("doubleValue"in e){const r=kt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Su(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=qi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Us(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?xI(e)?this.dt(t,Number.MAX_SAFE_INTEGER):ad(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Re()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const s of Object.keys(r))this.Vt(s,t),this.Tt(r[s],t)}wt(e,t){var r,s;const a=e.fields||{};this.dt(t,53);const u="value",h=((s=(r=a[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(t,15),t.At(kt(h)),this.Vt(u,t),this.Tt(a[u],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const s of r)this.Tt(s,t)}yt(e,t){this.dt(t,37),fe.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Ao.vt=new Ao;function x1(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function hw(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const u=x1(255&r[a]);if(s+=u,u!==8)break}return s})(n);return Math.ceil(e/8)}class D1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=t.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const t=this.qt(e),r=hw(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Kt(e){const t=this.qt(e),r=hw(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class b1{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class N1{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Xl{constructor(){this.jt=new D1,this.Ht=new b1(this.jt),this.Jt=new N1(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Po(this.indexId,this.documentKey,this.arrayValue,r)}}function Ts(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=dw(n.arrayValue,e.arrayValue),t!==0?t:(t=dw(n.directionalValue,e.directionalValue),t!==0?t:fe.comparator(n.documentKey,e.documentKey)))}function dw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.Xt=new yt(((t,r)=>Vt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(xe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Mp(e);if(t!==void 0&&!this.sn(t))return!1;const r=Eo(e);let s=new Set,a=0,u=0;for(;a<r.length&&this.sn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Xt.size>0){const h=this.Xt.getIterator().getNext();if(!s.has(h.field.canonicalString())){const f=r[a];if(!this.on(h,f)||!this._n(this.en[u++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(u>=this.en.length||!this._n(this.en[u++],h))return!1}return!0}an(){if(this.nn)return null;let e=new yt(Vt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new yh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new yh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new yh(r.field,r.dir==="asc"?0:1)));return new Lh(Lh.UNKNOWN_ID,this.collectionId,t,Tu.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n){var e,t;if(xe(n instanceof tt||n instanceof mt),n instanceof tt){if(n instanceof UI){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>tt.create(n.field,"==",a))))||[];return mt.create(s,"or")}return n}const r=n.filters.map((s=>E0(s)));return mt.create(r,n.op)}function V1(n){if(n.getFilters().length===0)return[];const e=Xp(E0(n));return xe(I0(e)),Jp(e)||Yp(e)?[e]:e.getFilters()}function Jp(n){return n instanceof tt}function Yp(n){return n instanceof mt&&Vm(n)}function I0(n){return Jp(n)||Yp(n)||(function(t){if(t instanceof mt&&Bp(t)){for(const r of t.getFilters())if(!Jp(r)&&!Yp(r))return!1;return!0}return!1})(n)}function Xp(n){if(xe(n instanceof tt||n instanceof mt),n instanceof tt)return n;if(n.filters.length===1)return Xp(n.filters[0]);const e=n.filters.map((r=>Xp(r)));let t=mt.create(e,n.op);return t=zh(t),I0(t)?t:(xe(t instanceof mt),xe(Ja(t)),xe(t.filters.length>1),t.filters.reduce(((r,s)=>zm(r,s))))}function zm(n,e){let t;return xe(n instanceof tt||n instanceof mt),xe(e instanceof tt||e instanceof mt),t=n instanceof tt?e instanceof tt?(function(s,a){return mt.create([s,a],"and")})(n,e):pw(n,e):e instanceof tt?pw(e,n):(function(s,a){if(xe(s.filters.length>0&&a.filters.length>0),Ja(s)&&Ja(a))return OI(s,a.getFilters());const u=Bp(s)?s:a,h=Bp(s)?a:s,f=u.filters.map((m=>zm(m,h)));return mt.create(f,"or")})(n,e),zh(t)}function pw(n,e){if(Ja(e))return OI(e,n.getFilters());{const t=e.filters.map((r=>zm(n,r)));return mt.create(t,"or")}}function zh(n){if(xe(n instanceof tt||n instanceof mt),n instanceof tt)return n;const e=n.getFilters();if(e.length===1)return zh(e[0]);if(VI(n))return n;const t=e.map((s=>zh(s))),r=[];return t.forEach((s=>{s instanceof tt?r.push(s):s instanceof mt&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:mt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.un=new $m}addToCollectionParentIndex(e,t){return this.un.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(dr.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class $m{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new yt(ht.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new yt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Uint8Array(0);class O1{constructor(e,t){this.databaseId=t,this.cn=new $m,this.ln=new Gs((r=>Uo(r)),((r,s)=>ju(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const a={collectionId:r,parent:Nn(s)};return mw(e).put(a)}return $.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[yI(t),""],!1,!0);return mw(e).U(s).next((a=>{for(const u of a){if(u.collectionId!==t)break;r.push(li(u.parent))}return r}))}addFieldIndex(e,t){const r=Zl(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const u=Da(e);return a.next((h=>{u.put(lw(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Zl(e),s=Da(e),a=xa(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Zl(e),r=xa(e),s=Da(e);return t.j().next((()=>r.j())).next((()=>s.j()))}createTargetIndexes(e,t){return $.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new fw(r).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=xa(e);let s=!0;const a=new Map;return $.forEach(this.hn(t),(u=>this.Pn(e,u).next((h=>{s&&(s=!!h),a.set(u,h)})))).next((()=>{if(s){let u=Ge();const h=[];return $.forEach(a,((f,m)=>{te("IndexedDbIndexManager",`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((le=>`${le.fieldPath}:${le.kind}`)).join(",")}`})(f)} to execute ${Uo(t)}`);const _=(function(ee,le){const de=Mp(le);if(de===void 0)return null;for(const me of Fh(ee,de.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null})(m,f),w=(function(ee,le){const de=new Map;for(const me of Eo(le))for(const T of Fh(ee,me.fieldPath))switch(T.op){case"==":case"in":de.set(me.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return de.set(me.fieldPath.canonicalString(),T.value),Array.from(de.values())}return null})(m,f),I=(function(ee,le){const de=[];let me=!0;for(const T of Eo(le)){const R=T.kind===0?Wv(ee,T.fieldPath,ee.startAt):Hv(ee,T.fieldPath,ee.startAt);de.push(R.value),me&&(me=R.inclusive)}return new Qa(de,me)})(m,f),A=(function(ee,le){const de=[];let me=!0;for(const T of Eo(le)){const R=T.kind===0?Hv(ee,T.fieldPath,ee.endAt):Wv(ee,T.fieldPath,ee.endAt);de.push(R.value),me&&(me=R.inclusive)}return new Qa(de,me)})(m,f),j=this.In(f,m,I),M=this.In(f,m,A),U=this.Tn(f,m,w),ae=this.En(f.indexId,_,j,I.inclusive,M,A.inclusive,U);return $.forEach(ae,(H=>r.G(H,t.limit).next((ee=>{ee.forEach((le=>{const de=fe.fromSegments(le.documentKey);u.has(de)||(u=u.add(de),h.push(de))}))}))))})).next((()=>h))}return $.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=V1(mt.create(e.filters,"and")).map((r=>$p(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,s,a,u,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),m=f/(t!=null?t.length:1),_=[];for(let w=0;w<f;++w){const I=t?this.dn(t[w/m]):oh,A=this.An(e,I,r[w%m],s),j=this.Rn(e,I,a[w%m],u),M=h.map((U=>this.An(e,I,U,!0)));_.push(...this.createRange(A,j,M))}return _}An(e,t,r,s){const a=new Po(e,fe.empty(),t,r);return s?a:a.Zt()}Rn(e,t,r,s){const a=new Po(e,fe.empty(),t,r);return s?a.Zt():a}Pn(e,t){const r=new fw(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let u=null;for(const h of a)r.rn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,t){let r=2;const s=this.hn(t);return $.forEach(s,(a=>this.Pn(e,a).next((u=>{u?r!==0&&u.fields.length<(function(f){let m=new yt(Vt.comparator),_=!1;for(const w of f.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?_=!0:m=m.add(I.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(_?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&s.length>1&&r===2?1:r))}Vn(e,t){const r=new Xl;for(const s of Eo(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const u=r.Yt(s.kind);Ao.vt.It(a,u)}return r.zt()}dn(e){const t=new Xl;return Ao.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Xl;return Ao.vt.It(Pu(this.databaseId,t),r.Yt((function(a){const u=Eo(a);return u.length===0?0:u[u.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let s=[];s.push(new Xl);let a=0;for(const u of Eo(e)){const h=r[a++];for(const f of s)if(this.fn(t,u.fieldPath)&&Cu(h))s=this.gn(s,u,h);else{const m=f.Yt(u.kind);Ao.vt.It(h,m)}}return this.pn(s)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const s=[...e],a=[];for(const u of r.arrayValue.values||[])for(const h of s){const f=new Xl;f.seed(h.zt()),Ao.vt.It(u,f.Yt(t.kind)),a.push(f)}return a}fn(e,t){return!!e.filters.find((r=>r instanceof tt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Zl(e),s=Da(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((a=>{const u=[];return $.forEach(a,(h=>s.get([h.indexId,this.uid]).next((f=>{u.push((function(_,w){const I=w?new Tu(w.sequenceNumber,new dr(Bo(w.readTime),new fe(li(w.documentKey)),w.largestBatchId)):Tu.empty(),A=_.fields.map((([j,M])=>new yh(Vt.fromServerFormat(j),M)));return new Lh(_.indexId,_.collectionGroup,A,I)})(h,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:ze(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Zl(e),a=Da(e);return this.yn(e).next((u=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((h=>$.forEach(h,(f=>a.put(lw(f.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return $.forEach(t,((s,a)=>{const u=r.get(s.collectionGroup);return(u?$.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(r.set(s.collectionGroup,h),$.forEach(h,(f=>this.wn(e,s,f).next((m=>{const _=this.Sn(a,f);return m.isEqual(_)?$.resolve():this.bn(e,a,f,m,_)})))))))}))}Dn(e,t,r,s){return xa(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,s){return xa(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=xa(e);let a=new yt(Ts);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((u,h)=>{a=a.add(new Po(r.indexId,t,h.arrayValue,h.directionalValue))})).next((()=>a))}Sn(e,t){let r=new yt(Ts);const s=this.Vn(t,e);if(s==null)return r;const a=Mp(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Cu(u))for(const h of u.arrayValue.values||[])r=r.add(new Po(t.indexId,e.key,this.dn(h),s))}else r=r.add(new Po(t.indexId,e.key,oh,s));return r}bn(e,t,r,s,a){te("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return(function(f,m,_,w,I){const A=f.getIterator(),j=m.getIterator();let M=ka(A),U=ka(j);for(;M||U;){let ae=!1,H=!1;if(M&&U){const ee=_(M,U);ee<0?H=!0:ee>0&&(ae=!0)}else M!=null?H=!0:ae=!0;ae?(w(U),U=ka(j)):H?(I(M),M=ka(A)):(M=ka(A),U=ka(j))}})(s,a,Ts,(h=>{u.push(this.Dn(e,t,r,h))}),(h=>{u.push(this.vn(e,t,r,h))})),$.waitFor(u)}yn(e){let t=1;return Da(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,h)=>Ts(u,h))).filter(((u,h,f)=>!h||Ts(u,f[h-1])!==0));const s=[];s.push(e);for(const u of r){const h=Ts(u,e),f=Ts(u,t);if(h===0)s[0]=e.Zt();else if(h>0&&f<0)s.push(u),s.push(u.Zt());else if(f>0)break}s.push(t);const a=[];for(let u=0;u<s.length;u+=2){if(this.Cn(s[u],s[u+1]))return[];const h=[s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,oh,[]],f=[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,oh,[]];a.push(IDBKeyRange.bound(h,f))}return a}Cn(e,t){return Ts(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gw)}getMinOffset(e,t){return $.mapArray(this.hn(t),(r=>this.Pn(e,r).next((s=>s||Re())))).next(gw)}}function mw(n){return nn(n,"collectionParents")}function xa(n){return nn(n,"indexEntries")}function Zl(n){return nn(n,"indexConfiguration")}function Da(n){return nn(n,"indexState")}function gw(n){xe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;km(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new dr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const f=r.J({range:u},((_,w,I)=>(h++,I.delete())));a.push(f.next((()=>{xe(h===1)})));const m=[];for(const _ of t.mutations){const w=SI(e,_.key.path,t.batchId);a.push(s.delete(w)),m.push(_.key)}return $.waitFor(a).next((()=>m))}function $h(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Re();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(41943040,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);class pd{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,t,r,s){xe(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new pd(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ss(e).J({index:"userMutationsIndex",range:r},((s,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=Fa(e),u=Ss(e);return u.add({}).next((h=>{xe(typeof h=="number");const f=new Mm(h,t,r,s),m=(function(A,j,M){const U=M.baseMutations.map((H=>jh(A.ct,H))),ae=M.mutations.map((H=>jh(A.ct,H)));return{userId:j,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:U,mutations:ae}})(this.serializer,this.userId,f),_=[];let w=new yt(((I,A)=>ze(I.canonicalString(),A.canonicalString())));for(const I of s){const A=SI(this.userId,I.key.path,h);w=w.add(I.key.path.popLast()),_.push(u.put(m)),_.push(a.put(A,Ex))}return w.forEach((I=>{_.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Fn[h]=f.keys()})),$.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return Ss(e).get(t).next((r=>r?(xe(r.userId===this.userId),Ro(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?$.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Fn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ss(e).J({index:"userMutationsIndex",range:s},((u,h,f)=>{h.userId===this.userId&&(xe(h.batchId>=r),a=Ro(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ss(e).J({index:"userMutationsIndex",range:t,reverse:!0},((s,a,u)=>{r=a.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ss(e).U("userMutationsIndex",t).next((r=>r.map((s=>Ro(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_h(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return Fa(e).J({range:s},((u,h,f)=>{const[m,_,w]=u,I=li(_);if(m===this.userId&&t.path.isEqual(I))return Ss(e).get(w).next((A=>{if(!A)throw Re();xe(A.userId===this.userId),a.push(Ro(this.serializer,A))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(ze);const s=[];return t.forEach((a=>{const u=_h(this.userId,a.path),h=IDBKeyRange.lowerBound(u),f=Fa(e).J({range:h},((m,_,w)=>{const[I,A,j]=m,M=li(A);I===this.userId&&a.path.isEqual(M)?r=r.add(j):w.done()}));s.push(f)})),$.waitFor(s).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=_h(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new yt(ze);return Fa(e).J({range:u},((f,m,_)=>{const[w,I,A]=f,j=li(I);w===this.userId&&r.isPrefixOf(j)?j.length===s&&(h=h.add(A)):_.done()})).next((()=>this.xn(e,h)))}xn(e,t){const r=[],s=[];return t.forEach((a=>{s.push(Ss(e).get(a).next((u=>{if(u===null)throw Re();xe(u.userId===this.userId),r.push(Ro(this.serializer,u))})))})),$.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return T0(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),$.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),s=[];return Fa(e).J({range:r},((a,u,h)=>{if(a[0]===this.userId){const f=li(a[1]);s.push(f)}else h.done()})).next((()=>{xe(s.length===0)}))}))}containsKey(e,t){return S0(e,this.userId,t)}Nn(e){return R0(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function S0(n,e,t){const r=_h(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Fa(n).J({range:a,H:!0},((h,f,m)=>{const[_,w,I]=h;_===e&&w===s&&(u=!0),m.done()})).next((()=>u))}function Ss(n){return nn(n,"mutations")}function Fa(n){return nn(n,"documentMutations")}function R0(n){return nn(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zo(0)}static kn(){return new zo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new zo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>be.fromTimestamp(new Lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Qn(e,s))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ba(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(xe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return ba(e).J(((u,h)=>{const f=ou(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>$.waitFor(a))).next((()=>s))}forEachTarget(e,t){return ba(e).J(((r,s)=>{const a=ou(s);t(a)}))}qn(e){return _w(e).get("targetGlobalKey").next((t=>(xe(t!==null),t)))}Qn(e,t){return _w(e).put("targetGlobalKey",t)}Kn(e,t){return ba(e).put(v0(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Uo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ba(e).J({range:s,index:"queryTargetsIndex"},((u,h,f)=>{const m=ou(h);ju(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=xs(e);return t.forEach((u=>{const h=Nn(u.path);s.push(a.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))})),$.waitFor(s)}removeMatchingKeys(e,t,r){const s=xs(e);return $.forEach(t,(a=>{const u=Nn(a.path);return $.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=xs(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=xs(e);let a=Ge();return s.J({range:r,H:!0},((u,h,f)=>{const m=li(u[1]),_=new fe(m);a=a.add(_)})).next((()=>a))}containsKey(e,t){const r=Nn(t.path),s=IDBKeyRange.bound([r],[yI(r)],!1,!0);let a=0;return xs(e).J({index:"documentTargetsIndex",H:!0,range:s},(([u,h],f,m)=>{u!==0&&(a++,m.done())})).next((()=>a>0))}ot(e,t){return ba(e).get(t).next((r=>r?ou(r):null))}}function ba(n){return nn(n,"targets")}function _w(n){return nn(n,"targetGlobal")}function xs(n){return nn(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw([n,e],[t,r]){const s=ze(n,t);return s===0?ze(e,r):s}class F1{constructor(e){this.Un=e,this.buffer=new yt(vw),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ks(t)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await qs(t)}await this.Hn(3e5)}))}}class j1{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Jn.oe);const r=new F1(t);return this.Jn.forEachTarget(e,(s=>r.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>r.zn(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(yw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yw):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,s,a,u,h,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),Va()<=et.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w}))))}}function B1(n,e){return new j1(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t){this.db=e,this.garbageCollector=B1(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,s)=>t(s)))}addReference(e,t,r){return ah(e,r)}removeReference(e,t,r){return ah(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ah(e,t)}nr(e,t){return(function(s,a){let u=!1;return R0(s).Y((h=>S0(s,h,a).next((f=>(f&&(u=!0),$.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.tr(e,((u,h)=>{if(h<=t){const f=this.nr(e,u).next((m=>{if(!m)return a++,r.getEntry(e,u).next((()=>(r.removeEntry(u,be.min()),xs(e).delete((function(w){return[0,Nn(w.path)]})(u)))))}));s.push(f)}})).next((()=>$.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ah(e,t)}tr(e,t){const r=xs(e);let s,a=Jn.oe;return r.J({index:"documentTargetsIndex"},(([u,h],{path:f,sequenceNumber:m})=>{u===0?(a!==Jn.oe&&t(new fe(li(s)),a),a=m,s=f):a=Jn.oe})).next((()=>{a!==Jn.oe&&t(new fe(li(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ah(n,e){return xs(n).put((function(r,s){return{targetId:0,path:Nn(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.changes=new Gs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return vo(e).put(r)}removeEntry(e,t,r){return vo(e).delete((function(a,u){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Bh(u),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=jt.newInvalidDocument(t);return vo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(eu(t))},((s,a)=>{r=this.ir(t,a)})).next((()=>r))}sr(e,t){let r={size:0,document:jt.newInvalidDocument(t)};return vo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(eu(t))},((s,a)=>{r={document:this.ir(t,a),size:$h(a)}})).next((()=>r))}getEntries(e,t){let r=cr();return this._r(e,t,((s,a)=>{const u=this.ir(s,a);r=r.insert(s,u)})).next((()=>r))}ar(e,t){let r=cr(),s=new Tt(fe.comparator);return this._r(e,t,((a,u)=>{const h=this.ir(a,u);r=r.insert(a,h),s=s.insert(a,$h(u))})).next((()=>({documents:r,ur:s})))}_r(e,t,r){if(t.isEmpty())return $.resolve();let s=new yt(Iw);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(eu(s.first()),eu(s.last())),u=s.getIterator();let h=u.getNext();return vo(e).J({index:"documentKeyIndex",range:a},((f,m,_)=>{const w=fe.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;h&&Iw(h,w)<0;)r(h,null),h=u.getNext();h&&h.isEqual(w)&&(r(h,m),h=u.hasNext()?u.getNext():null),h?_.$(eu(h)):_.done()})).next((()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),Bh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vo(e).U(IDBKeyRange.bound(h,f,!0)).next((m=>{a?.incrementDocumentReadCount(m.length);let _=cr();for(const w of m){const I=this.ir(fe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);I.isFoundDocument()&&(zu(t,I)||s.has(I.key))&&(_=_.insert(I.key,I))}return _}))}getAllFromCollectionGroup(e,t,r,s){let a=cr();const u=Ew(t,r),h=Ew(t,dr.max());return vo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},((f,m,_)=>{const w=this.ir(fe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===s&&_.done()})).next((()=>a))}newChangeBuffer(e){return new q1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return ww(e).get("remoteDocumentGlobalKey").next((t=>(xe(!!t),t)))}rr(e,t){return ww(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=P1(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return jt.newInvalidDocument(e)}}function P0(n){return new $1(n)}class q1 extends A0{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Gs((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new yt(((a,u)=>ze(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const h=this.lr.get(a);if(t.push(this.cr.removeEntry(e,a,h.readTime)),u.isValidDocument()){const f=ow(this.cr.serializer,u);s=s.add(a.path.popLast());const m=$h(f);r+=m-h.size,t.push(this.cr.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=ow(this.cr.serializer,u.convertToNoDocument(be.min()));t.push(this.cr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.cr.updateMetadata(e,r)),$.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:s})=>(s.forEach(((a,u)=>{this.lr.set(a,{size:u,readTime:r.get(a).readTime})})),r)))}}function ww(n){return nn(n,"remoteDocumentGlobal")}function vo(n){return nn(n,"remoteDocumentsV14")}function eu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ew(n,e){const t=e.documentKey.path.toArray();return[n,Bh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Iw(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=ze(t[a],r[a]),s)return s;return s=ze(t.length,r.length),s||(s=ze(t[t.length-2],r[r.length-2]),s||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&fu(r.mutation,s,Yn.empty(),Lt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const s=ui();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=iu();return a.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=ui();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,r,s){let a=cr();const u=du(),h=(function(){return du()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof Gi)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),fu(_.mutation,m,_.mutation.getFieldMask(),Lt.now())):u.set(m.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var w;return h.set(m,new K1(_,(w=u.get(m))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,t){const r=du();let s=new Tt(((u,h)=>u-h)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||Yn.empty();_=h.applyToLocalView(m,_),r.set(f,_);const w=(s.get(h.batchId)||Ge()).add(f);s=s.insert(h.batchId,w)}))})).next((()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,_=f.value,w=WI();_.forEach((I=>{if(!a.has(I)){const A=t0(t.get(I),r.get(I));A!==null&&w.set(I,A),a=a.add(I)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return $.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return fe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):$.resolve(ui());let h=-1,f=a;return u.next((m=>$.forEach(m,((_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(_)?$.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{f=f.insert(_,I)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ge()))).next((_=>({batchId:h,changes:GI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((r=>{let s=iu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,a).next((h=>$.forEach(h,(f=>{const m=(function(w,I){return new Bu(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((w,I)=>{u=u.insert(w,I)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,jt.newInvalidDocument(_)))}));let h=iu();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&fu(_.mutation,m,Yn.empty(),Lt.now()),zu(t,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return $.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Vn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:w0(s.bundledQuery),readTime:Vn(s.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.overlays=new Tt(fe.comparator),this.Ir=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ui();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.ht(e,t,a)})),$.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const s=ui(),a=t.length+1,u=new fe(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Tt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=ui(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=ui(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>h.set(m,_))),!(h.size()>=s)););return $.resolve(h)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Um(t,r));let a=this.Ir.get(t);a===void 0&&(a=Ge(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.Tr=new yt(un.Er),this.dr=new yt(un.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new un(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new un(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new fe(new ht([])),r=new un(t,e),s=new un(t,e+1),a=[];return this.dr.forEachInRange([r,s],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new fe(new ht([])),r=new un(t,e),s=new un(t,e+1);let a=Ge();return this.dr.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new un(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class un{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return fe.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new yt(un.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Mm(a,t,r,s);this.mutationQueue.push(u);for(const h of s)this.br=this.br.add(new un(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(u)}lookupMutationBatch(e,t){return $.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),a=s<0?0:s;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new un(t,0),s=new un(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(u=>{const h=this.Dr(u.wr);a.push(h)})),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(ze);return t.forEach((s=>{const a=new un(s,0),u=new un(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(h=>{r=r.add(h.wr)}))})),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;fe.isDocumentKey(a)||(a=a.child(""));const u=new un(new fe(a),0);let h=new yt(ze);return this.br.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.wr)),!0)}),u),$.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){xe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(t.mutations,(s=>{const a=new un(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new un(t,0),s=this.br.firstAfterOrEqual(r);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.Mr=e,this.docs=(function(){return new Tt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let r=cr();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():jt.newInvalidDocument(s))})),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=cr();const u=t.path,h=new fe(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||km(vI(_),r)<=0||(s.has(_.key)||zu(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Re()}Or(e,t){return $.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Y1(this)}getSize(e){return $.resolve(this.size)}}class Y1 extends A0{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),$.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.persistence=e,this.Nr=new Gs((t=>Uo(t)),ju),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qm,this.targetCount=0,this.kr=zo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),$.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new zo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Kn(t),$.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Nr.forEach(((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),$.waitFor(a).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Jn(0),this.Kr=!1,this.Kr=!0,this.$r=new H1,this.referenceDelegate=e(this),this.Ur=new X1(this),this.indexManager=new L1,this.remoteDocumentCache=(function(s){return new J1(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new _0(t),this.Gr=new G1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new W1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Q1(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);const s=new Z1(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,t){return $.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class Z1 extends EI{constructor(e){super(),this.currentSequenceNumber=e}}class md{constructor(e){this.persistence=e,this.Jr=new qm,this.Yr=null}static Zr(e){return new md(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),$.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,(r=>{const s=fe.fromPath(r);return this.ei(e,s).next((a=>{a||t.removeEntry(s,be.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return $.or([()=>$.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.serializer=e}O(e,t,r,s){const a=new sd("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore("owner")})(e),(function(f){f.createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ov,{unique:!0}),f.createObjectStore("documentMutations")})(e),Tw(e),(function(f){f.createObjectStore("remoteDocuments")})(e));let u=$.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")})(e),Tw(e)),u=u.next((()=>(function(f){const m=f.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",_)})(a)))),r<4&&s>=4&&(r!==0&&(u=u.next((()=>(function(f,m){return m.store("mutations").U().next((_=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ov,{unique:!0});const w=m.store("mutations"),I=_.map((A=>w.put(A)));return $.waitFor(I)}))})(e,a)))),u=u.next((()=>{(function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&s>=5&&(u=u.next((()=>this.ni(a)))),r<6&&s>=6&&(u=u.next((()=>((function(f){f.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),r<7&&s>=7&&(u=u.next((()=>this.ii(a)))),r<8&&s>=8&&(u=u.next((()=>this.si(e,a)))),r<9&&s>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(u=u.next((()=>this.oi(a)))),r<11&&s>=11&&(u=u.next((()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(f){f.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&s>=12&&(u=u.next((()=>{(function(f){const m=f.createObjectStore("documentOverlays",{keyPath:Nx});m.createIndex("collectionPathOverlayIndex",Vx,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Lx,{unique:!1})})(e)}))),r<13&&s>=13&&(u=u.next((()=>(function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:Ix});m.createIndex("documentKeyIndex",Tx),m.createIndex("collectionGroupIndex",Sx)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&s>=14&&(u=u.next((()=>this.ai(e,a)))),r<15&&s>=15&&(u=u.next((()=>(function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:kx}).createIndex("sequenceNumberIndex",xx,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Dx}).createIndex("documentKeyIndex",bx,{unique:!1})})(e)))),r<16&&s>=16&&(u=u.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&s>=17&&(u=u.next((()=>{(function(f){f.createObjectStore("globals",{keyPath:"name"})})(e)}))),u}ri(e){let t=0;return e.store("remoteDocuments").J(((r,s)=>{t+=$h(s)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((s=>$.forEach(s,(a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",u).next((h=>$.forEach(h,(f=>{xe(f.userId===a.userId);const m=Ro(this.serializer,f);return T0(e,a.userId,m).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const a=[];return r.J(((u,h)=>{const f=new ht(u),m=(function(w){return[0,Nn(w)]})(f);a.push(t.get(m).next((_=>_?$.resolve():(w=>t.put({targetId:0,path:Nn(w),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>$.waitFor(a)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:Cx});const r=t.store("collectionParents"),s=new $m,a=u=>{if(s.add(u)){const h=u.lastSegment(),f=u.popLast();return r.put({collectionId:h,parent:Nn(f)})}};return t.store("remoteDocuments").J({H:!0},((u,h)=>{const f=new ht(u);return a(f.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([u,h,f],m)=>{const _=li(h);return a(_.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,s)=>{const a=ou(s),u=v0(this.serializer,a);return t.put(u)}))}_i(e,t){const r=t.store("remoteDocuments"),s=[];return r.J(((a,u)=>{const h=t.store("remoteDocumentsV14"),f=(function(w){return w.document?new fe(ht.fromString(w.document.name).popFirst(5)):w.noDocument?fe.fromSegments(w.noDocument.path):w.unknownDocument?fe.fromSegments(w.unknownDocument.path):Re()})(u).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(m))})).next((()=>$.waitFor(s)))}ai(e,t){const r=t.store("mutations"),s=P0(this.serializer),a=new k0(md.Zr,this.serializer.ct);return r.U().next((u=>{const h=new Map;return u.forEach((f=>{var m;let _=(m=h.get(f.userId))!==null&&m!==void 0?m:Ge();Ro(this.serializer,f).keys().forEach((w=>_=_.add(w))),h.set(f.userId,_)})),$.forEach(h,((f,m)=>{const _=new Rn(m),w=fd.lt(this.serializer,_),I=a.getIndexManager(_),A=pd.lt(_,this.serializer,I,a.referenceDelegate);return new C0(s,A,w,I).recalculateAndSaveOverlaysForDocumentKeys(new Fp(t,Jn.oe),f).next()}))}))}}function Tw(n){n.createObjectStore("targetDocuments",{keyPath:Ax}).createIndex("documentTargetsIndex",Px,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rx,{unique:!0}),n.createObjectStore("targetGlobal")}const _p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Km{constructor(e,t,r,s,a,u,h,f,m,_,w=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=a,this.window=u,this.document=h,this.ci=m,this.li=_,this.hi=w,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=I=>Promise.resolve(),!Km.D())throw new he(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new z1(this,s),this.Ai=t+"main",this.serializer=new _0(f),this.Ri=new Os(this.Ai,this.hi,new eD(this.serializer)),this.$r=new k1,this.Ur=new M1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=P0(this.serializer),this.Gr=new C1,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,_===!1&&$t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(J.FAILED_PRECONDITION,_p);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Jn(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Ks(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return tu(e).get("owner").next((t=>$.resolve(this.vi(t))))}Ci(e){return lh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=nn(t,"clientMetadata");return r.U().next((s=>{const a=this.xi(s,18e5),u=s.filter((h=>a.indexOf(h)===-1));return $.forEach(u,(h=>r.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):tu(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new he(J.FAILED_PRECONDITION,_p);return!1}}return!(!this.networkEnabled||!this.inForeground)||lh(e).U().next((r=>this.xi(r,5e3).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(a||u&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&te("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Fp(e,Jn.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>lh(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return pd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new O1(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return fd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){te("IndexedDbPersistence","Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===17?Fx:f===16?Mx:f===15?Dm:f===14?PI:f===13?AI:f===12?Ox:f===11?RI:void Re()})(this.hi);let u;return this.Ri.runTransaction(e,s,a,(h=>(u=new Fp(h,this.Qr?this.Qr.next():Jn.oe),t==="readwrite-primary"?this.wi(u).next((f=>!!f||this.Si(u))).next((f=>{if(!f)throw $t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new he(J.FAILED_PRECONDITION,wI);return r(u)})).next((f=>this.Di(u).next((()=>f)))):this.Ki(u).next((()=>r(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Ki(e){return tu(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(J.FAILED_PRECONDITION,_p)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tu(e).put("owner",t)}static D(){return Os.D()}bi(e){const t=tu(e);return t.get("owner").next((r=>this.vi(r)?(te("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||($t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;SE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){$t("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tu(n){return nn(n,"owner")}function lh(n){return nn(n,"clientMetadata")}function x0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Ge(),s=Ge();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Gm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return SE()?8:II(tn())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new tD;return this.Xi(e,t,u).next((h=>{if(a.result=h,this.zi)return this.es(e,t,u,h.size)}))})).next((()=>a.result))}es(e,t,r,s){return r.documentReadCount<this.ji?(Va()<=et.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Va()<=et.DEBUG&&te("QueryEngine","Query:",La(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Va()<=et.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(t))):$.resolve())}Yi(e,t){if(Qv(t))return $.resolve(null);let r=hr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Kp(t,null,"F"),r=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ge(...a);return this.Ji.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.ts(t,h);return this.ns(t,m,u,f.readTime)?this.Yi(e,Kp(t,null,"F")):this.rs(e,m,t,f)}))))})))))}Zi(e,t,r,s){return Qv(t)||s.isEqual(be.min())?$.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const u=this.ts(t,a);return this.ns(t,u,r,s)?$.resolve(null):(Va()<=et.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),La(t)),this.rs(e,u,t,_I(s,-1)).next((h=>h)))}))}ts(e,t){let r=new yt(qI(e));return t.forEach(((s,a)=>{zu(e,a)&&(r=r.add(a))})),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,t,r){return Va()<=et.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",La(t)),this.Ji.getDocumentsMatchingQuery(e,t,dr.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new Tt(ze),this._s=new Gs((a=>Uo(a)),ju),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function b0(n,e,t,r){return new nD(n,e,t,r)}async function N0(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],h=[];let f=Ge();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){h.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({hs:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function rD(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,_){const w=m.batch,I=w.keys();let A=$.resolve();return I.forEach((j=>{A=A.next((()=>_.getEntry(f,j))).next((M=>{const U=m.docVersions.get(j);xe(U!==null),M.version.compareTo(U)<0&&(w.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),_.addEntry(M)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Ge();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function V0(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function iD(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const h=[];e.targetChanges.forEach(((_,w)=>{const I=s.get(w);if(!I)return;h.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,w))));let A=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(qt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,r)),s=s.insert(w,A),(function(M,U,ae){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(I,A,_)&&h.push(t.Ur.updateTargetData(a,A))}));let f=cr(),m=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(sD(a,u,e.documentUpdates).next((_=>{f=_.Ps,m=_.Is}))),!r.isEqual(be.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((w=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return $.waitFor(h).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.os=s,a)))}function sD(n,e,t){let r=Ge(),s=Ge();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=cr();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(be.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):te("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{Ps:u,Is:s}}))}function oD(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function qh(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Ur.getTargetData(r,e).next((a=>a?(s=a,$.resolve(s)):t.Ur.allocateTargetId(r).next((u=>(s=new Ui(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function tl(n,e,t){const r=Pe(n),s=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Ks(u))throw u;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Zp(n,e,t){const r=Pe(n);let s=be.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const w=Pe(f),I=w._s.get(_);return I!==void 0?$.resolve(w.os.get(I)):w.Ur.getTargetData(m,_)})(r,u,hr(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,t?s:be.min(),t?a:Ge()))).next((h=>(M0(r,$I(e),h),{documents:h,Ts:a})))))}function L0(n,e){const t=Pe(n),r=Pe(t.Ur),s=t.os.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>r.ot(a,e).next((u=>u?u.target:null))))}function O0(n,e){const t=Pe(n),r=t.us.get(e)||be.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.cs.getAllFromCollectionGroup(s,e,_I(r,-1),Number.MAX_SAFE_INTEGER))).then((s=>(M0(t,e,s),s)))}function M0(n,e,t){let r=n.us.get(e)||be.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.us.set(e,r)}function Sw(n,e){return`firestore_clients_${n}_${e}`}function Rw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function vp(n,e){return`firestore_targets_${n}_${e}`}class Kh{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Rs(e,t,r){const s=JSON.parse(r);let a,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(a=new he(s.error.code,s.error.message))),u?new Kh(e,t,s.state,a):($t("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let s,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new he(r.error.code,r.error.message))),a?new pu(e,r.state,s):($t("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,a=Lm();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=TI(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return s?new Gh(e,a):($t("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Wm{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Wm(t.clientId,t.onlineState):($t("SharedClientState",`Failed to parse online state: ${e}`),null)}}class em{constructor(){this.activeTargetIds=Lm()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wp{constructor(e,t,r,s,a){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Tt(ze),this.started=!1,this.bs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=Sw(this.persistenceKey,this.ps),this.vs=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new em),this.Cs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.xs=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.Os=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(Sw(this.persistenceKey,r));if(s){const a=Gh.Rs(r,s);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(vp(this.persistenceKey,e));if(s){const a=pu.Rs(e,s);a&&(r=a.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vp(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Qs(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return te("SharedClientState","READ",e,t),t}setItem(e,t){te("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(te("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void $t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(a){let u=Jn.oe;if(a!=null)try{const h=JSON.parse(a);xe(typeof h=="number"),u=h}catch(h){$t("SharedClientState","Failed to read sequence number from WebStorage",h)}return u})(t.newValue);r!==Jn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const s=new Kh(this.currentUser,e,t,r),a=Rw(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Vs())}Qs(e){const t=Rw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const s=vp(this.persistenceKey,e),a=new pu(e,t,r);this.setItem(s,a.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Gh.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),s=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Kh.Rs(new Rn(a),s,t)}Ys(e,t){const r=this.Ms.exec(e),s=Number(r[1]);return pu.Rs(s,t)}Ls(e){return Wm.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),s=this.ks(this.Ss),a=this.ks(r),u=[],h=[];return a.forEach((f=>{s.has(f)||u.push(f)})),s.forEach((f=>{a.has(f)||h.push(f)})),this.syncEngine.io(u,h).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Lm();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class F0{constructor(){this.so=new em,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new em,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=null;function Ep(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class cD extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(t,r,s,a,u){const h=Ep(),f=this.xo(t,r.toUriEncodedString());te("RestConnection",`Sending RPC '${t}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(t,f,m,s).then((_=>(te("RestConnection",`Received RPC '${t}' ${h}: `,_),_)),(_=>{throw Eu("RestConnection",`RPC '${t}' ${h} failed with error: `,_,"url: ",f,"request:",s),_}))}Lo(t,r,s,a,u,h){return this.Mo(t,r,s,a,u)}Oo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,u)=>t[u]=a)),s&&s.headers.forEach(((a,u)=>t[u]=a))}xo(t,r){const s=lD[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const a=Ep();return new Promise(((u,h)=>{const f=new hI;f.setWithCredentials(!0),f.listenOnce(dI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case gh.NO_ERROR:const _=f.getResponseJson();te(Sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case gh.TIMEOUT:te(Sn,`RPC '${e}' ${a} timed out`),h(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const w=f.getStatus();if(te(Sn,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I?.error;if(A&&A.status&&A.message){const j=(function(U){const ae=U.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ae)>=0?ae:J.UNKNOWN})(A.status);h(new he(j,A.message))}else h(new he(J.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(J.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{te(Sn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);te(Sn,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)}))}Bo(e,t,r){const s=Ep(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=mI(),h=pI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");te(Sn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const w=u.createWebChannel(_,f);let I=!1,A=!1;const j=new uD({Io:U=>{A?te(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(I||(te(Sn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),I=!0),te(Sn,`RPC '${e}' stream ${s} sending:`,U),w.send(U))},To:()=>w.close()}),M=(U,ae,H)=>{U.listen(ae,(ee=>{try{H(ee)}catch(le){setTimeout((()=>{throw le}),0)}}))};return M(w,ru.EventType.OPEN,(()=>{A||(te(Sn,`RPC '${e}' stream ${s} transport opened.`),j.yo())})),M(w,ru.EventType.CLOSE,(()=>{A||(A=!0,te(Sn,`RPC '${e}' stream ${s} transport closed`),j.So())})),M(w,ru.EventType.ERROR,(U=>{A||(A=!0,Eu(Sn,`RPC '${e}' stream ${s} transport errored:`,U),j.So(new he(J.UNAVAILABLE,"The operation could not be completed")))})),M(w,ru.EventType.MESSAGE,(U=>{var ae;if(!A){const H=U.data[0];xe(!!H);const ee=H,le=ee.error||((ae=ee[0])===null||ae===void 0?void 0:ae.error);if(le){te(Sn,`RPC '${e}' stream ${s} received error:`,le);const de=le.status;let me=(function(P){const x=Qt[P];if(x!==void 0)return i0(x)})(de),T=le.message;me===void 0&&(me=J.INTERNAL,T="Unknown error status: "+de+" with message "+le.message),A=!0,j.So(new he(me,T)),w.close()}else te(Sn,`RPC '${e}' stream ${s} received:`,H),j.bo(H)}})),M(h,fI.STAT_EVENT,(U=>{U.stat===Op.PROXY?te(Sn,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Op.NOPROXY&&te(Sn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{j.wo()}),0),j}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){return typeof window<"u"?window:null}function Th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(n){return new y1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t,r,s,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new j0(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?($t(t.toString()),$t("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===t&&this.P_(r,s)}),(r=>{e((()=>{const s=new he(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hD extends B0{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=w1(this.serializer,e),r=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Vn(u.readTime):be.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Hp(this.serializer),t.addTarget=(function(a,u){let h;const f=u.target;if(h=Mh(f)?{documents:d0(a,f)}:{query:f0(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=a0(a,u.resumeToken);const m=Gp(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(be.min())>0){h.readTime=el(a,u.snapshotVersion.toTimestamp());const m=Gp(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=I1(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Hp(this.serializer),t.removeTarget=e,this.a_(t)}}class dD extends B0{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=E1(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Hp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>jh(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,Wp(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(J.UNKNOWN,a.toString())}))}Lo(e,t,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Lo(e,Wp(t,r),s,u,h,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(J.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class pD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($t(t),this.D_=!1):te("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{r.enqueueAndForget((async()=>{Ko(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const m=Pe(f);m.L_.add(4),await Ku(m),m.q_.set("Unknown"),m.L_.delete(4),await yd(m)})(this))}))})),this.q_=new pD(r,s)}}async function yd(n){if(Ko(n))for(const e of n.B_)await e(!0)}async function Ku(n){for(const e of n.B_)await e(!1)}function _d(n,e){const t=Pe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Jm(t)?Qm(t):fl(t).r_()&&Hm(t,e))}function nl(n,e){const t=Pe(n),r=fl(t);t.N_.delete(e),r.r_()&&z0(t,e),t.N_.size===0&&(r.r_()?r.o_():Ko(t)&&t.q_.set("Unknown"))}function Hm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(n).A_(e)}function z0(n,e){n.Q_.xe(e),fl(n).R_(e)}function Qm(n){n.Q_=new f1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),fl(n).start(),n.q_.v_()}function Jm(n){return Ko(n)&&!fl(n).n_()&&n.N_.size>0}function Ko(n){return Pe(n).L_.size===0}function $0(n){n.Q_=void 0}async function gD(n){n.q_.set("Online")}async function yD(n){n.N_.forEach(((e,t)=>{Hm(n,e)}))}async function _D(n,e){$0(n),Jm(n)?(n.q_.M_(e),Qm(n)):n.q_.set("Unknown")}async function vD(n,e,t){if(n.q_.set("Online"),e instanceof o0&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const h of a.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.N_.delete(h),s.Q_.removeTarget(h))})(n,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wh(n,r)}else if(e instanceof Ih?n.Q_.Ke(e):e instanceof s0?n.Q_.He(e):n.Q_.We(e),!t.isEqual(be.min()))try{const r=await V0(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(m);_&&a.N_.set(m,_.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(qt.EMPTY_BYTE_STRING,_.snapshotVersion)),z0(a,f);const w=new Ui(_.target,f,m,_.sequenceNumber);Hm(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await Wh(n,r)}}async function Wh(n,e,t){if(!Ks(e))throw e;n.L_.add(1),await Ku(n),n.q_.set("Offline"),t||(t=()=>V0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{te("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await yd(n)}))}function q0(n,e){return e().catch((t=>Wh(n,t,e)))}async function dl(n){const e=Pe(n),t=Bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wD(e);)try{const s=await oD(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,ED(e,s)}catch(s){await Wh(e,s)}K0(e)&&G0(e)}function wD(n){return Ko(n)&&n.O_.length<10}function ED(n,e){n.O_.push(e);const t=Bs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function K0(n){return Ko(n)&&!Bs(n).n_()&&n.O_.length>0}function G0(n){Bs(n).start()}async function ID(n){Bs(n).p_()}async function TD(n){const e=Bs(n);for(const t of n.O_)e.m_(t.mutations)}async function SD(n,e,t){const r=n.O_.shift(),s=Fm.from(r,e,t);await q0(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await dl(n)}async function RD(n,e){e&&Bs(n).V_&&await(async function(r,s){if((function(u){return c1(u)&&u!==J.ABORTED})(s.code)){const a=r.O_.shift();Bs(r).s_(),await q0(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await dl(r)}})(n,e),K0(n)&&G0(n)}async function Pw(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Ko(t);t.L_.add(3),await Ku(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yd(t)}async function tm(n,e){const t=Pe(n);e?(t.L_.delete(2),await yd(t)):e||(t.L_.add(2),await Ku(t),t.q_.set("Unknown"))}function fl(n){return n.K_||(n.K_=(function(t,r,s){const a=Pe(t);return a.w_(),new hD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:gD.bind(null,n),Ro:yD.bind(null,n),mo:_D.bind(null,n),d_:vD.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Jm(n)?Qm(n):n.q_.set("Unknown")):(await n.K_.stop(),$0(n))}))),n.K_}function Bs(n){return n.U_||(n.U_=(function(t,r,s){const a=Pe(t);return a.w_(),new dD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ID.bind(null,n),mo:RD.bind(null,n),f_:TD.bind(null,n),g_:SD.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await dl(n)):(await n.U_.stop(),n.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,h=new Ym(e,t,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(n,e){if($t("AsyncQueue",`${e}: ${n}`),Ks(n))return new he(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=iu(),this.sortedSet=new Tt(this.comparator)}static emptySet(e){return new za(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.W_=new Tt(fe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class rl{constructor(e,t,r,s,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new rl(e,t,za.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class PD{constructor(){this.queries=kw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=kw(),a.forEach(((u,h)=>{for(const f of h.j_)f.onError(r)}))})(this,new he(J.ABORTED,"Firestore shutting down"))}}function kw(){return new Gs((n=>zI(n)),ud)}async function W0(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new AD,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(s,!0);break;case 1:a.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=Xm(u,`Initialization of query '${La(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&Zm(t)}async function H0(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CD(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const h of u.j_)h.X_(s)&&(r=!0);u.z_=s}}r&&Zm(t)}function kD(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(t);r.queries.delete(e)}function Zm(n){n.Y_.forEach((e=>{e.next()}))}var nm,xw;(xw=nm||(nm={})).ea="default",xw.Cache="cache";class Q0{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.key=e}}class Y0{constructor(e){this.key=e}}class xD{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ge(),this.mutatedKeys=Ge(),this.Aa=qI(e),this.Ra=new za(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Cw,s=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,w)=>{const I=s.get(_),A=zu(this.query,w)?w:null,j=!!I&&this.mutatedKeys.has(I.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let U=!1;I&&A?I.data.isEqual(A.data)?j!==M&&(r.track({type:3,doc:A}),U=!0):this.ga(I,A)||(r.track({type:2,doc:A}),U=!0,(f&&this.Aa(A,f)>0||m&&this.Aa(A,m)<0)&&(h=!0)):!I&&A?(r.track({type:0,doc:A}),U=!0):I&&!A&&(r.track({type:1,doc:I}),U=!0,(f||m)&&(h=!0)),U&&(A?(u=u.add(A),a=M?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,w)=>(function(A,j){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return M(A)-M(j)})(_.type,w.type)||this.Aa(_.doc,w.doc))),this.pa(r),s=s!=null&&s;const h=t&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,m=f!==this.Ea;return this.Ea=f,u.length!==0||m?{snapshot:new rl(this.query,e.Ra,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ge(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new Y0(r))})),this.da.forEach((r=>{e.has(r)||t.push(new J0(r))})),t}ba(e){this.Ta=e.Ts,this.da=Ge();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return rl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bD{constructor(e){this.key=e,this.va=!1}}class ND{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Gs((h=>zI(h)),ud),this.Ma=new Map,this.xa=new Set,this.Oa=new Tt(fe.comparator),this.Na=new Map,this.La=new qm,this.Ba={},this.ka=new Map,this.qa=zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function VD(n,e,t=!0){const r=vd(n);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await X0(r,e,t,!0),s}async function LD(n,e){const t=vd(n);await X0(t,e,!0,!1)}async function X0(n,e,t,r){const s=await qh(n.localStore,hr(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await eg(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&_d(n.remoteStore,s),h}async function eg(n,e,t,r,s){n.Ka=(w,I,A)=>(async function(M,U,ae,H){let ee=U.view.ma(ae);ee.ns&&(ee=await Zp(M.localStore,U.query,!1).then((({documents:T})=>U.view.ma(T,ee))));const le=H&&H.targetChanges.get(U.targetId),de=H&&H.targetMismatches.get(U.targetId)!=null,me=U.view.applyChanges(ee,M.isPrimaryClient,le,de);return rm(M,U.targetId,me.wa),me.snapshot})(n,w,I,A);const a=await Zp(n.localStore,e,!0),u=new xD(e,a.Ts),h=u.ma(a.documents),f=qu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,f);rm(n,t,m.wa);const _=new DD(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function OD(n,e,t){const r=Pe(n),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((u=>!ud(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await tl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&nl(r.remoteStore,s.targetId),il(r,s.targetId)})).catch(qs)):(il(r,s.targetId),await tl(r.localStore,s.targetId,!0))}async function MD(n,e){const t=Pe(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nl(t.remoteStore,r.targetId))}async function FD(n,e,t){const r=ig(n);try{const s=await(function(u,h){const f=Pe(u),m=Lt.now(),_=h.reduce(((A,j)=>A.add(j.key)),Ge());let w,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let j=cr(),M=Ge();return f.cs.getEntries(A,_).next((U=>{j=U,j.forEach(((ae,H)=>{H.isValidDocument()||(M=M.add(ae))}))})).next((()=>f.localDocuments.getOverlayedDocuments(A,j))).next((U=>{w=U;const ae=[];for(const H of h){const ee=l1(H,w.get(H.key).overlayedDocument);ee!=null&&ae.push(new Gi(H.key,ee,bI(ee.value.mapValue),Pn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,m,ae,h)})).next((U=>{I=U;const ae=U.applyToLocalDocumentSet(w,M);return f.documentOverlayCache.saveOverlays(A,U.batchId,ae)}))})).then((()=>({batchId:I.batchId,changes:GI(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,h,f){let m=u.Ba[u.currentUser.toKey()];m||(m=new Tt(ze)),m=m.insert(h,f),u.Ba[u.currentUser.toKey()]=m})(r,s.batchId,t),await Ws(r,s.changes),await dl(r.remoteStore)}catch(s){const a=Xm(s,"Failed to persist write");t.reject(a)}}async function Z0(n,e){const t=Pe(n);try{const r=await iD(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Na.get(a);u&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?xe(u.va):s.removedDocuments.size>0&&(xe(u.va),u.va=!1))})),await Ws(t,r,e)}catch(r){await qs(r)}}function Dw(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach(((a,u)=>{const h=u.view.Z_(e);h.snapshot&&s.push(h.snapshot)})),(function(u,h){const f=Pe(u);f.onlineState=h;let m=!1;f.queries.forEach(((_,w)=>{for(const I of w.j_)I.Z_(h)&&(m=!0)})),m&&Zm(f)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UD(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),a=s&&s.key;if(a){let u=new Tt(fe.comparator);u=u.insert(a,jt.newNoDocument(a,be.min()));const h=Ge().add(a),f=new $u(be.min(),new Map,new Tt(ze),u,h);await Z0(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),rg(r)}else await tl(r.localStore,e,!1).then((()=>il(r,e,t))).catch(qs)}async function jD(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await rD(t.localStore,e);ng(t,r,null),tg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ws(t,s)}catch(s){await qs(s)}}async function BD(n,e,t){const r=Pe(n);try{const s=await(function(u,h){const f=Pe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,h).next((w=>(xe(w!==null),_=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);ng(r,e,t),tg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ws(r,s)}catch(s){await qs(s)}}function tg(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function ng(n,e,t){const r=Pe(n);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function il(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||eT(n,r)}))}function eT(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(nl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rg(n))}function rm(n,e,t){for(const r of t)r instanceof J0?(n.La.addReference(r.key,e),zD(n,r)):r instanceof Y0?(te("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||eT(n,r.key)):Re()}function zD(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(te("SyncEngine","New document in limbo: "+t),n.xa.add(r),rg(n))}function rg(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new fe(ht.fromString(e)),r=n.qa.next();n.Na.set(r,new bD(t)),n.Oa=n.Oa.insert(t,r),_d(n.remoteStore,new Ui(hr(ld(t.path)),r,"TargetPurposeLimboResolution",Jn.oe))}}async function Ws(n,e,t){const r=Pe(n),s=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((h,f)=>{u.push(r.Ka(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=Gm.Wi(f.targetId,m);a.push(w)}})))})),await Promise.all(u),r.Ca.d_(s),await(async function(f,m){const _=Pe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>$.forEach(m,(I=>$.forEach(I.$i,(A=>_.persistence.referenceDelegate.addReference(w,I.targetId,A))).next((()=>$.forEach(I.Ui,(A=>_.persistence.referenceDelegate.removeReference(w,I.targetId,A)))))))))}catch(w){if(!Ks(w))throw w;te("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const I=w.targetId;if(!w.fromCache){const A=_.os.get(I),j=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(j);_.os=_.os.insert(I,M)}}})(r.localStore,a))}async function $D(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await N0(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((h=>{h.forEach((f=>{f.reject(new he(J.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ws(t,r.hs)}}function qD(n,e){const t=Pe(n),r=t.Na.get(e);if(r&&r.va)return Ge().add(r.key);{let s=Ge();const a=t.Ma.get(e);if(!a)return s;for(const u of a){const h=t.Fa.get(u);s=s.unionWith(h.view.Va)}return s}}async function KD(n,e){const t=Pe(n),r=await Zp(t.localStore,e.query,!0),s=e.view.ba(r);return t.isPrimaryClient&&rm(t,e.targetId,s.wa),s}async function GD(n,e){const t=Pe(n);return O0(t.localStore,e).then((r=>Ws(t,r)))}async function WD(n,e,t,r){const s=Pe(n),a=await(function(h,f){const m=Pe(h),_=Pe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(w=>_.Mn(w,f).next((I=>I?m.localDocuments.getDocuments(w,I):$.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await dl(s.remoteStore):t==="acknowledged"||t==="rejected"?(ng(s,e,r||null),tg(s,e),(function(h,f){Pe(Pe(h).mutationQueue).On(f)})(s.localStore,e)):Re(),await Ws(s,a)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}async function HD(n,e){const t=Pe(n);if(vd(t),ig(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await bw(t,r.toArray());t.Qa=!0,await tm(t.remoteStore,!0);for(const a of s)_d(t.remoteStore,a)}else if(e===!1&&t.Qa!==!1){const r=[];let s=Promise.resolve();t.Ma.forEach(((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then((()=>(il(t,u),tl(t.localStore,u,!0)))),nl(t.remoteStore,u)})),await s,await bw(t,r),(function(u){const h=Pe(u);h.Na.forEach(((f,m)=>{nl(h.remoteStore,m)})),h.La.pr(),h.Na=new Map,h.Oa=new Tt(fe.comparator)})(t),t.Qa=!1,await tm(t.remoteStore,!1)}}async function bw(n,e,t){const r=Pe(n),s=[],a=[];for(const u of e){let h;const f=r.Ma.get(u);if(f&&f.length!==0){h=await qh(r.localStore,hr(f[0]));for(const m of f){const _=r.Fa.get(m),w=await KD(r,_);w.snapshot&&a.push(w.snapshot)}}else{const m=await L0(r.localStore,u);h=await qh(r.localStore,m),await eg(r,tT(m),u,!1,h.resumeToken)}s.push(h)}return r.Ca.d_(a),s}function tT(n){return jI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QD(n){return(function(t){return Pe(Pe(t).persistence).Qi()})(Pe(n).localStore)}async function JD(n,e,t,r){const s=Pe(n);if(s.Qa)return void te("SyncEngine","Ignoring unexpected query state notification.");const a=s.Ma.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await O0(s.localStore,$I(a[0])),h=$u.createSynthesizedRemoteEventForCurrentChange(e,t==="current",qt.EMPTY_BYTE_STRING);await Ws(s,u,h);break}case"rejected":await tl(s.localStore,e,!0),il(s,e,r);break;default:Re()}}async function YD(n,e,t){const r=vd(n);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){te("SyncEngine","Adding an already active target "+s);continue}const a=await L0(r.localStore,s),u=await qh(r.localStore,a);await eg(r,tT(a),u.targetId,!1,u.resumeToken),_d(r.remoteStore,u)}for(const s of t)r.Ma.has(s)&&await tl(r.localStore,s,!1).then((()=>{nl(r.remoteStore,s),il(r,s)})).catch(qs)}}function vd(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UD.bind(null,e),e.Ca.d_=CD.bind(null,e.eventManager),e.Ca.$a=kD.bind(null,e.eventManager),e}function ig(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BD.bind(null,e),e}class xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return b0(this.persistence,new D0,e.initialUser,this.serializer)}Ga(e){return new k0(md.Zr,this.serializer)}Wa(e){return new F0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xu.provider={build:()=>new xu};class nT extends xu{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await ig(this.Ja.syncEngine),await dl(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return b0(this.persistence,new D0,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new U1(r,e.asyncQueue,t)}Ha(e,t){const r=new vx(t,this.persistence);return new _x(e.asyncQueue,r)}Ga(e){const t=x0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new Km(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,U0(),Th(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new F0}}class XD extends nT{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof wp&&(this.sharedClientState.syncEngine={no:WD.bind(null,t),ro:JD.bind(null,t),io:YD.bind(null,t),Qi:QD.bind(null,t),eo:GD.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await HD(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=U0();if(!wp.D(t))throw new he(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=x0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Du{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$D.bind(null,this.syncEngine),await tm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PD})()}createDatastore(e){const t=gd(e.databaseInfo.databaseId),r=(function(a){return new cD(a)})(e.databaseInfo);return(function(a,u,h,f){return new fD(a,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,h){return new mD(r,s,a,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Dw(this.syncEngine,t,0)),(function(){return Aw.D()?new Aw:new aD})())}createSyncEngine(e,t){return(function(s,a,u,h,f,m,_){const w=new ND(s,a,u,h,f,m);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Pe(s);te("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Ku(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Du.provider={build:()=>new Du};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$t("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=gI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{te("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(te("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Xm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ip(n,e){n.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await N0(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Nw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await eb(n);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Pw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Pw(e.remoteStore,s))),n._onlineComponents=e}async function eb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ip(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Eu("Error using user provided cache. Falling back to memory cache: "+t),await Ip(n,new xu)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await Ip(n,new xu);return n._offlineComponents}async function iT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Nw(n,n._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Nw(n,new Du))),n._onlineComponents}function tb(n){return iT(n).then((e=>e.syncEngine))}async function sT(n){const e=await iT(n),t=e.eventManager;return t.onListen=VD.bind(null,e.syncEngine),t.onUnlisten=OD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MD.bind(null,e.syncEngine),t}function nb(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const _=new rT({next:I=>{_.Za(),u.enqueueAndForget((()=>H0(a,w)));const A=I.docs.has(h);!A&&I.fromCache?m.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&I.fromCache&&f&&f.source==="server"?m.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new Q0(ld(h.path),_,{includeMetadataChanges:!0,_a:!0});return W0(a,w)})(await sT(n),n.asyncQueue,e,t,r))),r.promise}function rb(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,m){const _=new rT({next:I=>{_.Za(),u.enqueueAndForget((()=>H0(a,w))),I.fromCache&&f.source==="server"?m.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new Q0(h,_,{includeMetadataChanges:!0,_a:!0});return W0(a,w)})(await sT(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(n,e,t){if(!t)throw new he(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ib(n,e,t,r){if(e===!0&&r===!0)throw new he(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Lw(n){if(!fe.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ow(n){if(fe.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function mi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wd(n);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ib("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sg{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mw(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lx;switch(r.type){case"firstParty":return new hx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Vw.get(t);r&&(te("ComponentProvider","Removing Datastore"),Vw.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pl(this.firestore,e,this._query)}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Ms extends pl{constructor(e,t,r){super(e,t,ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new fe(e))}withConverter(e){return new Ms(this.firestore,e,this._path)}}function ut(n,e,...t){if(n=Yt(n),aT("collection","path",e),n instanceof sg){const r=ht.fromString(e,...t);return Ow(r),new Ms(n,null,r)}{if(!(n instanceof Ln||n instanceof Ms))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Ow(r),new Ms(n.firestore,null,r)}}function Et(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=gI.newId()),aT("doc","path",e),n instanceof sg){const r=ht.fromString(e,...t);return Lw(r),new Ln(n,null,new fe(r))}{if(!(n instanceof Ln||n instanceof Ms))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Lw(r),new Ln(n.firestore,n instanceof Ms?n.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new j0(this,"async_queue_retry"),this.Vu=()=>{const r=Th();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Th();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Th();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new di;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ks(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h})(r);throw $t("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=Ym.createAndSchedule(this,e,t,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=-1;class Go extends sg{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Fw,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}}function ob(n,e,t){t||(t="(default)");const r=td(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(yu(a,e))return s;throw new he(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function og(n){if(n._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ab(n),n._firestoreClient}function ab(n){var e,t,r;const s=n._freezeSettings(),a=(function(h,f,m,_){return new jx(h,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,oT(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new ZD(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sl(qt.fromBase64String(e))}catch(t){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sl(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=/^__.*__$/;class ub{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}class lT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class ug{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ug(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uT(this.Cu)&&lb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gd(e)}Qu(e,t,r,s=!1){return new ug({Cu:e,methodName:t,qu:r,path:Vt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Td(n){const e=n._freezeSettings(),t=gd(n._databaseId);return new cb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cT(n,e,t,r,s,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,s);hg("Data must be an object, but it was:",u,r);const h=hT(r,u);let f,m;if(a.merge)f=new Yn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const I=im(e,w,t);if(!u.contains(I))throw new he(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);fT(_,I)||_.push(I)}f=new Yn(_),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new ub(new An(h),f,m)}class Sd extends Id{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}class cg extends Id{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Za(e.serializer,QI(e.serializer,this.$u));return new e0(e.path,t)}isEqual(e){return e instanceof cg&&this.$u===e.$u}}function hb(n,e,t,r){const s=n.Qu(1,e,t);hg("Data must be an object, but it was:",s,r);const a=[],u=An.empty();qo(r,((f,m)=>{const _=dg(e,f,t);m=Yt(m);const w=s.Nu(_);if(m instanceof Sd)a.push(_);else{const I=Gu(m,w);I!=null&&(a.push(_),u.set(_,I))}}));const h=new Yn(a);return new lT(u,h,s.fieldTransforms)}function db(n,e,t,r,s,a){const u=n.Qu(1,e,t),h=[im(e,r,t)],f=[s];if(a.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)h.push(im(e,a[I])),f.push(a[I+1]);const m=[],_=An.empty();for(let I=h.length-1;I>=0;--I)if(!fT(m,h[I])){const A=h[I];let j=f[I];j=Yt(j);const M=u.Nu(A);if(j instanceof Sd)m.push(A);else{const U=Gu(j,M);U!=null&&(m.push(A),_.set(A,U))}}const w=new Yn(m);return new lT(_,w,u.fieldTransforms)}function fb(n,e,t,r=!1){return Gu(t,n.Qu(r?4:3,e))}function Gu(n,e){if(dT(n=Yt(n)))return hg("Unsupported field value:",e,n),hT(n,e);if(n instanceof Id)return(function(r,s){if(!uT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const h of r){let f=Gu(h,s.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Lt.fromDate(r);return{timestampValue:el(s.serializer,a)}}if(r instanceof Lt){const a=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:el(s.serializer,a)}}if(r instanceof ag)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sl)return{bytesValue:a0(s.serializer,r._byteString)};if(r instanceof Ln){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof lg)return(function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return Om(h.serializer,f)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${wd(r)}`)})(n,e)}function hT(n,e){const t={};return CI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(n,((r,s)=>{const a=Gu(s,e.Mu(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function dT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof ag||n instanceof sl||n instanceof Ln||n instanceof Id||n instanceof lg)}function hg(n,e,t){if(!dT(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const r=wd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function im(n,e,t){if((e=Yt(e))instanceof Ed)return e._internalPath;if(typeof e=="string")return dg(n,e);throw Hh("Field path arguments must be of type string or ",n,!1,void 0,t)}const pb=new RegExp("[~\\*/\\[\\]]");function dg(n,e,t){if(e.search(pb)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ed(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new he(J.INVALID_ARGUMENT,h+n+f)}function fT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mb extends pT{data(){return super.data()}}function fg(n,e){return typeof e=="string"?dg(n,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class yb extends pg{}function bu(n,e,...t){let r=[];e instanceof pg&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof mg)).length,h=a.filter((f=>f instanceof Rd)).length;if(u>1||u>0&&h>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Rd extends yb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Rd(e,t,r)}_apply(e){const t=this._parse(e);return mT(e._query,t),new pl(e.firestore,e.converter,qp(e._query,t))}_parse(e){const t=Td(e.firestore);return(function(a,u,h,f,m,_,w){let I;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){jw(w,_);const A=[];for(const j of w)A.push(Uw(f,a,j));I={arrayValue:{values:A}}}else I=Uw(f,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||jw(w,_),I=fb(h,u,w,_==="in"||_==="not-in");return tt.create(m,_,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ol(n,e,t){const r=e,s=fg("where",n);return Rd._create(s,r,t)}class mg extends pg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:mt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const h=a.getFlattenedFilters();for(const f of h)mT(u,f),u=qp(u,f)})(e._query,t),new pl(e.firestore,e.converter,qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Uw(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BI(e)&&t.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!fe.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pu(n,new fe(r))}if(t instanceof Ln)return Pu(n,t._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(t)}.`)}function jw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mT(n,e){const t=(function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _b{convertValue(e,t="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return qo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>kt(u.doubleValue)));return new lg(a)}convertGeoPoint(e){return new ag(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Nm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=qi(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);xe(y0(r));const s=new Mo(r.get(1),r.get(3)),a=new fe(r.popFirst(5));return s.isEqual(t)||$t(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yT extends pT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sh extends yT{data(e={}){return super.data(e)}}class vb{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new au(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Sh(this._firestore,this._userDataWriter,r.key,r,new au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((h=>{const f=new Sh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new au(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Sh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new au(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:wb(h.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(n){n=mi(n,Ln);const e=mi(n.firestore,Go);return nb(og(e),n._key).then((t=>Ib(e,n,t)))}class _T extends _b{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function It(n){n=mi(n,pl);const e=mi(n.firestore,Go),t=og(e),r=new _T(e);return gb(n._query),rb(t,n._query).then((s=>new vb(e,r,n,s)))}function Wu(n,e,t){n=mi(n,Ln);const r=mi(n.firestore,Go),s=gT(n.converter,e,t);return Ad(r,[cT(Td(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Pn.none())])}function fr(n,e,t,...r){n=mi(n,Ln);const s=mi(n.firestore,Go),a=Td(s);let u;return u=typeof(e=Yt(e))=="string"||e instanceof Ed?db(a,"updateDoc",n._key,e,t,r):hb(a,"updateDoc",n._key,e),Ad(s,[u.toMutation(n._key,Pn.exists(!0))])}function ur(n){return Ad(mi(n.firestore,Go),[new dd(n._key,Pn.none())])}function ml(n,e){const t=mi(n.firestore,Go),r=Et(n),s=gT(n.converter,e);return Ad(t,[cT(Td(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then((()=>r))}function Ad(n,e){return(function(r,s){const a=new di;return r.asyncQueue.enqueueAndForget((async()=>FD(await tb(r),s,a))),a.promise})(og(n),e)}function Ib(n,e,t){const r=t.docs.get(e._key),s=new _T(n);return new yT(n,s,e._key,r,new au(t.hasPendingWrites,t.fromCache),e.converter)}class Tb{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=Pb(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Sb(n){return new Tb(n)}class Rb{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Du.provider,this._offlineComponentProvider={build:t=>new nT(t,e?.cacheSizeBytes,this.forceOwnership)}}}class Ab{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Du.provider,this._offlineComponentProvider={build:t=>new XD(t,e?.cacheSizeBytes)}}}function Pb(n){return new Rb(void 0)}function Cb(){return new Ab}function kb(n){return new cg("increment",n)}(function(e,t=!0){(function(s){cl=s})(ll),Vo(new Fs("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new Go(new ux(r.getProvider("auth-internal")),new fx(r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),ci(Nv,"4.7.3",e),ci(Nv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="type.googleapis.com/google.protobuf.Int64Value",Db="type.googleapis.com/google.protobuf.UInt64Value";function vT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function sm(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>sm(e));if(typeof n=="function"||typeof n=="object")return vT(n,e=>sm(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Qh(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case xb:case Db:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Qh(e)):typeof n=="function"||typeof n=="object"?vT(n,e=>Qh(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $a extends yi{constructor(e,t,r){super(`${gg}/${e}`,t||""),this.details=r}}function bb(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Nb(n,e){let t=bb(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Bw[u])return new $a("internal","internal");t=Bw[u],r=u}const h=a.message;typeof h=="string"&&(r=h),s=a.details,s!==void 0&&(s=Qh(s))}}catch{}return t==="ok"?null:new $a(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="us-central1";function Lb(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new $a("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Ob{constructor(e,t,r,s,a=om,u){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new Vb(t,r,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=om}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Mb(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function Fb(n,e,t){return(r=>jb(n,e,r,{}))}async function Ub(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}function jb(n,e,t,r){const s=n._url(e);return Bb(n,s,t,r)}async function Bb(n,e,t,r){t=sm(t);const s={data:t},a={},u=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);u.authToken&&(a.Authorization="Bearer "+u.authToken),u.messagingToken&&(a["Firebase-Instance-ID-Token"]=u.messagingToken),u.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=u.appCheckToken);const h=r.timeout||7e4,f=Lb(h),m=await Promise.race([Ub(e,s,a,n.fetchImpl),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new $a("cancelled","Firebase Functions instance was deleted.");const _=Nb(m.status,m.json);if(_)throw _;if(!m.json)throw new $a("internal","Response is not valid JSON object.");let w=m.json.data;if(typeof w>"u"&&(w=m.json.result),typeof w>"u")throw new $a("internal","Response is missing data field.");return{data:Qh(w)}}const zw="@firebase/functions",$w="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="auth-internal",$b="app-check-internal",qb="messaging-internal";function Kb(n,e){const t=(r,{instanceIdentifier:s})=>{const a=r.getProvider("app").getImmediate(),u=r.getProvider(zb),h=r.getProvider(qb),f=r.getProvider($b);return new Ob(a,u,h,f,s,n)};Vo(new Fs(gg,t,"PUBLIC").setMultipleInstances(!0)),ci(zw,$w,e),ci(zw,$w,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n=gm(),e=om){const r=td(Yt(n),gg).getImmediate({identifier:e}),s=MA("functions");return s&&Gb(r,...s),r}function Gb(n,e,t){Mb(Yt(n),e,t)}function Wb(n,e,t){return Fb(Yt(n),e)}Kb(fetch.bind(self));const ET={apiKey:"AIzaSyBzC3ewoJvmW-DIHG3kN09kdw6YAf5_6IM",authDomain:"uconn-fsae-ev.firebaseapp.com",projectId:"uconn-fsae-ev",storageBucket:"uconn-fsae-ev.firebasestorage.app",messagingSenderId:"250394437331",appId:"1:250394437331:web:5170ea4d906a220eac5626"};function Hb(){const n=Object.entries(ET).filter(([e,t])=>!t).map(([e])=>e);if(n.length){const e=`Missing Firebase env vars: ${n.join(", ")}.
Create .env.local and set VITE_FIREBASE_* variables. See .env.example.`;throw new Error(e)}}Hb();const Pd=YP().length?gm():CE(ET),De=globalThis.__FSAE_FIRESTORE__||(globalThis.__FSAE_FIRESTORE__=ob(Pd,{localCache:Sb({tabManager:Cb(),cacheSizeBytes:sb})})),oV=wT(Pd,"us-central1"),Qb=uI(Pd);async function Jb(){const n=wT(void 0,"us-central1"),r=(await Wb(n,"getAdminRoles")())?.data??{};if(typeof r.uid!="string"||typeof r.isAdmin!="boolean"||typeof r.isLead!="boolean"||!Array.isArray(r.adminUids)||!Array.isArray(r.leadUids))throw new Error("Roles function did not return the full shape");return{uid:r.uid,isAdmin:r.isAdmin,isLead:r.isLead,adminUids:r.adminUids,leadUids:r.leadUids,version:r.version}}let Ds=null;function yg(n){return YE(Qb,async e=>{if(!e){Ds=null,n(null);return}try{Ds=await Jb(),n(Ds)}catch{Ds={uid:e?.uid??"",isAdmin:!1,isLead:!1,adminUids:[],leadUids:[]},n(Ds)}})}function aV(){const[n,e]=cn.useState(Ds),[t,r]=cn.useState(!1);return cn.useEffect(()=>{const a=yg(u=>{e(u),r(!0)});return()=>{typeof a=="function"&&a()}},[]),{role:cn.useMemo(()=>n?n.isAdmin?"admin":n.isLead?"lead":"member":null,[n]),ready:t}}function Yb({children:n}){const[e,t]=cn.useState(Ds);return cn.useEffect(()=>yg(t),[]),e&&(e.isAdmin||e.isLead)?se.jsx(se.Fragment,{children:n}):null}function lV({children:n}){const[e,t]=cn.useState(Ds);return cn.useEffect(()=>yg(t),[]),e&&e.isAdmin?se.jsx(se.Fragment,{children:n}):null}const am=[],qw=[];function Xb(n){return!!n&&am.includes(n)}const Zb=["people","projects","settings","ranked"],eN=["people","projects"];function uV(n,e){const t=typeof n=="string"?void 0:n?.role;return t?t==="admin"?Zb.includes(e):t==="lead"?eN.includes(e):!1:!1}function tN(n,e){am.length=0,am.push(...n||[]),qw.length=0,qw.push(...e||[]),nN.forEach(t=>{try{t()}catch{}})}const nN=new Set,Cd=uI(Pd),IT=new Vi;IT.setCustomParameters({prompt:"select_account"});function TT(n){return YE(Cd,n)}async function rN(){const{user:n}=await fk(Cd,IT);return n}async function iN(){await WC(Cd)}function kd(){const n=Cd.currentUser;return Xb(n?.uid||null)}function sN(){const[n,e]=Y.useState(null);return Y.useEffect(()=>TT(t=>{console.log("[auth] state change",t?t.uid:"null"),e(t)}),[]),n}function oN({className:n}){return se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 190 512 140",className:n,role:"img","aria-label":"UConn FSAE Team Logo",preserveAspectRatio:"xMidYMid meet",children:se.jsx("g",{fill:"#FFFFFF",fillRule:"evenodd",children:se.jsx("path",{d:"M 46 302 L 49 305 L 139 244 L 198 211 L 205 211 L 212 218 L 206 265 L 209 276 L 216 281 L 240 278 L 301 255 L 341 253 L 425 273 L 480 295 L 464 308 L 479 304 L 485 293 L 477 286 L 421 266 L 334 247 L 303 249 L 218 276 L 211 268 L 217 215 L 209 206 L 200 205 L 133 241 Z M 33 210 L 33 225 L 37 238 L 46 249 L 69 267 L 72 266 L 72 262 L 52 247 L 45 239 L 40 230 L 38 223 L 38 213 L 40 207 L 44 203 L 63 201 L 120 203 L 126 207 L 128 212 L 128 230 L 132 232 L 134 227 L 134 215 L 132 206 L 127 200 L 122 198 L 89 196 L 48 197 L 38 200 Z M 225 223 L 225 224 L 222 229 L 222 239 L 223 240 L 223 242 L 224 243 L 225 246 L 228 249 L 230 249 L 231 250 L 235 250 L 236 251 L 239 251 L 240 252 L 242 252 L 243 253 L 247 253 L 248 254 L 250 254 L 251 255 L 255 255 L 256 256 L 261 256 L 262 255 L 262 254 L 263 253 L 263 248 L 261 246 L 256 246 L 255 245 L 251 245 L 250 244 L 247 244 L 246 243 L 244 243 L 243 242 L 242 242 L 237 237 L 237 233 L 240 230 L 247 230 L 248 231 L 254 231 L 255 232 L 258 232 L 259 231 L 259 228 L 258 227 L 258 226 L 252 220 L 251 220 L 248 218 L 245 218 L 244 217 L 238 217 L 237 218 L 232 219 Z"})})})}const Hu="fsae:",_g=300*1e3;function Jh(n){return`${Hu}${n}`}function gl(n){if(kd())return null;try{const e=localStorage.getItem(Jh(n));if(!e)return null;const{exp:t,data:r}=JSON.parse(e);return t&&Date.now()<t?r:(localStorage.removeItem(Jh(n)),null)}catch{return null}}function qr(n,e,t=_g){if(!kd())try{const r=JSON.stringify({exp:Date.now()+t,data:e});localStorage.setItem(Jh(n),r)}catch{}}function hn(n){for(const e of n)try{localStorage.removeItem(Jh(e))}catch{}}function xd(n){try{const e=Hu+n;for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t)||"";r.startsWith(e)&&localStorage.removeItem(r)}}catch{}}async function Rh(){if(!kd())try{const[n,e,t,r,s]=await Promise.all([It(ut(De,"people")),It(ut(De,"projects")),It(ut(De,"tasks")),It(ut(De,"settings")),It(ut(De,"ranked"))]);qr("people",n.docs.map(h=>h.data())),qr("projects",e.docs.map(h=>h.data())),qr("tasks",t.docs.map(h=>h.data()));const a=r.docs.find(h=>h.id==="global");a&&qr("settings",a.data());const u=s.docs.find(h=>h.id==="settings");u&&qr("ranked:settings",u.data())}catch{}}function aN(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e)||"";t.startsWith(Hu)&&n.push(t)}for(const e of n)localStorage.removeItem(e)}catch{}}function Rr(n){const e={};for(const[t,r]of Object.entries(n))r!==void 0&&(e[t]=r);return e}async function lN(){const n=gl("people");if(n)return n;const t=(await It(ut(De,"people"))).docs.map(r=>r.data());return qr("people",t),t}async function uN(){const n=gl("projects");if(n)return n;const t=(await It(ut(De,"projects"))).docs.map(r=>{const s=r.data();return{...s,id:s.id||r.id}});return qr("projects",t),t}async function cN(){return(await It(ut(De,"project_deps"))).docs.map(e=>{const t=e.data();return{...t,id:t?.id||e.id}})}async function hN(){const n=gl("tasks");if(n)return n;const t=(await It(ut(De,"tasks"))).docs.map(r=>r.data());return qr("tasks",t),t}async function dN(n){const e=`tasks:project:${n}`,t=gl(e);if(t)return t;const r=bu(ut(De,"tasks"),ol("project_id","==",n)),a=(await It(r)).docs.map(u=>u.data());return qr(e,a),a}async function fN(n){const e=Date.now(),t={...n,created_at:n.created_at??e},r=await ml(ut(De,"tasks"),Rr(t));return await fr(r,{id:r.id}),hn(["tasks"]),xd("tasks:project:"),r.id}async function pN(n,e){const t=Et(De,"tasks",n);let r=null;try{const a=await Eb(t);r=a.exists()?a.data():null}catch{}const s={...e};e.status==="Complete"&&e.completed_at===void 0&&(s.completed_at=Date.now()),await fr(t,Rr(s)),hn(["tasks"]),xd("tasks:project:");try{const a=r?.status==="Complete",u=e.status==="Complete";if(!a&&u){const h=await vg(),f=(e.assignee_id??r?.assignee_id)||void 0,m=Eg({...r||{},status:"Complete"},h);await Nu({ts:Date.now(),type:"task_points",person_id:f,points:m,note:`Task complete: ${r?.description||n}`})}}catch{}}async function mN(n){const e=Et(De,"tasks",n);await ur(e),hn(["tasks"]),xd("tasks:project:")}async function gN(n){const e=Date.now();if(n.person_id&&n.date){const s=bu(ut(De,"attendance"),ol("person_id","==",n.person_id),ol("date","==",n.date));if(!(await It(s)).empty){const u=new Error("DUPLICATE_ATTENDANCE");throw u.code="DUPLICATE_ATTENDANCE",u}}const t={...n,created_at:n.created_at??e},r=await ml(ut(De,"attendance"),Rr(t));await fr(r,{id:r.id});try{await Nu({ts:e,type:"attendance",person_id:n.person_id,points:n.points,note:`Attendance ${n.points} pts on ${n.date}`})}catch{}return r.id}async function yN(){return(await It(ut(De,"attendance"))).docs.map(e=>e.data())}async function Nu(n){const e=await ml(ut(De,"logs"),Rr(n));return await fr(e,{id:e.id}),e.id}async function _N(n=50){return(await It(ut(De,"logs"))).docs.map(r=>r.data()).sort((r,s)=>(s.ts||0)-(r.ts||0)).slice(0,Math.max(1,n))}async function vN(n){return(await It(ut(De,"logs"))).docs.map(t=>t.data()).filter(t=>t.person_id===n).sort((t,r)=>(r.ts||0)-(t.ts||0))}function wN(n){const e=["#34d399","#60a5fa","#fbbf24","#f472b6","#a78bfa","#f87171","#22d3ee","#84cc16","#fb7185","#f59e0b"];return e[n%e.length]}async function EN(n,e){const t=Et(De,"projects",n);await fr(t,{owner_ids:e}),hn(["projects","people"])}async function IN(n){if(n.id){const e=Et(De,"people",n.id);return await Wu(e,Rr({...n,id:n.id}),{merge:!0}),hn(["people"]),n.id}else{const e=await ml(ut(De,"people"),Rr(n));return await fr(e,{id:e.id}),hn(["people"]),e.id}}async function TN(n){const e=Date.now();if(n.id){const t=Et(De,"projects",n.id);return await Wu(t,Rr({...n,id:n.id,created_at:n.created_at??e}),{merge:!0}),hn(["projects"]),n.id}else{const t=await ml(ut(De,"projects"),Rr({...n,created_at:e}));return await fr(t,{id:t.id}),hn(["projects"]),t.id}}async function SN(n,e){const t=Et(De,"people",n);await fr(t,Rr(e)),hn(["people"])}async function RN(n){try{const e=bu(ut(De,"attendance"),ol("person_id","==",n)),t=await It(e);await Promise.all(t.docs.map(r=>ur(Et(De,"attendance",r.id))))}catch{}try{const e=bu(ut(De,"logs"),ol("person_id","==",n)),t=await It(e);await Promise.all(t.docs.map(r=>ur(Et(De,"logs",r.id))))}catch{}await ur(Et(De,"people",n)),hn(["people"])}async function AN(n,e){const t=Et(De,"projects",n);await fr(t,Rr(e)),hn(["projects"])}async function PN(n){const e=await ml(ut(De,"project_deps"),Rr(n));return await fr(e,{id:e.id}),e.id}async function CN(n){await ur(Et(De,"project_deps",n))}async function kN(n){const e=Et(De,"projects",n);await fr(e,{archived:!0}),hn(["projects"])}async function xN(n){try{const e=bu(ut(De,"tasks"),ol("project_id","==",n)),t=await It(e);await Promise.all(t.docs.map(r=>ur(Et(De,"tasks",r.id))))}catch{}await ur(Et(De,"projects",n)),hn(["projects","tasks"])}async function DN(){const n=gl("settings");if(n)return n;const t=(await It(ut(De,"settings"))).docs.find(s=>s.id==="global"),r=t?t.data():null;return r&&qr("settings",r,_g),r}async function bN(n){const e=Et(De,"settings","global");await Wu(e,{...n||{}},{merge:!0}),hn(["settings"])}async function vg(){const n=gl("ranked:settings");if(n)return n;const t=(await It(ut(De,"ranked"))).docs.find(a=>a.id==="settings"),r={enabled:!0,autoApply:!0,applyEvery:"hourly",promotion_pct:{bronze:40,silver:30,gold:20,platinum:10,diamond:0},demotion_pct:{bronze:0,silver:10,gold:15,platinum:20,diamond:0},default_task_points:10},s=t?{...r,...t.data()}:r;return qr("ranked:settings",s,_g),s}async function wg(n){const e=Et(De,"ranked","settings");await Wu(e,Rr(n),{merge:!0}),hn(["ranked:settings"])}async function ST(n=Date.now()){await wg({last_reset_at:n})}function NN(n){return"Bronze Silver Gold Platinum Diamond".split(" ").indexOf(n)}function RT(n){const e=["Bronze","Silver","Gold","Platinum","Diamond"];return e[Math.min(e.indexOf(n)+1,e.length-1)]}function AT(n){const e=["Bronze","Silver","Gold","Platinum","Diamond"];return e[Math.max(e.indexOf(n)-1,0)]}function Eg(n,e){if(n.ranked_points)return n.ranked_points;const t=e?.default_task_points??10;return n.status==="Complete"?35:(n.status==="In Progress",t)}function PT(n,e,t,r){const s=new Map,a=h=>!!h.ranked_opt_in,u=t.last_reset_at||0;for(const h of n)a(h)&&s.set(h.id,0);for(const h of e){if(!h.assignee_id||!s.has(h.assignee_id)||(h.completed_at||h.created_at||0)<u)continue;const m=Eg(h,t);s.set(h.assignee_id,(s.get(h.assignee_id)||0)+m)}if(r&&r.length)for(const h of r){if(!h.person_id||!s.has(h.person_id)||(h.created_at||0)<u)continue;const m=Math.max(0,Number(h.points||0));m&&s.set(h.person_id,(s.get(h.person_id)||0)+m)}return s}async function VN(n,e,t,r){const s=n.filter(A=>!!A.ranked_opt_in),a={Bronze:[],Silver:[],Gold:[],Platinum:[],Diamond:[]};for(const A of s)a[A.rank||"Bronze"].push(A);const u=PT(s,e,t,r),h=[],f=A=>Math.max(0,Math.min(100,A??0)),m=["Bronze","Silver","Gold","Platinum","Diamond"];for(const A of m){const j=a[A];if(j.length===0)continue;const M=[...j].sort((de,me)=>(u.get(me.id)||0)-(u.get(de.id)||0)),U=A.toLowerCase(),ae=f(t.promotion_pct?.[U]),H=f(t.demotion_pct?.[U]),ee=Math.floor(ae/100*M.length),le=Math.floor(H/100*M.length);if(A!=="Diamond")for(let de=0;de<ee;de++){const me=M[de],T=RT(A);h.push({id:me.id,rank:T})}if(A!=="Bronze")for(let de=0;de<le;de++){const me=M[M.length-1-de],T=AT(A);h.push({id:me.id,rank:T})}}const _=[],w=Date.now();for(const A of h){const j=n.find(ae=>ae.id===A.id),M=j?.rank||"Bronze",U=A.rank;if(M===U)_.push(fr(Et(De,"people",A.id),{rank:U}));else{const H=[...Array.isArray(j?.rank_history)?j.rank_history:[],{ts:w,from:M,to:U}];_.push(fr(Et(De,"people",A.id),{rank:U,rank_history:H})),_.push(Nu({ts:w,type:"rank_change",person_id:A.id,from_rank:M,to_rank:U}))}}await Promise.all(_);const I=Date.now();try{await Nu({ts:I,type:"rank_apply",note:`Applied promotions/demotions to ${h.length} person(s)`})}catch{}try{await ST(I)}catch{}return hn(["people"]),h.length}async function LN(){const[n,e,t,r,s,a]=await Promise.all([It(ut(De,"people")),It(ut(De,"projects")),It(ut(De,"tasks")),It(ut(De,"attendance")),It(ut(De,"logs")),It(ut(De,"ranked"))]),u=[];for(const h of t.docs)u.push(ur(Et(De,"tasks",h.id)));for(const h of e.docs)u.push(ur(Et(De,"projects",h.id)));for(const h of n.docs)u.push(ur(Et(De,"people",h.id)));for(const h of r.docs)u.push(ur(Et(De,"attendance",h.id)));for(const h of s.docs)u.push(ur(Et(De,"logs",h.id)));for(const h of a.docs)h.id!=="settings"&&u.push(ur(Et(De,"ranked",h.id)));await Promise.all(u),hn(["people","projects","tasks"]),xd("tasks:project:"),hn(["ranked:settings"])}const Kw=`${Hu}visitor:id`,Gw=`${Hu}visitor:last_date`;function ON(){try{let n=localStorage.getItem(Kw);return n||(n=Math.random().toString(36).slice(2)+Date.now().toString(36),localStorage.setItem(Kw,n)),n}catch{return"anon"}}async function CT(){if(typeof window>"u")return;const n=new Date().toISOString().slice(0,10);try{if(localStorage.getItem(Gw)===n)return;ON();const t=Et(De,"analytics_daily",n);await Wu(t,{date:n,visits:kb(1)},{merge:!0}),localStorage.setItem(Gw,n)}catch{}}async function MN(n){const t=(await It(ut(De,"analytics_daily"))).docs.map(u=>u.data()),r=new Date,s=new Date;s.setDate(r.getDate()-(n-1));const a=s.toISOString().slice(0,10);return t.filter(u=>u.date>=a).sort((u,h)=>u.date.localeCompare(h.date))}const cV=Object.freeze(Object.defineProperty({__proto__:null,addAttendance:gN,addLogEvent:Nu,addPerson:IN,addProject:TN,addProjectDependency:PN,addTask:fN,applyRankedPromotionsDemotions:VN,archiveProject:kN,clearAllLocalCaches:aN,computeRankedScores:PT,deletePerson:RN,deleteProject:xN,deleteProjectDependency:CN,deleteTaskById:mN,fetchAttendance:yN,fetchDailyAnalyticsRange:MN,fetchLogsForPerson:vN,fetchPeople:lN,fetchProjectDependencies:cN,fetchProjects:uN,fetchRankedSettings:vg,fetchRecentLogs:_N,fetchSettings:DN,fetchTasks:hN,fetchTasksForProject:dN,fullSystemReset:LN,markRankedResetBoundary:ST,nextRank:RT,palette:wN,prevRank:AT,rankOrder:NN,recordAnonymousVisit:CT,refreshAllCaches:Rh,setRankedSettings:wg,setSettings:bN,taskPoints:Eg,updatePerson:SN,updateProject:AN,updateProjectOwners:EN,updateTask:pN},Symbol.toStringTag,{value:"Module"})),Tp="ranked:enabled";function FN(){const[n,e]=Y.useState(!0);return Y.useEffect(()=>{let r=!0;return(async()=>{try{const s=localStorage.getItem(Tp);if(s!==null)r&&e(s==="1");else{const a=await vg();r&&e(!!a.enabled)}}catch{}})(),()=>{r=!1}},[]),Y.useEffect(()=>{const r=a=>{a.key===Tp&&a.newValue!=null&&e(a.newValue==="1")};window.addEventListener("storage",r);const s=a=>{try{const u=a.detail;e(!!u)}catch{}};return window.addEventListener("ranked:enabledChanged",s),()=>{window.removeEventListener("storage",r),window.removeEventListener("ranked:enabledChanged",s)}},[]),[n,async r=>{e(r);try{localStorage.setItem(Tp,r?"1":"0")}catch{}try{kd()&&await wg({enabled:r})}catch{}try{window.dispatchEvent(new CustomEvent("ranked:enabledChanged",{detail:r}))}catch{}}]}const kT=n=>{const e=document.documentElement;e.classList.toggle("dark",n==="dark"),e.style.colorScheme=n,localStorage.setItem("theme",n)},UN=()=>{const n=localStorage.getItem("theme"),e=window.matchMedia("(prefers-color-scheme: dark)").matches;kT(n??(e?"dark":"light"))},jN=()=>{const[n,e]=Y.useState("dark");Y.useEffect(()=>{UN(),e(document.documentElement.classList.contains("dark")?"dark":"light")},[]);const t=Y.useCallback(()=>{const r=n==="dark"?"light":"dark";kT(r),e(r)},[n]);return{theme:n,toggle:t}};function BN({children:n}){const[e,t]=Y.useState(!1),[r,s]=FN(),a=$o(),h=XR().some(I=>I.handle?.fullBleed),f=a.pathname.startsWith("/timeline"),m=h||f,{theme:_,toggle:w}=jN();return Y.useEffect(()=>{t(!1)},[a.pathname]),Y.useEffect(()=>{const I=A=>{A.key==="Escape"&&t(!1)};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[]),se.jsxs("div",{className:"min-h-[100dvh] bg-background bg-app-gradient text-foreground",children:[se.jsx("div",{style:{height:"env(safe-area-inset-top)"},className:"bg-black"}),se.jsx("header",{className:"sticky top-0 z-50 w-full bg-background/90 backdrop-blur border-b border-border",children:se.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-14 flex items-center justify-between",children:[se.jsx(gE,{to:"/",className:"flex items-center h-10",children:se.jsx(oN,{className:"h-8 w-auto"})}),se.jsxs("button",{"aria-label":e?"Close menu":"Open menu","aria-expanded":e,onClick:()=>t(I=>!I),className:"relative inline-flex h-10 w-10 items-center justify-center rounded-md border border-border/60 bg-overlay-6 hover:bg-overlay-10 transition focus:outline-none focus:ring-2 focus:ring-accent/60",children:[se.jsx("span",{className:"sr-only",children:"Menu"}),se.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-transform duration-300 ease-out ${e?"translate-y-0 rotate-45":"-translate-y-2 rotate-0"}`,style:{color:"#E5E7EB"}}),se.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-opacity duration-300 ${e?"opacity-0":"opacity-100"}`,style:{color:"#E5E7EB"}}),se.jsx("span",{className:`absolute block h-0.5 w-5 bg-current transition-transform duration-300 ease-out ${e?"translate-y-0 -rotate-45":"translate-y-2 rotate-0"}`,style:{color:"#E5E7EB"}})]})]})}),se.jsxs("div",{className:`fixed inset-0 z-50 ${e?"pointer-events-auto":"pointer-events-none"}`,children:[se.jsx("div",{className:`absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ${e?"opacity-100":"opacity-0"}`,onClick:()=>t(!1)}),se.jsxs("aside",{className:`absolute right-0 top-0 h-full w-[18rem] max-w-[85vw] bg-background/95 border-l border-border shadow-xl transition-transform duration-300 ease-out ${e?"translate-x-0":"translate-x-full"}`,children:[se.jsxs("div",{className:"h-14 px-4 flex items-center justify-between border-b border-border/60",children:[se.jsx("span",{className:"text-sm font-medium text-muted uppercase tracking-caps",children:"Menu"}),se.jsxs("button",{"aria-label":"Close menu",onClick:()=>t(!1),className:"h-9 w-9 inline-flex items-center justify-center rounded-md hover:bg-black/20",children:[se.jsx("span",{className:"sr-only",children:"Close"}),se.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#E5E7EB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})]})]}),se.jsxs("nav",{className:"px-2 py-3 text-base",children:[se.jsx(Na,{to:"/",label:"Overview"}),se.jsx(Na,{to:"/members",label:"Members"}),se.jsx(Na,{to:"/stats",label:"Stats"}),se.jsx(Na,{to:"/timeline",label:"Timeline"}),r&&se.jsx(Na,{to:"/ranked",label:"Ranked"}),se.jsx(Yb,{children:se.jsx(Na,{to:"/admin",label:"Admin"})}),se.jsx("div",{className:"my-3 border-t border-border/60"}),se.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm select-none cursor-pointer",children:[se.jsx("span",{className:"text-sm text-muted-foreground tracking-caps uppercase",children:"RANKED MODE"}),se.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[se.jsx("input",{type:"checkbox",checked:r,onChange:I=>s(I.target.checked),className:"peer sr-only"}),se.jsx("span",{className:`
                    pointer-events-none block h-6 w-11 rounded-full border border-border
                    bg-black/15 dark:bg-white/15
                    transition-colors
                    peer-checked:bg-[#64C7C9]
                    peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
                  `}),se.jsx("span",{className:`
                    pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                    bg-white dark:bg-background shadow
                    transition-transform
                    peer-checked:translate-x-5
                  `})]})]}),se.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm select-none cursor-pointer",children:[se.jsx("span",{className:"text-sm text-muted-foreground tracking-caps uppercase",children:"DARK MODE"}),se.jsxs("span",{className:"relative inline-flex h-6 w-11 select-none ml-auto",children:[se.jsx("input",{type:"checkbox",checked:_==="dark",onChange:w,className:"peer sr-only"}),se.jsx("span",{className:`
                    pointer-events-none block h-6 w-11 rounded-full border border-border
                    bg-black/15 dark:bg-white/15
                    transition-colors
                    peer-checked:bg-[#64C7C9]
                    peer-focus-visible:ring-2 peer-focus-visible:ring-[#64C7C9]/60 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background
                  `}),se.jsx("span",{className:`
                    pointer-events-none absolute left-0.5 top-0.5 h-5 w-5 rounded-full
                    bg-white dark:bg-background shadow
                    transition-transform
                    peer-checked:translate-x-5
                  `})]})]}),sN()?se.jsx("button",{onClick:iN,className:"w-full text-left px-3 py-2 rounded-md hover:bg-black/20 transition text-sm font-normal",children:"Sign out"}):se.jsx("button",{onClick:rN,className:"w-full text-left px-3 py-2 rounded-md bg-accent/30 hover:bg-accent/50 transition text-sm font-normal text-text",children:"Sign in"})]}),se.jsx("div",{className:"mt-auto p-3 text-tick text-muted/80 border-t border-border/60",children:" UConn FSAE"})]})]}),se.jsx("main",{className:m?"w-full h-[calc(100vh-4rem)] p-0 m-0 overflow-hidden":"max-w-6xl mx-auto px-4 py-6",children:m?n??se.jsx(ev,{}):se.jsx(ev,{})}),se.jsx("footer",{className:"py-6 text-center text-xs text-muted uppercase tracking-caps",children:" UConn FSAE"})]})}function Na({to:n,label:e}){return se.jsx(SA,{to:n,className:({isActive:t})=>`group flex items-center gap-2 px-3 py-2 rounded-md transition border ${t?"bg-accent/30 border-accent/60 text-white shadow-sm hover:bg-accent/40":"border-transparent hover:bg-black/15"} focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60`,children:se.jsxs("span",{className:"relative",children:[se.jsx("span",{className:"transition-transform duration-300 group-hover:translate-x-0.5",children:e}),se.jsx("span",{className:"ml-2 inline-block opacity-0 -translate-x-1 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-0",children:""})]})})}function Rs(){return se.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[120px] w-full",children:[se.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-accent mb-2"}),se.jsx("div",{className:"text-xs text-muted uppercase tracking-caps",children:"Loading"})]})}const zN=cn.lazy(()=>$s(()=>import("./Overview-Cxq4IIIt.js"),__vite__mapDeps([0,1,2,3,4]))),$N=cn.lazy(()=>$s(()=>import("./Members-CgDTVX3P.js"),[])),qN=cn.lazy(()=>$s(()=>import("./PersonDetail-C8jxYn22.js"),[])),KN=cn.lazy(()=>$s(()=>import("./ProjectDetail-DqYDXPm7.js"),__vite__mapDeps([5,1,2,3,6]))),GN=cn.lazy(()=>$s(()=>import("./Admin-QFi67FWt.js"),__vite__mapDeps([7,3,6]))),WN=cn.lazy(()=>$s(()=>import("./Stats-C9ZwjeZr.js"),__vite__mapDeps([8,4,2]))),HN=cn.lazy(()=>$s(()=>import("./Timeline-uu2Sf-jd.js"),[])),QN=cn.lazy(()=>$s(()=>import("./Ranked-P75Hkcv7.js"),[])),JN="/fsae-dashboard/",YN=hA([{element:se.jsx(BN,{}),children:[{index:!0,element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx(zN,{})})},{path:"people",element:se.jsx(rA,{to:"/members",replace:!0})},{path:"members",element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx($N,{})})},{path:"stats",element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx(WN,{})})},{path:"timeline",element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx(HN,{})}),handle:{fullBleed:!0}},{path:"ranked",element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx(QN,{})})},{path:"person/:id",element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx(qN,{})})},{path:"project/:id",element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx(KN,{})})},{path:"admin",element:se.jsx(Y.Suspense,{fallback:se.jsx(Rs,{}),children:se.jsx(GN,{})})}]}],{basename:JN});function ch(){const n=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${n*100}px`)}function XN(){ch();const n=window.visualViewport;window.addEventListener("resize",ch),window.addEventListener("orientationchange",ch),n&&n.addEventListener("resize",ch)}XN();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/fsae-dashboard/sw.js").catch(()=>{})});window.addEventListener("beforeinstallprompt",n=>{n.preventDefault()});const xT=document.getElementById("root");if(!xT)throw new Error("Root element #root not found");const ZN=zS.createRoot(xT);ZN.render(se.jsx(cn.StrictMode,{children:se.jsx(vA,{router:YN})}));(async()=>{try{await Rh()}catch{}try{await CT()}catch{}TT(async n=>{if(!n){tN([],[]);return}}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Rh().catch(()=>{})}),setInterval(()=>{Rh().catch(()=>{})},600*1e3)})();export{AN as A,IN as B,fN as C,wg as D,Wb as E,oV as F,bN as G,LN as H,cn as I,MN as J,eV as K,gE as L,Hw as M,CN as N,cN as O,PN as P,Rh as Q,Yb as R,PT as S,Eb as T,Et as U,De as V,cV as W,$s as _,uN as a,hN as b,yN as c,sN as d,TN as e,lN as f,tV as g,DN as h,Jw as i,se as j,kN as k,pN as l,xN as m,dN as n,EN as o,mN as p,aV as q,Y as r,vg as s,_N as t,FN as u,uV as v,lV as w,gN as x,SN as y,RN as z};
